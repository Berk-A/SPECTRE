function sP(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var oP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Po(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),e}var Yy={exports:{}},Nd={},Xy={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function aP(){if(qE)return Ye;qE=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function m(R){return R===null||typeof R!="object"?null:(R=h&&R[h]||R["@@iterator"],typeof R=="function"?R:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function v(R,_,k){this.props=R,this.context=_,this.refs=C,this.updater=k||p}v.prototype.isReactComponent={},v.prototype.setState=function(R,_){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,_,"setState")},v.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=v.prototype;function x(R,_,k){this.props=R,this.context=_,this.refs=C,this.updater=k||p}var P=x.prototype=new A;P.constructor=x,E(P,v.prototype),P.isPureReactComponent=!0;var W=Array.isArray,K=Object.prototype.hasOwnProperty,j={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function B(R,_,k){var H,L={},g=null,D=null;if(_!=null)for(H in _.ref!==void 0&&(D=_.ref),_.key!==void 0&&(g=""+_.key),_)K.call(_,H)&&!b.hasOwnProperty(H)&&(L[H]=_[H]);var S=arguments.length-2;if(S===1)L.children=k;else if(1<S){for(var lt=Array(S),ct=0;ct<S;ct++)lt[ct]=arguments[ct+2];L.children=lt}if(R&&R.defaultProps)for(H in S=R.defaultProps,S)L[H]===void 0&&(L[H]=S[H]);return{$$typeof:n,type:R,key:g,ref:D,props:L,_owner:j.current}}function J(R,_){return{$$typeof:n,type:R.type,key:_,ref:R.ref,props:R.props,_owner:R._owner}}function it(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function st(R){var _={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(k){return _[k]})}var z=/\/+/g;function I(R,_){return typeof R=="object"&&R!==null&&R.key!=null?st(""+R.key):_.toString(36)}function w(R,_,k,H,L){var g=typeof R;(g==="undefined"||g==="boolean")&&(R=null);var D=!1;if(R===null)D=!0;else switch(g){case"string":case"number":D=!0;break;case"object":switch(R.$$typeof){case n:case t:D=!0}}if(D)return D=R,L=L(D),R=H===""?"."+I(D,0):H,W(L)?(k="",R!=null&&(k=R.replace(z,"$&/")+"/"),w(L,_,k,"",function(ct){return ct})):L!=null&&(it(L)&&(L=J(L,k+(!L.key||D&&D.key===L.key?"":(""+L.key).replace(z,"$&/")+"/")+R)),_.push(L)),1;if(D=0,H=H===""?".":H+":",W(R))for(var S=0;S<R.length;S++){g=R[S];var lt=H+I(g,S);D+=w(g,_,k,lt,L)}else if(lt=m(R),typeof lt=="function")for(R=lt.call(R),S=0;!(g=R.next()).done;)g=g.value,lt=H+I(g,S++),D+=w(g,_,k,lt,L);else if(g==="object")throw _=String(R),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return D}function T(R,_,k){if(R==null)return R;var H=[],L=0;return w(R,H,"","",function(g){return _.call(k,g,L++)}),H}function V(R){if(R._status===-1){var _=R._result;_=_(),_.then(function(k){(R._status===0||R._status===-1)&&(R._status=1,R._result=k)},function(k){(R._status===0||R._status===-1)&&(R._status=2,R._result=k)}),R._status===-1&&(R._status=0,R._result=_)}if(R._status===1)return R._result.default;throw R._result}var Y={current:null},Q={transition:null},$={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:Q,ReactCurrentOwner:j};function F(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:T,forEach:function(R,_,k){T(R,function(){_.apply(this,arguments)},k)},count:function(R){var _=0;return T(R,function(){_++}),_},toArray:function(R){return T(R,function(_){return _})||[]},only:function(R){if(!it(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ye.Component=v,Ye.Fragment=e,Ye.Profiler=r,Ye.PureComponent=x,Ye.StrictMode=i,Ye.Suspense=l,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Ye.act=F,Ye.cloneElement=function(R,_,k){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var H=E({},R.props),L=R.key,g=R.ref,D=R._owner;if(_!=null){if(_.ref!==void 0&&(g=_.ref,D=j.current),_.key!==void 0&&(L=""+_.key),R.type&&R.type.defaultProps)var S=R.type.defaultProps;for(lt in _)K.call(_,lt)&&!b.hasOwnProperty(lt)&&(H[lt]=_[lt]===void 0&&S!==void 0?S[lt]:_[lt])}var lt=arguments.length-2;if(lt===1)H.children=k;else if(1<lt){S=Array(lt);for(var ct=0;ct<lt;ct++)S[ct]=arguments[ct+2];H.children=S}return{$$typeof:n,type:R.type,key:L,ref:g,props:H,_owner:D}},Ye.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:s,_context:R},R.Consumer=R},Ye.createElement=B,Ye.createFactory=function(R){var _=B.bind(null,R);return _.type=R,_},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(R){return{$$typeof:a,render:R}},Ye.isValidElement=it,Ye.lazy=function(R){return{$$typeof:u,_payload:{_status:-1,_result:R},_init:V}},Ye.memo=function(R,_){return{$$typeof:d,type:R,compare:_===void 0?null:_}},Ye.startTransition=function(R){var _=Q.transition;Q.transition={};try{R()}finally{Q.transition=_}},Ye.unstable_act=F,Ye.useCallback=function(R,_){return Y.current.useCallback(R,_)},Ye.useContext=function(R){return Y.current.useContext(R)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(R){return Y.current.useDeferredValue(R)},Ye.useEffect=function(R,_){return Y.current.useEffect(R,_)},Ye.useId=function(){return Y.current.useId()},Ye.useImperativeHandle=function(R,_,k){return Y.current.useImperativeHandle(R,_,k)},Ye.useInsertionEffect=function(R,_){return Y.current.useInsertionEffect(R,_)},Ye.useLayoutEffect=function(R,_){return Y.current.useLayoutEffect(R,_)},Ye.useMemo=function(R,_){return Y.current.useMemo(R,_)},Ye.useReducer=function(R,_,k){return Y.current.useReducer(R,_,k)},Ye.useRef=function(R){return Y.current.useRef(R)},Ye.useState=function(R){return Y.current.useState(R)},Ye.useSyncExternalStore=function(R,_,k){return Y.current.useSyncExternalStore(R,_,k)},Ye.useTransition=function(){return Y.current.useTransition()},Ye.version="18.3.1",Ye}var $E;function wb(){return $E||($E=1,Xy.exports=aP()),Xy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function cP(){if(HE)return Nd;HE=1;var n=wb(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,d){var u,h={},m=null,p=null;d!==void 0&&(m=""+d),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)i.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:t,type:a,key:m,ref:p,props:h,_owner:r.current}}return Nd.Fragment=e,Nd.jsx=o,Nd.jsxs=o,Nd}var KE;function lP(){return KE||(KE=1,Yy.exports=cP()),Yy.exports}var U=lP(),_b={},Sm={};Sm.byteLength=fP;Sm.toByteArray=pP;Sm.fromByteArray=yP;var Ns=[],Wr=[],uP=typeof Uint8Array<"u"?Uint8Array:Array,Jy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Il=0,dP=Jy.length;Il<dP;++Il)Ns[Il]=Jy[Il],Wr[Jy.charCodeAt(Il)]=Il;Wr[45]=62;Wr[95]=63;function p8(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var i=e===t?0:4-e%4;return[e,i]}function fP(n){var t=p8(n),e=t[0],i=t[1];return(e+i)*3/4-i}function hP(n,t,e){return(t+e)*3/4-e}function pP(n){var t,e=p8(n),i=e[0],r=e[1],s=new uP(hP(n,i,r)),o=0,a=r>0?i-4:i,l;for(l=0;l<a;l+=4)t=Wr[n.charCodeAt(l)]<<18|Wr[n.charCodeAt(l+1)]<<12|Wr[n.charCodeAt(l+2)]<<6|Wr[n.charCodeAt(l+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return r===2&&(t=Wr[n.charCodeAt(l)]<<2|Wr[n.charCodeAt(l+1)]>>4,s[o++]=t&255),r===1&&(t=Wr[n.charCodeAt(l)]<<10|Wr[n.charCodeAt(l+1)]<<4|Wr[n.charCodeAt(l+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function mP(n){return Ns[n>>18&63]+Ns[n>>12&63]+Ns[n>>6&63]+Ns[n&63]}function gP(n,t,e){for(var i,r=[],s=t;s<e;s+=3)i=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),r.push(mP(i));return r.join("")}function yP(n){for(var t,e=n.length,i=e%3,r=[],s=16383,o=0,a=e-i;o<a;o+=s)r.push(gP(n,o,o+s>a?a:o+s));return i===1?(t=n[e-1],r.push(Ns[t>>2]+Ns[t<<4&63]+"==")):i===2&&(t=(n[e-2]<<8)+n[e-1],r.push(Ns[t>>10]+Ns[t>>4&63]+Ns[t<<2&63]+"=")),r.join("")}var bb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */bb.read=function(n,t,e,i,r){var s,o,a=r*8-i-1,l=(1<<a)-1,d=l>>1,u=-7,h=e?r-1:0,m=e?-1:1,p=n[t+h];for(h+=m,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=s*256+n[t+h],h+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=o*256+n[t+h],h+=m,u-=8);if(s===0)s=1-d;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-d}return(p?-1:1)*o*Math.pow(2,s-i)};bb.write=function(n,t,e,i,r,s){var o,a,l,d=s*8-r-1,u=(1<<d)-1,h=u>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,E=i?1:-1,C=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,r),o=o+h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;n[e+p]=a&255,p+=E,a/=256,r-=8);for(o=o<<r|a,d+=r;d>0;n[e+p]=o&255,p+=E,o/=256,d-=8);n[e+p-E]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=Sm,e=bb,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=K,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ut=new s(1),X={foo:function(){return 42}};return Object.setPrototypeOf(X,s.prototype),Object.setPrototypeOf(ut,X),ut.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(ut){if(ut>r)throw new RangeError('The value "'+ut+'" is invalid for option "size"');const X=new s(ut);return Object.setPrototypeOf(X,u.prototype),X}function u(ut,X,nt){if(typeof ut=="number"){if(typeof X=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(ut)}return h(ut,X,nt)}u.poolSize=8192;function h(ut,X,nt){if(typeof ut=="string")return C(ut,X);if(o.isView(ut))return A(ut);if(ut==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ut);if(_e(ut,o)||ut&&_e(ut.buffer,o)||typeof a<"u"&&(_e(ut,a)||ut&&_e(ut.buffer,a)))return x(ut,X,nt);if(typeof ut=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const at=ut.valueOf&&ut.valueOf();if(at!=null&&at!==ut)return u.from(at,X,nt);const M=P(ut);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ut[Symbol.toPrimitive]=="function")return u.from(ut[Symbol.toPrimitive]("string"),X,nt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ut)}u.from=function(ut,X,nt){return h(ut,X,nt)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function m(ut){if(typeof ut!="number")throw new TypeError('"size" argument must be of type number');if(ut<0)throw new RangeError('The value "'+ut+'" is invalid for option "size"')}function p(ut,X,nt){return m(ut),ut<=0?d(ut):X!==void 0?typeof nt=="string"?d(ut).fill(X,nt):d(ut).fill(X):d(ut)}u.alloc=function(ut,X,nt){return p(ut,X,nt)};function E(ut){return m(ut),d(ut<0?0:W(ut)|0)}u.allocUnsafe=function(ut){return E(ut)},u.allocUnsafeSlow=function(ut){return E(ut)};function C(ut,X){if((typeof X!="string"||X==="")&&(X="utf8"),!u.isEncoding(X))throw new TypeError("Unknown encoding: "+X);const nt=j(ut,X)|0;let at=d(nt);const M=at.write(ut,X);return M!==nt&&(at=at.slice(0,M)),at}function v(ut){const X=ut.length<0?0:W(ut.length)|0,nt=d(X);for(let at=0;at<X;at+=1)nt[at]=ut[at]&255;return nt}function A(ut){if(_e(ut,s)){const X=new s(ut);return x(X.buffer,X.byteOffset,X.byteLength)}return v(ut)}function x(ut,X,nt){if(X<0||ut.byteLength<X)throw new RangeError('"offset" is outside of buffer bounds');if(ut.byteLength<X+(nt||0))throw new RangeError('"length" is outside of buffer bounds');let at;return X===void 0&&nt===void 0?at=new s(ut):nt===void 0?at=new s(ut,X):at=new s(ut,X,nt),Object.setPrototypeOf(at,u.prototype),at}function P(ut){if(u.isBuffer(ut)){const X=W(ut.length)|0,nt=d(X);return nt.length===0||ut.copy(nt,0,0,X),nt}if(ut.length!==void 0)return typeof ut.length!="number"||ae(ut.length)?d(0):v(ut);if(ut.type==="Buffer"&&Array.isArray(ut.data))return v(ut.data)}function W(ut){if(ut>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return ut|0}function K(ut){return+ut!=ut&&(ut=0),u.alloc(+ut)}u.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==u.prototype},u.compare=function(X,nt){if(_e(X,s)&&(X=u.from(X,X.offset,X.byteLength)),_e(nt,s)&&(nt=u.from(nt,nt.offset,nt.byteLength)),!u.isBuffer(X)||!u.isBuffer(nt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===nt)return 0;let at=X.length,M=nt.length;for(let O=0,ht=Math.min(at,M);O<ht;++O)if(X[O]!==nt[O]){at=X[O],M=nt[O];break}return at<M?-1:M<at?1:0},u.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(X,nt){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return u.alloc(0);let at;if(nt===void 0)for(nt=0,at=0;at<X.length;++at)nt+=X[at].length;const M=u.allocUnsafe(nt);let O=0;for(at=0;at<X.length;++at){let ht=X[at];if(_e(ht,s))O+ht.length>M.length?(u.isBuffer(ht)||(ht=u.from(ht)),ht.copy(M,O)):s.prototype.set.call(M,ht,O);else if(u.isBuffer(ht))ht.copy(M,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=ht.length}return M};function j(ut,X){if(u.isBuffer(ut))return ut.length;if(o.isView(ut)||_e(ut,o))return ut.byteLength;if(typeof ut!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ut);const nt=ut.length,at=arguments.length>2&&arguments[2]===!0;if(!at&&nt===0)return 0;let M=!1;for(;;)switch(X){case"ascii":case"latin1":case"binary":return nt;case"utf8":case"utf-8":return kt(ut).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nt*2;case"hex":return nt>>>1;case"base64":return Kt(ut).length;default:if(M)return at?-1:kt(ut).length;X=(""+X).toLowerCase(),M=!0}}u.byteLength=j;function b(ut,X,nt){let at=!1;if((X===void 0||X<0)&&(X=0),X>this.length||((nt===void 0||nt>this.length)&&(nt=this.length),nt<=0)||(nt>>>=0,X>>>=0,nt<=X))return"";for(ut||(ut="utf8");;)switch(ut){case"hex":return _(this,X,nt);case"utf8":case"utf-8":return Y(this,X,nt);case"ascii":return F(this,X,nt);case"latin1":case"binary":return R(this,X,nt);case"base64":return V(this,X,nt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,X,nt);default:if(at)throw new TypeError("Unknown encoding: "+ut);ut=(ut+"").toLowerCase(),at=!0}}u.prototype._isBuffer=!0;function B(ut,X,nt){const at=ut[X];ut[X]=ut[nt],ut[nt]=at}u.prototype.swap16=function(){const X=this.length;if(X%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let nt=0;nt<X;nt+=2)B(this,nt,nt+1);return this},u.prototype.swap32=function(){const X=this.length;if(X%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let nt=0;nt<X;nt+=4)B(this,nt,nt+3),B(this,nt+1,nt+2);return this},u.prototype.swap64=function(){const X=this.length;if(X%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let nt=0;nt<X;nt+=8)B(this,nt,nt+7),B(this,nt+1,nt+6),B(this,nt+2,nt+5),B(this,nt+3,nt+4);return this},u.prototype.toString=function(){const X=this.length;return X===0?"":arguments.length===0?Y(this,0,X):b.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(X){if(!u.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X?!0:u.compare(this,X)===0},u.prototype.inspect=function(){let X="";const nt=n.INSPECT_MAX_BYTES;return X=this.toString("hex",0,nt).replace(/(.{2})/g,"$1 ").trim(),this.length>nt&&(X+=" ... "),"<Buffer "+X+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(X,nt,at,M,O){if(_e(X,s)&&(X=u.from(X,X.offset,X.byteLength)),!u.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(nt===void 0&&(nt=0),at===void 0&&(at=X?X.length:0),M===void 0&&(M=0),O===void 0&&(O=this.length),nt<0||at>X.length||M<0||O>this.length)throw new RangeError("out of range index");if(M>=O&&nt>=at)return 0;if(M>=O)return-1;if(nt>=at)return 1;if(nt>>>=0,at>>>=0,M>>>=0,O>>>=0,this===X)return 0;let ht=O-M,Et=at-nt;const mt=Math.min(ht,Et),xt=this.slice(M,O),Lt=X.slice(nt,at);for(let At=0;At<mt;++At)if(xt[At]!==Lt[At]){ht=xt[At],Et=Lt[At];break}return ht<Et?-1:Et<ht?1:0};function J(ut,X,nt,at,M){if(ut.length===0)return-1;if(typeof nt=="string"?(at=nt,nt=0):nt>2147483647?nt=2147483647:nt<-2147483648&&(nt=-2147483648),nt=+nt,ae(nt)&&(nt=M?0:ut.length-1),nt<0&&(nt=ut.length+nt),nt>=ut.length){if(M)return-1;nt=ut.length-1}else if(nt<0)if(M)nt=0;else return-1;if(typeof X=="string"&&(X=u.from(X,at)),u.isBuffer(X))return X.length===0?-1:it(ut,X,nt,at,M);if(typeof X=="number")return X=X&255,typeof s.prototype.indexOf=="function"?M?s.prototype.indexOf.call(ut,X,nt):s.prototype.lastIndexOf.call(ut,X,nt):it(ut,[X],nt,at,M);throw new TypeError("val must be string, number or Buffer")}function it(ut,X,nt,at,M){let O=1,ht=ut.length,Et=X.length;if(at!==void 0&&(at=String(at).toLowerCase(),at==="ucs2"||at==="ucs-2"||at==="utf16le"||at==="utf-16le")){if(ut.length<2||X.length<2)return-1;O=2,ht/=2,Et/=2,nt/=2}function mt(Lt,At){return O===1?Lt[At]:Lt.readUInt16BE(At*O)}let xt;if(M){let Lt=-1;for(xt=nt;xt<ht;xt++)if(mt(ut,xt)===mt(X,Lt===-1?0:xt-Lt)){if(Lt===-1&&(Lt=xt),xt-Lt+1===Et)return Lt*O}else Lt!==-1&&(xt-=xt-Lt),Lt=-1}else for(nt+Et>ht&&(nt=ht-Et),xt=nt;xt>=0;xt--){let Lt=!0;for(let At=0;At<Et;At++)if(mt(ut,xt+At)!==mt(X,At)){Lt=!1;break}if(Lt)return xt}return-1}u.prototype.includes=function(X,nt,at){return this.indexOf(X,nt,at)!==-1},u.prototype.indexOf=function(X,nt,at){return J(this,X,nt,at,!0)},u.prototype.lastIndexOf=function(X,nt,at){return J(this,X,nt,at,!1)};function st(ut,X,nt,at){nt=Number(nt)||0;const M=ut.length-nt;at?(at=Number(at),at>M&&(at=M)):at=M;const O=X.length;at>O/2&&(at=O/2);let ht;for(ht=0;ht<at;++ht){const Et=parseInt(X.substr(ht*2,2),16);if(ae(Et))return ht;ut[nt+ht]=Et}return ht}function z(ut,X,nt,at){return se(kt(X,ut.length-nt),ut,nt,at)}function I(ut,X,nt,at){return se(Rt(X),ut,nt,at)}function w(ut,X,nt,at){return se(Kt(X),ut,nt,at)}function T(ut,X,nt,at){return se(Ht(X,ut.length-nt),ut,nt,at)}u.prototype.write=function(X,nt,at,M){if(nt===void 0)M="utf8",at=this.length,nt=0;else if(at===void 0&&typeof nt=="string")M=nt,at=this.length,nt=0;else if(isFinite(nt))nt=nt>>>0,isFinite(at)?(at=at>>>0,M===void 0&&(M="utf8")):(M=at,at=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const O=this.length-nt;if((at===void 0||at>O)&&(at=O),X.length>0&&(at<0||nt<0)||nt>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let ht=!1;for(;;)switch(M){case"hex":return st(this,X,nt,at);case"utf8":case"utf-8":return z(this,X,nt,at);case"ascii":case"latin1":case"binary":return I(this,X,nt,at);case"base64":return w(this,X,nt,at);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,X,nt,at);default:if(ht)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),ht=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(ut,X,nt){return X===0&&nt===ut.length?t.fromByteArray(ut):t.fromByteArray(ut.slice(X,nt))}function Y(ut,X,nt){nt=Math.min(ut.length,nt);const at=[];let M=X;for(;M<nt;){const O=ut[M];let ht=null,Et=O>239?4:O>223?3:O>191?2:1;if(M+Et<=nt){let mt,xt,Lt,At;switch(Et){case 1:O<128&&(ht=O);break;case 2:mt=ut[M+1],(mt&192)===128&&(At=(O&31)<<6|mt&63,At>127&&(ht=At));break;case 3:mt=ut[M+1],xt=ut[M+2],(mt&192)===128&&(xt&192)===128&&(At=(O&15)<<12|(mt&63)<<6|xt&63,At>2047&&(At<55296||At>57343)&&(ht=At));break;case 4:mt=ut[M+1],xt=ut[M+2],Lt=ut[M+3],(mt&192)===128&&(xt&192)===128&&(Lt&192)===128&&(At=(O&15)<<18|(mt&63)<<12|(xt&63)<<6|Lt&63,At>65535&&At<1114112&&(ht=At))}}ht===null?(ht=65533,Et=1):ht>65535&&(ht-=65536,at.push(ht>>>10&1023|55296),ht=56320|ht&1023),at.push(ht),M+=Et}return $(at)}const Q=4096;function $(ut){const X=ut.length;if(X<=Q)return String.fromCharCode.apply(String,ut);let nt="",at=0;for(;at<X;)nt+=String.fromCharCode.apply(String,ut.slice(at,at+=Q));return nt}function F(ut,X,nt){let at="";nt=Math.min(ut.length,nt);for(let M=X;M<nt;++M)at+=String.fromCharCode(ut[M]&127);return at}function R(ut,X,nt){let at="";nt=Math.min(ut.length,nt);for(let M=X;M<nt;++M)at+=String.fromCharCode(ut[M]);return at}function _(ut,X,nt){const at=ut.length;(!X||X<0)&&(X=0),(!nt||nt<0||nt>at)&&(nt=at);let M="";for(let O=X;O<nt;++O)M+=de[ut[O]];return M}function k(ut,X,nt){const at=ut.slice(X,nt);let M="";for(let O=0;O<at.length-1;O+=2)M+=String.fromCharCode(at[O]+at[O+1]*256);return M}u.prototype.slice=function(X,nt){const at=this.length;X=~~X,nt=nt===void 0?at:~~nt,X<0?(X+=at,X<0&&(X=0)):X>at&&(X=at),nt<0?(nt+=at,nt<0&&(nt=0)):nt>at&&(nt=at),nt<X&&(nt=X);const M=this.subarray(X,nt);return Object.setPrototypeOf(M,u.prototype),M};function H(ut,X,nt){if(ut%1!==0||ut<0)throw new RangeError("offset is not uint");if(ut+X>nt)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(X,nt,at){X=X>>>0,nt=nt>>>0,at||H(X,nt,this.length);let M=this[X],O=1,ht=0;for(;++ht<nt&&(O*=256);)M+=this[X+ht]*O;return M},u.prototype.readUintBE=u.prototype.readUIntBE=function(X,nt,at){X=X>>>0,nt=nt>>>0,at||H(X,nt,this.length);let M=this[X+--nt],O=1;for(;nt>0&&(O*=256);)M+=this[X+--nt]*O;return M},u.prototype.readUint8=u.prototype.readUInt8=function(X,nt){return X=X>>>0,nt||H(X,1,this.length),this[X]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(X,nt){return X=X>>>0,nt||H(X,2,this.length),this[X]|this[X+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(X,nt){return X=X>>>0,nt||H(X,2,this.length),this[X]<<8|this[X+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(X,nt){return X=X>>>0,nt||H(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+this[X+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(X,nt){return X=X>>>0,nt||H(X,4,this.length),this[X]*16777216+(this[X+1]<<16|this[X+2]<<8|this[X+3])},u.prototype.readBigUInt64LE=fe(function(X){X=X>>>0,Ft(X,"offset");const nt=this[X],at=this[X+7];(nt===void 0||at===void 0)&&Pt(X,this.length-8);const M=nt+this[++X]*2**8+this[++X]*2**16+this[++X]*2**24,O=this[++X]+this[++X]*2**8+this[++X]*2**16+at*2**24;return BigInt(M)+(BigInt(O)<<BigInt(32))}),u.prototype.readBigUInt64BE=fe(function(X){X=X>>>0,Ft(X,"offset");const nt=this[X],at=this[X+7];(nt===void 0||at===void 0)&&Pt(X,this.length-8);const M=nt*2**24+this[++X]*2**16+this[++X]*2**8+this[++X],O=this[++X]*2**24+this[++X]*2**16+this[++X]*2**8+at;return(BigInt(M)<<BigInt(32))+BigInt(O)}),u.prototype.readIntLE=function(X,nt,at){X=X>>>0,nt=nt>>>0,at||H(X,nt,this.length);let M=this[X],O=1,ht=0;for(;++ht<nt&&(O*=256);)M+=this[X+ht]*O;return O*=128,M>=O&&(M-=Math.pow(2,8*nt)),M},u.prototype.readIntBE=function(X,nt,at){X=X>>>0,nt=nt>>>0,at||H(X,nt,this.length);let M=nt,O=1,ht=this[X+--M];for(;M>0&&(O*=256);)ht+=this[X+--M]*O;return O*=128,ht>=O&&(ht-=Math.pow(2,8*nt)),ht},u.prototype.readInt8=function(X,nt){return X=X>>>0,nt||H(X,1,this.length),this[X]&128?(255-this[X]+1)*-1:this[X]},u.prototype.readInt16LE=function(X,nt){X=X>>>0,nt||H(X,2,this.length);const at=this[X]|this[X+1]<<8;return at&32768?at|4294901760:at},u.prototype.readInt16BE=function(X,nt){X=X>>>0,nt||H(X,2,this.length);const at=this[X+1]|this[X]<<8;return at&32768?at|4294901760:at},u.prototype.readInt32LE=function(X,nt){return X=X>>>0,nt||H(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},u.prototype.readInt32BE=function(X,nt){return X=X>>>0,nt||H(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},u.prototype.readBigInt64LE=fe(function(X){X=X>>>0,Ft(X,"offset");const nt=this[X],at=this[X+7];(nt===void 0||at===void 0)&&Pt(X,this.length-8);const M=this[X+4]+this[X+5]*2**8+this[X+6]*2**16+(at<<24);return(BigInt(M)<<BigInt(32))+BigInt(nt+this[++X]*2**8+this[++X]*2**16+this[++X]*2**24)}),u.prototype.readBigInt64BE=fe(function(X){X=X>>>0,Ft(X,"offset");const nt=this[X],at=this[X+7];(nt===void 0||at===void 0)&&Pt(X,this.length-8);const M=(nt<<24)+this[++X]*2**16+this[++X]*2**8+this[++X];return(BigInt(M)<<BigInt(32))+BigInt(this[++X]*2**24+this[++X]*2**16+this[++X]*2**8+at)}),u.prototype.readFloatLE=function(X,nt){return X=X>>>0,nt||H(X,4,this.length),e.read(this,X,!0,23,4)},u.prototype.readFloatBE=function(X,nt){return X=X>>>0,nt||H(X,4,this.length),e.read(this,X,!1,23,4)},u.prototype.readDoubleLE=function(X,nt){return X=X>>>0,nt||H(X,8,this.length),e.read(this,X,!0,52,8)},u.prototype.readDoubleBE=function(X,nt){return X=X>>>0,nt||H(X,8,this.length),e.read(this,X,!1,52,8)};function L(ut,X,nt,at,M,O){if(!u.isBuffer(ut))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>M||X<O)throw new RangeError('"value" argument is out of bounds');if(nt+at>ut.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(X,nt,at,M){if(X=+X,nt=nt>>>0,at=at>>>0,!M){const Et=Math.pow(2,8*at)-1;L(this,X,nt,at,Et,0)}let O=1,ht=0;for(this[nt]=X&255;++ht<at&&(O*=256);)this[nt+ht]=X/O&255;return nt+at},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(X,nt,at,M){if(X=+X,nt=nt>>>0,at=at>>>0,!M){const Et=Math.pow(2,8*at)-1;L(this,X,nt,at,Et,0)}let O=at-1,ht=1;for(this[nt+O]=X&255;--O>=0&&(ht*=256);)this[nt+O]=X/ht&255;return nt+at},u.prototype.writeUint8=u.prototype.writeUInt8=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,1,255,0),this[nt]=X&255,nt+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,2,65535,0),this[nt]=X&255,this[nt+1]=X>>>8,nt+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,2,65535,0),this[nt]=X>>>8,this[nt+1]=X&255,nt+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,4,4294967295,0),this[nt+3]=X>>>24,this[nt+2]=X>>>16,this[nt+1]=X>>>8,this[nt]=X&255,nt+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,4,4294967295,0),this[nt]=X>>>24,this[nt+1]=X>>>16,this[nt+2]=X>>>8,this[nt+3]=X&255,nt+4};function g(ut,X,nt,at,M){bt(X,at,M,ut,nt,7);let O=Number(X&BigInt(4294967295));ut[nt++]=O,O=O>>8,ut[nt++]=O,O=O>>8,ut[nt++]=O,O=O>>8,ut[nt++]=O;let ht=Number(X>>BigInt(32)&BigInt(4294967295));return ut[nt++]=ht,ht=ht>>8,ut[nt++]=ht,ht=ht>>8,ut[nt++]=ht,ht=ht>>8,ut[nt++]=ht,nt}function D(ut,X,nt,at,M){bt(X,at,M,ut,nt,7);let O=Number(X&BigInt(4294967295));ut[nt+7]=O,O=O>>8,ut[nt+6]=O,O=O>>8,ut[nt+5]=O,O=O>>8,ut[nt+4]=O;let ht=Number(X>>BigInt(32)&BigInt(4294967295));return ut[nt+3]=ht,ht=ht>>8,ut[nt+2]=ht,ht=ht>>8,ut[nt+1]=ht,ht=ht>>8,ut[nt]=ht,nt+8}u.prototype.writeBigUInt64LE=fe(function(X,nt=0){return g(this,X,nt,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=fe(function(X,nt=0){return D(this,X,nt,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(X,nt,at,M){if(X=+X,nt=nt>>>0,!M){const mt=Math.pow(2,8*at-1);L(this,X,nt,at,mt-1,-mt)}let O=0,ht=1,Et=0;for(this[nt]=X&255;++O<at&&(ht*=256);)X<0&&Et===0&&this[nt+O-1]!==0&&(Et=1),this[nt+O]=(X/ht>>0)-Et&255;return nt+at},u.prototype.writeIntBE=function(X,nt,at,M){if(X=+X,nt=nt>>>0,!M){const mt=Math.pow(2,8*at-1);L(this,X,nt,at,mt-1,-mt)}let O=at-1,ht=1,Et=0;for(this[nt+O]=X&255;--O>=0&&(ht*=256);)X<0&&Et===0&&this[nt+O+1]!==0&&(Et=1),this[nt+O]=(X/ht>>0)-Et&255;return nt+at},u.prototype.writeInt8=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,1,127,-128),X<0&&(X=255+X+1),this[nt]=X&255,nt+1},u.prototype.writeInt16LE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,2,32767,-32768),this[nt]=X&255,this[nt+1]=X>>>8,nt+2},u.prototype.writeInt16BE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,2,32767,-32768),this[nt]=X>>>8,this[nt+1]=X&255,nt+2},u.prototype.writeInt32LE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,4,2147483647,-2147483648),this[nt]=X&255,this[nt+1]=X>>>8,this[nt+2]=X>>>16,this[nt+3]=X>>>24,nt+4},u.prototype.writeInt32BE=function(X,nt,at){return X=+X,nt=nt>>>0,at||L(this,X,nt,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),this[nt]=X>>>24,this[nt+1]=X>>>16,this[nt+2]=X>>>8,this[nt+3]=X&255,nt+4},u.prototype.writeBigInt64LE=fe(function(X,nt=0){return g(this,X,nt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=fe(function(X,nt=0){return D(this,X,nt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function S(ut,X,nt,at,M,O){if(nt+at>ut.length)throw new RangeError("Index out of range");if(nt<0)throw new RangeError("Index out of range")}function lt(ut,X,nt,at,M){return X=+X,nt=nt>>>0,M||S(ut,X,nt,4),e.write(ut,X,nt,at,23,4),nt+4}u.prototype.writeFloatLE=function(X,nt,at){return lt(this,X,nt,!0,at)},u.prototype.writeFloatBE=function(X,nt,at){return lt(this,X,nt,!1,at)};function ct(ut,X,nt,at,M){return X=+X,nt=nt>>>0,M||S(ut,X,nt,8),e.write(ut,X,nt,at,52,8),nt+8}u.prototype.writeDoubleLE=function(X,nt,at){return ct(this,X,nt,!0,at)},u.prototype.writeDoubleBE=function(X,nt,at){return ct(this,X,nt,!1,at)},u.prototype.copy=function(X,nt,at,M){if(!u.isBuffer(X))throw new TypeError("argument should be a Buffer");if(at||(at=0),!M&&M!==0&&(M=this.length),nt>=X.length&&(nt=X.length),nt||(nt=0),M>0&&M<at&&(M=at),M===at||X.length===0||this.length===0)return 0;if(nt<0)throw new RangeError("targetStart out of bounds");if(at<0||at>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),X.length-nt<M-at&&(M=X.length-nt+at);const O=M-at;return this===X&&typeof s.prototype.copyWithin=="function"?this.copyWithin(nt,at,M):s.prototype.set.call(X,this.subarray(at,M),nt),O},u.prototype.fill=function(X,nt,at,M){if(typeof X=="string"){if(typeof nt=="string"?(M=nt,nt=0,at=this.length):typeof at=="string"&&(M=at,at=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!u.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(X.length===1){const ht=X.charCodeAt(0);(M==="utf8"&&ht<128||M==="latin1")&&(X=ht)}}else typeof X=="number"?X=X&255:typeof X=="boolean"&&(X=Number(X));if(nt<0||this.length<nt||this.length<at)throw new RangeError("Out of range index");if(at<=nt)return this;nt=nt>>>0,at=at===void 0?this.length:at>>>0,X||(X=0);let O;if(typeof X=="number")for(O=nt;O<at;++O)this[O]=X;else{const ht=u.isBuffer(X)?X:u.from(X,M),Et=ht.length;if(Et===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(O=0;O<at-nt;++O)this[O+nt]=ht[O%Et]}return this};const G={};function ft(ut,X,nt){G[ut]=class extends nt{constructor(){super(),Object.defineProperty(this,"message",{value:X.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ut}]`,this.stack,delete this.name}get code(){return ut}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${ut}]: ${this.message}`}}}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(ut){return ut?`${ut} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(ut,X){return`The "${ut}" argument must be of type number. Received type ${typeof X}`},TypeError),ft("ERR_OUT_OF_RANGE",function(ut,X,nt){let at=`The value of "${ut}" is out of range.`,M=nt;return Number.isInteger(nt)&&Math.abs(nt)>2**32?M=vt(String(nt)):typeof nt=="bigint"&&(M=String(nt),(nt>BigInt(2)**BigInt(32)||nt<-(BigInt(2)**BigInt(32)))&&(M=vt(M)),M+="n"),at+=` It must be ${X}. Received ${M}`,at},RangeError);function vt(ut){let X="",nt=ut.length;const at=ut[0]==="-"?1:0;for(;nt>=at+4;nt-=3)X=`_${ut.slice(nt-3,nt)}${X}`;return`${ut.slice(0,nt)}${X}`}function wt(ut,X,nt){Ft(X,"offset"),(ut[X]===void 0||ut[X+nt]===void 0)&&Pt(X,ut.length-(nt+1))}function bt(ut,X,nt,at,M,O){if(ut>nt||ut<X){const ht=typeof X=="bigint"?"n":"";let Et;throw X===0||X===BigInt(0)?Et=`>= 0${ht} and < 2${ht} ** ${(O+1)*8}${ht}`:Et=`>= -(2${ht} ** ${(O+1)*8-1}${ht}) and < 2 ** ${(O+1)*8-1}${ht}`,new G.ERR_OUT_OF_RANGE("value",Et,ut)}wt(at,M,O)}function Ft(ut,X){if(typeof ut!="number")throw new G.ERR_INVALID_ARG_TYPE(X,"number",ut)}function Pt(ut,X,nt){throw Math.floor(ut)!==ut?(Ft(ut,nt),new G.ERR_OUT_OF_RANGE("offset","an integer",ut)):X<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${X}`,ut)}const Gt=/[^+/0-9A-Za-z-_]/g;function $t(ut){if(ut=ut.split("=")[0],ut=ut.trim().replace(Gt,""),ut.length<2)return"";for(;ut.length%4!==0;)ut=ut+"=";return ut}function kt(ut,X){X=X||1/0;let nt;const at=ut.length;let M=null;const O=[];for(let ht=0;ht<at;++ht){if(nt=ut.charCodeAt(ht),nt>55295&&nt<57344){if(!M){if(nt>56319){(X-=3)>-1&&O.push(239,191,189);continue}else if(ht+1===at){(X-=3)>-1&&O.push(239,191,189);continue}M=nt;continue}if(nt<56320){(X-=3)>-1&&O.push(239,191,189),M=nt;continue}nt=(M-55296<<10|nt-56320)+65536}else M&&(X-=3)>-1&&O.push(239,191,189);if(M=null,nt<128){if((X-=1)<0)break;O.push(nt)}else if(nt<2048){if((X-=2)<0)break;O.push(nt>>6|192,nt&63|128)}else if(nt<65536){if((X-=3)<0)break;O.push(nt>>12|224,nt>>6&63|128,nt&63|128)}else if(nt<1114112){if((X-=4)<0)break;O.push(nt>>18|240,nt>>12&63|128,nt>>6&63|128,nt&63|128)}else throw new Error("Invalid code point")}return O}function Rt(ut){const X=[];for(let nt=0;nt<ut.length;++nt)X.push(ut.charCodeAt(nt)&255);return X}function Ht(ut,X){let nt,at,M;const O=[];for(let ht=0;ht<ut.length&&!((X-=2)<0);++ht)nt=ut.charCodeAt(ht),at=nt>>8,M=nt%256,O.push(M),O.push(at);return O}function Kt(ut){return t.toByteArray($t(ut))}function se(ut,X,nt,at){let M;for(M=0;M<at&&!(M+nt>=X.length||M>=ut.length);++M)X[M+nt]=ut[M];return M}function _e(ut,X){return ut instanceof X||ut!=null&&ut.constructor!=null&&ut.constructor.name!=null&&ut.constructor.name===X.name}function ae(ut){return ut!==ut}const de=(function(){const ut="0123456789abcdef",X=new Array(256);for(let nt=0;nt<16;++nt){const at=nt*16;for(let M=0;M<16;++M)X[at+M]=ut[nt]+ut[M]}return X})();function fe(ut){return typeof BigInt>"u"?Yt:ut}function Yt(){throw new Error("BigInt not supported")}})(_b);const ke=_b.Buffer,Oe=_b.Buffer;var rt=wb();const Mt=Po(rt),wP=sP({__proto__:null,default:Mt},[rt]);var bp={},t1={exports:{}},pr={},e1={exports:{}},n1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function _P(){return ZE||(ZE=1,(function(n){function t(Q,$){var F=Q.length;Q.push($);t:for(;0<F;){var R=F-1>>>1,_=Q[R];if(0<r(_,$))Q[R]=$,Q[F]=_,F=R;else break t}}function e(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var $=Q[0],F=Q.pop();if(F!==$){Q[0]=F;t:for(var R=0,_=Q.length,k=_>>>1;R<k;){var H=2*(R+1)-1,L=Q[H],g=H+1,D=Q[g];if(0>r(L,F))g<_&&0>r(D,L)?(Q[R]=D,Q[g]=F,R=g):(Q[R]=L,Q[H]=F,R=H);else if(g<_&&0>r(D,F))Q[R]=D,Q[g]=F,R=g;else break t}}return $}function r(Q,$){var F=Q.sortIndex-$.sortIndex;return F!==0?F:Q.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],d=[],u=1,h=null,m=3,p=!1,E=!1,C=!1,v=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(Q){for(var $=e(d);$!==null;){if($.callback===null)i(d);else if($.startTime<=Q)i(d),$.sortIndex=$.expirationTime,t(l,$);else break;$=e(d)}}function W(Q){if(C=!1,P(Q),!E)if(e(l)!==null)E=!0,V(K);else{var $=e(d);$!==null&&Y(W,$.startTime-Q)}}function K(Q,$){E=!1,C&&(C=!1,A(B),B=-1),p=!0;var F=m;try{for(P($),h=e(l);h!==null&&(!(h.expirationTime>$)||Q&&!st());){var R=h.callback;if(typeof R=="function"){h.callback=null,m=h.priorityLevel;var _=R(h.expirationTime<=$);$=n.unstable_now(),typeof _=="function"?h.callback=_:h===e(l)&&i(l),P($)}else i(l);h=e(l)}if(h!==null)var k=!0;else{var H=e(d);H!==null&&Y(W,H.startTime-$),k=!1}return k}finally{h=null,m=F,p=!1}}var j=!1,b=null,B=-1,J=5,it=-1;function st(){return!(n.unstable_now()-it<J)}function z(){if(b!==null){var Q=n.unstable_now();it=Q;var $=!0;try{$=b(!0,Q)}finally{$?I():(j=!1,b=null)}}else j=!1}var I;if(typeof x=="function")I=function(){x(z)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,T=w.port2;w.port1.onmessage=z,I=function(){T.postMessage(null)}}else I=function(){v(z,0)};function V(Q){b=Q,j||(j=!0,I())}function Y(Q,$){B=v(function(){Q(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){E||p||(E=!0,V(K))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return e(l)},n.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var F=m;m=$;try{return Q()}finally{m=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,$){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var F=m;m=Q;try{return $()}finally{m=F}},n.unstable_scheduleCallback=function(Q,$,F){var R=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?R+F:R):F=R,Q){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=F+_,Q={id:u++,callback:$,priorityLevel:Q,startTime:F,expirationTime:_,sortIndex:-1},F>R?(Q.sortIndex=F,t(d,Q),e(l)===null&&Q===e(d)&&(C?(A(B),B=-1):C=!0,Y(W,F-R))):(Q.sortIndex=_,t(l,Q),E||p||(E=!0,V(K))),Q},n.unstable_shouldYield=st,n.unstable_wrapCallback=function(Q){var $=m;return function(){var F=m;m=$;try{return Q.apply(this,arguments)}finally{m=F}}}})(n1)),n1}var QE;function bP(){return QE||(QE=1,e1.exports=_P()),e1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function vP(){if(YE)return pr;YE=1;var n=wb(),t=bP();function e(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(c,f){o(c,f),o(c+"Capture",f)}function o(c,f){for(r[c]=f,c=0;c<f.length;c++)i.add(f[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function m(c){return l.call(h,c)?!0:l.call(u,c)?!1:d.test(c)?h[c]=!0:(u[c]=!0,!1)}function p(c,f,y,N){if(y!==null&&y.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return N?!1:y!==null?!y.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function E(c,f,y,N){if(f===null||typeof f>"u"||p(c,f,y,N))return!0;if(N)return!1;if(y!==null)switch(y.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function C(c,f,y,N,q,et,dt){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=N,this.attributeNamespace=q,this.mustUseProperty=y,this.propertyName=c,this.type=f,this.sanitizeURL=et,this.removeEmptyString=dt}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){v[c]=new C(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var f=c[0];v[f]=new C(f,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){v[c]=new C(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){v[c]=new C(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){v[c]=new C(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){v[c]=new C(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){v[c]=new C(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){v[c]=new C(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){v[c]=new C(c,5,!1,c.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function x(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var f=c.replace(A,x);v[f]=new C(f,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var f=c.replace(A,x);v[f]=new C(f,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var f=c.replace(A,x);v[f]=new C(f,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){v[c]=new C(c,1,!1,c.toLowerCase(),null,!1,!1)}),v.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){v[c]=new C(c,1,!1,c.toLowerCase(),null,!0,!0)});function P(c,f,y,N){var q=v.hasOwnProperty(f)?v[f]:null;(q!==null?q.type!==0:N||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(E(f,y,q,N)&&(y=null),N||q===null?m(f)&&(y===null?c.removeAttribute(f):c.setAttribute(f,""+y)):q.mustUseProperty?c[q.propertyName]=y===null?q.type===3?!1:"":y:(f=q.attributeName,N=q.attributeNamespace,y===null?c.removeAttribute(f):(q=q.type,y=q===3||q===4&&y===!0?"":""+y,N?c.setAttributeNS(N,f,y):c.setAttribute(f,y))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),j=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),st=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),Q=Symbol.iterator;function $(c){return c===null||typeof c!="object"?null:(c=Q&&c[Q]||c["@@iterator"],typeof c=="function"?c:null)}var F=Object.assign,R;function _(c){if(R===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);R=f&&f[1]||""}return`
`+R+c}var k=!1;function H(c,f){if(!c||k)return"";k=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(qt){var N=qt}Reflect.construct(c,[],f)}else{try{f.call()}catch(qt){N=qt}c.call(f.prototype)}else{try{throw Error()}catch(qt){N=qt}c()}}catch(qt){if(qt&&N&&typeof qt.stack=="string"){for(var q=qt.stack.split(`
`),et=N.stack.split(`
`),dt=q.length-1,yt=et.length-1;1<=dt&&0<=yt&&q[dt]!==et[yt];)yt--;for(;1<=dt&&0<=yt;dt--,yt--)if(q[dt]!==et[yt]){if(dt!==1||yt!==1)do if(dt--,yt--,0>yt||q[dt]!==et[yt]){var Ct=`
`+q[dt].replace(" at new "," at ");return c.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",c.displayName)),Ct}while(1<=dt&&0<=yt);break}}}finally{k=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?_(c):""}function L(c){switch(c.tag){case 5:return _(c.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return c=H(c.type,!1),c;case 11:return c=H(c.type.render,!1),c;case 1:return c=H(c.type,!0),c;default:return""}}function g(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case j:return"Portal";case J:return"Profiler";case B:return"StrictMode";case I:return"Suspense";case w:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case st:return(c.displayName||"Context")+".Consumer";case it:return(c._context.displayName||"Context")+".Provider";case z:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case T:return f=c.displayName||null,f!==null?f:g(c.type)||"Memo";case V:f=c._payload,c=c._init;try{return g(c(f))}catch{}}return null}function D(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g(f);case 8:return f===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function S(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function lt(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ct(c){var f=lt(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),N=""+c[f];if(!c.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var q=y.get,et=y.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return q.call(this)},set:function(dt){N=""+dt,et.call(this,dt)}}),Object.defineProperty(c,f,{enumerable:y.enumerable}),{getValue:function(){return N},setValue:function(dt){N=""+dt},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function G(c){c._valueTracker||(c._valueTracker=ct(c))}function ft(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var y=f.getValue(),N="";return c&&(N=lt(c)?c.checked?"true":"false":c.value),c=N,c!==y?(f.setValue(c),!0):!1}function vt(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function wt(c,f){var y=f.checked;return F({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??c._wrapperState.initialChecked})}function bt(c,f){var y=f.defaultValue==null?"":f.defaultValue,N=f.checked!=null?f.checked:f.defaultChecked;y=S(f.value!=null?f.value:y),c._wrapperState={initialChecked:N,initialValue:y,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Ft(c,f){f=f.checked,f!=null&&P(c,"checked",f,!1)}function Pt(c,f){Ft(c,f);var y=S(f.value),N=f.type;if(y!=null)N==="number"?(y===0&&c.value===""||c.value!=y)&&(c.value=""+y):c.value!==""+y&&(c.value=""+y);else if(N==="submit"||N==="reset"){c.removeAttribute("value");return}f.hasOwnProperty("value")?$t(c,f.type,y):f.hasOwnProperty("defaultValue")&&$t(c,f.type,S(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(c.defaultChecked=!!f.defaultChecked)}function Gt(c,f,y){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var N=f.type;if(!(N!=="submit"&&N!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+c._wrapperState.initialValue,y||f===c.value||(c.value=f),c.defaultValue=f}y=c.name,y!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,y!==""&&(c.name=y)}function $t(c,f,y){(f!=="number"||vt(c.ownerDocument)!==c)&&(y==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+y&&(c.defaultValue=""+y))}var kt=Array.isArray;function Rt(c,f,y,N){if(c=c.options,f){f={};for(var q=0;q<y.length;q++)f["$"+y[q]]=!0;for(y=0;y<c.length;y++)q=f.hasOwnProperty("$"+c[y].value),c[y].selected!==q&&(c[y].selected=q),q&&N&&(c[y].defaultSelected=!0)}else{for(y=""+S(y),f=null,q=0;q<c.length;q++){if(c[q].value===y){c[q].selected=!0,N&&(c[q].defaultSelected=!0);return}f!==null||c[q].disabled||(f=c[q])}f!==null&&(f.selected=!0)}}function Ht(c,f){if(f.dangerouslySetInnerHTML!=null)throw Error(e(91));return F({},f,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Kt(c,f){var y=f.value;if(y==null){if(y=f.children,f=f.defaultValue,y!=null){if(f!=null)throw Error(e(92));if(kt(y)){if(1<y.length)throw Error(e(93));y=y[0]}f=y}f==null&&(f=""),y=f}c._wrapperState={initialValue:S(y)}}function se(c,f){var y=S(f.value),N=S(f.defaultValue);y!=null&&(y=""+y,y!==c.value&&(c.value=y),f.defaultValue==null&&c.defaultValue!==y&&(c.defaultValue=y)),N!=null&&(c.defaultValue=""+N)}function _e(c){var f=c.textContent;f===c._wrapperState.initialValue&&f!==""&&f!==null&&(c.value=f)}function ae(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(c,f){return c==null||c==="http://www.w3.org/1999/xhtml"?ae(f):c==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var fe,Yt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,y,N,q){MSApp.execUnsafeLocalFunction(function(){return c(f,y,N,q)})}:c})(function(c,f){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=f;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=fe.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;f.firstChild;)c.appendChild(f.firstChild)}});function ut(c,f){if(f){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=f;return}}c.textContent=f}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(c){nt.forEach(function(f){f=f+c.charAt(0).toUpperCase()+c.substring(1),X[f]=X[c]})});function at(c,f,y){return f==null||typeof f=="boolean"||f===""?"":y||typeof f!="number"||f===0||X.hasOwnProperty(c)&&X[c]?(""+f).trim():f+"px"}function M(c,f){c=c.style;for(var y in f)if(f.hasOwnProperty(y)){var N=y.indexOf("--")===0,q=at(y,f[y],N);y==="float"&&(y="cssFloat"),N?c.setProperty(y,q):c[y]=q}}var O=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ht(c,f){if(f){if(O[c]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(e(137,c));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(e(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(e(61))}if(f.style!=null&&typeof f.style!="object")throw Error(e(62))}}function Et(c,f){if(c.indexOf("-")===-1)return typeof f.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mt=null;function xt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Lt=null,At=null,jt=null;function Wt(c){if(c=yd(c)){if(typeof Lt!="function")throw Error(e(280));var f=c.stateNode;f&&(f=Ph(f),Lt(c.stateNode,c.type,f))}}function Bt(c){At?jt?jt.push(c):jt=[c]:At=c}function Nt(){if(At){var c=At,f=jt;if(jt=At=null,Wt(c),f)for(c=0;c<f.length;c++)Wt(f[c])}}function Jt(c,f){return c(f)}function Xt(){}var ot=!1;function Z(c,f,y){if(ot)return c(f,y);ot=!0;try{return Jt(c,f,y)}finally{ot=!1,(At!==null||jt!==null)&&(Xt(),Nt())}}function tt(c,f){var y=c.stateNode;if(y===null)return null;var N=Ph(y);if(N===null)return null;y=N[f];t:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(c=c.type,N=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!N;break t;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(e(231,f,typeof y));return y}var pt=!1;if(a)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){pt=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{pt=!1}function St(c,f,y,N,q,et,dt,yt,Ct){var qt=Array.prototype.slice.call(arguments,3);try{f.apply(y,qt)}catch(ne){this.onError(ne)}}var It=!1,le=null,xe=!1,Se=null,nn={onError:function(c){It=!0,le=c}};function Ie(c,f,y,N,q,et,dt,yt,Ct){It=!1,le=null,St.apply(nn,arguments)}function mn(c,f,y,N,q,et,dt,yt,Ct){if(Ie.apply(this,arguments),It){if(It){var qt=le;It=!1,le=null}else throw Error(e(198));xe||(xe=!0,Se=qt)}}function Li(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function ln(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function un(c){if(Li(c)!==c)throw Error(e(188))}function Br(c){var f=c.alternate;if(!f){if(f=Li(c),f===null)throw Error(e(188));return f!==c?null:c}for(var y=c,N=f;;){var q=y.return;if(q===null)break;var et=q.alternate;if(et===null){if(N=q.return,N!==null){y=N;continue}break}if(q.child===et.child){for(et=q.child;et;){if(et===y)return un(q),c;if(et===N)return un(q),f;et=et.sibling}throw Error(e(188))}if(y.return!==N.return)y=q,N=et;else{for(var dt=!1,yt=q.child;yt;){if(yt===y){dt=!0,y=q,N=et;break}if(yt===N){dt=!0,N=q,y=et;break}yt=yt.sibling}if(!dt){for(yt=et.child;yt;){if(yt===y){dt=!0,y=et,N=q;break}if(yt===N){dt=!0,N=et,y=q;break}yt=yt.sibling}if(!dt)throw Error(e(189))}}if(y.alternate!==N)throw Error(e(190))}if(y.tag!==3)throw Error(e(188));return y.stateNode.current===y?c:f}function Bi(c){return c=Br(c),c!==null?Ci(c):null}function Ci(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=Ci(c);if(f!==null)return f;c=c.sibling}return null}var ar=t.unstable_scheduleCallback,Qr=t.unstable_cancelCallback,Hu=t.unstable_shouldYield,Ku=t.unstable_requestPaint,In=t.unstable_now,Zu=t.unstable_getCurrentPriorityLevel,qa=t.unstable_ImmediatePriority,rl=t.unstable_UserBlockingPriority,jo=t.unstable_NormalPriority,Qu=t.unstable_LowPriority,sl=t.unstable_IdlePriority,Uo=null,cr=null;function Yu(c){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Uo,c,void 0,(c.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:EM,Xu=Math.log,xM=Math.LN2;function EM(c){return c>>>=0,c===0?32:31-(Xu(c)/xM|0)|0}var yh=64,wh=4194304;function Ju(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function _h(c,f){var y=c.pendingLanes;if(y===0)return 0;var N=0,q=c.suspendedLanes,et=c.pingedLanes,dt=y&268435455;if(dt!==0){var yt=dt&~q;yt!==0?N=Ju(yt):(et&=dt,et!==0&&(N=Ju(et)))}else dt=y&~q,dt!==0?N=Ju(dt):et!==0&&(N=Ju(et));if(N===0)return 0;if(f!==0&&f!==N&&(f&q)===0&&(q=N&-N,et=f&-f,q>=et||q===16&&(et&4194240)!==0))return f;if((N&4)!==0&&(N|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=N;0<f;)y=31-Ki(f),q=1<<y,N|=c[y],f&=~q;return N}function SM(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LM(c,f){for(var y=c.suspendedLanes,N=c.pingedLanes,q=c.expirationTimes,et=c.pendingLanes;0<et;){var dt=31-Ki(et),yt=1<<dt,Ct=q[dt];Ct===-1?((yt&y)===0||(yt&N)!==0)&&(q[dt]=SM(yt,f)):Ct<=f&&(c.expiredLanes|=yt),et&=~yt}}function wg(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function x3(){var c=yh;return yh<<=1,(yh&4194240)===0&&(yh=64),c}function _g(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function td(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Ki(f),c[f]=y}function CM(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var N=c.eventTimes;for(c=c.expirationTimes;0<y;){var q=31-Ki(y),et=1<<q;f[q]=0,N[q]=-1,c[q]=-1,y&=~et}}function bg(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var N=31-Ki(y),q=1<<N;q&f|c[N]&f&&(c[N]|=f),y&=~q}}var _n=0;function E3(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var S3,vg,L3,C3,A3,xg=!1,bh=[],Do=null,zo=null,Go=null,ed=new Map,nd=new Map,Wo=[],AM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I3(c,f){switch(c){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":ed.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(f.pointerId)}}function id(c,f,y,N,q,et){return c===null||c.nativeEvent!==et?(c={blockedOn:f,domEventName:y,eventSystemFlags:N,nativeEvent:et,targetContainers:[q]},f!==null&&(f=yd(f),f!==null&&vg(f)),c):(c.eventSystemFlags|=N,f=c.targetContainers,q!==null&&f.indexOf(q)===-1&&f.push(q),c)}function IM(c,f,y,N,q){switch(f){case"focusin":return Do=id(Do,c,f,y,N,q),!0;case"dragenter":return zo=id(zo,c,f,y,N,q),!0;case"mouseover":return Go=id(Go,c,f,y,N,q),!0;case"pointerover":var et=q.pointerId;return ed.set(et,id(ed.get(et)||null,c,f,y,N,q)),!0;case"gotpointercapture":return et=q.pointerId,nd.set(et,id(nd.get(et)||null,c,f,y,N,q)),!0}return!1}function T3(c){var f=$a(c.target);if(f!==null){var y=Li(f);if(y!==null){if(f=y.tag,f===13){if(f=ln(y),f!==null){c.blockedOn=f,A3(c.priority,function(){L3(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function vh(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var y=Sg(c.domEventName,c.eventSystemFlags,f[0],c.nativeEvent);if(y===null){y=c.nativeEvent;var N=new y.constructor(y.type,y);mt=N,y.target.dispatchEvent(N),mt=null}else return f=yd(y),f!==null&&vg(f),c.blockedOn=y,!1;f.shift()}return!0}function k3(c,f,y){vh(c)&&y.delete(f)}function TM(){xg=!1,Do!==null&&vh(Do)&&(Do=null),zo!==null&&vh(zo)&&(zo=null),Go!==null&&vh(Go)&&(Go=null),ed.forEach(k3),nd.forEach(k3)}function rd(c,f){c.blockedOn===f&&(c.blockedOn=null,xg||(xg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,TM)))}function sd(c){function f(q){return rd(q,c)}if(0<bh.length){rd(bh[0],c);for(var y=1;y<bh.length;y++){var N=bh[y];N.blockedOn===c&&(N.blockedOn=null)}}for(Do!==null&&rd(Do,c),zo!==null&&rd(zo,c),Go!==null&&rd(Go,c),ed.forEach(f),nd.forEach(f),y=0;y<Wo.length;y++)N=Wo[y],N.blockedOn===c&&(N.blockedOn=null);for(;0<Wo.length&&(y=Wo[0],y.blockedOn===null);)T3(y),y.blockedOn===null&&Wo.shift()}var ol=W.ReactCurrentBatchConfig,xh=!0;function kM(c,f,y,N){var q=_n,et=ol.transition;ol.transition=null;try{_n=1,Eg(c,f,y,N)}finally{_n=q,ol.transition=et}}function RM(c,f,y,N){var q=_n,et=ol.transition;ol.transition=null;try{_n=4,Eg(c,f,y,N)}finally{_n=q,ol.transition=et}}function Eg(c,f,y,N){if(xh){var q=Sg(c,f,y,N);if(q===null)zg(c,f,N,Eh,y),I3(c,N);else if(IM(q,c,f,y,N))N.stopPropagation();else if(I3(c,N),f&4&&-1<AM.indexOf(c)){for(;q!==null;){var et=yd(q);if(et!==null&&S3(et),et=Sg(c,f,y,N),et===null&&zg(c,f,N,Eh,y),et===q)break;q=et}q!==null&&N.stopPropagation()}else zg(c,f,N,null,y)}}var Eh=null;function Sg(c,f,y,N){if(Eh=null,c=xt(N),c=$a(c),c!==null)if(f=Li(c),f===null)c=null;else if(y=f.tag,y===13){if(c=ln(f),c!==null)return c;c=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null);return Eh=c,null}function R3(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zu()){case qa:return 1;case rl:return 4;case jo:case Qu:return 16;case sl:return 536870912;default:return 16}default:return 16}}var Vo=null,Lg=null,Sh=null;function N3(){if(Sh)return Sh;var c,f=Lg,y=f.length,N,q="value"in Vo?Vo.value:Vo.textContent,et=q.length;for(c=0;c<y&&f[c]===q[c];c++);var dt=y-c;for(N=1;N<=dt&&f[y-N]===q[et-N];N++);return Sh=q.slice(c,1<N?1-N:void 0)}function Lh(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ch(){return!0}function M3(){return!1}function xr(c){function f(y,N,q,et,dt){this._reactName=y,this._targetInst=q,this.type=N,this.nativeEvent=et,this.target=dt,this.currentTarget=null;for(var yt in c)c.hasOwnProperty(yt)&&(y=c[yt],this[yt]=y?y(et):et[yt]);return this.isDefaultPrevented=(et.defaultPrevented!=null?et.defaultPrevented:et.returnValue===!1)?Ch:M3,this.isPropagationStopped=M3,this}return F(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Ch)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Ch)},persist:function(){},isPersistent:Ch}),f}var al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cg=xr(al),od=F({},al,{view:0,detail:0}),NM=xr(od),Ag,Ig,ad,Ah=F({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kg,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ad&&(ad&&c.type==="mousemove"?(Ag=c.screenX-ad.screenX,Ig=c.screenY-ad.screenY):Ig=Ag=0,ad=c),Ag)},movementY:function(c){return"movementY"in c?c.movementY:Ig}}),B3=xr(Ah),MM=F({},Ah,{dataTransfer:0}),BM=xr(MM),PM=F({},od,{relatedTarget:0}),Tg=xr(PM),OM=F({},al,{animationName:0,elapsedTime:0,pseudoElement:0}),FM=xr(OM),jM=F({},al,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),UM=xr(jM),DM=F({},al,{data:0}),P3=xr(DM),zM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VM(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=WM[c])?!!f[c]:!1}function kg(){return VM}var qM=F({},od,{key:function(c){if(c.key){var f=zM[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Lh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?GM[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kg,charCode:function(c){return c.type==="keypress"?Lh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Lh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),$M=xr(qM),HM=F({},Ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O3=xr(HM),KM=F({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kg}),ZM=xr(KM),QM=F({},al,{propertyName:0,elapsedTime:0,pseudoElement:0}),YM=xr(QM),XM=F({},Ah,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),JM=xr(XM),tB=[9,13,27,32],Rg=a&&"CompositionEvent"in window,cd=null;a&&"documentMode"in document&&(cd=document.documentMode);var eB=a&&"TextEvent"in window&&!cd,F3=a&&(!Rg||cd&&8<cd&&11>=cd),j3=" ",U3=!1;function D3(c,f){switch(c){case"keyup":return tB.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z3(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var cl=!1;function nB(c,f){switch(c){case"compositionend":return z3(f);case"keypress":return f.which!==32?null:(U3=!0,j3);case"textInput":return c=f.data,c===j3&&U3?null:c;default:return null}}function iB(c,f){if(cl)return c==="compositionend"||!Rg&&D3(c,f)?(c=N3(),Sh=Lg=Vo=null,cl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return F3&&f.locale!=="ko"?null:f.data;default:return null}}var rB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G3(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!rB[c.type]:f==="textarea"}function W3(c,f,y,N){Bt(N),f=Nh(f,"onChange"),0<f.length&&(y=new Cg("onChange","change",null,y,N),c.push({event:y,listeners:f}))}var ld=null,ud=null;function sB(c){ax(c,0)}function Ih(c){var f=hl(c);if(ft(f))return c}function oB(c,f){if(c==="change")return f}var V3=!1;if(a){var Ng;if(a){var Mg="oninput"in document;if(!Mg){var q3=document.createElement("div");q3.setAttribute("oninput","return;"),Mg=typeof q3.oninput=="function"}Ng=Mg}else Ng=!1;V3=Ng&&(!document.documentMode||9<document.documentMode)}function $3(){ld&&(ld.detachEvent("onpropertychange",H3),ud=ld=null)}function H3(c){if(c.propertyName==="value"&&Ih(ud)){var f=[];W3(f,ud,c,xt(c)),Z(sB,f)}}function aB(c,f,y){c==="focusin"?($3(),ld=f,ud=y,ld.attachEvent("onpropertychange",H3)):c==="focusout"&&$3()}function cB(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Ih(ud)}function lB(c,f){if(c==="click")return Ih(f)}function uB(c,f){if(c==="input"||c==="change")return Ih(f)}function dB(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Yr=typeof Object.is=="function"?Object.is:dB;function dd(c,f){if(Yr(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),N=Object.keys(f);if(y.length!==N.length)return!1;for(N=0;N<y.length;N++){var q=y[N];if(!l.call(f,q)||!Yr(c[q],f[q]))return!1}return!0}function K3(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Z3(c,f){var y=K3(c);c=0;for(var N;y;){if(y.nodeType===3){if(N=c+y.textContent.length,c<=f&&N>=f)return{node:y,offset:f-c};c=N}t:{for(;y;){if(y.nextSibling){y=y.nextSibling;break t}y=y.parentNode}y=void 0}y=K3(y)}}function Q3(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?Q3(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function Y3(){for(var c=window,f=vt();f instanceof c.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)c=f.contentWindow;else break;f=vt(c.document)}return f}function Bg(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}function fB(c){var f=Y3(),y=c.focusedElem,N=c.selectionRange;if(f!==y&&y&&y.ownerDocument&&Q3(y.ownerDocument.documentElement,y)){if(N!==null&&Bg(y)){if(f=N.start,c=N.end,c===void 0&&(c=f),"selectionStart"in y)y.selectionStart=f,y.selectionEnd=Math.min(c,y.value.length);else if(c=(f=y.ownerDocument||document)&&f.defaultView||window,c.getSelection){c=c.getSelection();var q=y.textContent.length,et=Math.min(N.start,q);N=N.end===void 0?et:Math.min(N.end,q),!c.extend&&et>N&&(q=N,N=et,et=q),q=Z3(y,et);var dt=Z3(y,N);q&&dt&&(c.rangeCount!==1||c.anchorNode!==q.node||c.anchorOffset!==q.offset||c.focusNode!==dt.node||c.focusOffset!==dt.offset)&&(f=f.createRange(),f.setStart(q.node,q.offset),c.removeAllRanges(),et>N?(c.addRange(f),c.extend(dt.node,dt.offset)):(f.setEnd(dt.node,dt.offset),c.addRange(f)))}}for(f=[],c=y;c=c.parentNode;)c.nodeType===1&&f.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<f.length;y++)c=f[y],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var hB=a&&"documentMode"in document&&11>=document.documentMode,ll=null,Pg=null,fd=null,Og=!1;function X3(c,f,y){var N=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Og||ll==null||ll!==vt(N)||(N=ll,"selectionStart"in N&&Bg(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),fd&&dd(fd,N)||(fd=N,N=Nh(Pg,"onSelect"),0<N.length&&(f=new Cg("onSelect","select",null,f,y),c.push({event:f,listeners:N}),f.target=ll)))}function Th(c,f){var y={};return y[c.toLowerCase()]=f.toLowerCase(),y["Webkit"+c]="webkit"+f,y["Moz"+c]="moz"+f,y}var ul={animationend:Th("Animation","AnimationEnd"),animationiteration:Th("Animation","AnimationIteration"),animationstart:Th("Animation","AnimationStart"),transitionend:Th("Transition","TransitionEnd")},Fg={},J3={};a&&(J3=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function kh(c){if(Fg[c])return Fg[c];if(!ul[c])return c;var f=ul[c],y;for(y in f)if(f.hasOwnProperty(y)&&y in J3)return Fg[c]=f[y];return c}var tx=kh("animationend"),ex=kh("animationiteration"),nx=kh("animationstart"),ix=kh("transitionend"),rx=new Map,sx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(c,f){rx.set(c,f),s(f,[c])}for(var jg=0;jg<sx.length;jg++){var Ug=sx[jg],pB=Ug.toLowerCase(),mB=Ug[0].toUpperCase()+Ug.slice(1);qo(pB,"on"+mB)}qo(tx,"onAnimationEnd"),qo(ex,"onAnimationIteration"),qo(nx,"onAnimationStart"),qo("dblclick","onDoubleClick"),qo("focusin","onFocus"),qo("focusout","onBlur"),qo(ix,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gB=new Set("cancel close invalid load scroll toggle".split(" ").concat(hd));function ox(c,f,y){var N=c.type||"unknown-event";c.currentTarget=y,mn(N,f,void 0,c),c.currentTarget=null}function ax(c,f){f=(f&4)!==0;for(var y=0;y<c.length;y++){var N=c[y],q=N.event;N=N.listeners;t:{var et=void 0;if(f)for(var dt=N.length-1;0<=dt;dt--){var yt=N[dt],Ct=yt.instance,qt=yt.currentTarget;if(yt=yt.listener,Ct!==et&&q.isPropagationStopped())break t;ox(q,yt,qt),et=Ct}else for(dt=0;dt<N.length;dt++){if(yt=N[dt],Ct=yt.instance,qt=yt.currentTarget,yt=yt.listener,Ct!==et&&q.isPropagationStopped())break t;ox(q,yt,qt),et=Ct}}}if(xe)throw c=Se,xe=!1,Se=null,c}function Tn(c,f){var y=f[Hg];y===void 0&&(y=f[Hg]=new Set);var N=c+"__bubble";y.has(N)||(cx(f,c,2,!1),y.add(N))}function Dg(c,f,y){var N=0;f&&(N|=4),cx(y,c,N,f)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function pd(c){if(!c[Rh]){c[Rh]=!0,i.forEach(function(y){y!=="selectionchange"&&(gB.has(y)||Dg(y,!1,c),Dg(y,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[Rh]||(f[Rh]=!0,Dg("selectionchange",!1,f))}}function cx(c,f,y,N){switch(R3(f)){case 1:var q=kM;break;case 4:q=RM;break;default:q=Eg}y=q.bind(null,f,y,c),q=void 0,!pt||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(q=!0),N?q!==void 0?c.addEventListener(f,y,{capture:!0,passive:q}):c.addEventListener(f,y,!0):q!==void 0?c.addEventListener(f,y,{passive:q}):c.addEventListener(f,y,!1)}function zg(c,f,y,N,q){var et=N;if((f&1)===0&&(f&2)===0&&N!==null)t:for(;;){if(N===null)return;var dt=N.tag;if(dt===3||dt===4){var yt=N.stateNode.containerInfo;if(yt===q||yt.nodeType===8&&yt.parentNode===q)break;if(dt===4)for(dt=N.return;dt!==null;){var Ct=dt.tag;if((Ct===3||Ct===4)&&(Ct=dt.stateNode.containerInfo,Ct===q||Ct.nodeType===8&&Ct.parentNode===q))return;dt=dt.return}for(;yt!==null;){if(dt=$a(yt),dt===null)return;if(Ct=dt.tag,Ct===5||Ct===6){N=et=dt;continue t}yt=yt.parentNode}}N=N.return}Z(function(){var qt=et,ne=xt(y),re=[];t:{var ee=rx.get(c);if(ee!==void 0){var ye=Cg,Ee=c;switch(c){case"keypress":if(Lh(y)===0)break t;case"keydown":case"keyup":ye=$M;break;case"focusin":Ee="focus",ye=Tg;break;case"focusout":Ee="blur",ye=Tg;break;case"beforeblur":case"afterblur":ye=Tg;break;case"click":if(y.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=B3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=BM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=ZM;break;case tx:case ex:case nx:ye=FM;break;case ix:ye=YM;break;case"scroll":ye=NM;break;case"wheel":ye=JM;break;case"copy":case"cut":case"paste":ye=UM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=O3}var Le=(f&4)!==0,Xn=!Le&&c==="scroll",Ot=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var Tt=qt,Dt;Tt!==null;){Dt=Tt;var oe=Dt.stateNode;if(Dt.tag===5&&oe!==null&&(Dt=oe,Ot!==null&&(oe=tt(Tt,Ot),oe!=null&&Le.push(md(Tt,oe,Dt)))),Xn)break;Tt=Tt.return}0<Le.length&&(ee=new ye(ee,Ee,null,y,ne),re.push({event:ee,listeners:Le}))}}if((f&7)===0){t:{if(ee=c==="mouseover"||c==="pointerover",ye=c==="mouseout"||c==="pointerout",ee&&y!==mt&&(Ee=y.relatedTarget||y.fromElement)&&($a(Ee)||Ee[Hs]))break t;if((ye||ee)&&(ee=ne.window===ne?ne:(ee=ne.ownerDocument)?ee.defaultView||ee.parentWindow:window,ye?(Ee=y.relatedTarget||y.toElement,ye=qt,Ee=Ee?$a(Ee):null,Ee!==null&&(Xn=Li(Ee),Ee!==Xn||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(ye=null,Ee=qt),ye!==Ee)){if(Le=B3,oe="onMouseLeave",Ot="onMouseEnter",Tt="mouse",(c==="pointerout"||c==="pointerover")&&(Le=O3,oe="onPointerLeave",Ot="onPointerEnter",Tt="pointer"),Xn=ye==null?ee:hl(ye),Dt=Ee==null?ee:hl(Ee),ee=new Le(oe,Tt+"leave",ye,y,ne),ee.target=Xn,ee.relatedTarget=Dt,oe=null,$a(ne)===qt&&(Le=new Le(Ot,Tt+"enter",Ee,y,ne),Le.target=Dt,Le.relatedTarget=Xn,oe=Le),Xn=oe,ye&&Ee)e:{for(Le=ye,Ot=Ee,Tt=0,Dt=Le;Dt;Dt=dl(Dt))Tt++;for(Dt=0,oe=Ot;oe;oe=dl(oe))Dt++;for(;0<Tt-Dt;)Le=dl(Le),Tt--;for(;0<Dt-Tt;)Ot=dl(Ot),Dt--;for(;Tt--;){if(Le===Ot||Ot!==null&&Le===Ot.alternate)break e;Le=dl(Le),Ot=dl(Ot)}Le=null}else Le=null;ye!==null&&lx(re,ee,ye,Le,!1),Ee!==null&&Xn!==null&&lx(re,Xn,Ee,Le,!0)}}t:{if(ee=qt?hl(qt):window,ye=ee.nodeName&&ee.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ee.type==="file")var Ce=oB;else if(G3(ee))if(V3)Ce=uB;else{Ce=cB;var Me=aB}else(ye=ee.nodeName)&&ye.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(Ce=lB);if(Ce&&(Ce=Ce(c,qt))){W3(re,Ce,y,ne);break t}Me&&Me(c,ee,qt),c==="focusout"&&(Me=ee._wrapperState)&&Me.controlled&&ee.type==="number"&&$t(ee,"number",ee.value)}switch(Me=qt?hl(qt):window,c){case"focusin":(G3(Me)||Me.contentEditable==="true")&&(ll=Me,Pg=qt,fd=null);break;case"focusout":fd=Pg=ll=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,X3(re,y,ne);break;case"selectionchange":if(hB)break;case"keydown":case"keyup":X3(re,y,ne)}var Be;if(Rg)t:{switch(c){case"compositionstart":var ze="onCompositionStart";break t;case"compositionend":ze="onCompositionEnd";break t;case"compositionupdate":ze="onCompositionUpdate";break t}ze=void 0}else cl?D3(c,y)&&(ze="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(ze="onCompositionStart");ze&&(F3&&y.locale!=="ko"&&(cl||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&cl&&(Be=N3()):(Vo=ne,Lg="value"in Vo?Vo.value:Vo.textContent,cl=!0)),Me=Nh(qt,ze),0<Me.length&&(ze=new P3(ze,c,null,y,ne),re.push({event:ze,listeners:Me}),Be?ze.data=Be:(Be=z3(y),Be!==null&&(ze.data=Be)))),(Be=eB?nB(c,y):iB(c,y))&&(qt=Nh(qt,"onBeforeInput"),0<qt.length&&(ne=new P3("onBeforeInput","beforeinput",null,y,ne),re.push({event:ne,listeners:qt}),ne.data=Be))}ax(re,f)})}function md(c,f,y){return{instance:c,listener:f,currentTarget:y}}function Nh(c,f){for(var y=f+"Capture",N=[];c!==null;){var q=c,et=q.stateNode;q.tag===5&&et!==null&&(q=et,et=tt(c,y),et!=null&&N.unshift(md(c,et,q)),et=tt(c,f),et!=null&&N.push(md(c,et,q))),c=c.return}return N}function dl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function lx(c,f,y,N,q){for(var et=f._reactName,dt=[];y!==null&&y!==N;){var yt=y,Ct=yt.alternate,qt=yt.stateNode;if(Ct!==null&&Ct===N)break;yt.tag===5&&qt!==null&&(yt=qt,q?(Ct=tt(y,et),Ct!=null&&dt.unshift(md(y,Ct,yt))):q||(Ct=tt(y,et),Ct!=null&&dt.push(md(y,Ct,yt)))),y=y.return}dt.length!==0&&c.push({event:f,listeners:dt})}var yB=/\r\n?/g,wB=/\u0000|\uFFFD/g;function ux(c){return(typeof c=="string"?c:""+c).replace(yB,`
`).replace(wB,"")}function Mh(c,f,y){if(f=ux(f),ux(c)!==f&&y)throw Error(e(425))}function Bh(){}var Gg=null,Wg=null;function Vg(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var qg=typeof setTimeout=="function"?setTimeout:void 0,_B=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,bB=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(c){return dx.resolve(null).then(c).catch(vB)}:qg;function vB(c){setTimeout(function(){throw c})}function $g(c,f){var y=f,N=0;do{var q=y.nextSibling;if(c.removeChild(y),q&&q.nodeType===8)if(y=q.data,y==="/$"){if(N===0){c.removeChild(q),sd(f);return}N--}else y!=="$"&&y!=="$?"&&y!=="$!"||N++;y=q}while(y);sd(f)}function $o(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return c}function fx(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return c;f--}else y==="/$"&&f++}c=c.previousSibling}return null}var fl=Math.random().toString(36).slice(2),_s="__reactFiber$"+fl,gd="__reactProps$"+fl,Hs="__reactContainer$"+fl,Hg="__reactEvents$"+fl,xB="__reactListeners$"+fl,EB="__reactHandles$"+fl;function $a(c){var f=c[_s];if(f)return f;for(var y=c.parentNode;y;){if(f=y[Hs]||y[_s]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(c=fx(c);c!==null;){if(y=c[_s])return y;c=fx(c)}return f}c=y,y=c.parentNode}return null}function yd(c){return c=c[_s]||c[Hs],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function hl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(e(33))}function Ph(c){return c[gd]||null}var Kg=[],pl=-1;function Ho(c){return{current:c}}function kn(c){0>pl||(c.current=Kg[pl],Kg[pl]=null,pl--)}function En(c,f){pl++,Kg[pl]=c.current,c.current=f}var Ko={},Pi=Ho(Ko),lr=Ho(!1),Ha=Ko;function ml(c,f){var y=c.type.contextTypes;if(!y)return Ko;var N=c.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===f)return N.__reactInternalMemoizedMaskedChildContext;var q={},et;for(et in y)q[et]=f[et];return N&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=q),q}function ur(c){return c=c.childContextTypes,c!=null}function Oh(){kn(lr),kn(Pi)}function hx(c,f,y){if(Pi.current!==Ko)throw Error(e(168));En(Pi,f),En(lr,y)}function px(c,f,y){var N=c.stateNode;if(f=f.childContextTypes,typeof N.getChildContext!="function")return y;N=N.getChildContext();for(var q in N)if(!(q in f))throw Error(e(108,D(c)||"Unknown",q));return F({},y,N)}function Fh(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ko,Ha=Pi.current,En(Pi,c),En(lr,lr.current),!0}function mx(c,f,y){var N=c.stateNode;if(!N)throw Error(e(169));y?(c=px(c,f,Ha),N.__reactInternalMemoizedMergedChildContext=c,kn(lr),kn(Pi),En(Pi,c)):kn(lr),En(lr,y)}var Ks=null,jh=!1,Zg=!1;function gx(c){Ks===null?Ks=[c]:Ks.push(c)}function SB(c){jh=!0,gx(c)}function Zo(){if(!Zg&&Ks!==null){Zg=!0;var c=0,f=_n;try{var y=Ks;for(_n=1;c<y.length;c++){var N=y[c];do N=N(!0);while(N!==null)}Ks=null,jh=!1}catch(q){throw Ks!==null&&(Ks=Ks.slice(c+1)),ar(qa,Zo),q}finally{_n=f,Zg=!1}}return null}var gl=[],yl=0,Uh=null,Dh=0,Pr=[],Or=0,Ka=null,Zs=1,Qs="";function Za(c,f){gl[yl++]=Dh,gl[yl++]=Uh,Uh=c,Dh=f}function yx(c,f,y){Pr[Or++]=Zs,Pr[Or++]=Qs,Pr[Or++]=Ka,Ka=c;var N=Zs;c=Qs;var q=32-Ki(N)-1;N&=~(1<<q),y+=1;var et=32-Ki(f)+q;if(30<et){var dt=q-q%5;et=(N&(1<<dt)-1).toString(32),N>>=dt,q-=dt,Zs=1<<32-Ki(f)+q|y<<q|N,Qs=et+c}else Zs=1<<et|y<<q|N,Qs=c}function Qg(c){c.return!==null&&(Za(c,1),yx(c,1,0))}function Yg(c){for(;c===Uh;)Uh=gl[--yl],gl[yl]=null,Dh=gl[--yl],gl[yl]=null;for(;c===Ka;)Ka=Pr[--Or],Pr[Or]=null,Qs=Pr[--Or],Pr[Or]=null,Zs=Pr[--Or],Pr[Or]=null}var Er=null,Sr=null,On=!1,Xr=null;function wx(c,f){var y=Dr(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function _x(c,f){switch(c.tag){case 5:var y=c.type;return f=f.nodeType!==1||y.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(c.stateNode=f,Er=c,Sr=$o(f.firstChild),!0):!1;case 6:return f=c.pendingProps===""||f.nodeType!==3?null:f,f!==null?(c.stateNode=f,Er=c,Sr=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(y=Ka!==null?{id:Zs,overflow:Qs}:null,c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=Dr(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,Er=c,Sr=null,!0):!1;default:return!1}}function Xg(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Jg(c){if(On){var f=Sr;if(f){var y=f;if(!_x(c,f)){if(Xg(c))throw Error(e(418));f=$o(y.nextSibling);var N=Er;f&&_x(c,f)?wx(N,y):(c.flags=c.flags&-4097|2,On=!1,Er=c)}}else{if(Xg(c))throw Error(e(418));c.flags=c.flags&-4097|2,On=!1,Er=c}}}function bx(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Er=c}function zh(c){if(c!==Er)return!1;if(!On)return bx(c),On=!0,!1;var f;if((f=c.tag!==3)&&!(f=c.tag!==5)&&(f=c.type,f=f!=="head"&&f!=="body"&&!Vg(c.type,c.memoizedProps)),f&&(f=Sr)){if(Xg(c))throw vx(),Error(e(418));for(;f;)wx(c,f),f=$o(f.nextSibling)}if(bx(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(e(317));t:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="/$"){if(f===0){Sr=$o(c.nextSibling);break t}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++}c=c.nextSibling}Sr=null}}else Sr=Er?$o(c.stateNode.nextSibling):null;return!0}function vx(){for(var c=Sr;c;)c=$o(c.nextSibling)}function wl(){Sr=Er=null,On=!1}function ty(c){Xr===null?Xr=[c]:Xr.push(c)}var LB=W.ReactCurrentBatchConfig;function wd(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(e(309));var N=y.stateNode}if(!N)throw Error(e(147,c));var q=N,et=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===et?f.ref:(f=function(dt){var yt=q.refs;dt===null?delete yt[et]:yt[et]=dt},f._stringRef=et,f)}if(typeof c!="string")throw Error(e(284));if(!y._owner)throw Error(e(290,c))}return c}function Gh(c,f){throw c=Object.prototype.toString.call(f),Error(e(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function xx(c){var f=c._init;return f(c._payload)}function Ex(c){function f(Ot,Tt){if(c){var Dt=Ot.deletions;Dt===null?(Ot.deletions=[Tt],Ot.flags|=16):Dt.push(Tt)}}function y(Ot,Tt){if(!c)return null;for(;Tt!==null;)f(Ot,Tt),Tt=Tt.sibling;return null}function N(Ot,Tt){for(Ot=new Map;Tt!==null;)Tt.key!==null?Ot.set(Tt.key,Tt):Ot.set(Tt.index,Tt),Tt=Tt.sibling;return Ot}function q(Ot,Tt){return Ot=ia(Ot,Tt),Ot.index=0,Ot.sibling=null,Ot}function et(Ot,Tt,Dt){return Ot.index=Dt,c?(Dt=Ot.alternate,Dt!==null?(Dt=Dt.index,Dt<Tt?(Ot.flags|=2,Tt):Dt):(Ot.flags|=2,Tt)):(Ot.flags|=1048576,Tt)}function dt(Ot){return c&&Ot.alternate===null&&(Ot.flags|=2),Ot}function yt(Ot,Tt,Dt,oe){return Tt===null||Tt.tag!==6?(Tt=qy(Dt,Ot.mode,oe),Tt.return=Ot,Tt):(Tt=q(Tt,Dt),Tt.return=Ot,Tt)}function Ct(Ot,Tt,Dt,oe){var Ce=Dt.type;return Ce===b?ne(Ot,Tt,Dt.props.children,oe,Dt.key):Tt!==null&&(Tt.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===V&&xx(Ce)===Tt.type)?(oe=q(Tt,Dt.props),oe.ref=wd(Ot,Tt,Dt),oe.return=Ot,oe):(oe=fp(Dt.type,Dt.key,Dt.props,null,Ot.mode,oe),oe.ref=wd(Ot,Tt,Dt),oe.return=Ot,oe)}function qt(Ot,Tt,Dt,oe){return Tt===null||Tt.tag!==4||Tt.stateNode.containerInfo!==Dt.containerInfo||Tt.stateNode.implementation!==Dt.implementation?(Tt=$y(Dt,Ot.mode,oe),Tt.return=Ot,Tt):(Tt=q(Tt,Dt.children||[]),Tt.return=Ot,Tt)}function ne(Ot,Tt,Dt,oe,Ce){return Tt===null||Tt.tag!==7?(Tt=ic(Dt,Ot.mode,oe,Ce),Tt.return=Ot,Tt):(Tt=q(Tt,Dt),Tt.return=Ot,Tt)}function re(Ot,Tt,Dt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Tt=qy(""+Tt,Ot.mode,Dt),Tt.return=Ot,Tt;if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case K:return Dt=fp(Tt.type,Tt.key,Tt.props,null,Ot.mode,Dt),Dt.ref=wd(Ot,null,Tt),Dt.return=Ot,Dt;case j:return Tt=$y(Tt,Ot.mode,Dt),Tt.return=Ot,Tt;case V:var oe=Tt._init;return re(Ot,oe(Tt._payload),Dt)}if(kt(Tt)||$(Tt))return Tt=ic(Tt,Ot.mode,Dt,null),Tt.return=Ot,Tt;Gh(Ot,Tt)}return null}function ee(Ot,Tt,Dt,oe){var Ce=Tt!==null?Tt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return Ce!==null?null:yt(Ot,Tt,""+Dt,oe);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case K:return Dt.key===Ce?Ct(Ot,Tt,Dt,oe):null;case j:return Dt.key===Ce?qt(Ot,Tt,Dt,oe):null;case V:return Ce=Dt._init,ee(Ot,Tt,Ce(Dt._payload),oe)}if(kt(Dt)||$(Dt))return Ce!==null?null:ne(Ot,Tt,Dt,oe,null);Gh(Ot,Dt)}return null}function ye(Ot,Tt,Dt,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Ot=Ot.get(Dt)||null,yt(Tt,Ot,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case K:return Ot=Ot.get(oe.key===null?Dt:oe.key)||null,Ct(Tt,Ot,oe,Ce);case j:return Ot=Ot.get(oe.key===null?Dt:oe.key)||null,qt(Tt,Ot,oe,Ce);case V:var Me=oe._init;return ye(Ot,Tt,Dt,Me(oe._payload),Ce)}if(kt(oe)||$(oe))return Ot=Ot.get(Dt)||null,ne(Tt,Ot,oe,Ce,null);Gh(Tt,oe)}return null}function Ee(Ot,Tt,Dt,oe){for(var Ce=null,Me=null,Be=Tt,ze=Tt=0,bi=null;Be!==null&&ze<Dt.length;ze++){Be.index>ze?(bi=Be,Be=null):bi=Be.sibling;var dn=ee(Ot,Be,Dt[ze],oe);if(dn===null){Be===null&&(Be=bi);break}c&&Be&&dn.alternate===null&&f(Ot,Be),Tt=et(dn,Tt,ze),Me===null?Ce=dn:Me.sibling=dn,Me=dn,Be=bi}if(ze===Dt.length)return y(Ot,Be),On&&Za(Ot,ze),Ce;if(Be===null){for(;ze<Dt.length;ze++)Be=re(Ot,Dt[ze],oe),Be!==null&&(Tt=et(Be,Tt,ze),Me===null?Ce=Be:Me.sibling=Be,Me=Be);return On&&Za(Ot,ze),Ce}for(Be=N(Ot,Be);ze<Dt.length;ze++)bi=ye(Be,Ot,ze,Dt[ze],oe),bi!==null&&(c&&bi.alternate!==null&&Be.delete(bi.key===null?ze:bi.key),Tt=et(bi,Tt,ze),Me===null?Ce=bi:Me.sibling=bi,Me=bi);return c&&Be.forEach(function(ra){return f(Ot,ra)}),On&&Za(Ot,ze),Ce}function Le(Ot,Tt,Dt,oe){var Ce=$(Dt);if(typeof Ce!="function")throw Error(e(150));if(Dt=Ce.call(Dt),Dt==null)throw Error(e(151));for(var Me=Ce=null,Be=Tt,ze=Tt=0,bi=null,dn=Dt.next();Be!==null&&!dn.done;ze++,dn=Dt.next()){Be.index>ze?(bi=Be,Be=null):bi=Be.sibling;var ra=ee(Ot,Be,dn.value,oe);if(ra===null){Be===null&&(Be=bi);break}c&&Be&&ra.alternate===null&&f(Ot,Be),Tt=et(ra,Tt,ze),Me===null?Ce=ra:Me.sibling=ra,Me=ra,Be=bi}if(dn.done)return y(Ot,Be),On&&Za(Ot,ze),Ce;if(Be===null){for(;!dn.done;ze++,dn=Dt.next())dn=re(Ot,dn.value,oe),dn!==null&&(Tt=et(dn,Tt,ze),Me===null?Ce=dn:Me.sibling=dn,Me=dn);return On&&Za(Ot,ze),Ce}for(Be=N(Ot,Be);!dn.done;ze++,dn=Dt.next())dn=ye(Be,Ot,ze,dn.value,oe),dn!==null&&(c&&dn.alternate!==null&&Be.delete(dn.key===null?ze:dn.key),Tt=et(dn,Tt,ze),Me===null?Ce=dn:Me.sibling=dn,Me=dn);return c&&Be.forEach(function(rP){return f(Ot,rP)}),On&&Za(Ot,ze),Ce}function Xn(Ot,Tt,Dt,oe){if(typeof Dt=="object"&&Dt!==null&&Dt.type===b&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case K:t:{for(var Ce=Dt.key,Me=Tt;Me!==null;){if(Me.key===Ce){if(Ce=Dt.type,Ce===b){if(Me.tag===7){y(Ot,Me.sibling),Tt=q(Me,Dt.props.children),Tt.return=Ot,Ot=Tt;break t}}else if(Me.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===V&&xx(Ce)===Me.type){y(Ot,Me.sibling),Tt=q(Me,Dt.props),Tt.ref=wd(Ot,Me,Dt),Tt.return=Ot,Ot=Tt;break t}y(Ot,Me);break}else f(Ot,Me);Me=Me.sibling}Dt.type===b?(Tt=ic(Dt.props.children,Ot.mode,oe,Dt.key),Tt.return=Ot,Ot=Tt):(oe=fp(Dt.type,Dt.key,Dt.props,null,Ot.mode,oe),oe.ref=wd(Ot,Tt,Dt),oe.return=Ot,Ot=oe)}return dt(Ot);case j:t:{for(Me=Dt.key;Tt!==null;){if(Tt.key===Me)if(Tt.tag===4&&Tt.stateNode.containerInfo===Dt.containerInfo&&Tt.stateNode.implementation===Dt.implementation){y(Ot,Tt.sibling),Tt=q(Tt,Dt.children||[]),Tt.return=Ot,Ot=Tt;break t}else{y(Ot,Tt);break}else f(Ot,Tt);Tt=Tt.sibling}Tt=$y(Dt,Ot.mode,oe),Tt.return=Ot,Ot=Tt}return dt(Ot);case V:return Me=Dt._init,Xn(Ot,Tt,Me(Dt._payload),oe)}if(kt(Dt))return Ee(Ot,Tt,Dt,oe);if($(Dt))return Le(Ot,Tt,Dt,oe);Gh(Ot,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"?(Dt=""+Dt,Tt!==null&&Tt.tag===6?(y(Ot,Tt.sibling),Tt=q(Tt,Dt),Tt.return=Ot,Ot=Tt):(y(Ot,Tt),Tt=qy(Dt,Ot.mode,oe),Tt.return=Ot,Ot=Tt),dt(Ot)):y(Ot,Tt)}return Xn}var _l=Ex(!0),Sx=Ex(!1),Wh=Ho(null),Vh=null,bl=null,ey=null;function ny(){ey=bl=Vh=null}function iy(c){var f=Wh.current;kn(Wh),c._currentValue=f}function ry(c,f,y){for(;c!==null;){var N=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,N!==null&&(N.childLanes|=f)):N!==null&&(N.childLanes&f)!==f&&(N.childLanes|=f),c===y)break;c=c.return}}function vl(c,f){Vh=c,ey=bl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&f)!==0&&(dr=!0),c.firstContext=null)}function Fr(c){var f=c._currentValue;if(ey!==c)if(c={context:c,memoizedValue:f,next:null},bl===null){if(Vh===null)throw Error(e(308));bl=c,Vh.dependencies={lanes:0,firstContext:c}}else bl=bl.next=c;return f}var Qa=null;function sy(c){Qa===null?Qa=[c]:Qa.push(c)}function Lx(c,f,y,N){var q=f.interleaved;return q===null?(y.next=y,sy(f)):(y.next=q.next,q.next=y),f.interleaved=y,Ys(c,N)}function Ys(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}var Qo=!1;function oy(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cx(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Xs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function Yo(c,f,y){var N=c.updateQueue;if(N===null)return null;if(N=N.shared,(on&2)!==0){var q=N.pending;return q===null?f.next=f:(f.next=q.next,q.next=f),N.pending=f,Ys(c,y)}return q=N.interleaved,q===null?(f.next=f,sy(N)):(f.next=q.next,q.next=f),N.interleaved=f,Ys(c,y)}function qh(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var N=f.lanes;N&=c.pendingLanes,y|=N,f.lanes=y,bg(c,y)}}function Ax(c,f){var y=c.updateQueue,N=c.alternate;if(N!==null&&(N=N.updateQueue,y===N)){var q=null,et=null;if(y=y.firstBaseUpdate,y!==null){do{var dt={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};et===null?q=et=dt:et=et.next=dt,y=y.next}while(y!==null);et===null?q=et=f:et=et.next=f}else q=et=f;y={baseState:N.baseState,firstBaseUpdate:q,lastBaseUpdate:et,shared:N.shared,effects:N.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function $h(c,f,y,N){var q=c.updateQueue;Qo=!1;var et=q.firstBaseUpdate,dt=q.lastBaseUpdate,yt=q.shared.pending;if(yt!==null){q.shared.pending=null;var Ct=yt,qt=Ct.next;Ct.next=null,dt===null?et=qt:dt.next=qt,dt=Ct;var ne=c.alternate;ne!==null&&(ne=ne.updateQueue,yt=ne.lastBaseUpdate,yt!==dt&&(yt===null?ne.firstBaseUpdate=qt:yt.next=qt,ne.lastBaseUpdate=Ct))}if(et!==null){var re=q.baseState;dt=0,ne=qt=Ct=null,yt=et;do{var ee=yt.lane,ye=yt.eventTime;if((N&ee)===ee){ne!==null&&(ne=ne.next={eventTime:ye,lane:0,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null});t:{var Ee=c,Le=yt;switch(ee=f,ye=y,Le.tag){case 1:if(Ee=Le.payload,typeof Ee=="function"){re=Ee.call(ye,re,ee);break t}re=Ee;break t;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Le.payload,ee=typeof Ee=="function"?Ee.call(ye,re,ee):Ee,ee==null)break t;re=F({},re,ee);break t;case 2:Qo=!0}}yt.callback!==null&&yt.lane!==0&&(c.flags|=64,ee=q.effects,ee===null?q.effects=[yt]:ee.push(yt))}else ye={eventTime:ye,lane:ee,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null},ne===null?(qt=ne=ye,Ct=re):ne=ne.next=ye,dt|=ee;if(yt=yt.next,yt===null){if(yt=q.shared.pending,yt===null)break;ee=yt,yt=ee.next,ee.next=null,q.lastBaseUpdate=ee,q.shared.pending=null}}while(!0);if(ne===null&&(Ct=re),q.baseState=Ct,q.firstBaseUpdate=qt,q.lastBaseUpdate=ne,f=q.shared.interleaved,f!==null){q=f;do dt|=q.lane,q=q.next;while(q!==f)}else et===null&&(q.shared.lanes=0);Ja|=dt,c.lanes=dt,c.memoizedState=re}}function Ix(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var N=c[f],q=N.callback;if(q!==null){if(N.callback=null,N=y,typeof q!="function")throw Error(e(191,q));q.call(N)}}}var _d={},bs=Ho(_d),bd=Ho(_d),vd=Ho(_d);function Ya(c){if(c===_d)throw Error(e(174));return c}function ay(c,f){switch(En(vd,f),En(bd,c),En(bs,_d),c=f.nodeType,c){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:de(null,"");break;default:c=c===8?f.parentNode:f,f=c.namespaceURI||null,c=c.tagName,f=de(f,c)}kn(bs),En(bs,f)}function xl(){kn(bs),kn(bd),kn(vd)}function Tx(c){Ya(vd.current);var f=Ya(bs.current),y=de(f,c.type);f!==y&&(En(bd,c),En(bs,y))}function cy(c){bd.current===c&&(kn(bs),kn(bd))}var Dn=Ho(0);function Hh(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var ly=[];function uy(){for(var c=0;c<ly.length;c++)ly[c]._workInProgressVersionPrimary=null;ly.length=0}var Kh=W.ReactCurrentDispatcher,dy=W.ReactCurrentBatchConfig,Xa=0,zn=null,di=null,wi=null,Zh=!1,xd=!1,Ed=0,CB=0;function Oi(){throw Error(e(321))}function fy(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!Yr(c[y],f[y]))return!1;return!0}function hy(c,f,y,N,q,et){if(Xa=et,zn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Kh.current=c===null||c.memoizedState===null?kB:RB,c=y(N,q),xd){et=0;do{if(xd=!1,Ed=0,25<=et)throw Error(e(301));et+=1,wi=di=null,f.updateQueue=null,Kh.current=NB,c=y(N,q)}while(xd)}if(Kh.current=Xh,f=di!==null&&di.next!==null,Xa=0,wi=di=zn=null,Zh=!1,f)throw Error(e(300));return c}function py(){var c=Ed!==0;return Ed=0,c}function vs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?zn.memoizedState=wi=c:wi=wi.next=c,wi}function jr(){if(di===null){var c=zn.alternate;c=c!==null?c.memoizedState:null}else c=di.next;var f=wi===null?zn.memoizedState:wi.next;if(f!==null)wi=f,di=c;else{if(c===null)throw Error(e(310));di=c,c={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},wi===null?zn.memoizedState=wi=c:wi=wi.next=c}return wi}function Sd(c,f){return typeof f=="function"?f(c):f}function my(c){var f=jr(),y=f.queue;if(y===null)throw Error(e(311));y.lastRenderedReducer=c;var N=di,q=N.baseQueue,et=y.pending;if(et!==null){if(q!==null){var dt=q.next;q.next=et.next,et.next=dt}N.baseQueue=q=et,y.pending=null}if(q!==null){et=q.next,N=N.baseState;var yt=dt=null,Ct=null,qt=et;do{var ne=qt.lane;if((Xa&ne)===ne)Ct!==null&&(Ct=Ct.next={lane:0,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null}),N=qt.hasEagerState?qt.eagerState:c(N,qt.action);else{var re={lane:ne,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null};Ct===null?(yt=Ct=re,dt=N):Ct=Ct.next=re,zn.lanes|=ne,Ja|=ne}qt=qt.next}while(qt!==null&&qt!==et);Ct===null?dt=N:Ct.next=yt,Yr(N,f.memoizedState)||(dr=!0),f.memoizedState=N,f.baseState=dt,f.baseQueue=Ct,y.lastRenderedState=N}if(c=y.interleaved,c!==null){q=c;do et=q.lane,zn.lanes|=et,Ja|=et,q=q.next;while(q!==c)}else q===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function gy(c){var f=jr(),y=f.queue;if(y===null)throw Error(e(311));y.lastRenderedReducer=c;var N=y.dispatch,q=y.pending,et=f.memoizedState;if(q!==null){y.pending=null;var dt=q=q.next;do et=c(et,dt.action),dt=dt.next;while(dt!==q);Yr(et,f.memoizedState)||(dr=!0),f.memoizedState=et,f.baseQueue===null&&(f.baseState=et),y.lastRenderedState=et}return[et,N]}function kx(){}function Rx(c,f){var y=zn,N=jr(),q=f(),et=!Yr(N.memoizedState,q);if(et&&(N.memoizedState=q,dr=!0),N=N.queue,yy(Bx.bind(null,y,N,c),[c]),N.getSnapshot!==f||et||wi!==null&&wi.memoizedState.tag&1){if(y.flags|=2048,Ld(9,Mx.bind(null,y,N,q,f),void 0,null),_i===null)throw Error(e(349));(Xa&30)!==0||Nx(y,f,q)}return q}function Nx(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=zn.updateQueue,f===null?(f={lastEffect:null,stores:null},zn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function Mx(c,f,y,N){f.value=y,f.getSnapshot=N,Px(f)&&Ox(c)}function Bx(c,f,y){return y(function(){Px(f)&&Ox(c)})}function Px(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!Yr(c,y)}catch{return!0}}function Ox(c){var f=Ys(c,1);f!==null&&ns(f,c,1,-1)}function Fx(c){var f=vs();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sd,lastRenderedState:c},f.queue=c,c=c.dispatch=TB.bind(null,zn,c),[f.memoizedState,c]}function Ld(c,f,y,N){return c={tag:c,create:f,destroy:y,deps:N,next:null},f=zn.updateQueue,f===null?(f={lastEffect:null,stores:null},zn.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(N=y.next,y.next=c,c.next=N,f.lastEffect=c)),c}function jx(){return jr().memoizedState}function Qh(c,f,y,N){var q=vs();zn.flags|=c,q.memoizedState=Ld(1|f,y,void 0,N===void 0?null:N)}function Yh(c,f,y,N){var q=jr();N=N===void 0?null:N;var et=void 0;if(di!==null){var dt=di.memoizedState;if(et=dt.destroy,N!==null&&fy(N,dt.deps)){q.memoizedState=Ld(f,y,et,N);return}}zn.flags|=c,q.memoizedState=Ld(1|f,y,et,N)}function Ux(c,f){return Qh(8390656,8,c,f)}function yy(c,f){return Yh(2048,8,c,f)}function Dx(c,f){return Yh(4,2,c,f)}function zx(c,f){return Yh(4,4,c,f)}function Gx(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Wx(c,f,y){return y=y!=null?y.concat([c]):null,Yh(4,4,Gx.bind(null,f,c),y)}function wy(){}function Vx(c,f){var y=jr();f=f===void 0?null:f;var N=y.memoizedState;return N!==null&&f!==null&&fy(f,N[1])?N[0]:(y.memoizedState=[c,f],c)}function qx(c,f){var y=jr();f=f===void 0?null:f;var N=y.memoizedState;return N!==null&&f!==null&&fy(f,N[1])?N[0]:(c=c(),y.memoizedState=[c,f],c)}function $x(c,f,y){return(Xa&21)===0?(c.baseState&&(c.baseState=!1,dr=!0),c.memoizedState=y):(Yr(y,f)||(y=x3(),zn.lanes|=y,Ja|=y,c.baseState=!0),f)}function AB(c,f){var y=_n;_n=y!==0&&4>y?y:4,c(!0);var N=dy.transition;dy.transition={};try{c(!1),f()}finally{_n=y,dy.transition=N}}function Hx(){return jr().memoizedState}function IB(c,f,y){var N=ea(c);if(y={lane:N,action:y,hasEagerState:!1,eagerState:null,next:null},Kx(c))Zx(f,y);else if(y=Lx(c,f,y,N),y!==null){var q=Qi();ns(y,c,N,q),Qx(y,f,N)}}function TB(c,f,y){var N=ea(c),q={lane:N,action:y,hasEagerState:!1,eagerState:null,next:null};if(Kx(c))Zx(f,q);else{var et=c.alternate;if(c.lanes===0&&(et===null||et.lanes===0)&&(et=f.lastRenderedReducer,et!==null))try{var dt=f.lastRenderedState,yt=et(dt,y);if(q.hasEagerState=!0,q.eagerState=yt,Yr(yt,dt)){var Ct=f.interleaved;Ct===null?(q.next=q,sy(f)):(q.next=Ct.next,Ct.next=q),f.interleaved=q;return}}catch{}finally{}y=Lx(c,f,q,N),y!==null&&(q=Qi(),ns(y,c,N,q),Qx(y,f,N))}}function Kx(c){var f=c.alternate;return c===zn||f!==null&&f===zn}function Zx(c,f){xd=Zh=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function Qx(c,f,y){if((y&4194240)!==0){var N=f.lanes;N&=c.pendingLanes,y|=N,f.lanes=y,bg(c,y)}}var Xh={readContext:Fr,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},kB={readContext:Fr,useCallback:function(c,f){return vs().memoizedState=[c,f===void 0?null:f],c},useContext:Fr,useEffect:Ux,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,Qh(4194308,4,Gx.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Qh(4194308,4,c,f)},useInsertionEffect:function(c,f){return Qh(4,2,c,f)},useMemo:function(c,f){var y=vs();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var N=vs();return f=y!==void 0?y(f):f,N.memoizedState=N.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},N.queue=c,c=c.dispatch=IB.bind(null,zn,c),[N.memoizedState,c]},useRef:function(c){var f=vs();return c={current:c},f.memoizedState=c},useState:Fx,useDebugValue:wy,useDeferredValue:function(c){return vs().memoizedState=c},useTransition:function(){var c=Fx(!1),f=c[0];return c=AB.bind(null,c[1]),vs().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var N=zn,q=vs();if(On){if(y===void 0)throw Error(e(407));y=y()}else{if(y=f(),_i===null)throw Error(e(349));(Xa&30)!==0||Nx(N,f,y)}q.memoizedState=y;var et={value:y,getSnapshot:f};return q.queue=et,Ux(Bx.bind(null,N,et,c),[c]),N.flags|=2048,Ld(9,Mx.bind(null,N,et,y,f),void 0,null),y},useId:function(){var c=vs(),f=_i.identifierPrefix;if(On){var y=Qs,N=Zs;y=(N&~(1<<32-Ki(N)-1)).toString(32)+y,f=":"+f+"R"+y,y=Ed++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=CB++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},RB={readContext:Fr,useCallback:Vx,useContext:Fr,useEffect:yy,useImperativeHandle:Wx,useInsertionEffect:Dx,useLayoutEffect:zx,useMemo:qx,useReducer:my,useRef:jx,useState:function(){return my(Sd)},useDebugValue:wy,useDeferredValue:function(c){var f=jr();return $x(f,di.memoizedState,c)},useTransition:function(){var c=my(Sd)[0],f=jr().memoizedState;return[c,f]},useMutableSource:kx,useSyncExternalStore:Rx,useId:Hx,unstable_isNewReconciler:!1},NB={readContext:Fr,useCallback:Vx,useContext:Fr,useEffect:yy,useImperativeHandle:Wx,useInsertionEffect:Dx,useLayoutEffect:zx,useMemo:qx,useReducer:gy,useRef:jx,useState:function(){return gy(Sd)},useDebugValue:wy,useDeferredValue:function(c){var f=jr();return di===null?f.memoizedState=c:$x(f,di.memoizedState,c)},useTransition:function(){var c=gy(Sd)[0],f=jr().memoizedState;return[c,f]},useMutableSource:kx,useSyncExternalStore:Rx,useId:Hx,unstable_isNewReconciler:!1};function Jr(c,f){if(c&&c.defaultProps){f=F({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}function _y(c,f,y,N){f=c.memoizedState,y=y(N,f),y=y==null?f:F({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Jh={isMounted:function(c){return(c=c._reactInternals)?Li(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var N=Qi(),q=ea(c),et=Xs(N,q);et.payload=f,y!=null&&(et.callback=y),f=Yo(c,et,q),f!==null&&(ns(f,c,q,N),qh(f,c,q))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var N=Qi(),q=ea(c),et=Xs(N,q);et.tag=1,et.payload=f,y!=null&&(et.callback=y),f=Yo(c,et,q),f!==null&&(ns(f,c,q,N),qh(f,c,q))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=Qi(),N=ea(c),q=Xs(y,N);q.tag=2,f!=null&&(q.callback=f),f=Yo(c,q,N),f!==null&&(ns(f,c,N,y),qh(f,c,N))}};function Yx(c,f,y,N,q,et,dt){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(N,et,dt):f.prototype&&f.prototype.isPureReactComponent?!dd(y,N)||!dd(q,et):!0}function Xx(c,f,y){var N=!1,q=Ko,et=f.contextType;return typeof et=="object"&&et!==null?et=Fr(et):(q=ur(f)?Ha:Pi.current,N=f.contextTypes,et=(N=N!=null)?ml(c,q):Ko),f=new f(y,et),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Jh,c.stateNode=f,f._reactInternals=c,N&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=q,c.__reactInternalMemoizedMaskedChildContext=et),f}function Jx(c,f,y,N){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,N),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,N),f.state!==c&&Jh.enqueueReplaceState(f,f.state,null)}function by(c,f,y,N){var q=c.stateNode;q.props=y,q.state=c.memoizedState,q.refs={},oy(c);var et=f.contextType;typeof et=="object"&&et!==null?q.context=Fr(et):(et=ur(f)?Ha:Pi.current,q.context=ml(c,et)),q.state=c.memoizedState,et=f.getDerivedStateFromProps,typeof et=="function"&&(_y(c,f,et,y),q.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(f=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),f!==q.state&&Jh.enqueueReplaceState(q,q.state,null),$h(c,y,q,N),q.state=c.memoizedState),typeof q.componentDidMount=="function"&&(c.flags|=4194308)}function El(c,f){try{var y="",N=f;do y+=L(N),N=N.return;while(N);var q=y}catch(et){q=`
Error generating stack: `+et.message+`
`+et.stack}return{value:c,source:f,stack:q,digest:null}}function vy(c,f,y){return{value:c,source:null,stack:y??null,digest:f??null}}function xy(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var MB=typeof WeakMap=="function"?WeakMap:Map;function tE(c,f,y){y=Xs(-1,y),y.tag=3,y.payload={element:null};var N=f.value;return y.callback=function(){op||(op=!0,Fy=N),xy(c,f)},y}function eE(c,f,y){y=Xs(-1,y),y.tag=3;var N=c.type.getDerivedStateFromError;if(typeof N=="function"){var q=f.value;y.payload=function(){return N(q)},y.callback=function(){xy(c,f)}}var et=c.stateNode;return et!==null&&typeof et.componentDidCatch=="function"&&(y.callback=function(){xy(c,f),typeof N!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var dt=f.stack;this.componentDidCatch(f.value,{componentStack:dt!==null?dt:""})}),y}function nE(c,f,y){var N=c.pingCache;if(N===null){N=c.pingCache=new MB;var q=new Set;N.set(f,q)}else q=N.get(f),q===void 0&&(q=new Set,N.set(f,q));q.has(y)||(q.add(y),c=HB.bind(null,c,f,y),f.then(c,c))}function iE(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function rE(c,f,y,N,q){return(c.mode&1)===0?(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=Xs(-1,1),f.tag=2,Yo(y,f,1))),y.lanes|=1),c):(c.flags|=65536,c.lanes=q,c)}var BB=W.ReactCurrentOwner,dr=!1;function Zi(c,f,y,N){f.child=c===null?Sx(f,null,y,N):_l(f,c.child,y,N)}function sE(c,f,y,N,q){y=y.render;var et=f.ref;return vl(f,q),N=hy(c,f,y,N,et,q),y=py(),c!==null&&!dr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~q,Js(c,f,q)):(On&&y&&Qg(f),f.flags|=1,Zi(c,f,N,q),f.child)}function oE(c,f,y,N,q){if(c===null){var et=y.type;return typeof et=="function"&&!Vy(et)&&et.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=et,aE(c,f,et,N,q)):(c=fp(y.type,null,N,f,f.mode,q),c.ref=f.ref,c.return=f,f.child=c)}if(et=c.child,(c.lanes&q)===0){var dt=et.memoizedProps;if(y=y.compare,y=y!==null?y:dd,y(dt,N)&&c.ref===f.ref)return Js(c,f,q)}return f.flags|=1,c=ia(et,N),c.ref=f.ref,c.return=f,f.child=c}function aE(c,f,y,N,q){if(c!==null){var et=c.memoizedProps;if(dd(et,N)&&c.ref===f.ref)if(dr=!1,f.pendingProps=N=et,(c.lanes&q)!==0)(c.flags&131072)!==0&&(dr=!0);else return f.lanes=c.lanes,Js(c,f,q)}return Ey(c,f,y,N,q)}function cE(c,f,y){var N=f.pendingProps,q=N.children,et=c!==null?c.memoizedState:null;if(N.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},En(Ll,Lr),Lr|=y;else{if((y&1073741824)===0)return c=et!==null?et.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null,transitions:null},f.updateQueue=null,En(Ll,Lr),Lr|=c,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=et!==null?et.baseLanes:y,En(Ll,Lr),Lr|=N}else et!==null?(N=et.baseLanes|y,f.memoizedState=null):N=y,En(Ll,Lr),Lr|=N;return Zi(c,f,q,y),f.child}function lE(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function Ey(c,f,y,N,q){var et=ur(y)?Ha:Pi.current;return et=ml(f,et),vl(f,q),y=hy(c,f,y,N,et,q),N=py(),c!==null&&!dr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~q,Js(c,f,q)):(On&&N&&Qg(f),f.flags|=1,Zi(c,f,y,q),f.child)}function uE(c,f,y,N,q){if(ur(y)){var et=!0;Fh(f)}else et=!1;if(vl(f,q),f.stateNode===null)ep(c,f),Xx(f,y,N),by(f,y,N,q),N=!0;else if(c===null){var dt=f.stateNode,yt=f.memoizedProps;dt.props=yt;var Ct=dt.context,qt=y.contextType;typeof qt=="object"&&qt!==null?qt=Fr(qt):(qt=ur(y)?Ha:Pi.current,qt=ml(f,qt));var ne=y.getDerivedStateFromProps,re=typeof ne=="function"||typeof dt.getSnapshotBeforeUpdate=="function";re||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(yt!==N||Ct!==qt)&&Jx(f,dt,N,qt),Qo=!1;var ee=f.memoizedState;dt.state=ee,$h(f,N,dt,q),Ct=f.memoizedState,yt!==N||ee!==Ct||lr.current||Qo?(typeof ne=="function"&&(_y(f,y,ne,N),Ct=f.memoizedState),(yt=Qo||Yx(f,y,yt,N,ee,Ct,qt))?(re||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(f.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=N,f.memoizedState=Ct),dt.props=N,dt.state=Ct,dt.context=qt,N=yt):(typeof dt.componentDidMount=="function"&&(f.flags|=4194308),N=!1)}else{dt=f.stateNode,Cx(c,f),yt=f.memoizedProps,qt=f.type===f.elementType?yt:Jr(f.type,yt),dt.props=qt,re=f.pendingProps,ee=dt.context,Ct=y.contextType,typeof Ct=="object"&&Ct!==null?Ct=Fr(Ct):(Ct=ur(y)?Ha:Pi.current,Ct=ml(f,Ct));var ye=y.getDerivedStateFromProps;(ne=typeof ye=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(yt!==re||ee!==Ct)&&Jx(f,dt,N,Ct),Qo=!1,ee=f.memoizedState,dt.state=ee,$h(f,N,dt,q);var Ee=f.memoizedState;yt!==re||ee!==Ee||lr.current||Qo?(typeof ye=="function"&&(_y(f,y,ye,N),Ee=f.memoizedState),(qt=Qo||Yx(f,y,qt,N,ee,Ee,Ct)||!1)?(ne||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(N,Ee,Ct),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(N,Ee,Ct)),typeof dt.componentDidUpdate=="function"&&(f.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof dt.componentDidUpdate!="function"||yt===c.memoizedProps&&ee===c.memoizedState||(f.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||yt===c.memoizedProps&&ee===c.memoizedState||(f.flags|=1024),f.memoizedProps=N,f.memoizedState=Ee),dt.props=N,dt.state=Ee,dt.context=Ct,N=qt):(typeof dt.componentDidUpdate!="function"||yt===c.memoizedProps&&ee===c.memoizedState||(f.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||yt===c.memoizedProps&&ee===c.memoizedState||(f.flags|=1024),N=!1)}return Sy(c,f,y,N,et,q)}function Sy(c,f,y,N,q,et){lE(c,f);var dt=(f.flags&128)!==0;if(!N&&!dt)return q&&mx(f,y,!1),Js(c,f,et);N=f.stateNode,BB.current=f;var yt=dt&&typeof y.getDerivedStateFromError!="function"?null:N.render();return f.flags|=1,c!==null&&dt?(f.child=_l(f,c.child,null,et),f.child=_l(f,null,yt,et)):Zi(c,f,yt,et),f.memoizedState=N.state,q&&mx(f,y,!0),f.child}function dE(c){var f=c.stateNode;f.pendingContext?hx(c,f.pendingContext,f.pendingContext!==f.context):f.context&&hx(c,f.context,!1),ay(c,f.containerInfo)}function fE(c,f,y,N,q){return wl(),ty(q),f.flags|=256,Zi(c,f,y,N),f.child}var Ly={dehydrated:null,treeContext:null,retryLane:0};function Cy(c){return{baseLanes:c,cachePool:null,transitions:null}}function hE(c,f,y){var N=f.pendingProps,q=Dn.current,et=!1,dt=(f.flags&128)!==0,yt;if((yt=dt)||(yt=c!==null&&c.memoizedState===null?!1:(q&2)!==0),yt?(et=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(q|=1),En(Dn,q&1),c===null)return Jg(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((f.mode&1)===0?f.lanes=1:c.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(dt=N.children,c=N.fallback,et?(N=f.mode,et=f.child,dt={mode:"hidden",children:dt},(N&1)===0&&et!==null?(et.childLanes=0,et.pendingProps=dt):et=hp(dt,N,0,null),c=ic(c,N,y,null),et.return=f,c.return=f,et.sibling=c,f.child=et,f.child.memoizedState=Cy(y),f.memoizedState=Ly,c):Ay(f,dt));if(q=c.memoizedState,q!==null&&(yt=q.dehydrated,yt!==null))return PB(c,f,dt,N,yt,q,y);if(et){et=N.fallback,dt=f.mode,q=c.child,yt=q.sibling;var Ct={mode:"hidden",children:N.children};return(dt&1)===0&&f.child!==q?(N=f.child,N.childLanes=0,N.pendingProps=Ct,f.deletions=null):(N=ia(q,Ct),N.subtreeFlags=q.subtreeFlags&14680064),yt!==null?et=ia(yt,et):(et=ic(et,dt,y,null),et.flags|=2),et.return=f,N.return=f,N.sibling=et,f.child=N,N=et,et=f.child,dt=c.child.memoizedState,dt=dt===null?Cy(y):{baseLanes:dt.baseLanes|y,cachePool:null,transitions:dt.transitions},et.memoizedState=dt,et.childLanes=c.childLanes&~y,f.memoizedState=Ly,N}return et=c.child,c=et.sibling,N=ia(et,{mode:"visible",children:N.children}),(f.mode&1)===0&&(N.lanes=y),N.return=f,N.sibling=null,c!==null&&(y=f.deletions,y===null?(f.deletions=[c],f.flags|=16):y.push(c)),f.child=N,f.memoizedState=null,N}function Ay(c,f){return f=hp({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function tp(c,f,y,N){return N!==null&&ty(N),_l(f,c.child,null,y),c=Ay(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function PB(c,f,y,N,q,et,dt){if(y)return f.flags&256?(f.flags&=-257,N=vy(Error(e(422))),tp(c,f,dt,N)):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(et=N.fallback,q=f.mode,N=hp({mode:"visible",children:N.children},q,0,null),et=ic(et,q,dt,null),et.flags|=2,N.return=f,et.return=f,N.sibling=et,f.child=N,(f.mode&1)!==0&&_l(f,c.child,null,dt),f.child.memoizedState=Cy(dt),f.memoizedState=Ly,et);if((f.mode&1)===0)return tp(c,f,dt,null);if(q.data==="$!"){if(N=q.nextSibling&&q.nextSibling.dataset,N)var yt=N.dgst;return N=yt,et=Error(e(419)),N=vy(et,N,void 0),tp(c,f,dt,N)}if(yt=(dt&c.childLanes)!==0,dr||yt){if(N=_i,N!==null){switch(dt&-dt){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(N.suspendedLanes|dt))!==0?0:q,q!==0&&q!==et.retryLane&&(et.retryLane=q,Ys(c,q),ns(N,c,q,-1))}return Wy(),N=vy(Error(e(421))),tp(c,f,dt,N)}return q.data==="$?"?(f.flags|=128,f.child=c.child,f=KB.bind(null,c),q._reactRetry=f,null):(c=et.treeContext,Sr=$o(q.nextSibling),Er=f,On=!0,Xr=null,c!==null&&(Pr[Or++]=Zs,Pr[Or++]=Qs,Pr[Or++]=Ka,Zs=c.id,Qs=c.overflow,Ka=f),f=Ay(f,N.children),f.flags|=4096,f)}function pE(c,f,y){c.lanes|=f;var N=c.alternate;N!==null&&(N.lanes|=f),ry(c.return,f,y)}function Iy(c,f,y,N,q){var et=c.memoizedState;et===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:N,tail:y,tailMode:q}:(et.isBackwards=f,et.rendering=null,et.renderingStartTime=0,et.last=N,et.tail=y,et.tailMode=q)}function mE(c,f,y){var N=f.pendingProps,q=N.revealOrder,et=N.tail;if(Zi(c,f,N.children,y),N=Dn.current,(N&2)!==0)N=N&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&pE(c,y,f);else if(c.tag===19)pE(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break t;for(;c.sibling===null;){if(c.return===null||c.return===f)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}N&=1}if(En(Dn,N),(f.mode&1)===0)f.memoizedState=null;else switch(q){case"forwards":for(y=f.child,q=null;y!==null;)c=y.alternate,c!==null&&Hh(c)===null&&(q=y),y=y.sibling;y=q,y===null?(q=f.child,f.child=null):(q=y.sibling,y.sibling=null),Iy(f,!1,q,y,et);break;case"backwards":for(y=null,q=f.child,f.child=null;q!==null;){if(c=q.alternate,c!==null&&Hh(c)===null){f.child=q;break}c=q.sibling,q.sibling=y,y=q,q=c}Iy(f,!0,y,null,et);break;case"together":Iy(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ep(c,f){(f.mode&1)===0&&c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2)}function Js(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),Ja|=f.lanes,(y&f.childLanes)===0)return null;if(c!==null&&f.child!==c.child)throw Error(e(153));if(f.child!==null){for(c=f.child,y=ia(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=ia(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function OB(c,f,y){switch(f.tag){case 3:dE(f),wl();break;case 5:Tx(f);break;case 1:ur(f.type)&&Fh(f);break;case 4:ay(f,f.stateNode.containerInfo);break;case 10:var N=f.type._context,q=f.memoizedProps.value;En(Wh,N._currentValue),N._currentValue=q;break;case 13:if(N=f.memoizedState,N!==null)return N.dehydrated!==null?(En(Dn,Dn.current&1),f.flags|=128,null):(y&f.child.childLanes)!==0?hE(c,f,y):(En(Dn,Dn.current&1),c=Js(c,f,y),c!==null?c.sibling:null);En(Dn,Dn.current&1);break;case 19:if(N=(y&f.childLanes)!==0,(c.flags&128)!==0){if(N)return mE(c,f,y);f.flags|=128}if(q=f.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),En(Dn,Dn.current),N)break;return null;case 22:case 23:return f.lanes=0,cE(c,f,y)}return Js(c,f,y)}var gE,Ty,yE,wE;gE=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)c.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Ty=function(){},yE=function(c,f,y,N){var q=c.memoizedProps;if(q!==N){c=f.stateNode,Ya(bs.current);var et=null;switch(y){case"input":q=wt(c,q),N=wt(c,N),et=[];break;case"select":q=F({},q,{value:void 0}),N=F({},N,{value:void 0}),et=[];break;case"textarea":q=Ht(c,q),N=Ht(c,N),et=[];break;default:typeof q.onClick!="function"&&typeof N.onClick=="function"&&(c.onclick=Bh)}ht(y,N);var dt;y=null;for(qt in q)if(!N.hasOwnProperty(qt)&&q.hasOwnProperty(qt)&&q[qt]!=null)if(qt==="style"){var yt=q[qt];for(dt in yt)yt.hasOwnProperty(dt)&&(y||(y={}),y[dt]="")}else qt!=="dangerouslySetInnerHTML"&&qt!=="children"&&qt!=="suppressContentEditableWarning"&&qt!=="suppressHydrationWarning"&&qt!=="autoFocus"&&(r.hasOwnProperty(qt)?et||(et=[]):(et=et||[]).push(qt,null));for(qt in N){var Ct=N[qt];if(yt=q?.[qt],N.hasOwnProperty(qt)&&Ct!==yt&&(Ct!=null||yt!=null))if(qt==="style")if(yt){for(dt in yt)!yt.hasOwnProperty(dt)||Ct&&Ct.hasOwnProperty(dt)||(y||(y={}),y[dt]="");for(dt in Ct)Ct.hasOwnProperty(dt)&&yt[dt]!==Ct[dt]&&(y||(y={}),y[dt]=Ct[dt])}else y||(et||(et=[]),et.push(qt,y)),y=Ct;else qt==="dangerouslySetInnerHTML"?(Ct=Ct?Ct.__html:void 0,yt=yt?yt.__html:void 0,Ct!=null&&yt!==Ct&&(et=et||[]).push(qt,Ct)):qt==="children"?typeof Ct!="string"&&typeof Ct!="number"||(et=et||[]).push(qt,""+Ct):qt!=="suppressContentEditableWarning"&&qt!=="suppressHydrationWarning"&&(r.hasOwnProperty(qt)?(Ct!=null&&qt==="onScroll"&&Tn("scroll",c),et||yt===Ct||(et=[])):(et=et||[]).push(qt,Ct))}y&&(et=et||[]).push("style",y);var qt=et;(f.updateQueue=qt)&&(f.flags|=4)}},wE=function(c,f,y,N){y!==N&&(f.flags|=4)};function Cd(c,f){if(!On)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var N=null;y!==null;)y.alternate!==null&&(N=y),y=y.sibling;N===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:N.sibling=null}}function Fi(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,N=0;if(f)for(var q=c.child;q!==null;)y|=q.lanes|q.childLanes,N|=q.subtreeFlags&14680064,N|=q.flags&14680064,q.return=c,q=q.sibling;else for(q=c.child;q!==null;)y|=q.lanes|q.childLanes,N|=q.subtreeFlags,N|=q.flags,q.return=c,q=q.sibling;return c.subtreeFlags|=N,c.childLanes=y,f}function FB(c,f,y){var N=f.pendingProps;switch(Yg(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(f),null;case 1:return ur(f.type)&&Oh(),Fi(f),null;case 3:return N=f.stateNode,xl(),kn(lr),kn(Pi),uy(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(c===null||c.child===null)&&(zh(f)?f.flags|=4:c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Xr!==null&&(Dy(Xr),Xr=null))),Ty(c,f),Fi(f),null;case 5:cy(f);var q=Ya(vd.current);if(y=f.type,c!==null&&f.stateNode!=null)yE(c,f,y,N,q),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!N){if(f.stateNode===null)throw Error(e(166));return Fi(f),null}if(c=Ya(bs.current),zh(f)){N=f.stateNode,y=f.type;var et=f.memoizedProps;switch(N[_s]=f,N[gd]=et,c=(f.mode&1)!==0,y){case"dialog":Tn("cancel",N),Tn("close",N);break;case"iframe":case"object":case"embed":Tn("load",N);break;case"video":case"audio":for(q=0;q<hd.length;q++)Tn(hd[q],N);break;case"source":Tn("error",N);break;case"img":case"image":case"link":Tn("error",N),Tn("load",N);break;case"details":Tn("toggle",N);break;case"input":bt(N,et),Tn("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!et.multiple},Tn("invalid",N);break;case"textarea":Kt(N,et),Tn("invalid",N)}ht(y,et),q=null;for(var dt in et)if(et.hasOwnProperty(dt)){var yt=et[dt];dt==="children"?typeof yt=="string"?N.textContent!==yt&&(et.suppressHydrationWarning!==!0&&Mh(N.textContent,yt,c),q=["children",yt]):typeof yt=="number"&&N.textContent!==""+yt&&(et.suppressHydrationWarning!==!0&&Mh(N.textContent,yt,c),q=["children",""+yt]):r.hasOwnProperty(dt)&&yt!=null&&dt==="onScroll"&&Tn("scroll",N)}switch(y){case"input":G(N),Gt(N,et,!0);break;case"textarea":G(N),_e(N);break;case"select":case"option":break;default:typeof et.onClick=="function"&&(N.onclick=Bh)}N=q,f.updateQueue=N,N!==null&&(f.flags|=4)}else{dt=q.nodeType===9?q:q.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=ae(y)),c==="http://www.w3.org/1999/xhtml"?y==="script"?(c=dt.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof N.is=="string"?c=dt.createElement(y,{is:N.is}):(c=dt.createElement(y),y==="select"&&(dt=c,N.multiple?dt.multiple=!0:N.size&&(dt.size=N.size))):c=dt.createElementNS(c,y),c[_s]=f,c[gd]=N,gE(c,f,!1,!1),f.stateNode=c;t:{switch(dt=Et(y,N),y){case"dialog":Tn("cancel",c),Tn("close",c),q=N;break;case"iframe":case"object":case"embed":Tn("load",c),q=N;break;case"video":case"audio":for(q=0;q<hd.length;q++)Tn(hd[q],c);q=N;break;case"source":Tn("error",c),q=N;break;case"img":case"image":case"link":Tn("error",c),Tn("load",c),q=N;break;case"details":Tn("toggle",c),q=N;break;case"input":bt(c,N),q=wt(c,N),Tn("invalid",c);break;case"option":q=N;break;case"select":c._wrapperState={wasMultiple:!!N.multiple},q=F({},N,{value:void 0}),Tn("invalid",c);break;case"textarea":Kt(c,N),q=Ht(c,N),Tn("invalid",c);break;default:q=N}ht(y,q),yt=q;for(et in yt)if(yt.hasOwnProperty(et)){var Ct=yt[et];et==="style"?M(c,Ct):et==="dangerouslySetInnerHTML"?(Ct=Ct?Ct.__html:void 0,Ct!=null&&Yt(c,Ct)):et==="children"?typeof Ct=="string"?(y!=="textarea"||Ct!=="")&&ut(c,Ct):typeof Ct=="number"&&ut(c,""+Ct):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(r.hasOwnProperty(et)?Ct!=null&&et==="onScroll"&&Tn("scroll",c):Ct!=null&&P(c,et,Ct,dt))}switch(y){case"input":G(c),Gt(c,N,!1);break;case"textarea":G(c),_e(c);break;case"option":N.value!=null&&c.setAttribute("value",""+S(N.value));break;case"select":c.multiple=!!N.multiple,et=N.value,et!=null?Rt(c,!!N.multiple,et,!1):N.defaultValue!=null&&Rt(c,!!N.multiple,N.defaultValue,!0);break;default:typeof q.onClick=="function"&&(c.onclick=Bh)}switch(y){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break t;case"img":N=!0;break t;default:N=!1}}N&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Fi(f),null;case 6:if(c&&f.stateNode!=null)wE(c,f,c.memoizedProps,N);else{if(typeof N!="string"&&f.stateNode===null)throw Error(e(166));if(y=Ya(vd.current),Ya(bs.current),zh(f)){if(N=f.stateNode,y=f.memoizedProps,N[_s]=f,(et=N.nodeValue!==y)&&(c=Er,c!==null))switch(c.tag){case 3:Mh(N.nodeValue,y,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Mh(N.nodeValue,y,(c.mode&1)!==0)}et&&(f.flags|=4)}else N=(y.nodeType===9?y:y.ownerDocument).createTextNode(N),N[_s]=f,f.stateNode=N}return Fi(f),null;case 13:if(kn(Dn),N=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(On&&Sr!==null&&(f.mode&1)!==0&&(f.flags&128)===0)vx(),wl(),f.flags|=98560,et=!1;else if(et=zh(f),N!==null&&N.dehydrated!==null){if(c===null){if(!et)throw Error(e(318));if(et=f.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(e(317));et[_s]=f}else wl(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Fi(f),et=!1}else Xr!==null&&(Dy(Xr),Xr=null),et=!0;if(!et)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=y,f):(N=N!==null,N!==(c!==null&&c.memoizedState!==null)&&N&&(f.child.flags|=8192,(f.mode&1)!==0&&(c===null||(Dn.current&1)!==0?fi===0&&(fi=3):Wy())),f.updateQueue!==null&&(f.flags|=4),Fi(f),null);case 4:return xl(),Ty(c,f),c===null&&pd(f.stateNode.containerInfo),Fi(f),null;case 10:return iy(f.type._context),Fi(f),null;case 17:return ur(f.type)&&Oh(),Fi(f),null;case 19:if(kn(Dn),et=f.memoizedState,et===null)return Fi(f),null;if(N=(f.flags&128)!==0,dt=et.rendering,dt===null)if(N)Cd(et,!1);else{if(fi!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(dt=Hh(c),dt!==null){for(f.flags|=128,Cd(et,!1),N=dt.updateQueue,N!==null&&(f.updateQueue=N,f.flags|=4),f.subtreeFlags=0,N=y,y=f.child;y!==null;)et=y,c=N,et.flags&=14680066,dt=et.alternate,dt===null?(et.childLanes=0,et.lanes=c,et.child=null,et.subtreeFlags=0,et.memoizedProps=null,et.memoizedState=null,et.updateQueue=null,et.dependencies=null,et.stateNode=null):(et.childLanes=dt.childLanes,et.lanes=dt.lanes,et.child=dt.child,et.subtreeFlags=0,et.deletions=null,et.memoizedProps=dt.memoizedProps,et.memoizedState=dt.memoizedState,et.updateQueue=dt.updateQueue,et.type=dt.type,c=dt.dependencies,et.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),y=y.sibling;return En(Dn,Dn.current&1|2),f.child}c=c.sibling}et.tail!==null&&In()>Cl&&(f.flags|=128,N=!0,Cd(et,!1),f.lanes=4194304)}else{if(!N)if(c=Hh(dt),c!==null){if(f.flags|=128,N=!0,y=c.updateQueue,y!==null&&(f.updateQueue=y,f.flags|=4),Cd(et,!0),et.tail===null&&et.tailMode==="hidden"&&!dt.alternate&&!On)return Fi(f),null}else 2*In()-et.renderingStartTime>Cl&&y!==1073741824&&(f.flags|=128,N=!0,Cd(et,!1),f.lanes=4194304);et.isBackwards?(dt.sibling=f.child,f.child=dt):(y=et.last,y!==null?y.sibling=dt:f.child=dt,et.last=dt)}return et.tail!==null?(f=et.tail,et.rendering=f,et.tail=f.sibling,et.renderingStartTime=In(),f.sibling=null,y=Dn.current,En(Dn,N?y&1|2:y&1),f):(Fi(f),null);case 22:case 23:return Gy(),N=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==N&&(f.flags|=8192),N&&(f.mode&1)!==0?(Lr&1073741824)!==0&&(Fi(f),f.subtreeFlags&6&&(f.flags|=8192)):Fi(f),null;case 24:return null;case 25:return null}throw Error(e(156,f.tag))}function jB(c,f){switch(Yg(f),f.tag){case 1:return ur(f.type)&&Oh(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return xl(),kn(lr),kn(Pi),uy(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 5:return cy(f),null;case 13:if(kn(Dn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(e(340));wl()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return kn(Dn),null;case 4:return xl(),null;case 10:return iy(f.type._context),null;case 22:case 23:return Gy(),null;case 24:return null;default:return null}}var np=!1,ji=!1,UB=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Sl(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(N){Hn(c,f,N)}else y.current=null}function ky(c,f,y){try{y()}catch(N){Hn(c,f,N)}}var _E=!1;function DB(c,f){if(Gg=xh,c=Y3(),Bg(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else t:{y=(y=c.ownerDocument)&&y.defaultView||window;var N=y.getSelection&&y.getSelection();if(N&&N.rangeCount!==0){y=N.anchorNode;var q=N.anchorOffset,et=N.focusNode;N=N.focusOffset;try{y.nodeType,et.nodeType}catch{y=null;break t}var dt=0,yt=-1,Ct=-1,qt=0,ne=0,re=c,ee=null;e:for(;;){for(var ye;re!==y||q!==0&&re.nodeType!==3||(yt=dt+q),re!==et||N!==0&&re.nodeType!==3||(Ct=dt+N),re.nodeType===3&&(dt+=re.nodeValue.length),(ye=re.firstChild)!==null;)ee=re,re=ye;for(;;){if(re===c)break e;if(ee===y&&++qt===q&&(yt=dt),ee===et&&++ne===N&&(Ct=dt),(ye=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=ye}y=yt===-1||Ct===-1?null:{start:yt,end:Ct}}else y=null}y=y||{start:0,end:0}}else y=null;for(Wg={focusedElem:c,selectionRange:y},xh=!1,ve=f;ve!==null;)if(f=ve,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,ve=c;else for(;ve!==null;){f=ve;try{var Ee=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Le=Ee.memoizedProps,Xn=Ee.memoizedState,Ot=f.stateNode,Tt=Ot.getSnapshotBeforeUpdate(f.elementType===f.type?Le:Jr(f.type,Le),Xn);Ot.__reactInternalSnapshotBeforeUpdate=Tt}break;case 3:var Dt=f.stateNode.containerInfo;Dt.nodeType===1?Dt.textContent="":Dt.nodeType===9&&Dt.documentElement&&Dt.removeChild(Dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(oe){Hn(f,f.return,oe)}if(c=f.sibling,c!==null){c.return=f.return,ve=c;break}ve=f.return}return Ee=_E,_E=!1,Ee}function Ad(c,f,y){var N=f.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var q=N=N.next;do{if((q.tag&c)===c){var et=q.destroy;q.destroy=void 0,et!==void 0&&ky(f,y,et)}q=q.next}while(q!==N)}}function ip(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var N=y.create;y.destroy=N()}y=y.next}while(y!==f)}}function Ry(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=y;break;default:c=y}typeof f=="function"?f(c):f.current=c}}function bE(c){var f=c.alternate;f!==null&&(c.alternate=null,bE(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&(delete f[_s],delete f[gd],delete f[Hg],delete f[xB],delete f[EB])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function vE(c){return c.tag===5||c.tag===3||c.tag===4}function xE(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||vE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ny(c,f,y){var N=c.tag;if(N===5||N===6)c=c.stateNode,f?y.nodeType===8?y.parentNode.insertBefore(c,f):y.insertBefore(c,f):(y.nodeType===8?(f=y.parentNode,f.insertBefore(c,y)):(f=y,f.appendChild(c)),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=Bh));else if(N!==4&&(c=c.child,c!==null))for(Ny(c,f,y),c=c.sibling;c!==null;)Ny(c,f,y),c=c.sibling}function My(c,f,y){var N=c.tag;if(N===5||N===6)c=c.stateNode,f?y.insertBefore(c,f):y.appendChild(c);else if(N!==4&&(c=c.child,c!==null))for(My(c,f,y),c=c.sibling;c!==null;)My(c,f,y),c=c.sibling}var Ai=null,ts=!1;function Xo(c,f,y){for(y=y.child;y!==null;)EE(c,f,y),y=y.sibling}function EE(c,f,y){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Uo,y)}catch{}switch(y.tag){case 5:ji||Sl(y,f);case 6:var N=Ai,q=ts;Ai=null,Xo(c,f,y),Ai=N,ts=q,Ai!==null&&(ts?(c=Ai,y=y.stateNode,c.nodeType===8?c.parentNode.removeChild(y):c.removeChild(y)):Ai.removeChild(y.stateNode));break;case 18:Ai!==null&&(ts?(c=Ai,y=y.stateNode,c.nodeType===8?$g(c.parentNode,y):c.nodeType===1&&$g(c,y),sd(c)):$g(Ai,y.stateNode));break;case 4:N=Ai,q=ts,Ai=y.stateNode.containerInfo,ts=!0,Xo(c,f,y),Ai=N,ts=q;break;case 0:case 11:case 14:case 15:if(!ji&&(N=y.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){q=N=N.next;do{var et=q,dt=et.destroy;et=et.tag,dt!==void 0&&((et&2)!==0||(et&4)!==0)&&ky(y,f,dt),q=q.next}while(q!==N)}Xo(c,f,y);break;case 1:if(!ji&&(Sl(y,f),N=y.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=y.memoizedProps,N.state=y.memoizedState,N.componentWillUnmount()}catch(yt){Hn(y,f,yt)}Xo(c,f,y);break;case 21:Xo(c,f,y);break;case 22:y.mode&1?(ji=(N=ji)||y.memoizedState!==null,Xo(c,f,y),ji=N):Xo(c,f,y);break;default:Xo(c,f,y)}}function SE(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new UB),f.forEach(function(N){var q=ZB.bind(null,c,N);y.has(N)||(y.add(N),N.then(q,q))})}}function es(c,f){var y=f.deletions;if(y!==null)for(var N=0;N<y.length;N++){var q=y[N];try{var et=c,dt=f,yt=dt;t:for(;yt!==null;){switch(yt.tag){case 5:Ai=yt.stateNode,ts=!1;break t;case 3:Ai=yt.stateNode.containerInfo,ts=!0;break t;case 4:Ai=yt.stateNode.containerInfo,ts=!0;break t}yt=yt.return}if(Ai===null)throw Error(e(160));EE(et,dt,q),Ai=null,ts=!1;var Ct=q.alternate;Ct!==null&&(Ct.return=null),q.return=null}catch(qt){Hn(q,f,qt)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)LE(f,c),f=f.sibling}function LE(c,f){var y=c.alternate,N=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(es(f,c),xs(c),N&4){try{Ad(3,c,c.return),ip(3,c)}catch(Le){Hn(c,c.return,Le)}try{Ad(5,c,c.return)}catch(Le){Hn(c,c.return,Le)}}break;case 1:es(f,c),xs(c),N&512&&y!==null&&Sl(y,y.return);break;case 5:if(es(f,c),xs(c),N&512&&y!==null&&Sl(y,y.return),c.flags&32){var q=c.stateNode;try{ut(q,"")}catch(Le){Hn(c,c.return,Le)}}if(N&4&&(q=c.stateNode,q!=null)){var et=c.memoizedProps,dt=y!==null?y.memoizedProps:et,yt=c.type,Ct=c.updateQueue;if(c.updateQueue=null,Ct!==null)try{yt==="input"&&et.type==="radio"&&et.name!=null&&Ft(q,et),Et(yt,dt);var qt=Et(yt,et);for(dt=0;dt<Ct.length;dt+=2){var ne=Ct[dt],re=Ct[dt+1];ne==="style"?M(q,re):ne==="dangerouslySetInnerHTML"?Yt(q,re):ne==="children"?ut(q,re):P(q,ne,re,qt)}switch(yt){case"input":Pt(q,et);break;case"textarea":se(q,et);break;case"select":var ee=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!et.multiple;var ye=et.value;ye!=null?Rt(q,!!et.multiple,ye,!1):ee!==!!et.multiple&&(et.defaultValue!=null?Rt(q,!!et.multiple,et.defaultValue,!0):Rt(q,!!et.multiple,et.multiple?[]:"",!1))}q[gd]=et}catch(Le){Hn(c,c.return,Le)}}break;case 6:if(es(f,c),xs(c),N&4){if(c.stateNode===null)throw Error(e(162));q=c.stateNode,et=c.memoizedProps;try{q.nodeValue=et}catch(Le){Hn(c,c.return,Le)}}break;case 3:if(es(f,c),xs(c),N&4&&y!==null&&y.memoizedState.isDehydrated)try{sd(f.containerInfo)}catch(Le){Hn(c,c.return,Le)}break;case 4:es(f,c),xs(c);break;case 13:es(f,c),xs(c),q=c.child,q.flags&8192&&(et=q.memoizedState!==null,q.stateNode.isHidden=et,!et||q.alternate!==null&&q.alternate.memoizedState!==null||(Oy=In())),N&4&&SE(c);break;case 22:if(ne=y!==null&&y.memoizedState!==null,c.mode&1?(ji=(qt=ji)||ne,es(f,c),ji=qt):es(f,c),xs(c),N&8192){if(qt=c.memoizedState!==null,(c.stateNode.isHidden=qt)&&!ne&&(c.mode&1)!==0)for(ve=c,ne=c.child;ne!==null;){for(re=ve=ne;ve!==null;){switch(ee=ve,ye=ee.child,ee.tag){case 0:case 11:case 14:case 15:Ad(4,ee,ee.return);break;case 1:Sl(ee,ee.return);var Ee=ee.stateNode;if(typeof Ee.componentWillUnmount=="function"){N=ee,y=ee.return;try{f=N,Ee.props=f.memoizedProps,Ee.state=f.memoizedState,Ee.componentWillUnmount()}catch(Le){Hn(N,y,Le)}}break;case 5:Sl(ee,ee.return);break;case 22:if(ee.memoizedState!==null){IE(re);continue}}ye!==null?(ye.return=ee,ve=ye):IE(re)}ne=ne.sibling}t:for(ne=null,re=c;;){if(re.tag===5){if(ne===null){ne=re;try{q=re.stateNode,qt?(et=q.style,typeof et.setProperty=="function"?et.setProperty("display","none","important"):et.display="none"):(yt=re.stateNode,Ct=re.memoizedProps.style,dt=Ct!=null&&Ct.hasOwnProperty("display")?Ct.display:null,yt.style.display=at("display",dt))}catch(Le){Hn(c,c.return,Le)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=qt?"":re.memoizedProps}catch(Le){Hn(c,c.return,Le)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===c)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===c)break t;for(;re.sibling===null;){if(re.return===null||re.return===c)break t;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:es(f,c),xs(c),N&4&&SE(c);break;case 21:break;default:es(f,c),xs(c)}}function xs(c){var f=c.flags;if(f&2){try{t:{for(var y=c.return;y!==null;){if(vE(y)){var N=y;break t}y=y.return}throw Error(e(160))}switch(N.tag){case 5:var q=N.stateNode;N.flags&32&&(ut(q,""),N.flags&=-33);var et=xE(c);My(c,et,q);break;case 3:case 4:var dt=N.stateNode.containerInfo,yt=xE(c);Ny(c,yt,dt);break;default:throw Error(e(161))}}catch(Ct){Hn(c,c.return,Ct)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function zB(c,f,y){ve=c,CE(c)}function CE(c,f,y){for(var N=(c.mode&1)!==0;ve!==null;){var q=ve,et=q.child;if(q.tag===22&&N){var dt=q.memoizedState!==null||np;if(!dt){var yt=q.alternate,Ct=yt!==null&&yt.memoizedState!==null||ji;yt=np;var qt=ji;if(np=dt,(ji=Ct)&&!qt)for(ve=q;ve!==null;)dt=ve,Ct=dt.child,dt.tag===22&&dt.memoizedState!==null?TE(q):Ct!==null?(Ct.return=dt,ve=Ct):TE(q);for(;et!==null;)ve=et,CE(et),et=et.sibling;ve=q,np=yt,ji=qt}AE(c)}else(q.subtreeFlags&8772)!==0&&et!==null?(et.return=q,ve=et):AE(c)}}function AE(c){for(;ve!==null;){var f=ve;if((f.flags&8772)!==0){var y=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ji||ip(5,f);break;case 1:var N=f.stateNode;if(f.flags&4&&!ji)if(y===null)N.componentDidMount();else{var q=f.elementType===f.type?y.memoizedProps:Jr(f.type,y.memoizedProps);N.componentDidUpdate(q,y.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var et=f.updateQueue;et!==null&&Ix(f,et,N);break;case 3:var dt=f.updateQueue;if(dt!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=f.child.stateNode;break;case 1:y=f.child.stateNode}Ix(f,dt,y)}break;case 5:var yt=f.stateNode;if(y===null&&f.flags&4){y=yt;var Ct=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":Ct.autoFocus&&y.focus();break;case"img":Ct.src&&(y.src=Ct.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var qt=f.alternate;if(qt!==null){var ne=qt.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&sd(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}ji||f.flags&512&&Ry(f)}catch(ee){Hn(f,f.return,ee)}}if(f===c){ve=null;break}if(y=f.sibling,y!==null){y.return=f.return,ve=y;break}ve=f.return}}function IE(c){for(;ve!==null;){var f=ve;if(f===c){ve=null;break}var y=f.sibling;if(y!==null){y.return=f.return,ve=y;break}ve=f.return}}function TE(c){for(;ve!==null;){var f=ve;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{ip(4,f)}catch(Ct){Hn(f,y,Ct)}break;case 1:var N=f.stateNode;if(typeof N.componentDidMount=="function"){var q=f.return;try{N.componentDidMount()}catch(Ct){Hn(f,q,Ct)}}var et=f.return;try{Ry(f)}catch(Ct){Hn(f,et,Ct)}break;case 5:var dt=f.return;try{Ry(f)}catch(Ct){Hn(f,dt,Ct)}}}catch(Ct){Hn(f,f.return,Ct)}if(f===c){ve=null;break}var yt=f.sibling;if(yt!==null){yt.return=f.return,ve=yt;break}ve=f.return}}var GB=Math.ceil,rp=W.ReactCurrentDispatcher,By=W.ReactCurrentOwner,Ur=W.ReactCurrentBatchConfig,on=0,_i=null,si=null,Ii=0,Lr=0,Ll=Ho(0),fi=0,Id=null,Ja=0,sp=0,Py=0,Td=null,fr=null,Oy=0,Cl=1/0,to=null,op=!1,Fy=null,Jo=null,ap=!1,ta=null,cp=0,kd=0,jy=null,lp=-1,up=0;function Qi(){return(on&6)!==0?In():lp!==-1?lp:lp=In()}function ea(c){return(c.mode&1)===0?1:(on&2)!==0&&Ii!==0?Ii&-Ii:LB.transition!==null?(up===0&&(up=x3()),up):(c=_n,c!==0||(c=window.event,c=c===void 0?16:R3(c.type)),c)}function ns(c,f,y,N){if(50<kd)throw kd=0,jy=null,Error(e(185));td(c,y,N),((on&2)===0||c!==_i)&&(c===_i&&((on&2)===0&&(sp|=y),fi===4&&na(c,Ii)),hr(c,N),y===1&&on===0&&(f.mode&1)===0&&(Cl=In()+500,jh&&Zo()))}function hr(c,f){var y=c.callbackNode;LM(c,f);var N=_h(c,c===_i?Ii:0);if(N===0)y!==null&&Qr(y),c.callbackNode=null,c.callbackPriority=0;else if(f=N&-N,c.callbackPriority!==f){if(y!=null&&Qr(y),f===1)c.tag===0?SB(RE.bind(null,c)):gx(RE.bind(null,c)),bB(function(){(on&6)===0&&Zo()}),y=null;else{switch(E3(N)){case 1:y=qa;break;case 4:y=rl;break;case 16:y=jo;break;case 536870912:y=sl;break;default:y=jo}y=UE(y,kE.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function kE(c,f){if(lp=-1,up=0,(on&6)!==0)throw Error(e(327));var y=c.callbackNode;if(Al()&&c.callbackNode!==y)return null;var N=_h(c,c===_i?Ii:0);if(N===0)return null;if((N&30)!==0||(N&c.expiredLanes)!==0||f)f=dp(c,N);else{f=N;var q=on;on|=2;var et=ME();(_i!==c||Ii!==f)&&(to=null,Cl=In()+500,ec(c,f));do try{qB();break}catch(yt){NE(c,yt)}while(!0);ny(),rp.current=et,on=q,si!==null?f=0:(_i=null,Ii=0,f=fi)}if(f!==0){if(f===2&&(q=wg(c),q!==0&&(N=q,f=Uy(c,q))),f===1)throw y=Id,ec(c,0),na(c,N),hr(c,In()),y;if(f===6)na(c,N);else{if(q=c.current.alternate,(N&30)===0&&!WB(q)&&(f=dp(c,N),f===2&&(et=wg(c),et!==0&&(N=et,f=Uy(c,et))),f===1))throw y=Id,ec(c,0),na(c,N),hr(c,In()),y;switch(c.finishedWork=q,c.finishedLanes=N,f){case 0:case 1:throw Error(e(345));case 2:nc(c,fr,to);break;case 3:if(na(c,N),(N&130023424)===N&&(f=Oy+500-In(),10<f)){if(_h(c,0)!==0)break;if(q=c.suspendedLanes,(q&N)!==N){Qi(),c.pingedLanes|=c.suspendedLanes&q;break}c.timeoutHandle=qg(nc.bind(null,c,fr,to),f);break}nc(c,fr,to);break;case 4:if(na(c,N),(N&4194240)===N)break;for(f=c.eventTimes,q=-1;0<N;){var dt=31-Ki(N);et=1<<dt,dt=f[dt],dt>q&&(q=dt),N&=~et}if(N=q,N=In()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*GB(N/1960))-N,10<N){c.timeoutHandle=qg(nc.bind(null,c,fr,to),N);break}nc(c,fr,to);break;case 5:nc(c,fr,to);break;default:throw Error(e(329))}}}return hr(c,In()),c.callbackNode===y?kE.bind(null,c):null}function Uy(c,f){var y=Td;return c.current.memoizedState.isDehydrated&&(ec(c,f).flags|=256),c=dp(c,f),c!==2&&(f=fr,fr=y,f!==null&&Dy(f)),c}function Dy(c){fr===null?fr=c:fr.push.apply(fr,c)}function WB(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var N=0;N<y.length;N++){var q=y[N],et=q.getSnapshot;q=q.value;try{if(!Yr(et(),q))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function na(c,f){for(f&=~Py,f&=~sp,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-Ki(f),N=1<<y;c[y]=-1,f&=~N}}function RE(c){if((on&6)!==0)throw Error(e(327));Al();var f=_h(c,0);if((f&1)===0)return hr(c,In()),null;var y=dp(c,f);if(c.tag!==0&&y===2){var N=wg(c);N!==0&&(f=N,y=Uy(c,N))}if(y===1)throw y=Id,ec(c,0),na(c,f),hr(c,In()),y;if(y===6)throw Error(e(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,nc(c,fr,to),hr(c,In()),null}function zy(c,f){var y=on;on|=1;try{return c(f)}finally{on=y,on===0&&(Cl=In()+500,jh&&Zo())}}function tc(c){ta!==null&&ta.tag===0&&(on&6)===0&&Al();var f=on;on|=1;var y=Ur.transition,N=_n;try{if(Ur.transition=null,_n=1,c)return c()}finally{_n=N,Ur.transition=y,on=f,(on&6)===0&&Zo()}}function Gy(){Lr=Ll.current,kn(Ll)}function ec(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==-1&&(c.timeoutHandle=-1,_B(y)),si!==null)for(y=si.return;y!==null;){var N=y;switch(Yg(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Oh();break;case 3:xl(),kn(lr),kn(Pi),uy();break;case 5:cy(N);break;case 4:xl();break;case 13:kn(Dn);break;case 19:kn(Dn);break;case 10:iy(N.type._context);break;case 22:case 23:Gy()}y=y.return}if(_i=c,si=c=ia(c.current,null),Ii=Lr=f,fi=0,Id=null,Py=sp=Ja=0,fr=Td=null,Qa!==null){for(f=0;f<Qa.length;f++)if(y=Qa[f],N=y.interleaved,N!==null){y.interleaved=null;var q=N.next,et=y.pending;if(et!==null){var dt=et.next;et.next=q,N.next=dt}y.pending=N}Qa=null}return c}function NE(c,f){do{var y=si;try{if(ny(),Kh.current=Xh,Zh){for(var N=zn.memoizedState;N!==null;){var q=N.queue;q!==null&&(q.pending=null),N=N.next}Zh=!1}if(Xa=0,wi=di=zn=null,xd=!1,Ed=0,By.current=null,y===null||y.return===null){fi=1,Id=f,si=null;break}t:{var et=c,dt=y.return,yt=y,Ct=f;if(f=Ii,yt.flags|=32768,Ct!==null&&typeof Ct=="object"&&typeof Ct.then=="function"){var qt=Ct,ne=yt,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var ee=ne.alternate;ee?(ne.updateQueue=ee.updateQueue,ne.memoizedState=ee.memoizedState,ne.lanes=ee.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ye=iE(dt);if(ye!==null){ye.flags&=-257,rE(ye,dt,yt,et,f),ye.mode&1&&nE(et,qt,f),f=ye,Ct=qt;var Ee=f.updateQueue;if(Ee===null){var Le=new Set;Le.add(Ct),f.updateQueue=Le}else Ee.add(Ct);break t}else{if((f&1)===0){nE(et,qt,f),Wy();break t}Ct=Error(e(426))}}else if(On&&yt.mode&1){var Xn=iE(dt);if(Xn!==null){(Xn.flags&65536)===0&&(Xn.flags|=256),rE(Xn,dt,yt,et,f),ty(El(Ct,yt));break t}}et=Ct=El(Ct,yt),fi!==4&&(fi=2),Td===null?Td=[et]:Td.push(et),et=dt;do{switch(et.tag){case 3:et.flags|=65536,f&=-f,et.lanes|=f;var Ot=tE(et,Ct,f);Ax(et,Ot);break t;case 1:yt=Ct;var Tt=et.type,Dt=et.stateNode;if((et.flags&128)===0&&(typeof Tt.getDerivedStateFromError=="function"||Dt!==null&&typeof Dt.componentDidCatch=="function"&&(Jo===null||!Jo.has(Dt)))){et.flags|=65536,f&=-f,et.lanes|=f;var oe=eE(et,yt,f);Ax(et,oe);break t}}et=et.return}while(et!==null)}PE(y)}catch(Ce){f=Ce,si===y&&y!==null&&(si=y=y.return);continue}break}while(!0)}function ME(){var c=rp.current;return rp.current=Xh,c===null?Xh:c}function Wy(){(fi===0||fi===3||fi===2)&&(fi=4),_i===null||(Ja&268435455)===0&&(sp&268435455)===0||na(_i,Ii)}function dp(c,f){var y=on;on|=2;var N=ME();(_i!==c||Ii!==f)&&(to=null,ec(c,f));do try{VB();break}catch(q){NE(c,q)}while(!0);if(ny(),on=y,rp.current=N,si!==null)throw Error(e(261));return _i=null,Ii=0,fi}function VB(){for(;si!==null;)BE(si)}function qB(){for(;si!==null&&!Hu();)BE(si)}function BE(c){var f=jE(c.alternate,c,Lr);c.memoizedProps=c.pendingProps,f===null?PE(c):si=f,By.current=null}function PE(c){var f=c;do{var y=f.alternate;if(c=f.return,(f.flags&32768)===0){if(y=FB(y,f,Lr),y!==null){si=y;return}}else{if(y=jB(y,f),y!==null){y.flags&=32767,si=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{fi=6,si=null;return}}if(f=f.sibling,f!==null){si=f;return}si=f=c}while(f!==null);fi===0&&(fi=5)}function nc(c,f,y){var N=_n,q=Ur.transition;try{Ur.transition=null,_n=1,$B(c,f,y,N)}finally{Ur.transition=q,_n=N}return null}function $B(c,f,y,N){do Al();while(ta!==null);if((on&6)!==0)throw Error(e(327));y=c.finishedWork;var q=c.finishedLanes;if(y===null)return null;if(c.finishedWork=null,c.finishedLanes=0,y===c.current)throw Error(e(177));c.callbackNode=null,c.callbackPriority=0;var et=y.lanes|y.childLanes;if(CM(c,et),c===_i&&(si=_i=null,Ii=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||ap||(ap=!0,UE(jo,function(){return Al(),null})),et=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||et){et=Ur.transition,Ur.transition=null;var dt=_n;_n=1;var yt=on;on|=4,By.current=null,DB(c,y),LE(y,c),fB(Wg),xh=!!Gg,Wg=Gg=null,c.current=y,zB(y),Ku(),on=yt,_n=dt,Ur.transition=et}else c.current=y;if(ap&&(ap=!1,ta=c,cp=q),et=c.pendingLanes,et===0&&(Jo=null),Yu(y.stateNode),hr(c,In()),f!==null)for(N=c.onRecoverableError,y=0;y<f.length;y++)q=f[y],N(q.value,{componentStack:q.stack,digest:q.digest});if(op)throw op=!1,c=Fy,Fy=null,c;return(cp&1)!==0&&c.tag!==0&&Al(),et=c.pendingLanes,(et&1)!==0?c===jy?kd++:(kd=0,jy=c):kd=0,Zo(),null}function Al(){if(ta!==null){var c=E3(cp),f=Ur.transition,y=_n;try{if(Ur.transition=null,_n=16>c?16:c,ta===null)var N=!1;else{if(c=ta,ta=null,cp=0,(on&6)!==0)throw Error(e(331));var q=on;for(on|=4,ve=c.current;ve!==null;){var et=ve,dt=et.child;if((ve.flags&16)!==0){var yt=et.deletions;if(yt!==null){for(var Ct=0;Ct<yt.length;Ct++){var qt=yt[Ct];for(ve=qt;ve!==null;){var ne=ve;switch(ne.tag){case 0:case 11:case 15:Ad(8,ne,et)}var re=ne.child;if(re!==null)re.return=ne,ve=re;else for(;ve!==null;){ne=ve;var ee=ne.sibling,ye=ne.return;if(bE(ne),ne===qt){ve=null;break}if(ee!==null){ee.return=ye,ve=ee;break}ve=ye}}}var Ee=et.alternate;if(Ee!==null){var Le=Ee.child;if(Le!==null){Ee.child=null;do{var Xn=Le.sibling;Le.sibling=null,Le=Xn}while(Le!==null)}}ve=et}}if((et.subtreeFlags&2064)!==0&&dt!==null)dt.return=et,ve=dt;else t:for(;ve!==null;){if(et=ve,(et.flags&2048)!==0)switch(et.tag){case 0:case 11:case 15:Ad(9,et,et.return)}var Ot=et.sibling;if(Ot!==null){Ot.return=et.return,ve=Ot;break t}ve=et.return}}var Tt=c.current;for(ve=Tt;ve!==null;){dt=ve;var Dt=dt.child;if((dt.subtreeFlags&2064)!==0&&Dt!==null)Dt.return=dt,ve=Dt;else t:for(dt=Tt;ve!==null;){if(yt=ve,(yt.flags&2048)!==0)try{switch(yt.tag){case 0:case 11:case 15:ip(9,yt)}}catch(Ce){Hn(yt,yt.return,Ce)}if(yt===dt){ve=null;break t}var oe=yt.sibling;if(oe!==null){oe.return=yt.return,ve=oe;break t}ve=yt.return}}if(on=q,Zo(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Uo,c)}catch{}N=!0}return N}finally{_n=y,Ur.transition=f}}return!1}function OE(c,f,y){f=El(y,f),f=tE(c,f,1),c=Yo(c,f,1),f=Qi(),c!==null&&(td(c,1,f),hr(c,f))}function Hn(c,f,y){if(c.tag===3)OE(c,c,y);else for(;f!==null;){if(f.tag===3){OE(f,c,y);break}else if(f.tag===1){var N=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Jo===null||!Jo.has(N))){c=El(y,c),c=eE(f,c,1),f=Yo(f,c,1),c=Qi(),f!==null&&(td(f,1,c),hr(f,c));break}}f=f.return}}function HB(c,f,y){var N=c.pingCache;N!==null&&N.delete(f),f=Qi(),c.pingedLanes|=c.suspendedLanes&y,_i===c&&(Ii&y)===y&&(fi===4||fi===3&&(Ii&130023424)===Ii&&500>In()-Oy?ec(c,0):Py|=y),hr(c,f)}function FE(c,f){f===0&&((c.mode&1)===0?f=1:(f=wh,wh<<=1,(wh&130023424)===0&&(wh=4194304)));var y=Qi();c=Ys(c,f),c!==null&&(td(c,f,y),hr(c,y))}function KB(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),FE(c,y)}function ZB(c,f){var y=0;switch(c.tag){case 13:var N=c.stateNode,q=c.memoizedState;q!==null&&(y=q.retryLane);break;case 19:N=c.stateNode;break;default:throw Error(e(314))}N!==null&&N.delete(f),FE(c,y)}var jE;jE=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||lr.current)dr=!0;else{if((c.lanes&y)===0&&(f.flags&128)===0)return dr=!1,OB(c,f,y);dr=(c.flags&131072)!==0}else dr=!1,On&&(f.flags&1048576)!==0&&yx(f,Dh,f.index);switch(f.lanes=0,f.tag){case 2:var N=f.type;ep(c,f),c=f.pendingProps;var q=ml(f,Pi.current);vl(f,y),q=hy(null,f,N,c,q,y);var et=py();return f.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,ur(N)?(et=!0,Fh(f)):et=!1,f.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,oy(f),q.updater=Jh,f.stateNode=q,q._reactInternals=f,by(f,N,c,y),f=Sy(null,f,N,!0,et,y)):(f.tag=0,On&&et&&Qg(f),Zi(null,f,q,y),f=f.child),f;case 16:N=f.elementType;t:{switch(ep(c,f),c=f.pendingProps,q=N._init,N=q(N._payload),f.type=N,q=f.tag=YB(N),c=Jr(N,c),q){case 0:f=Ey(null,f,N,c,y);break t;case 1:f=uE(null,f,N,c,y);break t;case 11:f=sE(null,f,N,c,y);break t;case 14:f=oE(null,f,N,Jr(N.type,c),y);break t}throw Error(e(306,N,""))}return f;case 0:return N=f.type,q=f.pendingProps,q=f.elementType===N?q:Jr(N,q),Ey(c,f,N,q,y);case 1:return N=f.type,q=f.pendingProps,q=f.elementType===N?q:Jr(N,q),uE(c,f,N,q,y);case 3:t:{if(dE(f),c===null)throw Error(e(387));N=f.pendingProps,et=f.memoizedState,q=et.element,Cx(c,f),$h(f,N,null,y);var dt=f.memoizedState;if(N=dt.element,et.isDehydrated)if(et={element:N,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},f.updateQueue.baseState=et,f.memoizedState=et,f.flags&256){q=El(Error(e(423)),f),f=fE(c,f,N,y,q);break t}else if(N!==q){q=El(Error(e(424)),f),f=fE(c,f,N,y,q);break t}else for(Sr=$o(f.stateNode.containerInfo.firstChild),Er=f,On=!0,Xr=null,y=Sx(f,null,N,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(wl(),N===q){f=Js(c,f,y);break t}Zi(c,f,N,y)}f=f.child}return f;case 5:return Tx(f),c===null&&Jg(f),N=f.type,q=f.pendingProps,et=c!==null?c.memoizedProps:null,dt=q.children,Vg(N,q)?dt=null:et!==null&&Vg(N,et)&&(f.flags|=32),lE(c,f),Zi(c,f,dt,y),f.child;case 6:return c===null&&Jg(f),null;case 13:return hE(c,f,y);case 4:return ay(f,f.stateNode.containerInfo),N=f.pendingProps,c===null?f.child=_l(f,null,N,y):Zi(c,f,N,y),f.child;case 11:return N=f.type,q=f.pendingProps,q=f.elementType===N?q:Jr(N,q),sE(c,f,N,q,y);case 7:return Zi(c,f,f.pendingProps,y),f.child;case 8:return Zi(c,f,f.pendingProps.children,y),f.child;case 12:return Zi(c,f,f.pendingProps.children,y),f.child;case 10:t:{if(N=f.type._context,q=f.pendingProps,et=f.memoizedProps,dt=q.value,En(Wh,N._currentValue),N._currentValue=dt,et!==null)if(Yr(et.value,dt)){if(et.children===q.children&&!lr.current){f=Js(c,f,y);break t}}else for(et=f.child,et!==null&&(et.return=f);et!==null;){var yt=et.dependencies;if(yt!==null){dt=et.child;for(var Ct=yt.firstContext;Ct!==null;){if(Ct.context===N){if(et.tag===1){Ct=Xs(-1,y&-y),Ct.tag=2;var qt=et.updateQueue;if(qt!==null){qt=qt.shared;var ne=qt.pending;ne===null?Ct.next=Ct:(Ct.next=ne.next,ne.next=Ct),qt.pending=Ct}}et.lanes|=y,Ct=et.alternate,Ct!==null&&(Ct.lanes|=y),ry(et.return,y,f),yt.lanes|=y;break}Ct=Ct.next}}else if(et.tag===10)dt=et.type===f.type?null:et.child;else if(et.tag===18){if(dt=et.return,dt===null)throw Error(e(341));dt.lanes|=y,yt=dt.alternate,yt!==null&&(yt.lanes|=y),ry(dt,y,f),dt=et.sibling}else dt=et.child;if(dt!==null)dt.return=et;else for(dt=et;dt!==null;){if(dt===f){dt=null;break}if(et=dt.sibling,et!==null){et.return=dt.return,dt=et;break}dt=dt.return}et=dt}Zi(c,f,q.children,y),f=f.child}return f;case 9:return q=f.type,N=f.pendingProps.children,vl(f,y),q=Fr(q),N=N(q),f.flags|=1,Zi(c,f,N,y),f.child;case 14:return N=f.type,q=Jr(N,f.pendingProps),q=Jr(N.type,q),oE(c,f,N,q,y);case 15:return aE(c,f,f.type,f.pendingProps,y);case 17:return N=f.type,q=f.pendingProps,q=f.elementType===N?q:Jr(N,q),ep(c,f),f.tag=1,ur(N)?(c=!0,Fh(f)):c=!1,vl(f,y),Xx(f,N,q),by(f,N,q,y),Sy(null,f,N,!0,c,y);case 19:return mE(c,f,y);case 22:return cE(c,f,y)}throw Error(e(156,f.tag))};function UE(c,f){return ar(c,f)}function QB(c,f,y,N){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(c,f,y,N){return new QB(c,f,y,N)}function Vy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function YB(c){if(typeof c=="function")return Vy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===z)return 11;if(c===T)return 14}return 2}function ia(c,f){var y=c.alternate;return y===null?(y=Dr(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function fp(c,f,y,N,q,et){var dt=2;if(N=c,typeof c=="function")Vy(c)&&(dt=1);else if(typeof c=="string")dt=5;else t:switch(c){case b:return ic(y.children,q,et,f);case B:dt=8,q|=8;break;case J:return c=Dr(12,y,f,q|2),c.elementType=J,c.lanes=et,c;case I:return c=Dr(13,y,f,q),c.elementType=I,c.lanes=et,c;case w:return c=Dr(19,y,f,q),c.elementType=w,c.lanes=et,c;case Y:return hp(y,q,et,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case it:dt=10;break t;case st:dt=9;break t;case z:dt=11;break t;case T:dt=14;break t;case V:dt=16,N=null;break t}throw Error(e(130,c==null?c:typeof c,""))}return f=Dr(dt,y,f,q),f.elementType=c,f.type=N,f.lanes=et,f}function ic(c,f,y,N){return c=Dr(7,c,N,f),c.lanes=y,c}function hp(c,f,y,N){return c=Dr(22,c,N,f),c.elementType=Y,c.lanes=y,c.stateNode={isHidden:!1},c}function qy(c,f,y){return c=Dr(6,c,null,f),c.lanes=y,c}function $y(c,f,y){return f=Dr(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function XB(c,f,y,N,q){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_g(0),this.expirationTimes=_g(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_g(0),this.identifierPrefix=N,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function Hy(c,f,y,N,q,et,dt,yt,Ct){return c=new XB(c,f,y,yt,Ct),f===1?(f=1,et===!0&&(f|=8)):f=0,et=Dr(3,null,null,f),c.current=et,et.stateNode=c,et.memoizedState={element:N,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},oy(et),c}function JB(c,f,y){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:N==null?null:""+N,children:c,containerInfo:f,implementation:y}}function DE(c){if(!c)return Ko;c=c._reactInternals;t:{if(Li(c)!==c||c.tag!==1)throw Error(e(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break t;case 1:if(ur(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break t}}f=f.return}while(f!==null);throw Error(e(171))}if(c.tag===1){var y=c.type;if(ur(y))return px(c,y,f)}return f}function zE(c,f,y,N,q,et,dt,yt,Ct){return c=Hy(y,N,!0,c,q,et,dt,yt,Ct),c.context=DE(null),y=c.current,N=Qi(),q=ea(y),et=Xs(N,q),et.callback=f??null,Yo(y,et,q),c.current.lanes=q,td(c,q,N),hr(c,N),c}function pp(c,f,y,N){var q=f.current,et=Qi(),dt=ea(q);return y=DE(y),f.context===null?f.context=y:f.pendingContext=y,f=Xs(et,dt),f.payload={element:c},N=N===void 0?null:N,N!==null&&(f.callback=N),c=Yo(q,f,dt),c!==null&&(ns(c,q,dt,et),qh(c,q,dt)),dt}function mp(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function GE(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function Ky(c,f){GE(c,f),(c=c.alternate)&&GE(c,f)}function tP(){return null}var WE=typeof reportError=="function"?reportError:function(c){console.error(c)};function Zy(c){this._internalRoot=c}gp.prototype.render=Zy.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(e(409));pp(c,f,null,null)},gp.prototype.unmount=Zy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;tc(function(){pp(null,c,null,null)}),f[Hs]=null}};function gp(c){this._internalRoot=c}gp.prototype.unstable_scheduleHydration=function(c){if(c){var f=C3();c={blockedOn:null,target:c,priority:f};for(var y=0;y<Wo.length&&f!==0&&f<Wo[y].priority;y++);Wo.splice(y,0,c),y===0&&T3(c)}};function Qy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function yp(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function VE(){}function eP(c,f,y,N,q){if(q){if(typeof N=="function"){var et=N;N=function(){var qt=mp(dt);et.call(qt)}}var dt=zE(f,N,c,0,null,!1,!1,"",VE);return c._reactRootContainer=dt,c[Hs]=dt.current,pd(c.nodeType===8?c.parentNode:c),tc(),dt}for(;q=c.lastChild;)c.removeChild(q);if(typeof N=="function"){var yt=N;N=function(){var qt=mp(Ct);yt.call(qt)}}var Ct=Hy(c,0,!1,null,null,!1,!1,"",VE);return c._reactRootContainer=Ct,c[Hs]=Ct.current,pd(c.nodeType===8?c.parentNode:c),tc(function(){pp(f,Ct,y,N)}),Ct}function wp(c,f,y,N,q){var et=y._reactRootContainer;if(et){var dt=et;if(typeof q=="function"){var yt=q;q=function(){var Ct=mp(dt);yt.call(Ct)}}pp(f,dt,c,q)}else dt=eP(y,f,c,q,N);return mp(dt)}S3=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=Ju(f.pendingLanes);y!==0&&(bg(f,y|1),hr(f,In()),(on&6)===0&&(Cl=In()+500,Zo()))}break;case 13:tc(function(){var N=Ys(c,1);if(N!==null){var q=Qi();ns(N,c,1,q)}}),Ky(c,1)}},vg=function(c){if(c.tag===13){var f=Ys(c,134217728);if(f!==null){var y=Qi();ns(f,c,134217728,y)}Ky(c,134217728)}},L3=function(c){if(c.tag===13){var f=ea(c),y=Ys(c,f);if(y!==null){var N=Qi();ns(y,c,f,N)}Ky(c,f)}},C3=function(){return _n},A3=function(c,f){var y=_n;try{return _n=c,f()}finally{_n=y}},Lt=function(c,f,y){switch(f){case"input":if(Pt(c,y),f=y.name,y.type==="radio"&&f!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<y.length;f++){var N=y[f];if(N!==c&&N.form===c.form){var q=Ph(N);if(!q)throw Error(e(90));ft(N),Pt(N,q)}}}break;case"textarea":se(c,y);break;case"select":f=y.value,f!=null&&Rt(c,!!y.multiple,f,!1)}},Jt=zy,Xt=tc;var nP={usingClientEntryPoint:!1,Events:[yd,hl,Ph,Bt,Nt,zy]},Rd={findFiberByHostInstance:$a,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iP={bundleType:Rd.bundleType,version:Rd.version,rendererPackageName:Rd.rendererPackageName,rendererConfig:Rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Bi(c),c===null?null:c.stateNode},findFiberByHostInstance:Rd.findFiberByHostInstance||tP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_p.isDisabled&&_p.supportsFiber)try{Uo=_p.inject(iP),cr=_p}catch{}}return pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nP,pr.createPortal=function(c,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(f))throw Error(e(200));return JB(c,f,null,y)},pr.createRoot=function(c,f){if(!Qy(c))throw Error(e(299));var y=!1,N="",q=WE;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onRecoverableError!==void 0&&(q=f.onRecoverableError)),f=Hy(c,1,!1,null,null,y,!1,N,q),c[Hs]=f.current,pd(c.nodeType===8?c.parentNode:c),new Zy(f)},pr.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(e(188)):(c=Object.keys(c).join(","),Error(e(268,c)));return c=Bi(f),c=c===null?null:c.stateNode,c},pr.flushSync=function(c){return tc(c)},pr.hydrate=function(c,f,y){if(!yp(f))throw Error(e(200));return wp(null,c,f,!0,y)},pr.hydrateRoot=function(c,f,y){if(!Qy(c))throw Error(e(405));var N=y!=null&&y.hydratedSources||null,q=!1,et="",dt=WE;if(y!=null&&(y.unstable_strictMode===!0&&(q=!0),y.identifierPrefix!==void 0&&(et=y.identifierPrefix),y.onRecoverableError!==void 0&&(dt=y.onRecoverableError)),f=zE(f,null,c,1,y??null,q,!1,et,dt),c[Hs]=f.current,pd(c),N)for(c=0;c<N.length;c++)y=N[c],q=y._getVersion,q=q(y._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[y,q]:f.mutableSourceEagerHydrationData.push(y,q);return new gp(f)},pr.render=function(c,f,y){if(!yp(f))throw Error(e(200));return wp(null,c,f,!1,y)},pr.unmountComponentAtNode=function(c){if(!yp(c))throw Error(e(40));return c._reactRootContainer?(tc(function(){wp(null,null,c,!1,function(){c._reactRootContainer=null,c[Hs]=null})}),!0):!1},pr.unstable_batchedUpdates=zy,pr.unstable_renderSubtreeIntoContainer=function(c,f,y,N){if(!yp(y))throw Error(e(200));if(c==null||c._reactInternals===void 0)throw Error(e(38));return wp(c,f,y,!1,N)},pr.version="18.3.1-next-f1338f8080-20240426",pr}var XE;function m8(){if(XE)return t1.exports;XE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),t1.exports=vP(),t1.exports}var JE;function xP(){if(JE)return bp;JE=1;var n=m8();return bp.createRoot=n.createRoot,bp.hydrateRoot=n.hydrateRoot,bp}var EP=xP();function SP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var g8={exports:{}},ri=g8.exports={},Is,Ts;function Iw(){throw new Error("setTimeout has not been defined")}function Tw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Is=setTimeout:Is=Iw}catch{Is=Iw}try{typeof clearTimeout=="function"?Ts=clearTimeout:Ts=Tw}catch{Ts=Tw}})();function y8(n){if(Is===setTimeout)return setTimeout(n,0);if((Is===Iw||!Is)&&setTimeout)return Is=setTimeout,setTimeout(n,0);try{return Is(n,0)}catch{try{return Is.call(null,n,0)}catch{return Is.call(this,n,0)}}}function LP(n){if(Ts===clearTimeout)return clearTimeout(n);if((Ts===Tw||!Ts)&&clearTimeout)return Ts=clearTimeout,clearTimeout(n);try{return Ts(n)}catch{try{return Ts.call(null,n)}catch{return Ts.call(this,n)}}}var _o=[],Jl=!1,gc,t0=-1;function CP(){!Jl||!gc||(Jl=!1,gc.length?_o=gc.concat(_o):t0=-1,_o.length&&w8())}function w8(){if(!Jl){var n=y8(CP);Jl=!0;for(var t=_o.length;t;){for(gc=_o,_o=[];++t0<t;)gc&&gc[t0].run();t0=-1,t=_o.length}gc=null,Jl=!1,LP(n)}}ri.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];_o.push(new _8(n,t)),_o.length===1&&!Jl&&y8(w8)};function _8(n,t){this.fun=n,this.array=t}_8.prototype.run=function(){this.fun.apply(null,this.array)};ri.title="browser";ri.browser=!0;ri.env={};ri.argv=[];ri.version="";ri.versions={};function Oo(){}ri.on=Oo;ri.addListener=Oo;ri.once=Oo;ri.off=Oo;ri.removeListener=Oo;ri.removeAllListeners=Oo;ri.emit=Oo;ri.prependListener=Oo;ri.prependOnceListener=Oo;ri.listeners=function(n){return[]};ri.binding=function(n){throw new Error("process.binding is not supported")};ri.cwd=function(){return"/"};ri.chdir=function(n){throw new Error("process.chdir is not supported")};ri.umask=function(){return 0};var AP=g8.exports;const i1=SP(AP),tS=globalThis||void 0||self;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var eS="popstate";function IP(n={}){function t(i,r){let{pathname:s,search:o,hash:a}=i.location;return kw("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(i,r){return typeof r=="string"?r:If(r)}return kP(t,e,null,n)}function qn(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function fs(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TP(){return Math.random().toString(36).substring(2,10)}function nS(n,t){return{usr:n.state,key:n.key,idx:t}}function kw(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Ru(t):t,state:e,key:t&&t.key||i||TP()}}function If({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Ru(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function kP(n,t,e,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a="POP",l=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let v=u(),A=v==null?null:v-d;d=v,l&&l({action:a,location:C.location,delta:A})}function m(v,A){a="PUSH";let x=kw(C.location,v,A);d=u()+1;let P=nS(x,d),W=C.createHref(x);try{o.pushState(P,"",W)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;r.location.assign(W)}s&&l&&l({action:a,location:C.location,delta:1})}function p(v,A){a="REPLACE";let x=kw(C.location,v,A);d=u();let P=nS(x,d),W=C.createHref(x);o.replaceState(P,"",W),s&&l&&l({action:a,location:C.location,delta:0})}function E(v){return RP(v)}let C={get action(){return a},get location(){return n(r,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(eS,h),l=v,()=>{r.removeEventListener(eS,h),l=null}},createHref(v){return t(r,v)},createURL:E,encodeLocation(v){let A=E(v);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:p,go(v){return o.go(v)}};return C}function RP(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),qn(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:If(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function b8(n,t,e="/"){return NP(n,t,e,!1)}function NP(n,t,e,i){let r=typeof t=="string"?Ru(t):t,s=Ao(r.pathname||"/",e);if(s==null)return null;let o=v8(n);MP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let d=VP(s);a=GP(o[l],d,i)}return a}function v8(n,t=[],e=[],i="",r=!1){let s=(o,a,l=r,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&l)return;qn(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let h=Eo([i,u.relativePath]),m=e.concat(u);o.children&&o.children.length>0&&(qn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),v8(o.children,t,m,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:DP(h,o.index),routesMeta:m})};return n.forEach((o,a)=>{if(o.path===""||!o.path?.includes("?"))s(o,a);else for(let l of x8(o.path))s(o,a,!0,l)}),t}function x8(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),s=e.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=x8(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function MP(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:zP(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var BP=/^:[\w-]+$/,PP=3,OP=2,FP=1,jP=10,UP=-2,iS=n=>n==="*";function DP(n,t){let e=n.split("/"),i=e.length;return e.some(iS)&&(i+=UP),t&&(i+=OP),e.filter(r=>!iS(r)).reduce((r,s)=>r+(BP.test(s)?PP:s===""?FP:jP),i)}function zP(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function GP(n,t,e=!1){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],d=a===i.length-1,u=s==="/"?t:t.slice(s.length)||"/",h=F0({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),m=l.route;if(!h&&d&&e&&!i[i.length-1].route.index&&(h=F0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Eo([s,h.pathname]),pathnameBase:KP(Eo([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=Eo([s,h.pathnameBase]))}return o}function F0(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=WP(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let E=a[m]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const p=a[m];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:n}}function WP(n,t=!1,e=!0){fs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function VP(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Ao(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}var E8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qP=n=>E8.test(n);function $P(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?Ru(n):n,s;if(e)if(qP(e))s=e;else{if(e.includes("//")){let o=e;e=e.replace(/\/\/+/g,"/"),fs(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${e}`)}e.startsWith("/")?s=rS(e.substring(1),"/"):s=rS(e,t)}else s=t;return{pathname:s,search:ZP(i),hash:QP(r)}}function rS(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function r1(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HP(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function S8(n){let t=HP(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function L8(n,t,e,i=!1){let r;typeof n=="string"?r=Ru(n):(r={...n},qn(!r.pathname||!r.pathname.includes("?"),r1("?","pathname","search",r)),qn(!r.pathname||!r.pathname.includes("#"),r1("#","pathname","hash",r)),qn(!r.search||!r.search.includes("#"),r1("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=e;else{let h=t.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;r.pathname=m.join("/")}a=h>=0?t[h]:"/"}let l=$P(r,a),d=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}var Eo=n=>n.join("/").replace(/\/\/+/g,"/"),KP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,YP=class{constructor(n,t,e,i=!1){this.status=n,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function XP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function JP(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var C8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function A8(n,t){let e=n;if(typeof e!="string"||!E8.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,r=!1;if(C8)try{let s=new URL(window.location.href),o=e.startsWith("//")?new URL(s.protocol+e):new URL(e),a=Ao(o.pathname,t);o.origin===s.origin&&a!=null?e=a+o.search+o.hash:r=!0}catch{fs(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var I8=["POST","PUT","PATCH","DELETE"];new Set(I8);var t5=["GET",...I8];new Set(t5);var Nu=rt.createContext(null);Nu.displayName="DataRouter";var Lm=rt.createContext(null);Lm.displayName="DataRouterState";var e5=rt.createContext(!1),T8=rt.createContext({isTransitioning:!1});T8.displayName="ViewTransition";var n5=rt.createContext(new Map);n5.displayName="Fetchers";var i5=rt.createContext(null);i5.displayName="Await";var Hr=rt.createContext(null);Hr.displayName="Navigation";var Hf=rt.createContext(null);Hf.displayName="Location";var Vs=rt.createContext({outlet:null,matches:[],isDataRoute:!1});Vs.displayName="Route";var vb=rt.createContext(null);vb.displayName="RouteError";var k8="REACT_ROUTER_ERROR",r5="REDIRECT",s5="ROUTE_ERROR_RESPONSE";function o5(n){if(n.startsWith(`${k8}:${r5}:{`))try{let t=JSON.parse(n.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function a5(n){if(n.startsWith(`${k8}:${s5}:{`))try{let t=JSON.parse(n.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new YP(t.status,t.statusText,t.data)}catch{}}function c5(n,{relative:t}={}){qn(Kf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=rt.useContext(Hr),{hash:r,pathname:s,search:o}=Zf(n,{relative:t}),a=s;return e!=="/"&&(a=s==="/"?e:Eo([e,s])),i.createHref({pathname:a,search:o,hash:r})}function Kf(){return rt.useContext(Hf)!=null}function Ua(){return qn(Kf(),"useLocation() may be used only in the context of a <Router> component."),rt.useContext(Hf).location}var R8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N8(n){rt.useContext(Hr).static||rt.useLayoutEffect(n)}function l5(){let{isDataRoute:n}=rt.useContext(Vs);return n?S5():u5()}function u5(){qn(Kf(),"useNavigate() may be used only in the context of a <Router> component.");let n=rt.useContext(Nu),{basename:t,navigator:e}=rt.useContext(Hr),{matches:i}=rt.useContext(Vs),{pathname:r}=Ua(),s=JSON.stringify(S8(i)),o=rt.useRef(!1);return N8(()=>{o.current=!0}),rt.useCallback((l,d={})=>{if(fs(o.current,R8),!o.current)return;if(typeof l=="number"){e.go(l);return}let u=L8(l,JSON.parse(s),r,d.relative==="path");n==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Eo([t,u.pathname])),(d.replace?e.replace:e.push)(u,d.state,d)},[t,e,s,r,n])}var d5=rt.createContext(null);function f5(n){let t=rt.useContext(Vs).outlet;return rt.useMemo(()=>t&&rt.createElement(d5.Provider,{value:n},t),[t,n])}function Zf(n,{relative:t}={}){let{matches:e}=rt.useContext(Vs),{pathname:i}=Ua(),r=JSON.stringify(S8(e));return rt.useMemo(()=>L8(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function h5(n,t){return M8(n,t)}function M8(n,t,e,i,r){qn(Kf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=rt.useContext(Hr),{matches:o}=rt.useContext(Vs),a=o[o.length-1],l=a?a.params:{},d=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let x=h&&h.path||"";P8(d,!h||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=Ua(),p;if(t){let x=typeof t=="string"?Ru(t):t;qn(u==="/"||x.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),p=x}else p=m;let E=p.pathname||"/",C=E;if(u!=="/"){let x=u.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=b8(n,{pathname:C});fs(h||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),fs(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=w5(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Eo([u,s.encodeLocation?s.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Eo([u,s.encodeLocation?s.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,e,i,r);return t&&A?rt.createElement(Hf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},A):A}function p5(){let n=E5(),t=XP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=rt.createElement(rt.Fragment,null,rt.createElement("p",null," Hey developer "),rt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",rt.createElement("code",{style:s},"ErrorBoundary")," or"," ",rt.createElement("code",{style:s},"errorElement")," prop on your route.")),rt.createElement(rt.Fragment,null,rt.createElement("h2",null,"Unexpected Application Error!"),rt.createElement("h3",{style:{fontStyle:"italic"}},t),e?rt.createElement("pre",{style:r},e):null,o)}var m5=rt.createElement(p5,null),B8=class extends rt.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const e=a5(n.digest);e&&(n=e)}let t=n!==void 0?rt.createElement(Vs.Provider,{value:this.props.routeContext},rt.createElement(vb.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?rt.createElement(g5,{error:n},t):t}};B8.contextType=e5;var s1=new WeakMap;function g5({children:n,error:t}){let{basename:e}=rt.useContext(Hr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=o5(t.digest);if(i){let r=s1.get(t);if(r)throw r;let s=A8(i.location,e);if(C8&&!s1.get(t))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw s1.set(t,o),o}return rt.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return n}function y5({routeContext:n,match:t,children:e}){let i=rt.useContext(Nu);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),rt.createElement(Vs.Provider,{value:n},e)}function w5(n,t=[],e=null,i=null,r=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let s=n,o=e?.errors;if(o!=null){let u=s.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);qn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(e)for(let u=0;u<s.length;u++){let h=s[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=u),h.route.id){let{loaderData:m,errors:p}=e,E=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||E){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let d=e&&i?(u,h)=>{i(u,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:JP(e.matches),errorInfo:h})}:void 0;return s.reduceRight((u,h,m)=>{let p,E=!1,C=null,v=null;e&&(p=o&&h.route.id?o[h.route.id]:void 0,C=h.route.errorElement||m5,a&&(l<0&&m===0?(P8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,v=null):l===m&&(E=!0,v=h.route.hydrateFallbackElement||null)));let A=t.concat(s.slice(0,m+1)),x=()=>{let P;return p?P=C:E?P=v:h.route.Component?P=rt.createElement(h.route.Component,null):h.route.element?P=h.route.element:P=u,rt.createElement(y5,{match:h,routeContext:{outlet:u,matches:A,isDataRoute:e!=null},children:P})};return e&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?rt.createElement(B8,{location:e.location,revalidation:e.revalidation,component:C,error:p,children:x(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:d}):x()},null)}function xb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _5(n){let t=rt.useContext(Nu);return qn(t,xb(n)),t}function b5(n){let t=rt.useContext(Lm);return qn(t,xb(n)),t}function v5(n){let t=rt.useContext(Vs);return qn(t,xb(n)),t}function Eb(n){let t=v5(n),e=t.matches[t.matches.length-1];return qn(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function x5(){return Eb("useRouteId")}function E5(){let n=rt.useContext(vb),t=b5("useRouteError"),e=Eb("useRouteError");return n!==void 0?n:t.errors?.[e]}function S5(){let{router:n}=_5("useNavigate"),t=Eb("useNavigate"),e=rt.useRef(!1);return N8(()=>{e.current=!0}),rt.useCallback(async(r,s={})=>{fs(e.current,R8),e.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:t,...s}))},[n,t])}var sS={};function P8(n,t,e){!t&&!sS[n]&&(sS[n]=!0,fs(!1,e))}rt.memo(L5);function L5({routes:n,future:t,state:e,onError:i}){return M8(n,void 0,e,i,t)}function C5(n){return f5(n.context)}function ba(n){qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A5({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:r,static:s=!1,unstable_useTransitions:o}){qn(!Kf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),l=rt.useMemo(()=>({basename:a,navigator:r,static:s,unstable_useTransitions:o,future:{}}),[a,r,s,o]);typeof e=="string"&&(e=Ru(e));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=e,E=rt.useMemo(()=>{let C=Ao(d,a);return C==null?null:{location:{pathname:C,search:u,hash:h,state:m,key:p},navigationType:i}},[a,d,u,h,m,p,i]);return fs(E!=null,`<Router basename="${a}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:rt.createElement(Hr.Provider,{value:l},rt.createElement(Hf.Provider,{children:t,value:E}))}function I5({children:n,location:t}){return h5(Rw(n),t)}function Rw(n,t=[]){let e=[];return rt.Children.forEach(n,(i,r)=>{if(!rt.isValidElement(i))return;let s=[...t,r];if(i.type===rt.Fragment){e.push.apply(e,Rw(i.props.children,s));return}qn(i.type===ba,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Rw(i.props.children,s)),e.push(o)}),e}var e0="get",n0="application/x-www-form-urlencoded";function Cm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function T5(n){return Cm(n)&&n.tagName.toLowerCase()==="button"}function k5(n){return Cm(n)&&n.tagName.toLowerCase()==="form"}function R5(n){return Cm(n)&&n.tagName.toLowerCase()==="input"}function N5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function M5(n,t){return n.button===0&&(!t||t==="_self")&&!N5(n)}var vp=null;function B5(){if(vp===null)try{new FormData(document.createElement("form"),0),vp=!1}catch{vp=!0}return vp}var P5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o1(n){return n!=null&&!P5.has(n)?(fs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${n0}"`),null):n}function O5(n,t){let e,i,r,s,o;if(k5(n)){let a=n.getAttribute("action");i=a?Ao(a,t):null,e=n.getAttribute("method")||e0,r=o1(n.getAttribute("enctype"))||n0,s=new FormData(n)}else if(T5(n)||R5(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(i=l?Ao(l,t):null,e=n.getAttribute("formmethod")||a.getAttribute("method")||e0,r=o1(n.getAttribute("formenctype"))||o1(a.getAttribute("enctype"))||n0,s=new FormData(a,n),!B5()){let{name:d,type:u,value:h}=n;if(u==="image"){let m=d?`${d}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else d&&s.append(d,h)}}else{if(Cm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=e0,i=null,r=n0,o=n}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sb(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function F5(n,t,e,i){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:t&&Ao(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function j5(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function U5(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function D5(n,t,e){let i=await Promise.all(n.map(async r=>{let s=t.routes[r.route.id];if(s){let o=await j5(s,e);return o.links?o.links():[]}return[]}));return V5(i.flat(1).filter(U5).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function oS(n,t,e,i,r,s){let o=(l,d)=>e[d]?l.route.id!==e[d].route.id:!0,a=(l,d)=>e[d].pathname!==l.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==l.params["*"];return s==="assets"?t.filter((l,d)=>o(l,d)||a(l,d)):s==="data"?t.filter((l,d)=>{let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,d)||a(l,d))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function z5(n,t,{includeHydrateFallback:e}={}){return G5(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function G5(n){return[...new Set(n)]}function W5(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function V5(n,t){let e=new Set;return new Set(t),n.reduce((i,r)=>{let s=JSON.stringify(W5(r));return e.has(s)||(e.add(s),i.push({key:s,link:r})),i},[])}function O8(){let n=rt.useContext(Nu);return Sb(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function q5(){let n=rt.useContext(Lm);return Sb(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Lb=rt.createContext(void 0);Lb.displayName="FrameworkContext";function F8(){let n=rt.useContext(Lb);return Sb(n,"You must render this element inside a <HydratedRouter> element"),n}function $5(n,t){let e=rt.useContext(Lb),[i,r]=rt.useState(!1),[s,o]=rt.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=rt.useRef(null);rt.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let C=A=>{A.forEach(x=>{o(x.isIntersecting)})},v=new IntersectionObserver(C,{threshold:.5});return m.current&&v.observe(m.current),()=>{v.disconnect()}}},[n]),rt.useEffect(()=>{if(i){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[i]);let p=()=>{r(!0)},E=()=>{r(!1),o(!1)};return e?n!=="intent"?[s,m,{}]:[s,m,{onFocus:Md(a,p),onBlur:Md(l,E),onMouseEnter:Md(d,p),onMouseLeave:Md(u,E),onTouchStart:Md(h,p)}]:[!1,m,{}]}function Md(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function H5({page:n,...t}){let{router:e}=O8(),i=rt.useMemo(()=>b8(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?rt.createElement(Z5,{page:n,matches:i,...t}):null}function K5(n){let{manifest:t,routeModules:e}=F8(),[i,r]=rt.useState([]);return rt.useEffect(()=>{let s=!1;return D5(n,t,e).then(o=>{s||r(o)}),()=>{s=!0}},[n,t,e]),i}function Z5({page:n,matches:t,...e}){let i=Ua(),{future:r,manifest:s,routeModules:o}=F8(),{basename:a}=O8(),{loaderData:l,matches:d}=q5(),u=rt.useMemo(()=>oS(n,t,d,s,i,"data"),[n,t,d,s,i]),h=rt.useMemo(()=>oS(n,t,d,s,i,"assets"),[n,t,d,s,i]),m=rt.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,v=!1;if(t.forEach(x=>{let P=s.routes[x.route.id];!P||!P.hasLoader||(!u.some(W=>W.route.id===x.route.id)&&x.route.id in l&&o[x.route.id]?.shouldRevalidate||P.hasClientLoader?v=!0:C.add(x.route.id))}),C.size===0)return[];let A=F5(n,a,r.unstable_trailingSlashAwareDataRequests,"data");return v&&C.size>0&&A.searchParams.set("_routes",t.filter(x=>C.has(x.route.id)).map(x=>x.route.id).join(",")),[A.pathname+A.search]},[a,r.unstable_trailingSlashAwareDataRequests,l,i,s,u,t,n,o]),p=rt.useMemo(()=>z5(h,s),[h,s]),E=K5(h);return rt.createElement(rt.Fragment,null,m.map(C=>rt.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...e})),p.map(C=>rt.createElement("link",{key:C,rel:"modulepreload",href:C,...e})),E.map(({key:C,link:v})=>rt.createElement("link",{key:C,nonce:e.nonce,...v})))}function Q5(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var Y5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Y5&&(window.__reactRouterVersion="7.12.0")}catch{}function X5({basename:n,children:t,unstable_useTransitions:e,window:i}){let r=rt.useRef();r.current==null&&(r.current=IP({window:i,v5Compat:!0}));let s=r.current,[o,a]=rt.useState({action:s.action,location:s.location}),l=rt.useCallback(d=>{e===!1?a(d):rt.startTransition(()=>a(d))},[e]);return rt.useLayoutEffect(()=>s.listen(l),[s,l]),rt.createElement(A5,{basename:n,children:t,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:e})}var j8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Am=rt.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:a,target:l,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m,...p},E){let{basename:C,unstable_useTransitions:v}=rt.useContext(Hr),A=typeof d=="string"&&j8.test(d),x=A8(d,C);d=x.to;let P=c5(d,{relative:r}),[W,K,j]=$5(i,p),b=eO(d,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:h,unstable_defaultShouldRevalidate:m,unstable_useTransitions:v});function B(it){t&&t(it),it.defaultPrevented||b(it)}let J=rt.createElement("a",{...p,...j,href:x.absoluteURL||P,onClick:x.isExternal||s?t:B,ref:Q5(E,K),target:l,"data-discover":!A&&e==="render"?"true":void 0});return W&&!A?rt.createElement(rt.Fragment,null,J,rt.createElement(H5,{page:P})):J});Am.displayName="Link";var U8=rt.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:a,children:l,...d},u){let h=Zf(o,{relative:d.relative}),m=Ua(),p=rt.useContext(Lm),{navigator:E,basename:C}=rt.useContext(Hr),v=p!=null&&oO(h)&&a===!0,A=E.encodeLocation?E.encodeLocation(h).pathname:h.pathname,x=m.pathname,P=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;e||(x=x.toLowerCase(),P=P?P.toLowerCase():null,A=A.toLowerCase()),P&&C&&(P=Ao(P,C)||P);const W=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let K=x===A||!r&&x.startsWith(A)&&x.charAt(W)==="/",j=P!=null&&(P===A||!r&&P.startsWith(A)&&P.charAt(A.length)==="/"),b={isActive:K,isPending:j,isTransitioning:v},B=K?t:void 0,J;typeof i=="function"?J=i(b):J=[i,K?"active":null,j?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let it=typeof s=="function"?s(b):s;return rt.createElement(Am,{...d,"aria-current":B,className:J,ref:u,style:it,to:o,viewTransition:a},typeof l=="function"?l(b):l)});U8.displayName="NavLink";var J5=rt.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:s,method:o=e0,action:a,onSubmit:l,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m,...p},E)=>{let{unstable_useTransitions:C}=rt.useContext(Hr),v=rO(),A=sO(a,{relative:d}),x=o.toLowerCase()==="get"?"get":"post",P=typeof a=="string"&&j8.test(a),W=K=>{if(l&&l(K),K.defaultPrevented)return;K.preventDefault();let j=K.nativeEvent.submitter,b=j?.getAttribute("formmethod")||o,B=()=>v(j||K.currentTarget,{fetcherKey:t,method:b,navigate:e,replace:r,state:s,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m});C&&e!==!1?rt.startTransition(()=>B()):B()};return rt.createElement("form",{ref:E,method:x,action:A,onSubmit:i?l:W,...p,"data-discover":!P&&n==="render"?"true":void 0})});J5.displayName="Form";function tO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D8(n){let t=rt.useContext(Nu);return qn(t,tO(n)),t}function eO(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:l}={}){let d=l5(),u=Ua(),h=Zf(n,{relative:s});return rt.useCallback(m=>{if(M5(m,t)){m.preventDefault();let p=e!==void 0?e:If(u)===If(h),E=()=>d(n,{replace:p,state:i,preventScrollReset:r,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:a});l?rt.startTransition(()=>E()):E()}},[u,d,h,e,i,t,n,r,s,o,a,l])}var nO=0,iO=()=>`__${String(++nO)}__`;function rO(){let{router:n}=D8("useSubmit"),{basename:t}=rt.useContext(Hr),e=x5(),i=n.fetch,r=n.navigate;return rt.useCallback(async(s,o={})=>{let{action:a,method:l,encType:d,formData:u,body:h}=O5(s,t);if(o.navigate===!1){let m=o.fetcherKey||iO();await i(m,e,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||l,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||l,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:e,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,r,t,e])}function sO(n,{relative:t}={}){let{basename:e}=rt.useContext(Hr),i=rt.useContext(Vs);qn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Zf(n||".",{relative:t})},o=Ua();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();s.search=u?`?${u}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(s.pathname=s.pathname==="/"?e:Eo([e,s.pathname])),If(s)}function oO(n,{relative:t}={}){let e=rt.useContext(T8);qn(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=D8("useViewTransitionState"),r=Zf(n,{relative:t});if(!e.isTransitioning)return!1;let s=Ao(e.currentLocation.pathname,i)||e.currentLocation.pathname,o=Ao(e.nextLocation.pathname,i)||e.nextLocation.pathname;return F0(r.pathname,o)!=null||F0(r.pathname,s)!=null}var Cb=m8();const z8=Po(Cb);var Im=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aO={setTimeout:(n,t)=>setTimeout(n,t),clearTimeout:n=>clearTimeout(n),setInterval:(n,t)=>setInterval(n,t),clearInterval:n=>clearInterval(n)},cO=class{#t=aO;#e=!1;setTimeoutProvider(n){this.#t=n}setTimeout(n,t){return this.#t.setTimeout(n,t)}clearTimeout(n){this.#t.clearTimeout(n)}setInterval(n,t){return this.#t.setInterval(n,t)}clearInterval(n){this.#t.clearInterval(n)}},Nw=new cO;function lO(n){setTimeout(n,0)}var Tm=typeof window>"u"||"Deno"in globalThis;function ss(){}function uO(n,t){return typeof n=="function"?n(t):n}function dO(n){return typeof n=="number"&&n>=0&&n!==1/0}function fO(n,t){return Math.max(n+(t||0)-Date.now(),0)}function Mw(n,t){return typeof n=="function"?n(t):n}function hO(n,t){return typeof n=="function"?n(t):n}function aS(n,t){const{type:e="all",exact:i,fetchStatus:r,predicate:s,queryKey:o,stale:a}=n;if(o){if(i){if(t.queryHash!==Ab(o,t.options))return!1}else if(!kf(t.queryKey,o))return!1}if(e!=="all"){const l=t.isActive();if(e==="active"&&!l||e==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||r&&r!==t.state.fetchStatus||s&&!s(t))}function cS(n,t){const{exact:e,status:i,predicate:r,mutationKey:s}=n;if(s){if(!t.options.mutationKey)return!1;if(e){if(Tf(t.options.mutationKey)!==Tf(s))return!1}else if(!kf(t.options.mutationKey,s))return!1}return!(i&&t.state.status!==i||r&&!r(t))}function Ab(n,t){return(t?.queryKeyHashFn||Tf)(n)}function Tf(n){return JSON.stringify(n,(t,e)=>Bw(e)?Object.keys(e).sort().reduce((i,r)=>(i[r]=e[r],i),{}):e)}function kf(n,t){return n===t?!0:typeof n!=typeof t?!1:n&&t&&typeof n=="object"&&typeof t=="object"?Object.keys(t).every(e=>kf(n[e],t[e])):!1}var pO=Object.prototype.hasOwnProperty;function G8(n,t,e=0){if(n===t)return n;if(e>500)return t;const i=lS(n)&&lS(t);if(!i&&!(Bw(n)&&Bw(t)))return t;const s=(i?n:Object.keys(n)).length,o=i?t:Object.keys(t),a=o.length,l=i?new Array(a):{};let d=0;for(let u=0;u<a;u++){const h=i?u:o[u],m=n[h],p=t[h];if(m===p){l[h]=m,(i?u<s:pO.call(n,h))&&d++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){l[h]=p;continue}const E=G8(m,p,e+1);l[h]=E,E===m&&d++}return s===a&&d===s?n:l}function lS(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Bw(n){if(!uS(n))return!1;const t=n.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!uS(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function uS(n){return Object.prototype.toString.call(n)==="[object Object]"}function mO(n){return new Promise(t=>{Nw.setTimeout(t,n)})}function gO(n,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(n,t):e.structuralSharing!==!1?G8(n,t):t}function yO(n,t,e=0){const i=[...n,t];return e&&i.length>e?i.slice(1):i}function wO(n,t,e=0){const i=[t,...n];return e&&i.length>e?i.slice(0,-1):i}var Ib=Symbol();function W8(n,t){return!n.queryFn&&t?.initialPromise?()=>t.initialPromise:!n.queryFn||n.queryFn===Ib?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function _O(n,t,e){let i=!1,r;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(r??=t(),i||(i=!0,r.aborted?e():r.addEventListener("abort",e,{once:!0})),r)}),n}var bO=class extends Im{#t;#e;#n;constructor(){super(),this.#n=n=>{if(!Tm&&window.addEventListener){const t=()=>n();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(n){this.#t!==n&&(this.#t=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(t=>{t(n)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},V8=new bO;function vO(){let n,t;const e=new Promise((r,s)=>{n=r,t=s});e.status="pending",e.catch(()=>{});function i(r){Object.assign(e,r),delete e.resolve,delete e.reject}return e.resolve=r=>{i({status:"fulfilled",value:r}),n(r)},e.reject=r=>{i({status:"rejected",reason:r}),t(r)},e}var xO=lO;function EO(){let n=[],t=0,e=a=>{a()},i=a=>{a()},r=xO;const s=a=>{t?n.push(a):r(()=>{e(a)})},o=()=>{const a=n;n=[],a.length&&r(()=>{i(()=>{a.forEach(l=>{e(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{e=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{r=a}}}var tr=EO(),SO=class extends Im{#t=!0;#e;#n;constructor(){super(),this.#n=n=>{if(!Tm&&window.addEventListener){const t=()=>n(!0),e=()=>n(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(this.setOnline.bind(this))}setOnline(n){this.#t!==n&&(this.#t=n,this.listeners.forEach(e=>{e(n)}))}isOnline(){return this.#t}},j0=new SO;function LO(n){return Math.min(1e3*2**n,3e4)}function q8(n){return(n??"online")==="online"?j0.isOnline():!0}var Pw=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function $8(n){let t=!1,e=0,i;const r=vO(),s=()=>r.status!=="pending",o=C=>{if(!s()){const v=new Pw(C);m(v),n.onCancel?.(v)}},a=()=>{t=!0},l=()=>{t=!1},d=()=>V8.isFocused()&&(n.networkMode==="always"||j0.isOnline())&&n.canRun(),u=()=>q8(n.networkMode)&&n.canRun(),h=C=>{s()||(i?.(),r.resolve(C))},m=C=>{s()||(i?.(),r.reject(C))},p=()=>new Promise(C=>{i=v=>{(s()||d())&&C(v)},n.onPause?.()}).then(()=>{i=void 0,s()||n.onContinue?.()}),E=()=>{if(s())return;let C;const v=e===0?n.initialPromise:void 0;try{C=v??n.fn()}catch(A){C=Promise.reject(A)}Promise.resolve(C).then(h).catch(A=>{if(s())return;const x=n.retry??(Tm?0:3),P=n.retryDelay??LO,W=typeof P=="function"?P(e,A):P,K=x===!0||typeof x=="number"&&e<x||typeof x=="function"&&x(e,A);if(t||!K){m(A);return}e++,n.onFail?.(e,A),mO(W).then(()=>d()?void 0:p()).then(()=>{t?m(A):E()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(i?.(),r),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?E():p().then(E),r)}}var H8=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dO(this.gcTime)&&(this.#t=Nw.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Tm?1/0:300*1e3))}clearGcTimeout(){this.#t&&(Nw.clearTimeout(this.#t),this.#t=void 0)}},CO=class extends H8{#t;#e;#n;#r;#i;#o;#a;constructor(n){super(),this.#a=!1,this.#o=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#r=n.client,this.#n=this.#r.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#t=fS(this.options),this.state=n.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(n){if(this.options={...this.#o,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=fS(this.options);t.data!==void 0&&(this.setState(dS(t.data,t.dataUpdatedAt)),this.#t=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,t){const e=gO(this.state.data,n,this.options);return this.#s({data:e,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),e}setState(n,t){this.#s({type:"setState",state:n,setStateOptions:t})}cancel(n){const t=this.#i?.promise;return this.#i?.cancel(n),t?t.then(ss).catch(ss):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(n=>hO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ib||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Mw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!fO(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(t=>t!==n),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(n,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(n&&this.setOptions(n),!this.options.queryFn){const a=this.observers.find(l=>l.options.queryFn);a&&this.setOptions(a.options)}const e=new AbortController,i=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,e.signal)})},r=()=>{const a=W8(this.options,t),d=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(u),u})();return this.#a=!1,this.options.persister?this.options.persister(a,d,this):a(d)},o=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return i(a),a})();this.options.behavior?.onFetch(o,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#i=$8({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:a=>{a instanceof Pw&&a.revert&&this.setState({...this.#e,fetchStatus:"idle"}),e.abort()},onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const a=await this.#i.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof Pw){if(a.silent)return this.#i.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#s({type:"error",error:a}),this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#s(n){const t=e=>{switch(n.type){case"failed":return{...e,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...AO(e.data,this.options),fetchMeta:n.meta??null};case"success":const i={...e,...dS(n.data,n.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=n.manual?i:void 0,i;case"error":const r=n.error;return{...e,error:r,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...n.state}}};this.state=t(this.state),tr.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function AO(n,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:q8(t.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function dS(n,t){return{data:n,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function fS(n){const t=typeof n.initialData=="function"?n.initialData():n.initialData,e=t!==void 0,i=e?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}function hS(n){return{onFetch:(t,e)=>{const i=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const d=async()=>{let u=!1;const h=E=>{_O(E,()=>t.signal,()=>u=!0)},m=W8(t.options,t.fetchOptions),p=async(E,C,v)=>{if(u)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const x=(()=>{const j={client:t.client,queryKey:t.queryKey,pageParam:C,direction:v?"backward":"forward",meta:t.options.meta};return h(j),j})(),P=await m(x),{maxPages:W}=t.options,K=v?wO:yO;return{pages:K(E.pages,P,W),pageParams:K(E.pageParams,C,W)}};if(r&&s.length){const E=r==="backward",C=E?IO:pS,v={pages:s,pageParams:o},A=C(i,v);a=await p(v,A,E)}else{const E=n??s.length;do{const C=l===0?o[0]??i.initialPageParam:pS(i,a);if(l>0&&C==null)break;a=await p(a,C),l++}while(l<E)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e):t.fetchFn=d}}}function pS(n,{pages:t,pageParams:e}){const i=t.length-1;return t.length>0?n.getNextPageParam(t[i],t,e[i],e):void 0}function IO(n,{pages:t,pageParams:e}){return t.length>0?n.getPreviousPageParam?.(t[0],t,e[0],e):void 0}var TO=class extends H8{#t;#e;#n;#r;constructor(n){super(),this.#t=n.client,this.mutationId=n.mutationId,this.#n=n.mutationCache,this.#e=[],this.state=n.state||kO(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#e.includes(n)||(this.#e.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#e=this.#e.filter(t=>t!==n),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(n){const t=()=>{this.#i({type:"continue"})},e={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=$8({fn:()=>this.options.mutationFn?this.options.mutationFn(n,e):Promise.reject(new Error("No mutationFn found")),onFail:(s,o)=>{this.#i({type:"failed",failureCount:s,error:o})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",r=!this.#r.canStart();try{if(i)t();else{this.#i({type:"pending",variables:n,isPaused:r}),await this.#n.config.onMutate?.(n,this,e);const o=await this.options.onMutate?.(n,e);o!==this.state.context&&this.#i({type:"pending",context:o,variables:n,isPaused:r})}const s=await this.#r.start();return await this.#n.config.onSuccess?.(s,n,this.state.context,this,e),await this.options.onSuccess?.(s,n,this.state.context,e),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,e),await this.options.onSettled?.(s,null,n,this.state.context,e),this.#i({type:"success",data:s}),s}catch(s){try{await this.#n.config.onError?.(s,n,this.state.context,this,e)}catch(o){Promise.reject(o)}try{await this.options.onError?.(s,n,this.state.context,e)}catch(o){Promise.reject(o)}try{await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,e)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,s,n,this.state.context,e)}catch(o){Promise.reject(o)}throw this.#i({type:"error",error:s}),s}finally{this.#n.runNext(this)}}#i(n){const t=e=>{switch(n.type){case"failed":return{...e,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...e,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:n.error,failureCount:e.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=t(this.state),tr.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(n)}),this.#n.notify({mutation:this,type:"updated",action:n})})}};function kO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var RO=class extends Im{constructor(n={}){super(),this.config=n,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(n,t,e){const i=new TO({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(t),state:e});return this.add(i),i}add(n){this.#t.add(n);const t=xp(n);if(typeof t=="string"){const e=this.#e.get(t);e?e.push(n):this.#e.set(t,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#t.delete(n)){const t=xp(n);if(typeof t=="string"){const e=this.#e.get(t);if(e)if(e.length>1){const i=e.indexOf(n);i!==-1&&e.splice(i,1)}else e[0]===n&&this.#e.delete(t)}}this.notify({type:"removed",mutation:n})}canRun(n){const t=xp(n);if(typeof t=="string"){const i=this.#e.get(t)?.find(r=>r.state.status==="pending");return!i||i===n}else return!0}runNext(n){const t=xp(n);return typeof t=="string"?this.#e.get(t)?.find(i=>i!==n&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){tr.batch(()=>{this.#t.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(n){const t={exact:!0,...n};return this.getAll().find(e=>cS(t,e))}findAll(n={}){return this.getAll().filter(t=>cS(n,t))}notify(n){tr.batch(()=>{this.listeners.forEach(t=>{t(n)})})}resumePausedMutations(){const n=this.getAll().filter(t=>t.state.isPaused);return tr.batch(()=>Promise.all(n.map(t=>t.continue().catch(ss))))}};function xp(n){return n.options.scope?.id}var NO=class extends Im{constructor(n={}){super(),this.config=n,this.#t=new Map}#t;build(n,t,e){const i=t.queryKey,r=t.queryHash??Ab(i,t);let s=this.get(r);return s||(s=new CO({client:n,queryKey:i,queryHash:r,options:n.defaultQueryOptions(t),state:e,defaultOptions:n.getQueryDefaults(i)}),this.add(s)),s}add(n){this.#t.has(n.queryHash)||(this.#t.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const t=this.#t.get(n.queryHash);t&&(n.destroy(),t===n&&this.#t.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){tr.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#t.get(n)}getAll(){return[...this.#t.values()]}find(n){const t={exact:!0,...n};return this.getAll().find(e=>aS(t,e))}findAll(n={}){const t=this.getAll();return Object.keys(n).length>0?t.filter(e=>aS(n,e)):t}notify(n){tr.batch(()=>{this.listeners.forEach(t=>{t(n)})})}onFocus(){tr.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){tr.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},MO=class{#t;#e;#n;#r;#i;#o;#a;#s;constructor(n={}){this.#t=n.queryCache||new NO,this.#e=n.mutationCache||new RO,this.#n=n.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=V8.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#s=j0.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(n){return this.#t.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#e.findAll({...n,status:"pending"}).length}getQueryData(n){const t=this.defaultQueryOptions({queryKey:n});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(n){const t=this.defaultQueryOptions(n),e=this.#t.build(this,t),i=e.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&e.isStaleByTime(Mw(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(n){return this.#t.findAll(n).map(({queryKey:t,state:e})=>{const i=e.data;return[t,i]})}setQueryData(n,t,e){const i=this.defaultQueryOptions({queryKey:n}),s=this.#t.get(i.queryHash)?.state.data,o=uO(t,s);if(o!==void 0)return this.#t.build(this,i).setData(o,{...e,manual:!0})}setQueriesData(n,t,e){return tr.batch(()=>this.#t.findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,t,e)]))}getQueryState(n){const t=this.defaultQueryOptions({queryKey:n});return this.#t.get(t.queryHash)?.state}removeQueries(n){const t=this.#t;tr.batch(()=>{t.findAll(n).forEach(e=>{t.remove(e)})})}resetQueries(n,t){const e=this.#t;return tr.batch(()=>(e.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},t)))}cancelQueries(n,t={}){const e={revert:!0,...t},i=tr.batch(()=>this.#t.findAll(n).map(r=>r.cancel(e)));return Promise.all(i).then(ss).catch(ss)}invalidateQueries(n,t={}){return tr.batch(()=>(this.#t.findAll(n).forEach(e=>{e.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},t)))}refetchQueries(n,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},i=tr.batch(()=>this.#t.findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,e);return e.throwOnError||(s=s.catch(ss)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(ss)}fetchQuery(n){const t=this.defaultQueryOptions(n);t.retry===void 0&&(t.retry=!1);const e=this.#t.build(this,t);return e.isStaleByTime(Mw(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ss).catch(ss)}fetchInfiniteQuery(n){return n.behavior=hS(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ss).catch(ss)}ensureInfiniteQueryData(n){return n.behavior=hS(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return j0.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,t){this.#r.set(Tf(n),{queryKey:n,defaultOptions:t})}getQueryDefaults(n){const t=[...this.#r.values()],e={};return t.forEach(i=>{kf(n,i.queryKey)&&Object.assign(e,i.defaultOptions)}),e}setMutationDefaults(n,t){this.#i.set(Tf(n),{mutationKey:n,defaultOptions:t})}getMutationDefaults(n){const t=[...this.#i.values()],e={};return t.forEach(i=>{kf(n,i.mutationKey)&&Object.assign(e,i.defaultOptions)}),e}defaultQueryOptions(n){if(n._defaulted)return n;const t={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return t.queryHash||(t.queryHash=Ab(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ib&&(t.enabled=!1),t}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},BO=rt.createContext(void 0),PO=({client:n,children:t})=>(rt.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),U.jsx(BO.Provider,{value:n,children:t}));const Tl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Qf(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Rf(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Io(n,...t){if(!Qf(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function K8(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Rf(n.outputLen),Rf(n.blockLen)}function mu(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Z8(n,t){Io(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function OO(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Na(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function a1(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Es(n,t){return n<<32-t|n>>>t}const FO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function jO(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function UO(n){for(let t=0;t<n.length;t++)n[t]=jO(n[t]);return n}const mS=FO?n=>n:UO,Q8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",DO=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Nc(n){if(Io(n),Q8)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=DO[n[e]];return t}const eo={_0:48,_9:57,A:65,F:70,a:97,f:102};function gS(n){if(n>=eo._0&&n<=eo._9)return n-eo._0;if(n>=eo.A&&n<=eo.F)return n-(eo.A-10);if(n>=eo.a&&n<=eo.f)return n-(eo.a-10)}function U0(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Q8)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(e);for(let r=0,s=0;r<e;r++,s+=2){const o=gS(n.charCodeAt(s)),a=gS(n.charCodeAt(s+1));if(o===void 0||a===void 0){const l=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}i[r]=o*16+a}return i}function zO(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function km(n){return typeof n=="string"&&(n=zO(n)),Io(n),n}function Ms(...n){let t=0;for(let i=0;i<n.length;i++){const r=n[i];Io(r),t+=r.length}const e=new Uint8Array(t);for(let i=0,r=0;i<n.length;i++){const s=n[i];e.set(s,r),r+=s.length}return e}let Tb=class{};function kb(n){const t=i=>n().update(km(i)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Rb(n=32){if(Tl&&typeof Tl.getRandomValues=="function")return Tl.getRandomValues(new Uint8Array(n));if(Tl&&typeof Tl.randomBytes=="function")return Uint8Array.from(Tl.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function GO(n,t,e,i){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,i);const r=BigInt(32),s=BigInt(4294967295),o=Number(e>>r&s),a=Number(e&s),l=i?4:0,d=i?0:4;n.setUint32(t+l,o,i),n.setUint32(t+d,a,i)}function WO(n,t,e){return n&t^~n&e}function VO(n,t,e){return n&t^n&e^t&e}class Y8 extends Tb{constructor(t,e,i,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=r,this.buffer=new Uint8Array(t),this.view=a1(this.buffer)}update(t){mu(this),t=km(t),Io(t);const{view:e,buffer:i,blockLen:r}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);if(a===r){const l=a1(t);for(;r<=s-o;o+=r)this.process(l,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){mu(this),Z8(t,this),this.finished=!0;const{buffer:e,view:i,blockLen:r,isLE:s}=this;let{pos:o}=this;e[o++]=128,Na(this.buffer.subarray(o)),this.padOffset>r-o&&(this.process(i,0),o=0);for(let h=o;h<r;h++)e[h]=0;GO(i,r-8,BigInt(this.length*8),s),this.process(i,0);const a=a1(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=l/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:i,length:r,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=r,t.pos=a,r%e&&t.buffer.set(i),t}clone(){return this._cloneInto()}}const sa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ui=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ep=BigInt(2**32-1),yS=BigInt(32);function qO(n,t=!1){return t?{h:Number(n&Ep),l:Number(n>>yS&Ep)}:{h:Number(n>>yS&Ep)|0,l:Number(n&Ep)|0}}function X8(n,t=!1){const e=n.length;let i=new Uint32Array(e),r=new Uint32Array(e);for(let s=0;s<e;s++){const{h:o,l:a}=qO(n[s],t);[i[s],r[s]]=[o,a]}return[i,r]}const wS=(n,t,e)=>n>>>e,_S=(n,t,e)=>n<<32-e|t>>>e,kl=(n,t,e)=>n>>>e|t<<32-e,Rl=(n,t,e)=>n<<32-e|t>>>e,Sp=(n,t,e)=>n<<64-e|t>>>e-32,Lp=(n,t,e)=>n>>>e-32|t<<64-e,$O=(n,t,e)=>n<<e|t>>>32-e,HO=(n,t,e)=>t<<e|n>>>32-e,KO=(n,t,e)=>t<<e-32|n>>>64-e,ZO=(n,t,e)=>n<<e-32|t>>>64-e;function no(n,t,e,i){const r=(t>>>0)+(i>>>0);return{h:n+e+(r/2**32|0)|0,l:r|0}}const QO=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),YO=(n,t,e,i)=>t+e+i+(n/2**32|0)|0,XO=(n,t,e,i)=>(n>>>0)+(t>>>0)+(e>>>0)+(i>>>0),JO=(n,t,e,i,r)=>t+e+i+r+(n/2**32|0)|0,tF=(n,t,e,i,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0),eF=(n,t,e,i,r,s)=>t+e+i+r+s+(n/2**32|0)|0,nF=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),oa=new Uint32Array(64);class iF extends Y8{constructor(t=32){super(64,t,8,!1),this.A=sa[0]|0,this.B=sa[1]|0,this.C=sa[2]|0,this.D=sa[3]|0,this.E=sa[4]|0,this.F=sa[5]|0,this.G=sa[6]|0,this.H=sa[7]|0}get(){const{A:t,B:e,C:i,D:r,E:s,F:o,G:a,H:l}=this;return[t,e,i,r,s,o,a,l]}set(t,e,i,r,s,o,a,l){this.A=t|0,this.B=e|0,this.C=i|0,this.D=r|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(t,e){for(let h=0;h<16;h++,e+=4)oa[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const m=oa[h-15],p=oa[h-2],E=Es(m,7)^Es(m,18)^m>>>3,C=Es(p,17)^Es(p,19)^p>>>10;oa[h]=C+oa[h-7]+E+oa[h-16]|0}let{A:i,B:r,C:s,D:o,E:a,F:l,G:d,H:u}=this;for(let h=0;h<64;h++){const m=Es(a,6)^Es(a,11)^Es(a,25),p=u+m+WO(a,l,d)+nF[h]+oa[h]|0,C=(Es(i,2)^Es(i,13)^Es(i,22))+VO(i,r,s)|0;u=d,d=l,l=a,a=o+p|0,o=s,s=r,r=i,i=p+C|0}i=i+this.A|0,r=r+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(i,r,s,o,a,l,d,u)}roundClean(){Na(oa)}destroy(){this.set(0,0,0,0,0,0,0,0),Na(this.buffer)}}const J8=X8(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),rF=J8[0],sF=J8[1],aa=new Uint32Array(80),ca=new Uint32Array(80);class oF extends Y8{constructor(t=64){super(128,t,16,!1),this.Ah=Ui[0]|0,this.Al=Ui[1]|0,this.Bh=Ui[2]|0,this.Bl=Ui[3]|0,this.Ch=Ui[4]|0,this.Cl=Ui[5]|0,this.Dh=Ui[6]|0,this.Dl=Ui[7]|0,this.Eh=Ui[8]|0,this.El=Ui[9]|0,this.Fh=Ui[10]|0,this.Fl=Ui[11]|0,this.Gh=Ui[12]|0,this.Gl=Ui[13]|0,this.Hh=Ui[14]|0,this.Hl=Ui[15]|0}get(){const{Ah:t,Al:e,Bh:i,Bl:r,Ch:s,Cl:o,Dh:a,Dl:l,Eh:d,El:u,Fh:h,Fl:m,Gh:p,Gl:E,Hh:C,Hl:v}=this;return[t,e,i,r,s,o,a,l,d,u,h,m,p,E,C,v]}set(t,e,i,r,s,o,a,l,d,u,h,m,p,E,C,v){this.Ah=t|0,this.Al=e|0,this.Bh=i|0,this.Bl=r|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=d|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=p|0,this.Gl=E|0,this.Hh=C|0,this.Hl=v|0}process(t,e){for(let P=0;P<16;P++,e+=4)aa[P]=t.getUint32(e),ca[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const W=aa[P-15]|0,K=ca[P-15]|0,j=kl(W,K,1)^kl(W,K,8)^wS(W,K,7),b=Rl(W,K,1)^Rl(W,K,8)^_S(W,K,7),B=aa[P-2]|0,J=ca[P-2]|0,it=kl(B,J,19)^Sp(B,J,61)^wS(B,J,6),st=Rl(B,J,19)^Lp(B,J,61)^_S(B,J,6),z=XO(b,st,ca[P-7],ca[P-16]),I=JO(z,j,it,aa[P-7],aa[P-16]);aa[P]=I|0,ca[P]=z|0}let{Ah:i,Al:r,Bh:s,Bl:o,Ch:a,Cl:l,Dh:d,Dl:u,Eh:h,El:m,Fh:p,Fl:E,Gh:C,Gl:v,Hh:A,Hl:x}=this;for(let P=0;P<80;P++){const W=kl(h,m,14)^kl(h,m,18)^Sp(h,m,41),K=Rl(h,m,14)^Rl(h,m,18)^Lp(h,m,41),j=h&p^~h&C,b=m&E^~m&v,B=tF(x,K,b,sF[P],ca[P]),J=eF(B,A,W,j,rF[P],aa[P]),it=B|0,st=kl(i,r,28)^Sp(i,r,34)^Sp(i,r,39),z=Rl(i,r,28)^Lp(i,r,34)^Lp(i,r,39),I=i&s^i&a^s&a,w=r&o^r&l^o&l;A=C|0,x=v|0,C=p|0,v=E|0,p=h|0,E=m|0,{h,l:m}=no(d|0,u|0,J|0,it|0),d=a|0,u=l|0,a=s|0,l=o|0,s=i|0,o=r|0;const T=QO(it,z,w);i=YO(T,J,st,I),r=T|0}({h:i,l:r}=no(this.Ah|0,this.Al|0,i|0,r|0)),{h:s,l:o}=no(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=no(this.Ch|0,this.Cl|0,a|0,l|0),{h:d,l:u}=no(this.Dh|0,this.Dl|0,d|0,u|0),{h,l:m}=no(this.Eh|0,this.El|0,h|0,m|0),{h:p,l:E}=no(this.Fh|0,this.Fl|0,p|0,E|0),{h:C,l:v}=no(this.Gh|0,this.Gl|0,C|0,v|0),{h:A,l:x}=no(this.Hh|0,this.Hl|0,A|0,x|0),this.set(i,r,s,o,a,l,d,u,h,m,p,E,C,v,A,x)}roundClean(){Na(aa,ca)}destroy(){Na(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const tI=kb(()=>new iF),aF=kb(()=>new oF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nb=BigInt(0),Ow=BigInt(1);function jc(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function cs(n,t,e=""){const i=Qf(n),r=n?.length,s=t!==void 0;if(!i||s&&r!==t){const o=e&&`"${e}" `,a=s?` of length ${t}`:"",l=i?`length=${r}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return n}function Cp(n){const t=n.toString(16);return t.length&1?"0"+t:t}function eI(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Nb:BigInt("0x"+n)}function Rm(n){return eI(Nc(n))}function Nf(n){return Io(n),eI(Nc(Uint8Array.from(n).reverse()))}function Mb(n,t){return U0(n.toString(16).padStart(t*2,"0"))}function nI(n,t){return Mb(n,t).reverse()}function Qn(n,t,e){let i;if(typeof t=="string")try{i=U0(t)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(Qf(t))i=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const r=i.length;if(typeof e=="number"&&r!==e)throw new Error(n+" of length "+e+" expected, got "+r);return i}function bS(n){return Uint8Array.from(n)}const c1=n=>typeof n=="bigint"&&Nb<=n;function cF(n,t,e){return c1(n)&&c1(t)&&c1(e)&&t<=n&&n<e}function Fw(n,t,e,i){if(!cF(t,e,i))throw new Error("expected valid "+n+": "+e+" <= n < "+i+", got "+t)}function iI(n){let t;for(t=0;n>Nb;n>>=Ow,t+=1);return t}const Yf=n=>(Ow<<BigInt(n))-Ow;function lF(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const i=p=>new Uint8Array(p),r=p=>Uint8Array.of(p);let s=i(n),o=i(n),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},d=(...p)=>e(o,s,...p),u=(p=i(0))=>{o=d(r(0),p),s=d(),p.length!==0&&(o=d(r(1),p),s=d())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const E=[];for(;p<t;){s=d();const C=s.slice();E.push(C),p+=s.length}return Ms(...E)};return(p,E)=>{l(),u(p);let C;for(;!(C=E(h()));)u();return l(),C}}function Xf(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function i(r,s,o){const a=n[r];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${r}" is invalid: expected ${s}, got ${l}`)}Object.entries(t).forEach(([r,s])=>i(r,s,!1)),Object.entries(e).forEach(([r,s])=>i(r,s,!0))}function D0(n){const t=new WeakMap;return(e,...i)=>{const r=t.get(e);if(r!==void 0)return r;const s=n(e,...i);return t.set(e,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const br=BigInt(0),Mi=BigInt(1),yc=BigInt(2),rI=BigInt(3),sI=BigInt(4),oI=BigInt(5),uF=BigInt(7),aI=BigInt(8),dF=BigInt(9),cI=BigInt(16);function ci(n,t){const e=n%t;return e>=br?e:t+e}function Zn(n,t,e){let i=n;for(;t-- >br;)i*=i,i%=e;return i}function vS(n,t){if(n===br)throw new Error("invert: expected non-zero number");if(t<=br)throw new Error("invert: expected positive modulus, got "+t);let e=ci(n,t),i=t,r=br,s=Mi;for(;e!==br;){const a=i/e,l=i%e,d=r-s*a;i=e,e=l,r=s,s=d}if(i!==Mi)throw new Error("invert: does not exist");return ci(r,t)}function Bb(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function lI(n,t){const e=(n.ORDER+Mi)/sI,i=n.pow(t,e);return Bb(n,i,t),i}function fF(n,t){const e=(n.ORDER-oI)/aI,i=n.mul(t,yc),r=n.pow(i,e),s=n.mul(t,r),o=n.mul(n.mul(s,yc),r),a=n.mul(s,n.sub(o,n.ONE));return Bb(n,a,t),a}function hF(n){const t=Kc(n),e=uI(n),i=e(t,t.neg(t.ONE)),r=e(t,i),s=e(t,t.neg(i)),o=(n+uF)/cI;return(a,l)=>{let d=a.pow(l,o),u=a.mul(d,i);const h=a.mul(d,r),m=a.mul(d,s),p=a.eql(a.sqr(u),l),E=a.eql(a.sqr(h),l);d=a.cmov(d,u,p),u=a.cmov(m,h,E);const C=a.eql(a.sqr(u),l),v=a.cmov(d,u,C);return Bb(a,v,l),v}}function uI(n){if(n<rI)throw new Error("sqrt is not defined for small field");let t=n-Mi,e=0;for(;t%yc===br;)t/=yc,e++;let i=yc;const r=Kc(n);for(;xS(r,i)===1;)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return lI;let s=r.pow(i,t);const o=(t+Mi)/yc;return function(l,d){if(l.is0(d))return d;if(xS(l,d)!==1)throw new Error("Cannot find square root");let u=e,h=l.mul(l.ONE,s),m=l.pow(d,t),p=l.pow(d,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let E=1,C=l.sqr(m);for(;!l.eql(C,l.ONE);)if(E++,C=l.sqr(C),E===u)throw new Error("Cannot find square root");const v=Mi<<BigInt(u-E-1),A=l.pow(h,v);u=E,h=l.sqr(A),m=l.mul(m,h),p=l.mul(p,A)}return p}}function pF(n){return n%sI===rI?lI:n%aI===oI?fF:n%cI===dF?hF(n):uI(n)}const mF=(n,t)=>(ci(n,t)&Mi)===Mi,gF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yF(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=gF.reduce((i,r)=>(i[r]="function",i),t);return Xf(n,e),n}function wF(n,t,e){if(e<br)throw new Error("invalid exponent, negatives unsupported");if(e===br)return n.ONE;if(e===Mi)return t;let i=n.ONE,r=t;for(;e>br;)e&Mi&&(i=n.mul(i,r)),r=n.sqr(r),e>>=Mi;return i}function dI(n,t,e=!1){const i=new Array(t.length).fill(e?n.ZERO:void 0),r=t.reduce((o,a,l)=>n.is0(a)?o:(i[l]=o,n.mul(o,a)),n.ONE),s=n.inv(r);return t.reduceRight((o,a,l)=>n.is0(a)?o:(i[l]=n.mul(o,i[l]),n.mul(o,a)),s),i}function xS(n,t){const e=(n.ORDER-Mi)/yc,i=n.pow(t,e),r=n.eql(i,n.ONE),s=n.eql(i,n.ZERO),o=n.eql(i,n.neg(n.ONE));if(!r&&!s&&!o)throw new Error("invalid Legendre symbol result");return r?1:s?0:-1}function fI(n,t){t!==void 0&&Rf(t);const e=t!==void 0?t:n.toString(2).length,i=Math.ceil(e/8);return{nBitLength:e,nByteLength:i}}function Kc(n,t,e=!1,i={}){if(n<=br)throw new Error("invalid field: expected ORDER > 0, got "+n);let r,s,o=!1,a;if(typeof t=="object"&&t!=null){if(i.sqrt||e)throw new Error("cannot specify opts in two arguments");const m=t;m.BITS&&(r=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(e=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof t=="number"&&(r=t),i.sqrt&&(s=i.sqrt);const{nBitLength:l,nByteLength:d}=fI(n,r);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:n,isLE:e,BITS:l,BYTES:d,MASK:Yf(l),ZERO:br,ONE:Mi,allowedLengths:a,create:m=>ci(m,n),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return br<=m&&m<n},is0:m=>m===br,isValidNot0:m=>!h.is0(m)&&h.isValid(m),isOdd:m=>(m&Mi)===Mi,neg:m=>ci(-m,n),eql:(m,p)=>m===p,sqr:m=>ci(m*m,n),add:(m,p)=>ci(m+p,n),sub:(m,p)=>ci(m-p,n),mul:(m,p)=>ci(m*p,n),pow:(m,p)=>wF(h,m,p),div:(m,p)=>ci(m*vS(p,n),n),sqrN:m=>m*m,addN:(m,p)=>m+p,subN:(m,p)=>m-p,mulN:(m,p)=>m*p,inv:m=>vS(m,n),sqrt:s||(m=>(u||(u=pF(n)),u(h,m))),toBytes:m=>e?nI(m,d):Mb(m,d),fromBytes:(m,p=!0)=>{if(a){if(!a.includes(m.length)||m.length>d)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const C=new Uint8Array(d);C.set(m,e?0:C.length-m.length),m=C}if(m.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+m.length);let E=e?Nf(m):Rm(m);if(o&&(E=ci(E,n)),!p&&!h.isValid(E))throw new Error("invalid field element: outside of range 0..ORDER");return E},invertBatch:m=>dI(h,m),cmov:(m,p,E)=>E?p:m});return Object.freeze(h)}function hI(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function pI(n){const t=hI(n);return t+Math.ceil(t/2)}function _F(n,t,e=!1){const i=n.length,r=hI(t),s=pI(t);if(i<16||i<s||i>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+i);const o=e?Nf(n):Rm(n),a=ci(o,t-Mi)+Mi;return e?nI(a,r):Mb(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gu=BigInt(0),wc=BigInt(1);function z0(n,t){const e=t.negate();return n?e:t}function _c(n,t){const e=dI(n.Fp,t.map(i=>i.Z));return t.map((i,r)=>n.fromAffine(i.toAffine(e[r])))}function mI(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function l1(n,t){mI(n,t);const e=Math.ceil(t/n)+1,i=2**(n-1),r=2**n,s=Yf(n),o=BigInt(n);return{windows:e,windowSize:i,mask:s,maxNumber:r,shiftBy:o}}function ES(n,t,e){const{windowSize:i,mask:r,maxNumber:s,shiftBy:o}=e;let a=Number(n&r),l=n>>o;a>i&&(a-=s,l+=wc);const d=t*i,u=d+Math.abs(a)-1,h=a===0,m=a<0,p=t%2!==0;return{nextN:l,offset:u,isZero:h,isNeg:m,isNegF:p,offsetF:d}}function bF(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,i)=>{if(!(e instanceof t))throw new Error("invalid point at index "+i)})}function vF(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,i)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+i)})}const u1=new WeakMap,gI=new WeakMap;function d1(n){return gI.get(n)||1}function SS(n){if(n!==gu)throw new Error("invalid wNAF")}class yI{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,i=this.ZERO){let r=t;for(;e>gu;)e&wc&&(i=i.add(r)),r=r.double(),e>>=wc;return i}precomputeWindow(t,e){const{windows:i,windowSize:r}=l1(e,this.bits),s=[];let o=t,a=o;for(let l=0;l<i;l++){a=o,s.push(a);for(let d=1;d<r;d++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(t,e,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let r=this.ZERO,s=this.BASE;const o=l1(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:d,isZero:u,isNeg:h,isNegF:m,offsetF:p}=ES(i,a,o);i=l,u?s=s.add(z0(m,e[p])):r=r.add(z0(h,e[d]))}return SS(i),{p:r,f:s}}wNAFUnsafe(t,e,i,r=this.ZERO){const s=l1(t,this.bits);for(let o=0;o<s.windows&&i!==gu;o++){const{nextN:a,offset:l,isZero:d,isNeg:u}=ES(i,o,s);if(i=a,!d){const h=e[l];r=r.add(u?h.negate():h)}}return SS(i),r}getPrecomputes(t,e,i){let r=u1.get(e);return r||(r=this.precomputeWindow(e,t),t!==1&&(typeof i=="function"&&(r=i(r)),u1.set(e,r))),r}cached(t,e,i){const r=d1(t);return this.wNAF(r,this.getPrecomputes(r,t,i),e)}unsafe(t,e,i,r){const s=d1(t);return s===1?this._unsafeLadder(t,e,r):this.wNAFUnsafe(s,this.getPrecomputes(s,t,i),e,r)}createCache(t,e){mI(e,this.bits),gI.set(t,e),u1.delete(t)}hasCache(t){return d1(t)!==1}}function xF(n,t,e,i){let r=t,s=n.ZERO,o=n.ZERO;for(;e>gu||i>gu;)e&wc&&(s=s.add(r)),i&wc&&(o=o.add(r)),r=r.double(),e>>=wc,i>>=wc;return{p1:s,p2:o}}function wI(n,t,e,i){bF(e,n),vF(i,t);const r=e.length,s=i.length;if(r!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,a=iI(BigInt(r));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const d=Yf(l),u=new Array(Number(d)+1).fill(o),h=Math.floor((t.BITS-1)/l)*l;let m=o;for(let p=h;p>=0;p-=l){u.fill(o);for(let C=0;C<s;C++){const v=i[C],A=Number(v>>BigInt(p)&d);u[A]=u[A].add(e[C])}let E=o;for(let C=u.length-1,v=o;C>0;C--)v=v.add(u[C]),E=E.add(v);if(m=m.add(E),p!==0)for(let C=0;C<l;C++)m=m.double()}return m}function LS(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return yF(t),t}else return Kc(n,{isLE:e})}function _I(n,t,e={},i){if(i===void 0&&(i=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const l of["p","n","h"]){const d=t[l];if(!(typeof d=="bigint"&&d>gu))throw new Error(`CURVE.${l} must be positive bigint`)}const r=LS(t.p,e.Fp,i),s=LS(t.n,e.Fn,i),a=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const l of a)if(!r.isValid(t[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const la=BigInt(0),xi=BigInt(1),f1=BigInt(2),EF=BigInt(8);function SF(n,t,e,i){const r=n.sqr(e),s=n.sqr(i),o=n.add(n.mul(t.a,r),s),a=n.add(n.ONE,n.mul(t.d,n.mul(r,s)));return n.eql(o,a)}function LF(n,t={}){const e=_I("edwards",n,t,t.FpFnLE),{Fp:i,Fn:r}=e;let s=e.CURVE;const{h:o}=s;Xf(t,{},{uvRatio:"function"});const a=f1<<BigInt(r.BYTES*8)-xi,l=v=>i.create(v),d=t.uvRatio||((v,A)=>{try{return{isValid:!0,value:i.sqrt(i.div(v,A))}}catch{return{isValid:!1,value:la}}});if(!SF(i,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(v,A,x=!1){const P=x?xi:la;return Fw("coordinate "+v,A,P,a),A}function h(v){if(!(v instanceof E))throw new Error("ExtendedPoint expected")}const m=D0((v,A)=>{const{X:x,Y:P,Z:W}=v,K=v.is0();A==null&&(A=K?EF:i.inv(W));const j=l(x*A),b=l(P*A),B=i.mul(W,A);if(K)return{x:la,y:xi};if(B!==xi)throw new Error("invZ was invalid");return{x:j,y:b}}),p=D0(v=>{const{a:A,d:x}=s;if(v.is0())throw new Error("bad point: ZERO");const{X:P,Y:W,Z:K,T:j}=v,b=l(P*P),B=l(W*W),J=l(K*K),it=l(J*J),st=l(b*A),z=l(J*l(st+B)),I=l(it+l(x*l(b*B)));if(z!==I)throw new Error("bad point: equation left != right (1)");const w=l(P*W),T=l(K*j);if(w!==T)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(A,x,P,W){this.X=u("x",A),this.Y=u("y",x),this.Z=u("z",P,!0),this.T=u("t",W),Object.freeze(this)}static CURVE(){return s}static fromAffine(A){if(A instanceof E)throw new Error("extended point not allowed");const{x,y:P}=A||{};return u("x",x),u("y",P),new E(x,P,xi,l(x*P))}static fromBytes(A,x=!1){const P=i.BYTES,{a:W,d:K}=s;A=bS(cs(A,P,"point")),jc(x,"zip215");const j=bS(A),b=A[P-1];j[P-1]=b&-129;const B=Nf(j),J=x?a:i.ORDER;Fw("point.y",B,la,J);const it=l(B*B),st=l(it-xi),z=l(K*it-W);let{isValid:I,value:w}=d(st,z);if(!I)throw new Error("bad point: invalid y coordinate");const T=(w&xi)===xi,V=(b&128)!==0;if(!x&&w===la&&V)throw new Error("bad point: x=0 and x_0=1");return V!==T&&(w=l(-w)),E.fromAffine({x:w,y:B})}static fromHex(A,x=!1){return E.fromBytes(Qn("point",A),x)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(A=8,x=!0){return C.createCache(this,A),x||this.multiply(f1),this}assertValidity(){p(this)}equals(A){h(A);const{X:x,Y:P,Z:W}=this,{X:K,Y:j,Z:b}=A,B=l(x*b),J=l(K*W),it=l(P*b),st=l(j*W);return B===J&&it===st}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:A}=s,{X:x,Y:P,Z:W}=this,K=l(x*x),j=l(P*P),b=l(f1*l(W*W)),B=l(A*K),J=x+P,it=l(l(J*J)-K-j),st=B+j,z=st-b,I=B-j,w=l(it*z),T=l(st*I),V=l(it*I),Y=l(z*st);return new E(w,T,Y,V)}add(A){h(A);const{a:x,d:P}=s,{X:W,Y:K,Z:j,T:b}=this,{X:B,Y:J,Z:it,T:st}=A,z=l(W*B),I=l(K*J),w=l(b*P*st),T=l(j*it),V=l((W+K)*(B+J)-z-I),Y=T-w,Q=T+w,$=l(I-x*z),F=l(V*Y),R=l(Q*$),_=l(V*$),k=l(Y*Q);return new E(F,R,k,_)}subtract(A){return this.add(A.negate())}multiply(A){if(!r.isValidNot0(A))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:x,f:P}=C.cached(this,A,W=>_c(E,W));return _c(E,[x,P])[0]}multiplyUnsafe(A,x=E.ZERO){if(!r.isValid(A))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return A===la?E.ZERO:this.is0()||A===xi?this:C.unsafe(this,A,P=>_c(E,P),x)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return C.unsafe(this,s.n).is0()}toAffine(A){return m(this,A)}clearCofactor(){return o===xi?this:this.multiplyUnsafe(o)}toBytes(){const{x:A,y:x}=this.toAffine(),P=i.toBytes(x);return P[P.length-1]|=A&xi?128:0,P}toHex(){return Nc(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(A){return _c(E,A)}static msm(A,x){return wI(E,r,A,x)}_setWindowSize(A){this.precompute(A)}toRawBytes(){return this.toBytes()}}E.BASE=new E(s.Gx,s.Gy,xi,l(s.Gx*s.Gy)),E.ZERO=new E(la,xi,xi,la),E.Fp=i,E.Fn=r;const C=new yI(E,r.BITS);return E.BASE.precompute(8),E}function CF(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');Xf(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:i}=e,{BASE:r,Fp:s,Fn:o}=n,a=e.randomBytes||Rb,l=e.adjustScalarBytes||(J=>J),d=e.domain||((J,it,st)=>{if(jc(st,"phflag"),it.length||st)throw new Error("Contexts/pre-hash are not supported");return J});function u(J){return o.create(Nf(J))}function h(J){const it=P.secretKey;J=Qn("private key",J,it);const st=Qn("hashed private key",t(J),2*it),z=l(st.slice(0,it)),I=st.slice(it,2*it),w=u(z);return{head:z,prefix:I,scalar:w}}function m(J){const{head:it,prefix:st,scalar:z}=h(J),I=r.multiply(z),w=I.toBytes();return{head:it,prefix:st,scalar:z,point:I,pointBytes:w}}function p(J){return m(J).pointBytes}function E(J=Uint8Array.of(),...it){const st=Ms(...it);return u(t(d(st,Qn("context",J),!!i)))}function C(J,it,st={}){J=Qn("message",J),i&&(J=i(J));const{prefix:z,scalar:I,pointBytes:w}=m(it),T=E(st.context,z,J),V=r.multiply(T).toBytes(),Y=E(st.context,V,w,J),Q=o.create(T+Y*I);if(!o.isValid(Q))throw new Error("sign failed: invalid s");const $=Ms(V,o.toBytes(Q));return cs($,P.signature,"result")}const v={zip215:!0};function A(J,it,st,z=v){const{context:I,zip215:w}=z,T=P.signature;J=Qn("signature",J,T),it=Qn("message",it),st=Qn("publicKey",st,P.publicKey),w!==void 0&&jc(w,"zip215"),i&&(it=i(it));const V=T/2,Y=J.subarray(0,V),Q=Nf(J.subarray(V,T));let $,F,R;try{$=n.fromBytes(st,w),F=n.fromBytes(Y,w),R=r.multiplyUnsafe(Q)}catch{return!1}if(!w&&$.isSmallOrder())return!1;const _=E(I,F.toBytes(),$.toBytes(),it);return F.add($.multiplyUnsafe(_)).subtract(R).clearCofactor().is0()}const x=s.BYTES,P={secretKey:x,publicKey:x,signature:2*x,seed:x};function W(J=a(P.seed)){return cs(J,P.seed,"seed")}function K(J){const it=B.randomSecretKey(J);return{secretKey:it,publicKey:p(it)}}function j(J){return Qf(J)&&J.length===o.BYTES}function b(J,it){try{return!!n.fromBytes(J,it)}catch{return!1}}const B={getExtendedPublicKey:m,randomSecretKey:W,isValidSecretKey:j,isValidPublicKey:b,toMontgomery(J){const{y:it}=n.fromBytes(J),st=P.publicKey,z=st===32;if(!z&&st!==57)throw new Error("only defined for 25519 and 448");const I=z?s.div(xi+it,xi-it):s.div(it-xi,it+xi);return s.toBytes(I)},toMontgomerySecret(J){const it=P.secretKey;cs(J,it);const st=t(J.subarray(0,it));return l(st).subarray(0,it)},randomPrivateKey:W,precompute(J=8,it=n.BASE){return it.precompute(J,!1)}};return Object.freeze({keygen:K,getPublicKey:p,sign:C,verify:A,utils:B,Point:n,lengths:P})}function AF(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,i=Kc(t.n,n.nBitLength,!0),r={Fp:e,Fn:i,uvRatio:n.uvRatio},s={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:r,hash:n.hash,eddsaOpts:s}}function IF(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function TF(n){const{CURVE:t,curveOpts:e,hash:i,eddsaOpts:r}=AF(n),s=LF(t,e),o=CF(s,i,r);return IF(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kF=BigInt(1),CS=BigInt(2);BigInt(3);const RF=BigInt(5),NF=BigInt(8),Pb=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),bI={p:Pb,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:NF,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function MF(n){const t=BigInt(10),e=BigInt(20),i=BigInt(40),r=BigInt(80),s=Pb,a=n*n%s*n%s,l=Zn(a,CS,s)*a%s,d=Zn(l,kF,s)*n%s,u=Zn(d,RF,s)*d%s,h=Zn(u,t,s)*u%s,m=Zn(h,e,s)*h%s,p=Zn(m,i,s)*m%s,E=Zn(p,r,s)*p%s,C=Zn(E,r,s)*p%s,v=Zn(C,t,s)*u%s;return{pow_p_5_8:Zn(v,CS,s)*n%s,b2:a}}function BF(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const AS=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function PF(n,t){const e=Pb,i=ci(t*t*t,e),r=ci(i*i*t,e),s=MF(n*r).pow_p_5_8;let o=ci(n*i*s,e);const a=ci(t*o*o,e),l=o,d=ci(o*AS,e),u=a===n,h=a===ci(-n,e),m=a===ci(-n*AS,e);return u&&(o=l),(h||m)&&(o=d),mF(o,e)&&(o=ci(-o,e)),{isValid:u||h,value:o}}const OF=Kc(bI.p,{isLE:!0}),FF={...bI,Fp:OF,hash:aF,adjustScalarBytes:BF,uvRatio:PF},Mu=TF(FF);var i0={exports:{}},h1={},IS;function Ob(){return IS||(IS=1,(function(n){Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},e={};e.byteLength=u,e.toByteArray=m,e.fromByteArray=C;for(var i=[],r=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;r[45]=62,r[95]=63;function d(x){var P=x.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var W=x.indexOf("=");W===-1&&(W=P);var K=W===P?0:4-W%4;return[W,K]}function u(x){var P=d(x),W=P[0],K=P[1];return(W+K)*3/4-K}function h(x,P,W){return(P+W)*3/4-W}function m(x){var P,W=d(x),K=W[0],j=W[1],b=new s(h(x,K,j)),B=0,J=j>0?K-4:K,it;for(it=0;it<J;it+=4)P=r[x.charCodeAt(it)]<<18|r[x.charCodeAt(it+1)]<<12|r[x.charCodeAt(it+2)]<<6|r[x.charCodeAt(it+3)],b[B++]=P>>16&255,b[B++]=P>>8&255,b[B++]=P&255;return j===2&&(P=r[x.charCodeAt(it)]<<2|r[x.charCodeAt(it+1)]>>4,b[B++]=P&255),j===1&&(P=r[x.charCodeAt(it)]<<10|r[x.charCodeAt(it+1)]<<4|r[x.charCodeAt(it+2)]>>2,b[B++]=P>>8&255,b[B++]=P&255),b}function p(x){return i[x>>18&63]+i[x>>12&63]+i[x>>6&63]+i[x&63]}function E(x,P,W){for(var K,j=[],b=P;b<W;b+=3)K=(x[b]<<16&16711680)+(x[b+1]<<8&65280)+(x[b+2]&255),j.push(p(K));return j.join("")}function C(x){for(var P,W=x.length,K=W%3,j=[],b=16383,B=0,J=W-K;B<J;B+=b)j.push(E(x,B,B+b>J?J:B+b));return K===1?(P=x[W-1],j.push(i[P>>2]+i[P<<4&63]+"==")):K===2&&(P=(x[W-2]<<8)+x[W-1],j.push(i[P>>10]+i[P>>4&63]+i[P<<2&63]+"=")),j.join("")}var v={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */v.read=function(x,P,W,K,j){var b,B,J=j*8-K-1,it=(1<<J)-1,st=it>>1,z=-7,I=W?j-1:0,w=W?-1:1,T=x[P+I];for(I+=w,b=T&(1<<-z)-1,T>>=-z,z+=J;z>0;b=b*256+x[P+I],I+=w,z-=8);for(B=b&(1<<-z)-1,b>>=-z,z+=K;z>0;B=B*256+x[P+I],I+=w,z-=8);if(b===0)b=1-st;else{if(b===it)return B?NaN:(T?-1:1)*(1/0);B=B+Math.pow(2,K),b=b-st}return(T?-1:1)*B*Math.pow(2,b-K)},v.write=function(x,P,W,K,j,b){var B,J,it,st=b*8-j-1,z=(1<<st)-1,I=z>>1,w=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=K?0:b-1,V=K?1:-1,Y=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(J=isNaN(P)?1:0,B=z):(B=Math.floor(Math.log(P)/Math.LN2),P*(it=Math.pow(2,-B))<1&&(B--,it*=2),B+I>=1?P+=w/it:P+=w*Math.pow(2,1-I),P*it>=2&&(B++,it/=2),B+I>=z?(J=0,B=z):B+I>=1?(J=(P*it-1)*Math.pow(2,j),B=B+I):(J=P*Math.pow(2,I-1)*Math.pow(2,j),B=0));j>=8;x[W+T]=J&255,T+=V,J/=256,j-=8);for(B=B<<j|J,st+=j;st>0;x[W+T]=B&255,T+=V,B/=256,st-=8);x[W+T-V]|=Y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(x){const P=e,W=v,K=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;x.Buffer=z,x.SlowBuffer=k,x.INSPECT_MAX_BYTES=50;const j=2147483647;x.kMaxLength=j;const{Uint8Array:b,ArrayBuffer:B,SharedArrayBuffer:J}=globalThis;z.TYPED_ARRAY_SUPPORT=it(),!z.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function it(){try{const ot=new b(1),Z={foo:function(){return 42}};return Object.setPrototypeOf(Z,b.prototype),Object.setPrototypeOf(ot,Z),ot.foo()===42}catch{return!1}}Object.defineProperty(z.prototype,"parent",{enumerable:!0,get:function(){if(z.isBuffer(this))return this.buffer}}),Object.defineProperty(z.prototype,"offset",{enumerable:!0,get:function(){if(z.isBuffer(this))return this.byteOffset}});function st(ot){if(ot>j)throw new RangeError('The value "'+ot+'" is invalid for option "size"');const Z=new b(ot);return Object.setPrototypeOf(Z,z.prototype),Z}function z(ot,Z,tt){if(typeof ot=="number"){if(typeof Z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return V(ot)}return I(ot,Z,tt)}z.poolSize=8192;function I(ot,Z,tt){if(typeof ot=="string")return Y(ot,Z);if(B.isView(ot))return $(ot);if(ot==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ot);if(Wt(ot,B)||ot&&Wt(ot.buffer,B)||typeof J<"u"&&(Wt(ot,J)||ot&&Wt(ot.buffer,J)))return F(ot,Z,tt);if(typeof ot=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pt=ot.valueOf&&ot.valueOf();if(pt!=null&&pt!==ot)return z.from(pt,Z,tt);const gt=R(ot);if(gt)return gt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ot[Symbol.toPrimitive]=="function")return z.from(ot[Symbol.toPrimitive]("string"),Z,tt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ot)}z.from=function(ot,Z,tt){return I(ot,Z,tt)},Object.setPrototypeOf(z.prototype,b.prototype),Object.setPrototypeOf(z,b);function w(ot){if(typeof ot!="number")throw new TypeError('"size" argument must be of type number');if(ot<0)throw new RangeError('The value "'+ot+'" is invalid for option "size"')}function T(ot,Z,tt){return w(ot),ot<=0?st(ot):Z!==void 0?typeof tt=="string"?st(ot).fill(Z,tt):st(ot).fill(Z):st(ot)}z.alloc=function(ot,Z,tt){return T(ot,Z,tt)};function V(ot){return w(ot),st(ot<0?0:_(ot)|0)}z.allocUnsafe=function(ot){return V(ot)},z.allocUnsafeSlow=function(ot){return V(ot)};function Y(ot,Z){if((typeof Z!="string"||Z==="")&&(Z="utf8"),!z.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);const tt=H(ot,Z)|0;let pt=st(tt);const gt=pt.write(ot,Z);return gt!==tt&&(pt=pt.slice(0,gt)),pt}function Q(ot){const Z=ot.length<0?0:_(ot.length)|0,tt=st(Z);for(let pt=0;pt<Z;pt+=1)tt[pt]=ot[pt]&255;return tt}function $(ot){if(Wt(ot,b)){const Z=new b(ot);return F(Z.buffer,Z.byteOffset,Z.byteLength)}return Q(ot)}function F(ot,Z,tt){if(Z<0||ot.byteLength<Z)throw new RangeError('"offset" is outside of buffer bounds');if(ot.byteLength<Z+(tt||0))throw new RangeError('"length" is outside of buffer bounds');let pt;return Z===void 0&&tt===void 0?pt=new b(ot):tt===void 0?pt=new b(ot,Z):pt=new b(ot,Z,tt),Object.setPrototypeOf(pt,z.prototype),pt}function R(ot){if(z.isBuffer(ot)){const Z=_(ot.length)|0,tt=st(Z);return tt.length===0||ot.copy(tt,0,0,Z),tt}if(ot.length!==void 0)return typeof ot.length!="number"||Bt(ot.length)?st(0):Q(ot);if(ot.type==="Buffer"&&Array.isArray(ot.data))return Q(ot.data)}function _(ot){if(ot>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return ot|0}function k(ot){return+ot!=ot&&(ot=0),z.alloc(+ot)}z.isBuffer=function(Z){return Z!=null&&Z._isBuffer===!0&&Z!==z.prototype},z.compare=function(Z,tt){if(Wt(Z,b)&&(Z=z.from(Z,Z.offset,Z.byteLength)),Wt(tt,b)&&(tt=z.from(tt,tt.offset,tt.byteLength)),!z.isBuffer(Z)||!z.isBuffer(tt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Z===tt)return 0;let pt=Z.length,gt=tt.length;for(let St=0,It=Math.min(pt,gt);St<It;++St)if(Z[St]!==tt[St]){pt=Z[St],gt=tt[St];break}return pt<gt?-1:gt<pt?1:0},z.isEncoding=function(Z){switch(String(Z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},z.concat=function(Z,tt){if(!Array.isArray(Z))throw new TypeError('"list" argument must be an Array of Buffers');if(Z.length===0)return z.alloc(0);let pt;if(tt===void 0)for(tt=0,pt=0;pt<Z.length;++pt)tt+=Z[pt].length;const gt=z.allocUnsafe(tt);let St=0;for(pt=0;pt<Z.length;++pt){let It=Z[pt];if(Wt(It,b))St+It.length>gt.length?(z.isBuffer(It)||(It=z.from(It)),It.copy(gt,St)):b.prototype.set.call(gt,It,St);else if(z.isBuffer(It))It.copy(gt,St);else throw new TypeError('"list" argument must be an Array of Buffers');St+=It.length}return gt};function H(ot,Z){if(z.isBuffer(ot))return ot.length;if(B.isView(ot)||Wt(ot,B))return ot.byteLength;if(typeof ot!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ot);const tt=ot.length,pt=arguments.length>2&&arguments[2]===!0;if(!pt&&tt===0)return 0;let gt=!1;for(;;)switch(Z){case"ascii":case"latin1":case"binary":return tt;case"utf8":case"utf-8":return mt(ot).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt*2;case"hex":return tt>>>1;case"base64":return At(ot).length;default:if(gt)return pt?-1:mt(ot).length;Z=(""+Z).toLowerCase(),gt=!0}}z.byteLength=H;function L(ot,Z,tt){let pt=!1;if((Z===void 0||Z<0)&&(Z=0),Z>this.length||((tt===void 0||tt>this.length)&&(tt=this.length),tt<=0)||(tt>>>=0,Z>>>=0,tt<=Z))return"";for(ot||(ot="utf8");;)switch(ot){case"hex":return kt(this,Z,tt);case"utf8":case"utf-8":return bt(this,Z,tt);case"ascii":return Gt(this,Z,tt);case"latin1":case"binary":return $t(this,Z,tt);case"base64":return wt(this,Z,tt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rt(this,Z,tt);default:if(pt)throw new TypeError("Unknown encoding: "+ot);ot=(ot+"").toLowerCase(),pt=!0}}z.prototype._isBuffer=!0;function g(ot,Z,tt){const pt=ot[Z];ot[Z]=ot[tt],ot[tt]=pt}z.prototype.swap16=function(){const Z=this.length;if(Z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let tt=0;tt<Z;tt+=2)g(this,tt,tt+1);return this},z.prototype.swap32=function(){const Z=this.length;if(Z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let tt=0;tt<Z;tt+=4)g(this,tt,tt+3),g(this,tt+1,tt+2);return this},z.prototype.swap64=function(){const Z=this.length;if(Z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let tt=0;tt<Z;tt+=8)g(this,tt,tt+7),g(this,tt+1,tt+6),g(this,tt+2,tt+5),g(this,tt+3,tt+4);return this},z.prototype.toString=function(){const Z=this.length;return Z===0?"":arguments.length===0?bt(this,0,Z):L.apply(this,arguments)},z.prototype.toLocaleString=z.prototype.toString,z.prototype.equals=function(Z){if(!z.isBuffer(Z))throw new TypeError("Argument must be a Buffer");return this===Z?!0:z.compare(this,Z)===0},z.prototype.inspect=function(){let Z="";const tt=x.INSPECT_MAX_BYTES;return Z=this.toString("hex",0,tt).replace(/(.{2})/g,"$1 ").trim(),this.length>tt&&(Z+=" ... "),"<Buffer "+Z+">"},K&&(z.prototype[K]=z.prototype.inspect),z.prototype.compare=function(Z,tt,pt,gt,St){if(Wt(Z,b)&&(Z=z.from(Z,Z.offset,Z.byteLength)),!z.isBuffer(Z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Z);if(tt===void 0&&(tt=0),pt===void 0&&(pt=Z?Z.length:0),gt===void 0&&(gt=0),St===void 0&&(St=this.length),tt<0||pt>Z.length||gt<0||St>this.length)throw new RangeError("out of range index");if(gt>=St&&tt>=pt)return 0;if(gt>=St)return-1;if(tt>=pt)return 1;if(tt>>>=0,pt>>>=0,gt>>>=0,St>>>=0,this===Z)return 0;let It=St-gt,le=pt-tt;const xe=Math.min(It,le),Se=this.slice(gt,St),nn=Z.slice(tt,pt);for(let Ie=0;Ie<xe;++Ie)if(Se[Ie]!==nn[Ie]){It=Se[Ie],le=nn[Ie];break}return It<le?-1:le<It?1:0};function D(ot,Z,tt,pt,gt){if(ot.length===0)return-1;if(typeof tt=="string"?(pt=tt,tt=0):tt>2147483647?tt=2147483647:tt<-2147483648&&(tt=-2147483648),tt=+tt,Bt(tt)&&(tt=gt?0:ot.length-1),tt<0&&(tt=ot.length+tt),tt>=ot.length){if(gt)return-1;tt=ot.length-1}else if(tt<0)if(gt)tt=0;else return-1;if(typeof Z=="string"&&(Z=z.from(Z,pt)),z.isBuffer(Z))return Z.length===0?-1:S(ot,Z,tt,pt,gt);if(typeof Z=="number")return Z=Z&255,typeof b.prototype.indexOf=="function"?gt?b.prototype.indexOf.call(ot,Z,tt):b.prototype.lastIndexOf.call(ot,Z,tt):S(ot,[Z],tt,pt,gt);throw new TypeError("val must be string, number or Buffer")}function S(ot,Z,tt,pt,gt){let St=1,It=ot.length,le=Z.length;if(pt!==void 0&&(pt=String(pt).toLowerCase(),pt==="ucs2"||pt==="ucs-2"||pt==="utf16le"||pt==="utf-16le")){if(ot.length<2||Z.length<2)return-1;St=2,It/=2,le/=2,tt/=2}function xe(nn,Ie){return St===1?nn[Ie]:nn.readUInt16BE(Ie*St)}let Se;if(gt){let nn=-1;for(Se=tt;Se<It;Se++)if(xe(ot,Se)===xe(Z,nn===-1?0:Se-nn)){if(nn===-1&&(nn=Se),Se-nn+1===le)return nn*St}else nn!==-1&&(Se-=Se-nn),nn=-1}else for(tt+le>It&&(tt=It-le),Se=tt;Se>=0;Se--){let nn=!0;for(let Ie=0;Ie<le;Ie++)if(xe(ot,Se+Ie)!==xe(Z,Ie)){nn=!1;break}if(nn)return Se}return-1}z.prototype.includes=function(Z,tt,pt){return this.indexOf(Z,tt,pt)!==-1},z.prototype.indexOf=function(Z,tt,pt){return D(this,Z,tt,pt,!0)},z.prototype.lastIndexOf=function(Z,tt,pt){return D(this,Z,tt,pt,!1)};function lt(ot,Z,tt,pt){tt=Number(tt)||0;const gt=ot.length-tt;pt?(pt=Number(pt),pt>gt&&(pt=gt)):pt=gt;const St=Z.length;pt>St/2&&(pt=St/2);let It;for(It=0;It<pt;++It){const le=parseInt(Z.substr(It*2,2),16);if(Bt(le))return It;ot[tt+It]=le}return It}function ct(ot,Z,tt,pt){return jt(mt(Z,ot.length-tt),ot,tt,pt)}function G(ot,Z,tt,pt){return jt(xt(Z),ot,tt,pt)}function ft(ot,Z,tt,pt){return jt(At(Z),ot,tt,pt)}function vt(ot,Z,tt,pt){return jt(Lt(Z,ot.length-tt),ot,tt,pt)}z.prototype.write=function(Z,tt,pt,gt){if(tt===void 0)gt="utf8",pt=this.length,tt=0;else if(pt===void 0&&typeof tt=="string")gt=tt,pt=this.length,tt=0;else if(isFinite(tt))tt=tt>>>0,isFinite(pt)?(pt=pt>>>0,gt===void 0&&(gt="utf8")):(gt=pt,pt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const St=this.length-tt;if((pt===void 0||pt>St)&&(pt=St),Z.length>0&&(pt<0||tt<0)||tt>this.length)throw new RangeError("Attempt to write outside buffer bounds");gt||(gt="utf8");let It=!1;for(;;)switch(gt){case"hex":return lt(this,Z,tt,pt);case"utf8":case"utf-8":return ct(this,Z,tt,pt);case"ascii":case"latin1":case"binary":return G(this,Z,tt,pt);case"base64":return ft(this,Z,tt,pt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,Z,tt,pt);default:if(It)throw new TypeError("Unknown encoding: "+gt);gt=(""+gt).toLowerCase(),It=!0}},z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wt(ot,Z,tt){return Z===0&&tt===ot.length?P.fromByteArray(ot):P.fromByteArray(ot.slice(Z,tt))}function bt(ot,Z,tt){tt=Math.min(ot.length,tt);const pt=[];let gt=Z;for(;gt<tt;){const St=ot[gt];let It=null,le=St>239?4:St>223?3:St>191?2:1;if(gt+le<=tt){let xe,Se,nn,Ie;switch(le){case 1:St<128&&(It=St);break;case 2:xe=ot[gt+1],(xe&192)===128&&(Ie=(St&31)<<6|xe&63,Ie>127&&(It=Ie));break;case 3:xe=ot[gt+1],Se=ot[gt+2],(xe&192)===128&&(Se&192)===128&&(Ie=(St&15)<<12|(xe&63)<<6|Se&63,Ie>2047&&(Ie<55296||Ie>57343)&&(It=Ie));break;case 4:xe=ot[gt+1],Se=ot[gt+2],nn=ot[gt+3],(xe&192)===128&&(Se&192)===128&&(nn&192)===128&&(Ie=(St&15)<<18|(xe&63)<<12|(Se&63)<<6|nn&63,Ie>65535&&Ie<1114112&&(It=Ie))}}It===null?(It=65533,le=1):It>65535&&(It-=65536,pt.push(It>>>10&1023|55296),It=56320|It&1023),pt.push(It),gt+=le}return Pt(pt)}const Ft=4096;function Pt(ot){const Z=ot.length;if(Z<=Ft)return String.fromCharCode.apply(String,ot);let tt="",pt=0;for(;pt<Z;)tt+=String.fromCharCode.apply(String,ot.slice(pt,pt+=Ft));return tt}function Gt(ot,Z,tt){let pt="";tt=Math.min(ot.length,tt);for(let gt=Z;gt<tt;++gt)pt+=String.fromCharCode(ot[gt]&127);return pt}function $t(ot,Z,tt){let pt="";tt=Math.min(ot.length,tt);for(let gt=Z;gt<tt;++gt)pt+=String.fromCharCode(ot[gt]);return pt}function kt(ot,Z,tt){const pt=ot.length;(!Z||Z<0)&&(Z=0),(!tt||tt<0||tt>pt)&&(tt=pt);let gt="";for(let St=Z;St<tt;++St)gt+=Nt[ot[St]];return gt}function Rt(ot,Z,tt){const pt=ot.slice(Z,tt);let gt="";for(let St=0;St<pt.length-1;St+=2)gt+=String.fromCharCode(pt[St]+pt[St+1]*256);return gt}z.prototype.slice=function(Z,tt){const pt=this.length;Z=~~Z,tt=tt===void 0?pt:~~tt,Z<0?(Z+=pt,Z<0&&(Z=0)):Z>pt&&(Z=pt),tt<0?(tt+=pt,tt<0&&(tt=0)):tt>pt&&(tt=pt),tt<Z&&(tt=Z);const gt=this.subarray(Z,tt);return Object.setPrototypeOf(gt,z.prototype),gt};function Ht(ot,Z,tt){if(ot%1!==0||ot<0)throw new RangeError("offset is not uint");if(ot+Z>tt)throw new RangeError("Trying to access beyond buffer length")}z.prototype.readUintLE=z.prototype.readUIntLE=function(Z,tt,pt){Z=Z>>>0,tt=tt>>>0,pt||Ht(Z,tt,this.length);let gt=this[Z],St=1,It=0;for(;++It<tt&&(St*=256);)gt+=this[Z+It]*St;return gt},z.prototype.readUintBE=z.prototype.readUIntBE=function(Z,tt,pt){Z=Z>>>0,tt=tt>>>0,pt||Ht(Z,tt,this.length);let gt=this[Z+--tt],St=1;for(;tt>0&&(St*=256);)gt+=this[Z+--tt]*St;return gt},z.prototype.readUint8=z.prototype.readUInt8=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,1,this.length),this[Z]},z.prototype.readUint16LE=z.prototype.readUInt16LE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,2,this.length),this[Z]|this[Z+1]<<8},z.prototype.readUint16BE=z.prototype.readUInt16BE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,2,this.length),this[Z]<<8|this[Z+1]},z.prototype.readUint32LE=z.prototype.readUInt32LE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,4,this.length),(this[Z]|this[Z+1]<<8|this[Z+2]<<16)+this[Z+3]*16777216},z.prototype.readUint32BE=z.prototype.readUInt32BE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,4,this.length),this[Z]*16777216+(this[Z+1]<<16|this[Z+2]<<8|this[Z+3])},z.prototype.readBigUInt64LE=Jt(function(Z){Z=Z>>>0,M(Z,"offset");const tt=this[Z],pt=this[Z+7];(tt===void 0||pt===void 0)&&O(Z,this.length-8);const gt=tt+this[++Z]*2**8+this[++Z]*2**16+this[++Z]*2**24,St=this[++Z]+this[++Z]*2**8+this[++Z]*2**16+pt*2**24;return BigInt(gt)+(BigInt(St)<<BigInt(32))}),z.prototype.readBigUInt64BE=Jt(function(Z){Z=Z>>>0,M(Z,"offset");const tt=this[Z],pt=this[Z+7];(tt===void 0||pt===void 0)&&O(Z,this.length-8);const gt=tt*2**24+this[++Z]*2**16+this[++Z]*2**8+this[++Z],St=this[++Z]*2**24+this[++Z]*2**16+this[++Z]*2**8+pt;return(BigInt(gt)<<BigInt(32))+BigInt(St)}),z.prototype.readIntLE=function(Z,tt,pt){Z=Z>>>0,tt=tt>>>0,pt||Ht(Z,tt,this.length);let gt=this[Z],St=1,It=0;for(;++It<tt&&(St*=256);)gt+=this[Z+It]*St;return St*=128,gt>=St&&(gt-=Math.pow(2,8*tt)),gt},z.prototype.readIntBE=function(Z,tt,pt){Z=Z>>>0,tt=tt>>>0,pt||Ht(Z,tt,this.length);let gt=tt,St=1,It=this[Z+--gt];for(;gt>0&&(St*=256);)It+=this[Z+--gt]*St;return St*=128,It>=St&&(It-=Math.pow(2,8*tt)),It},z.prototype.readInt8=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,1,this.length),this[Z]&128?(255-this[Z]+1)*-1:this[Z]},z.prototype.readInt16LE=function(Z,tt){Z=Z>>>0,tt||Ht(Z,2,this.length);const pt=this[Z]|this[Z+1]<<8;return pt&32768?pt|4294901760:pt},z.prototype.readInt16BE=function(Z,tt){Z=Z>>>0,tt||Ht(Z,2,this.length);const pt=this[Z+1]|this[Z]<<8;return pt&32768?pt|4294901760:pt},z.prototype.readInt32LE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,4,this.length),this[Z]|this[Z+1]<<8|this[Z+2]<<16|this[Z+3]<<24},z.prototype.readInt32BE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,4,this.length),this[Z]<<24|this[Z+1]<<16|this[Z+2]<<8|this[Z+3]},z.prototype.readBigInt64LE=Jt(function(Z){Z=Z>>>0,M(Z,"offset");const tt=this[Z],pt=this[Z+7];(tt===void 0||pt===void 0)&&O(Z,this.length-8);const gt=this[Z+4]+this[Z+5]*2**8+this[Z+6]*2**16+(pt<<24);return(BigInt(gt)<<BigInt(32))+BigInt(tt+this[++Z]*2**8+this[++Z]*2**16+this[++Z]*2**24)}),z.prototype.readBigInt64BE=Jt(function(Z){Z=Z>>>0,M(Z,"offset");const tt=this[Z],pt=this[Z+7];(tt===void 0||pt===void 0)&&O(Z,this.length-8);const gt=(tt<<24)+this[++Z]*2**16+this[++Z]*2**8+this[++Z];return(BigInt(gt)<<BigInt(32))+BigInt(this[++Z]*2**24+this[++Z]*2**16+this[++Z]*2**8+pt)}),z.prototype.readFloatLE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,4,this.length),W.read(this,Z,!0,23,4)},z.prototype.readFloatBE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,4,this.length),W.read(this,Z,!1,23,4)},z.prototype.readDoubleLE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,8,this.length),W.read(this,Z,!0,52,8)},z.prototype.readDoubleBE=function(Z,tt){return Z=Z>>>0,tt||Ht(Z,8,this.length),W.read(this,Z,!1,52,8)};function Kt(ot,Z,tt,pt,gt,St){if(!z.isBuffer(ot))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z>gt||Z<St)throw new RangeError('"value" argument is out of bounds');if(tt+pt>ot.length)throw new RangeError("Index out of range")}z.prototype.writeUintLE=z.prototype.writeUIntLE=function(Z,tt,pt,gt){if(Z=+Z,tt=tt>>>0,pt=pt>>>0,!gt){const le=Math.pow(2,8*pt)-1;Kt(this,Z,tt,pt,le,0)}let St=1,It=0;for(this[tt]=Z&255;++It<pt&&(St*=256);)this[tt+It]=Z/St&255;return tt+pt},z.prototype.writeUintBE=z.prototype.writeUIntBE=function(Z,tt,pt,gt){if(Z=+Z,tt=tt>>>0,pt=pt>>>0,!gt){const le=Math.pow(2,8*pt)-1;Kt(this,Z,tt,pt,le,0)}let St=pt-1,It=1;for(this[tt+St]=Z&255;--St>=0&&(It*=256);)this[tt+St]=Z/It&255;return tt+pt},z.prototype.writeUint8=z.prototype.writeUInt8=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,1,255,0),this[tt]=Z&255,tt+1},z.prototype.writeUint16LE=z.prototype.writeUInt16LE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,2,65535,0),this[tt]=Z&255,this[tt+1]=Z>>>8,tt+2},z.prototype.writeUint16BE=z.prototype.writeUInt16BE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,2,65535,0),this[tt]=Z>>>8,this[tt+1]=Z&255,tt+2},z.prototype.writeUint32LE=z.prototype.writeUInt32LE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,4,4294967295,0),this[tt+3]=Z>>>24,this[tt+2]=Z>>>16,this[tt+1]=Z>>>8,this[tt]=Z&255,tt+4},z.prototype.writeUint32BE=z.prototype.writeUInt32BE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,4,4294967295,0),this[tt]=Z>>>24,this[tt+1]=Z>>>16,this[tt+2]=Z>>>8,this[tt+3]=Z&255,tt+4};function se(ot,Z,tt,pt,gt){at(Z,pt,gt,ot,tt,7);let St=Number(Z&BigInt(4294967295));ot[tt++]=St,St=St>>8,ot[tt++]=St,St=St>>8,ot[tt++]=St,St=St>>8,ot[tt++]=St;let It=Number(Z>>BigInt(32)&BigInt(4294967295));return ot[tt++]=It,It=It>>8,ot[tt++]=It,It=It>>8,ot[tt++]=It,It=It>>8,ot[tt++]=It,tt}function _e(ot,Z,tt,pt,gt){at(Z,pt,gt,ot,tt,7);let St=Number(Z&BigInt(4294967295));ot[tt+7]=St,St=St>>8,ot[tt+6]=St,St=St>>8,ot[tt+5]=St,St=St>>8,ot[tt+4]=St;let It=Number(Z>>BigInt(32)&BigInt(4294967295));return ot[tt+3]=It,It=It>>8,ot[tt+2]=It,It=It>>8,ot[tt+1]=It,It=It>>8,ot[tt]=It,tt+8}z.prototype.writeBigUInt64LE=Jt(function(Z,tt=0){return se(this,Z,tt,BigInt(0),BigInt("0xffffffffffffffff"))}),z.prototype.writeBigUInt64BE=Jt(function(Z,tt=0){return _e(this,Z,tt,BigInt(0),BigInt("0xffffffffffffffff"))}),z.prototype.writeIntLE=function(Z,tt,pt,gt){if(Z=+Z,tt=tt>>>0,!gt){const xe=Math.pow(2,8*pt-1);Kt(this,Z,tt,pt,xe-1,-xe)}let St=0,It=1,le=0;for(this[tt]=Z&255;++St<pt&&(It*=256);)Z<0&&le===0&&this[tt+St-1]!==0&&(le=1),this[tt+St]=(Z/It>>0)-le&255;return tt+pt},z.prototype.writeIntBE=function(Z,tt,pt,gt){if(Z=+Z,tt=tt>>>0,!gt){const xe=Math.pow(2,8*pt-1);Kt(this,Z,tt,pt,xe-1,-xe)}let St=pt-1,It=1,le=0;for(this[tt+St]=Z&255;--St>=0&&(It*=256);)Z<0&&le===0&&this[tt+St+1]!==0&&(le=1),this[tt+St]=(Z/It>>0)-le&255;return tt+pt},z.prototype.writeInt8=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,1,127,-128),Z<0&&(Z=255+Z+1),this[tt]=Z&255,tt+1},z.prototype.writeInt16LE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,2,32767,-32768),this[tt]=Z&255,this[tt+1]=Z>>>8,tt+2},z.prototype.writeInt16BE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,2,32767,-32768),this[tt]=Z>>>8,this[tt+1]=Z&255,tt+2},z.prototype.writeInt32LE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,4,2147483647,-2147483648),this[tt]=Z&255,this[tt+1]=Z>>>8,this[tt+2]=Z>>>16,this[tt+3]=Z>>>24,tt+4},z.prototype.writeInt32BE=function(Z,tt,pt){return Z=+Z,tt=tt>>>0,pt||Kt(this,Z,tt,4,2147483647,-2147483648),Z<0&&(Z=4294967295+Z+1),this[tt]=Z>>>24,this[tt+1]=Z>>>16,this[tt+2]=Z>>>8,this[tt+3]=Z&255,tt+4},z.prototype.writeBigInt64LE=Jt(function(Z,tt=0){return se(this,Z,tt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),z.prototype.writeBigInt64BE=Jt(function(Z,tt=0){return _e(this,Z,tt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(ot,Z,tt,pt,gt,St){if(tt+pt>ot.length)throw new RangeError("Index out of range");if(tt<0)throw new RangeError("Index out of range")}function de(ot,Z,tt,pt,gt){return Z=+Z,tt=tt>>>0,gt||ae(ot,Z,tt,4),W.write(ot,Z,tt,pt,23,4),tt+4}z.prototype.writeFloatLE=function(Z,tt,pt){return de(this,Z,tt,!0,pt)},z.prototype.writeFloatBE=function(Z,tt,pt){return de(this,Z,tt,!1,pt)};function fe(ot,Z,tt,pt,gt){return Z=+Z,tt=tt>>>0,gt||ae(ot,Z,tt,8),W.write(ot,Z,tt,pt,52,8),tt+8}z.prototype.writeDoubleLE=function(Z,tt,pt){return fe(this,Z,tt,!0,pt)},z.prototype.writeDoubleBE=function(Z,tt,pt){return fe(this,Z,tt,!1,pt)},z.prototype.copy=function(Z,tt,pt,gt){if(!z.isBuffer(Z))throw new TypeError("argument should be a Buffer");if(pt||(pt=0),!gt&&gt!==0&&(gt=this.length),tt>=Z.length&&(tt=Z.length),tt||(tt=0),gt>0&&gt<pt&&(gt=pt),gt===pt||Z.length===0||this.length===0)return 0;if(tt<0)throw new RangeError("targetStart out of bounds");if(pt<0||pt>=this.length)throw new RangeError("Index out of range");if(gt<0)throw new RangeError("sourceEnd out of bounds");gt>this.length&&(gt=this.length),Z.length-tt<gt-pt&&(gt=Z.length-tt+pt);const St=gt-pt;return this===Z&&typeof b.prototype.copyWithin=="function"?this.copyWithin(tt,pt,gt):b.prototype.set.call(Z,this.subarray(pt,gt),tt),St},z.prototype.fill=function(Z,tt,pt,gt){if(typeof Z=="string"){if(typeof tt=="string"?(gt=tt,tt=0,pt=this.length):typeof pt=="string"&&(gt=pt,pt=this.length),gt!==void 0&&typeof gt!="string")throw new TypeError("encoding must be a string");if(typeof gt=="string"&&!z.isEncoding(gt))throw new TypeError("Unknown encoding: "+gt);if(Z.length===1){const It=Z.charCodeAt(0);(gt==="utf8"&&It<128||gt==="latin1")&&(Z=It)}}else typeof Z=="number"?Z=Z&255:typeof Z=="boolean"&&(Z=Number(Z));if(tt<0||this.length<tt||this.length<pt)throw new RangeError("Out of range index");if(pt<=tt)return this;tt=tt>>>0,pt=pt===void 0?this.length:pt>>>0,Z||(Z=0);let St;if(typeof Z=="number")for(St=tt;St<pt;++St)this[St]=Z;else{const It=z.isBuffer(Z)?Z:z.from(Z,gt),le=It.length;if(le===0)throw new TypeError('The value "'+Z+'" is invalid for argument "value"');for(St=0;St<pt-tt;++St)this[St+tt]=It[St%le]}return this};const Yt={};function ut(ot,Z,tt){Yt[ot]=class extends tt{constructor(){super(),Object.defineProperty(this,"message",{value:Z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ot}]`,this.stack,delete this.name}get code(){return ot}set code(gt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:gt,writable:!0})}toString(){return`${this.name} [${ot}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(ot){return ot?`${ot} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(ot,Z){return`The "${ot}" argument must be of type number. Received type ${typeof Z}`},TypeError),ut("ERR_OUT_OF_RANGE",function(ot,Z,tt){let pt=`The value of "${ot}" is out of range.`,gt=tt;return Number.isInteger(tt)&&Math.abs(tt)>2**32?gt=X(String(tt)):typeof tt=="bigint"&&(gt=String(tt),(tt>BigInt(2)**BigInt(32)||tt<-(BigInt(2)**BigInt(32)))&&(gt=X(gt)),gt+="n"),pt+=` It must be ${Z}. Received ${gt}`,pt},RangeError);function X(ot){let Z="",tt=ot.length;const pt=ot[0]==="-"?1:0;for(;tt>=pt+4;tt-=3)Z=`_${ot.slice(tt-3,tt)}${Z}`;return`${ot.slice(0,tt)}${Z}`}function nt(ot,Z,tt){M(Z,"offset"),(ot[Z]===void 0||ot[Z+tt]===void 0)&&O(Z,ot.length-(tt+1))}function at(ot,Z,tt,pt,gt,St){if(ot>tt||ot<Z){const It=typeof Z=="bigint"?"n":"";let le;throw Z===0||Z===BigInt(0)?le=`>= 0${It} and < 2${It} ** ${(St+1)*8}${It}`:le=`>= -(2${It} ** ${(St+1)*8-1}${It}) and < 2 ** ${(St+1)*8-1}${It}`,new Yt.ERR_OUT_OF_RANGE("value",le,ot)}nt(pt,gt,St)}function M(ot,Z){if(typeof ot!="number")throw new Yt.ERR_INVALID_ARG_TYPE(Z,"number",ot)}function O(ot,Z,tt){throw Math.floor(ot)!==ot?(M(ot,tt),new Yt.ERR_OUT_OF_RANGE("offset","an integer",ot)):Z<0?new Yt.ERR_BUFFER_OUT_OF_BOUNDS:new Yt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Z}`,ot)}const ht=/[^+/0-9A-Za-z-_]/g;function Et(ot){if(ot=ot.split("=")[0],ot=ot.trim().replace(ht,""),ot.length<2)return"";for(;ot.length%4!==0;)ot=ot+"=";return ot}function mt(ot,Z){Z=Z||1/0;let tt;const pt=ot.length;let gt=null;const St=[];for(let It=0;It<pt;++It){if(tt=ot.charCodeAt(It),tt>55295&&tt<57344){if(!gt){if(tt>56319){(Z-=3)>-1&&St.push(239,191,189);continue}else if(It+1===pt){(Z-=3)>-1&&St.push(239,191,189);continue}gt=tt;continue}if(tt<56320){(Z-=3)>-1&&St.push(239,191,189),gt=tt;continue}tt=(gt-55296<<10|tt-56320)+65536}else gt&&(Z-=3)>-1&&St.push(239,191,189);if(gt=null,tt<128){if((Z-=1)<0)break;St.push(tt)}else if(tt<2048){if((Z-=2)<0)break;St.push(tt>>6|192,tt&63|128)}else if(tt<65536){if((Z-=3)<0)break;St.push(tt>>12|224,tt>>6&63|128,tt&63|128)}else if(tt<1114112){if((Z-=4)<0)break;St.push(tt>>18|240,tt>>12&63|128,tt>>6&63|128,tt&63|128)}else throw new Error("Invalid code point")}return St}function xt(ot){const Z=[];for(let tt=0;tt<ot.length;++tt)Z.push(ot.charCodeAt(tt)&255);return Z}function Lt(ot,Z){let tt,pt,gt;const St=[];for(let It=0;It<ot.length&&!((Z-=2)<0);++It)tt=ot.charCodeAt(It),pt=tt>>8,gt=tt%256,St.push(gt),St.push(pt);return St}function At(ot){return P.toByteArray(Et(ot))}function jt(ot,Z,tt,pt){let gt;for(gt=0;gt<pt&&!(gt+tt>=Z.length||gt>=ot.length);++gt)Z[gt+tt]=ot[gt];return gt}function Wt(ot,Z){return ot instanceof Z||ot!=null&&ot.constructor!=null&&ot.constructor.name!=null&&ot.constructor.name===Z.name}function Bt(ot){return ot!==ot}const Nt=(function(){const ot="0123456789abcdef",Z=new Array(256);for(let tt=0;tt<16;++tt){const pt=tt*16;for(let gt=0;gt<16;++gt)Z[pt+gt]=ot[tt]+ot[gt]}return Z})();function Jt(ot){return typeof BigInt>"u"?Xt:ot}function Xt(){throw new Error("BigInt not supported")}})(t);const A=t.Buffer;n.Blob=t.Blob,n.BlobOptions=t.BlobOptions,n.Buffer=t.Buffer,n.File=t.File,n.FileOptions=t.FileOptions,n.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,n.SlowBuffer=t.SlowBuffer,n.TranscodeEncoding=t.TranscodeEncoding,n.atob=t.atob,n.btoa=t.btoa,n.constants=t.constants,n.default=A,n.isAscii=t.isAscii,n.isUtf8=t.isUtf8,n.kMaxLength=t.kMaxLength,n.kStringMaxLength=t.kStringMaxLength,n.resolveObjectURL=t.resolveObjectURL,n.transcode=t.transcode})(h1)),h1}var jF=i0.exports,TS;function Fb(){return TS||(TS=1,(function(n){(function(t,e){function i(I,w){if(!I)throw new Error(w||"Assertion failed")}function r(I,w){I.super_=w;var T=function(){};T.prototype=w.prototype,I.prototype=new T,I.prototype.constructor=I}function s(I,w,T){if(s.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((w==="le"||w==="be")&&(T=w,w=10),this._init(I||0,w||10,T||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ob().Buffer}catch{}s.isBN=function(w){return w instanceof s?!0:w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,T){return w.cmp(T)>0?w:T},s.min=function(w,T){return w.cmp(T)<0?w:T},s.prototype._init=function(w,T,V){if(typeof w=="number")return this._initNumber(w,T,V);if(typeof w=="object")return this._initArray(w,T,V);T==="hex"&&(T=16),i(T===(T|0)&&T>=2&&T<=36),w=w.toString().replace(/\s+/g,"");var Y=0;w[0]==="-"&&(Y++,this.negative=1),Y<w.length&&(T===16?this._parseHex(w,Y,V):(this._parseBase(w,T,Y),V==="le"&&this._initArray(this.toArray(),T,V)))},s.prototype._initNumber=function(w,T,V){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[w&67108863],this.length=1):w<4503599627370496?(this.words=[w&67108863,w/67108864&67108863],this.length=2):(i(w<9007199254740992),this.words=[w&67108863,w/67108864&67108863,1],this.length=3),V==="le"&&this._initArray(this.toArray(),T,V)},s.prototype._initArray=function(w,T,V){if(i(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)this.words[Y]=0;var Q,$,F=0;if(V==="be")for(Y=w.length-1,Q=0;Y>=0;Y-=3)$=w[Y]|w[Y-1]<<8|w[Y-2]<<16,this.words[Q]|=$<<F&67108863,this.words[Q+1]=$>>>26-F&67108863,F+=24,F>=26&&(F-=26,Q++);else if(V==="le")for(Y=0,Q=0;Y<w.length;Y+=3)$=w[Y]|w[Y+1]<<8|w[Y+2]<<16,this.words[Q]|=$<<F&67108863,this.words[Q+1]=$>>>26-F&67108863,F+=24,F>=26&&(F-=26,Q++);return this._strip()};function a(I,w){var T=I.charCodeAt(w);if(T>=48&&T<=57)return T-48;if(T>=65&&T<=70)return T-55;if(T>=97&&T<=102)return T-87;i(!1,"Invalid character in "+I)}function l(I,w,T){var V=a(I,T);return T-1>=w&&(V|=a(I,T-1)<<4),V}s.prototype._parseHex=function(w,T,V){this.length=Math.ceil((w.length-T)/6),this.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)this.words[Y]=0;var Q=0,$=0,F;if(V==="be")for(Y=w.length-1;Y>=T;Y-=2)F=l(w,T,Y)<<Q,this.words[$]|=F&67108863,Q>=18?(Q-=18,$+=1,this.words[$]|=F>>>26):Q+=8;else{var R=w.length-T;for(Y=R%2===0?T+1:T;Y<w.length;Y+=2)F=l(w,T,Y)<<Q,this.words[$]|=F&67108863,Q>=18?(Q-=18,$+=1,this.words[$]|=F>>>26):Q+=8}this._strip()};function d(I,w,T,V){for(var Y=0,Q=0,$=Math.min(I.length,T),F=w;F<$;F++){var R=I.charCodeAt(F)-48;Y*=V,R>=49?Q=R-49+10:R>=17?Q=R-17+10:Q=R,i(R>=0&&Q<V,"Invalid character"),Y+=Q}return Y}s.prototype._parseBase=function(w,T,V){this.words=[0],this.length=1;for(var Y=0,Q=1;Q<=67108863;Q*=T)Y++;Y--,Q=Q/T|0;for(var $=w.length-V,F=$%Y,R=Math.min($,$-F)+V,_=0,k=V;k<R;k+=Y)_=d(w,k,k+Y,T),this.imuln(Q),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(F!==0){var H=1;for(_=d(w,k,w.length,T),k=0;k<F;k++)H*=T;this.imuln(H),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var T=0;T<this.length;T++)w.words[T]=this.words[T];w.length=this.length,w.negative=this.negative,w.red=this.red};function u(I,w){I.words=w.words,I.length=w.length,I.negative=w.negative,I.red=w.red}if(s.prototype._move=function(w){u(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,T){w=w||10,T=T|0||1;var V;if(w===16||w==="hex"){V="";for(var Y=0,Q=0,$=0;$<this.length;$++){var F=this.words[$],R=((F<<Y|Q)&16777215).toString(16);Q=F>>>24-Y&16777215,Y+=2,Y>=26&&(Y-=26,$--),Q!==0||$!==this.length-1?V=m[6-R.length]+R+V:V=R+V}for(Q!==0&&(V=Q.toString(16)+V);V.length%T!==0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}if(w===(w|0)&&w>=2&&w<=36){var _=p[w],k=E[w];V="";var H=this.clone();for(H.negative=0;!H.isZero();){var L=H.modrn(k).toString(w);H=H.idivn(k),H.isZero()?V=L+V:V=m[_-L.length]+L+V}for(this.isZero()&&(V="0"+V);V.length%T!==0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=this.words[1]*67108864:this.length===3&&this.words[2]===1?w+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(w,T){return this.toArrayLike(o,w,T)}),s.prototype.toArray=function(w,T){return this.toArrayLike(Array,w,T)};var C=function(w,T){return w.allocUnsafe?w.allocUnsafe(T):new w(T)};s.prototype.toArrayLike=function(w,T,V){this._strip();var Y=this.byteLength(),Q=V||Math.max(1,Y);i(Y<=Q,"byte array longer than desired length"),i(Q>0,"Requested array length <= 0");var $=C(w,Q),F=T==="le"?"LE":"BE";return this["_toArrayLike"+F]($,Y),$},s.prototype._toArrayLikeLE=function(w,T){for(var V=0,Y=0,Q=0,$=0;Q<this.length;Q++){var F=this.words[Q]<<$|Y;w[V++]=F&255,V<w.length&&(w[V++]=F>>8&255),V<w.length&&(w[V++]=F>>16&255),$===6?(V<w.length&&(w[V++]=F>>24&255),Y=0,$=0):(Y=F>>>24,$+=2)}if(V<w.length)for(w[V++]=Y;V<w.length;)w[V++]=0},s.prototype._toArrayLikeBE=function(w,T){for(var V=w.length-1,Y=0,Q=0,$=0;Q<this.length;Q++){var F=this.words[Q]<<$|Y;w[V--]=F&255,V>=0&&(w[V--]=F>>8&255),V>=0&&(w[V--]=F>>16&255),$===6?(V>=0&&(w[V--]=F>>24&255),Y=0,$=0):(Y=F>>>24,$+=2)}if(V>=0)for(w[V--]=Y;V>=0;)w[V--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var T=w,V=0;return T>=4096&&(V+=13,T>>>=13),T>=64&&(V+=7,T>>>=7),T>=8&&(V+=4,T>>>=4),T>=2&&(V+=2,T>>>=2),V+T},s.prototype._zeroBits=function(w){if(w===0)return 26;var T=w,V=0;return(T&8191)===0&&(V+=13,T>>>=13),(T&127)===0&&(V+=7,T>>>=7),(T&15)===0&&(V+=4,T>>>=4),(T&3)===0&&(V+=2,T>>>=2),(T&1)===0&&V++,V},s.prototype.bitLength=function(){var w=this.words[this.length-1],T=this._countBits(w);return(this.length-1)*26+T};function v(I){for(var w=new Array(I.bitLength()),T=0;T<w.length;T++){var V=T/26|0,Y=T%26;w[T]=I.words[V]>>>Y&1}return w}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,T=0;T<this.length;T++){var V=this._zeroBits(this.words[T]);if(w+=V,V!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var T=0;T<w.length;T++)this.words[T]=this.words[T]|w.words[T];return this._strip()},s.prototype.ior=function(w){return i((this.negative|w.negative)===0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var T;this.length>w.length?T=w:T=this;for(var V=0;V<T.length;V++)this.words[V]=this.words[V]&w.words[V];return this.length=T.length,this._strip()},s.prototype.iand=function(w){return i((this.negative|w.negative)===0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var T,V;this.length>w.length?(T=this,V=w):(T=w,V=this);for(var Y=0;Y<V.length;Y++)this.words[Y]=T.words[Y]^V.words[Y];if(this!==T)for(;Y<T.length;Y++)this.words[Y]=T.words[Y];return this.length=T.length,this._strip()},s.prototype.ixor=function(w){return i((this.negative|w.negative)===0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){i(typeof w=="number"&&w>=0);var T=Math.ceil(w/26)|0,V=w%26;this._expand(T),V>0&&T--;for(var Y=0;Y<T;Y++)this.words[Y]=~this.words[Y]&67108863;return V>0&&(this.words[Y]=~this.words[Y]&67108863>>26-V),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,T){i(typeof w=="number"&&w>=0);var V=w/26|0,Y=w%26;return this._expand(V+1),T?this.words[V]=this.words[V]|1<<Y:this.words[V]=this.words[V]&~(1<<Y),this._strip()},s.prototype.iadd=function(w){var T;if(this.negative!==0&&w.negative===0)return this.negative=0,T=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,T=this.isub(w),w.negative=1,T._normSign();var V,Y;this.length>w.length?(V=this,Y=w):(V=w,Y=this);for(var Q=0,$=0;$<Y.length;$++)T=(V.words[$]|0)+(Y.words[$]|0)+Q,this.words[$]=T&67108863,Q=T>>>26;for(;Q!==0&&$<V.length;$++)T=(V.words[$]|0)+Q,this.words[$]=T&67108863,Q=T>>>26;if(this.length=V.length,Q!==0)this.words[this.length]=Q,this.length++;else if(V!==this)for(;$<V.length;$++)this.words[$]=V.words[$];return this},s.prototype.add=function(w){var T;return w.negative!==0&&this.negative===0?(w.negative=0,T=this.sub(w),w.negative^=1,T):w.negative===0&&this.negative!==0?(this.negative=0,T=w.sub(this),this.negative=1,T):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var T=this.iadd(w);return w.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var V=this.cmp(w);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Y,Q;V>0?(Y=this,Q=w):(Y=w,Q=this);for(var $=0,F=0;F<Q.length;F++)T=(Y.words[F]|0)-(Q.words[F]|0)+$,$=T>>26,this.words[F]=T&67108863;for(;$!==0&&F<Y.length;F++)T=(Y.words[F]|0)+$,$=T>>26,this.words[F]=T&67108863;if($===0&&F<Y.length&&Y!==this)for(;F<Y.length;F++)this.words[F]=Y.words[F];return this.length=Math.max(this.length,F),Y!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};function A(I,w,T){T.negative=w.negative^I.negative;var V=I.length+w.length|0;T.length=V,V=V-1|0;var Y=I.words[0]|0,Q=w.words[0]|0,$=Y*Q,F=$&67108863,R=$/67108864|0;T.words[0]=F;for(var _=1;_<V;_++){for(var k=R>>>26,H=R&67108863,L=Math.min(_,w.length-1),g=Math.max(0,_-I.length+1);g<=L;g++){var D=_-g|0;Y=I.words[D]|0,Q=w.words[g]|0,$=Y*Q+H,k+=$/67108864|0,H=$&67108863}T.words[_]=H|0,R=k|0}return R!==0?T.words[_]=R|0:T.length--,T._strip()}var x=function(w,T,V){var Y=w.words,Q=T.words,$=V.words,F=0,R,_,k,H=Y[0]|0,L=H&8191,g=H>>>13,D=Y[1]|0,S=D&8191,lt=D>>>13,ct=Y[2]|0,G=ct&8191,ft=ct>>>13,vt=Y[3]|0,wt=vt&8191,bt=vt>>>13,Ft=Y[4]|0,Pt=Ft&8191,Gt=Ft>>>13,$t=Y[5]|0,kt=$t&8191,Rt=$t>>>13,Ht=Y[6]|0,Kt=Ht&8191,se=Ht>>>13,_e=Y[7]|0,ae=_e&8191,de=_e>>>13,fe=Y[8]|0,Yt=fe&8191,ut=fe>>>13,X=Y[9]|0,nt=X&8191,at=X>>>13,M=Q[0]|0,O=M&8191,ht=M>>>13,Et=Q[1]|0,mt=Et&8191,xt=Et>>>13,Lt=Q[2]|0,At=Lt&8191,jt=Lt>>>13,Wt=Q[3]|0,Bt=Wt&8191,Nt=Wt>>>13,Jt=Q[4]|0,Xt=Jt&8191,ot=Jt>>>13,Z=Q[5]|0,tt=Z&8191,pt=Z>>>13,gt=Q[6]|0,St=gt&8191,It=gt>>>13,le=Q[7]|0,xe=le&8191,Se=le>>>13,nn=Q[8]|0,Ie=nn&8191,mn=nn>>>13,Li=Q[9]|0,ln=Li&8191,un=Li>>>13;V.negative=w.negative^T.negative,V.length=19,R=Math.imul(L,O),_=Math.imul(L,ht),_=_+Math.imul(g,O)|0,k=Math.imul(g,ht);var Br=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Br>>>26)|0,Br&=67108863,R=Math.imul(S,O),_=Math.imul(S,ht),_=_+Math.imul(lt,O)|0,k=Math.imul(lt,ht),R=R+Math.imul(L,mt)|0,_=_+Math.imul(L,xt)|0,_=_+Math.imul(g,mt)|0,k=k+Math.imul(g,xt)|0;var Bi=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,R=Math.imul(G,O),_=Math.imul(G,ht),_=_+Math.imul(ft,O)|0,k=Math.imul(ft,ht),R=R+Math.imul(S,mt)|0,_=_+Math.imul(S,xt)|0,_=_+Math.imul(lt,mt)|0,k=k+Math.imul(lt,xt)|0,R=R+Math.imul(L,At)|0,_=_+Math.imul(L,jt)|0,_=_+Math.imul(g,At)|0,k=k+Math.imul(g,jt)|0;var Ci=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,R=Math.imul(wt,O),_=Math.imul(wt,ht),_=_+Math.imul(bt,O)|0,k=Math.imul(bt,ht),R=R+Math.imul(G,mt)|0,_=_+Math.imul(G,xt)|0,_=_+Math.imul(ft,mt)|0,k=k+Math.imul(ft,xt)|0,R=R+Math.imul(S,At)|0,_=_+Math.imul(S,jt)|0,_=_+Math.imul(lt,At)|0,k=k+Math.imul(lt,jt)|0,R=R+Math.imul(L,Bt)|0,_=_+Math.imul(L,Nt)|0,_=_+Math.imul(g,Bt)|0,k=k+Math.imul(g,Nt)|0;var ar=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(ar>>>26)|0,ar&=67108863,R=Math.imul(Pt,O),_=Math.imul(Pt,ht),_=_+Math.imul(Gt,O)|0,k=Math.imul(Gt,ht),R=R+Math.imul(wt,mt)|0,_=_+Math.imul(wt,xt)|0,_=_+Math.imul(bt,mt)|0,k=k+Math.imul(bt,xt)|0,R=R+Math.imul(G,At)|0,_=_+Math.imul(G,jt)|0,_=_+Math.imul(ft,At)|0,k=k+Math.imul(ft,jt)|0,R=R+Math.imul(S,Bt)|0,_=_+Math.imul(S,Nt)|0,_=_+Math.imul(lt,Bt)|0,k=k+Math.imul(lt,Nt)|0,R=R+Math.imul(L,Xt)|0,_=_+Math.imul(L,ot)|0,_=_+Math.imul(g,Xt)|0,k=k+Math.imul(g,ot)|0;var Qr=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,R=Math.imul(kt,O),_=Math.imul(kt,ht),_=_+Math.imul(Rt,O)|0,k=Math.imul(Rt,ht),R=R+Math.imul(Pt,mt)|0,_=_+Math.imul(Pt,xt)|0,_=_+Math.imul(Gt,mt)|0,k=k+Math.imul(Gt,xt)|0,R=R+Math.imul(wt,At)|0,_=_+Math.imul(wt,jt)|0,_=_+Math.imul(bt,At)|0,k=k+Math.imul(bt,jt)|0,R=R+Math.imul(G,Bt)|0,_=_+Math.imul(G,Nt)|0,_=_+Math.imul(ft,Bt)|0,k=k+Math.imul(ft,Nt)|0,R=R+Math.imul(S,Xt)|0,_=_+Math.imul(S,ot)|0,_=_+Math.imul(lt,Xt)|0,k=k+Math.imul(lt,ot)|0,R=R+Math.imul(L,tt)|0,_=_+Math.imul(L,pt)|0,_=_+Math.imul(g,tt)|0,k=k+Math.imul(g,pt)|0;var Hu=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Hu>>>26)|0,Hu&=67108863,R=Math.imul(Kt,O),_=Math.imul(Kt,ht),_=_+Math.imul(se,O)|0,k=Math.imul(se,ht),R=R+Math.imul(kt,mt)|0,_=_+Math.imul(kt,xt)|0,_=_+Math.imul(Rt,mt)|0,k=k+Math.imul(Rt,xt)|0,R=R+Math.imul(Pt,At)|0,_=_+Math.imul(Pt,jt)|0,_=_+Math.imul(Gt,At)|0,k=k+Math.imul(Gt,jt)|0,R=R+Math.imul(wt,Bt)|0,_=_+Math.imul(wt,Nt)|0,_=_+Math.imul(bt,Bt)|0,k=k+Math.imul(bt,Nt)|0,R=R+Math.imul(G,Xt)|0,_=_+Math.imul(G,ot)|0,_=_+Math.imul(ft,Xt)|0,k=k+Math.imul(ft,ot)|0,R=R+Math.imul(S,tt)|0,_=_+Math.imul(S,pt)|0,_=_+Math.imul(lt,tt)|0,k=k+Math.imul(lt,pt)|0,R=R+Math.imul(L,St)|0,_=_+Math.imul(L,It)|0,_=_+Math.imul(g,St)|0,k=k+Math.imul(g,It)|0;var Ku=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,R=Math.imul(ae,O),_=Math.imul(ae,ht),_=_+Math.imul(de,O)|0,k=Math.imul(de,ht),R=R+Math.imul(Kt,mt)|0,_=_+Math.imul(Kt,xt)|0,_=_+Math.imul(se,mt)|0,k=k+Math.imul(se,xt)|0,R=R+Math.imul(kt,At)|0,_=_+Math.imul(kt,jt)|0,_=_+Math.imul(Rt,At)|0,k=k+Math.imul(Rt,jt)|0,R=R+Math.imul(Pt,Bt)|0,_=_+Math.imul(Pt,Nt)|0,_=_+Math.imul(Gt,Bt)|0,k=k+Math.imul(Gt,Nt)|0,R=R+Math.imul(wt,Xt)|0,_=_+Math.imul(wt,ot)|0,_=_+Math.imul(bt,Xt)|0,k=k+Math.imul(bt,ot)|0,R=R+Math.imul(G,tt)|0,_=_+Math.imul(G,pt)|0,_=_+Math.imul(ft,tt)|0,k=k+Math.imul(ft,pt)|0,R=R+Math.imul(S,St)|0,_=_+Math.imul(S,It)|0,_=_+Math.imul(lt,St)|0,k=k+Math.imul(lt,It)|0,R=R+Math.imul(L,xe)|0,_=_+Math.imul(L,Se)|0,_=_+Math.imul(g,xe)|0,k=k+Math.imul(g,Se)|0;var In=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(In>>>26)|0,In&=67108863,R=Math.imul(Yt,O),_=Math.imul(Yt,ht),_=_+Math.imul(ut,O)|0,k=Math.imul(ut,ht),R=R+Math.imul(ae,mt)|0,_=_+Math.imul(ae,xt)|0,_=_+Math.imul(de,mt)|0,k=k+Math.imul(de,xt)|0,R=R+Math.imul(Kt,At)|0,_=_+Math.imul(Kt,jt)|0,_=_+Math.imul(se,At)|0,k=k+Math.imul(se,jt)|0,R=R+Math.imul(kt,Bt)|0,_=_+Math.imul(kt,Nt)|0,_=_+Math.imul(Rt,Bt)|0,k=k+Math.imul(Rt,Nt)|0,R=R+Math.imul(Pt,Xt)|0,_=_+Math.imul(Pt,ot)|0,_=_+Math.imul(Gt,Xt)|0,k=k+Math.imul(Gt,ot)|0,R=R+Math.imul(wt,tt)|0,_=_+Math.imul(wt,pt)|0,_=_+Math.imul(bt,tt)|0,k=k+Math.imul(bt,pt)|0,R=R+Math.imul(G,St)|0,_=_+Math.imul(G,It)|0,_=_+Math.imul(ft,St)|0,k=k+Math.imul(ft,It)|0,R=R+Math.imul(S,xe)|0,_=_+Math.imul(S,Se)|0,_=_+Math.imul(lt,xe)|0,k=k+Math.imul(lt,Se)|0,R=R+Math.imul(L,Ie)|0,_=_+Math.imul(L,mn)|0,_=_+Math.imul(g,Ie)|0,k=k+Math.imul(g,mn)|0;var Zu=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Zu>>>26)|0,Zu&=67108863,R=Math.imul(nt,O),_=Math.imul(nt,ht),_=_+Math.imul(at,O)|0,k=Math.imul(at,ht),R=R+Math.imul(Yt,mt)|0,_=_+Math.imul(Yt,xt)|0,_=_+Math.imul(ut,mt)|0,k=k+Math.imul(ut,xt)|0,R=R+Math.imul(ae,At)|0,_=_+Math.imul(ae,jt)|0,_=_+Math.imul(de,At)|0,k=k+Math.imul(de,jt)|0,R=R+Math.imul(Kt,Bt)|0,_=_+Math.imul(Kt,Nt)|0,_=_+Math.imul(se,Bt)|0,k=k+Math.imul(se,Nt)|0,R=R+Math.imul(kt,Xt)|0,_=_+Math.imul(kt,ot)|0,_=_+Math.imul(Rt,Xt)|0,k=k+Math.imul(Rt,ot)|0,R=R+Math.imul(Pt,tt)|0,_=_+Math.imul(Pt,pt)|0,_=_+Math.imul(Gt,tt)|0,k=k+Math.imul(Gt,pt)|0,R=R+Math.imul(wt,St)|0,_=_+Math.imul(wt,It)|0,_=_+Math.imul(bt,St)|0,k=k+Math.imul(bt,It)|0,R=R+Math.imul(G,xe)|0,_=_+Math.imul(G,Se)|0,_=_+Math.imul(ft,xe)|0,k=k+Math.imul(ft,Se)|0,R=R+Math.imul(S,Ie)|0,_=_+Math.imul(S,mn)|0,_=_+Math.imul(lt,Ie)|0,k=k+Math.imul(lt,mn)|0,R=R+Math.imul(L,ln)|0,_=_+Math.imul(L,un)|0,_=_+Math.imul(g,ln)|0,k=k+Math.imul(g,un)|0;var qa=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(qa>>>26)|0,qa&=67108863,R=Math.imul(nt,mt),_=Math.imul(nt,xt),_=_+Math.imul(at,mt)|0,k=Math.imul(at,xt),R=R+Math.imul(Yt,At)|0,_=_+Math.imul(Yt,jt)|0,_=_+Math.imul(ut,At)|0,k=k+Math.imul(ut,jt)|0,R=R+Math.imul(ae,Bt)|0,_=_+Math.imul(ae,Nt)|0,_=_+Math.imul(de,Bt)|0,k=k+Math.imul(de,Nt)|0,R=R+Math.imul(Kt,Xt)|0,_=_+Math.imul(Kt,ot)|0,_=_+Math.imul(se,Xt)|0,k=k+Math.imul(se,ot)|0,R=R+Math.imul(kt,tt)|0,_=_+Math.imul(kt,pt)|0,_=_+Math.imul(Rt,tt)|0,k=k+Math.imul(Rt,pt)|0,R=R+Math.imul(Pt,St)|0,_=_+Math.imul(Pt,It)|0,_=_+Math.imul(Gt,St)|0,k=k+Math.imul(Gt,It)|0,R=R+Math.imul(wt,xe)|0,_=_+Math.imul(wt,Se)|0,_=_+Math.imul(bt,xe)|0,k=k+Math.imul(bt,Se)|0,R=R+Math.imul(G,Ie)|0,_=_+Math.imul(G,mn)|0,_=_+Math.imul(ft,Ie)|0,k=k+Math.imul(ft,mn)|0,R=R+Math.imul(S,ln)|0,_=_+Math.imul(S,un)|0,_=_+Math.imul(lt,ln)|0,k=k+Math.imul(lt,un)|0;var rl=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(rl>>>26)|0,rl&=67108863,R=Math.imul(nt,At),_=Math.imul(nt,jt),_=_+Math.imul(at,At)|0,k=Math.imul(at,jt),R=R+Math.imul(Yt,Bt)|0,_=_+Math.imul(Yt,Nt)|0,_=_+Math.imul(ut,Bt)|0,k=k+Math.imul(ut,Nt)|0,R=R+Math.imul(ae,Xt)|0,_=_+Math.imul(ae,ot)|0,_=_+Math.imul(de,Xt)|0,k=k+Math.imul(de,ot)|0,R=R+Math.imul(Kt,tt)|0,_=_+Math.imul(Kt,pt)|0,_=_+Math.imul(se,tt)|0,k=k+Math.imul(se,pt)|0,R=R+Math.imul(kt,St)|0,_=_+Math.imul(kt,It)|0,_=_+Math.imul(Rt,St)|0,k=k+Math.imul(Rt,It)|0,R=R+Math.imul(Pt,xe)|0,_=_+Math.imul(Pt,Se)|0,_=_+Math.imul(Gt,xe)|0,k=k+Math.imul(Gt,Se)|0,R=R+Math.imul(wt,Ie)|0,_=_+Math.imul(wt,mn)|0,_=_+Math.imul(bt,Ie)|0,k=k+Math.imul(bt,mn)|0,R=R+Math.imul(G,ln)|0,_=_+Math.imul(G,un)|0,_=_+Math.imul(ft,ln)|0,k=k+Math.imul(ft,un)|0;var jo=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(jo>>>26)|0,jo&=67108863,R=Math.imul(nt,Bt),_=Math.imul(nt,Nt),_=_+Math.imul(at,Bt)|0,k=Math.imul(at,Nt),R=R+Math.imul(Yt,Xt)|0,_=_+Math.imul(Yt,ot)|0,_=_+Math.imul(ut,Xt)|0,k=k+Math.imul(ut,ot)|0,R=R+Math.imul(ae,tt)|0,_=_+Math.imul(ae,pt)|0,_=_+Math.imul(de,tt)|0,k=k+Math.imul(de,pt)|0,R=R+Math.imul(Kt,St)|0,_=_+Math.imul(Kt,It)|0,_=_+Math.imul(se,St)|0,k=k+Math.imul(se,It)|0,R=R+Math.imul(kt,xe)|0,_=_+Math.imul(kt,Se)|0,_=_+Math.imul(Rt,xe)|0,k=k+Math.imul(Rt,Se)|0,R=R+Math.imul(Pt,Ie)|0,_=_+Math.imul(Pt,mn)|0,_=_+Math.imul(Gt,Ie)|0,k=k+Math.imul(Gt,mn)|0,R=R+Math.imul(wt,ln)|0,_=_+Math.imul(wt,un)|0,_=_+Math.imul(bt,ln)|0,k=k+Math.imul(bt,un)|0;var Qu=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Qu>>>26)|0,Qu&=67108863,R=Math.imul(nt,Xt),_=Math.imul(nt,ot),_=_+Math.imul(at,Xt)|0,k=Math.imul(at,ot),R=R+Math.imul(Yt,tt)|0,_=_+Math.imul(Yt,pt)|0,_=_+Math.imul(ut,tt)|0,k=k+Math.imul(ut,pt)|0,R=R+Math.imul(ae,St)|0,_=_+Math.imul(ae,It)|0,_=_+Math.imul(de,St)|0,k=k+Math.imul(de,It)|0,R=R+Math.imul(Kt,xe)|0,_=_+Math.imul(Kt,Se)|0,_=_+Math.imul(se,xe)|0,k=k+Math.imul(se,Se)|0,R=R+Math.imul(kt,Ie)|0,_=_+Math.imul(kt,mn)|0,_=_+Math.imul(Rt,Ie)|0,k=k+Math.imul(Rt,mn)|0,R=R+Math.imul(Pt,ln)|0,_=_+Math.imul(Pt,un)|0,_=_+Math.imul(Gt,ln)|0,k=k+Math.imul(Gt,un)|0;var sl=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(sl>>>26)|0,sl&=67108863,R=Math.imul(nt,tt),_=Math.imul(nt,pt),_=_+Math.imul(at,tt)|0,k=Math.imul(at,pt),R=R+Math.imul(Yt,St)|0,_=_+Math.imul(Yt,It)|0,_=_+Math.imul(ut,St)|0,k=k+Math.imul(ut,It)|0,R=R+Math.imul(ae,xe)|0,_=_+Math.imul(ae,Se)|0,_=_+Math.imul(de,xe)|0,k=k+Math.imul(de,Se)|0,R=R+Math.imul(Kt,Ie)|0,_=_+Math.imul(Kt,mn)|0,_=_+Math.imul(se,Ie)|0,k=k+Math.imul(se,mn)|0,R=R+Math.imul(kt,ln)|0,_=_+Math.imul(kt,un)|0,_=_+Math.imul(Rt,ln)|0,k=k+Math.imul(Rt,un)|0;var Uo=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,R=Math.imul(nt,St),_=Math.imul(nt,It),_=_+Math.imul(at,St)|0,k=Math.imul(at,It),R=R+Math.imul(Yt,xe)|0,_=_+Math.imul(Yt,Se)|0,_=_+Math.imul(ut,xe)|0,k=k+Math.imul(ut,Se)|0,R=R+Math.imul(ae,Ie)|0,_=_+Math.imul(ae,mn)|0,_=_+Math.imul(de,Ie)|0,k=k+Math.imul(de,mn)|0,R=R+Math.imul(Kt,ln)|0,_=_+Math.imul(Kt,un)|0,_=_+Math.imul(se,ln)|0,k=k+Math.imul(se,un)|0;var cr=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(cr>>>26)|0,cr&=67108863,R=Math.imul(nt,xe),_=Math.imul(nt,Se),_=_+Math.imul(at,xe)|0,k=Math.imul(at,Se),R=R+Math.imul(Yt,Ie)|0,_=_+Math.imul(Yt,mn)|0,_=_+Math.imul(ut,Ie)|0,k=k+Math.imul(ut,mn)|0,R=R+Math.imul(ae,ln)|0,_=_+Math.imul(ae,un)|0,_=_+Math.imul(de,ln)|0,k=k+Math.imul(de,un)|0;var Yu=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Yu>>>26)|0,Yu&=67108863,R=Math.imul(nt,Ie),_=Math.imul(nt,mn),_=_+Math.imul(at,Ie)|0,k=Math.imul(at,mn),R=R+Math.imul(Yt,ln)|0,_=_+Math.imul(Yt,un)|0,_=_+Math.imul(ut,ln)|0,k=k+Math.imul(ut,un)|0;var Ki=(F+R|0)+((_&8191)<<13)|0;F=(k+(_>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,R=Math.imul(nt,ln),_=Math.imul(nt,un),_=_+Math.imul(at,ln)|0,k=Math.imul(at,un);var Xu=(F+R|0)+((_&8191)<<13)|0;return F=(k+(_>>>13)|0)+(Xu>>>26)|0,Xu&=67108863,$[0]=Br,$[1]=Bi,$[2]=Ci,$[3]=ar,$[4]=Qr,$[5]=Hu,$[6]=Ku,$[7]=In,$[8]=Zu,$[9]=qa,$[10]=rl,$[11]=jo,$[12]=Qu,$[13]=sl,$[14]=Uo,$[15]=cr,$[16]=Yu,$[17]=Ki,$[18]=Xu,F!==0&&($[19]=F,V.length++),V};Math.imul||(x=A);function P(I,w,T){T.negative=w.negative^I.negative,T.length=I.length+w.length;for(var V=0,Y=0,Q=0;Q<T.length-1;Q++){var $=Y;Y=0;for(var F=V&67108863,R=Math.min(Q,w.length-1),_=Math.max(0,Q-I.length+1);_<=R;_++){var k=Q-_,H=I.words[k]|0,L=w.words[_]|0,g=H*L,D=g&67108863;$=$+(g/67108864|0)|0,D=D+F|0,F=D&67108863,$=$+(D>>>26)|0,Y+=$>>>26,$&=67108863}T.words[Q]=F,V=$,$=Y}return V!==0?T.words[Q]=V:T.length--,T._strip()}function W(I,w,T){return P(I,w,T)}s.prototype.mulTo=function(w,T){var V,Y=this.length+w.length;return this.length===10&&w.length===10?V=x(this,w,T):Y<63?V=A(this,w,T):Y<1024?V=P(this,w,T):V=W(this,w,T),V},s.prototype.mul=function(w){var T=new s(null);return T.words=new Array(this.length+w.length),this.mulTo(w,T)},s.prototype.mulf=function(w){var T=new s(null);return T.words=new Array(this.length+w.length),W(this,w,T)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var T=w<0;T&&(w=-w),i(typeof w=="number"),i(w<67108864);for(var V=0,Y=0;Y<this.length;Y++){var Q=(this.words[Y]|0)*w,$=(Q&67108863)+(V&67108863);V>>=26,V+=Q/67108864|0,V+=$>>>26,this.words[Y]=$&67108863}return V!==0&&(this.words[Y]=V,this.length++),this.length=w===0?1:this.length,T?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var T=v(w);if(T.length===0)return new s(1);for(var V=this,Y=0;Y<T.length&&T[Y]===0;Y++,V=V.sqr());if(++Y<T.length)for(var Q=V.sqr();Y<T.length;Y++,Q=Q.sqr())T[Y]!==0&&(V=V.mul(Q));return V},s.prototype.iushln=function(w){i(typeof w=="number"&&w>=0);var T=w%26,V=(w-T)/26,Y=67108863>>>26-T<<26-T,Q;if(T!==0){var $=0;for(Q=0;Q<this.length;Q++){var F=this.words[Q]&Y,R=(this.words[Q]|0)-F<<T;this.words[Q]=R|$,$=F>>>26-T}$&&(this.words[Q]=$,this.length++)}if(V!==0){for(Q=this.length-1;Q>=0;Q--)this.words[Q+V]=this.words[Q];for(Q=0;Q<V;Q++)this.words[Q]=0;this.length+=V}return this._strip()},s.prototype.ishln=function(w){return i(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,T,V){i(typeof w=="number"&&w>=0);var Y;T?Y=(T-T%26)/26:Y=0;var Q=w%26,$=Math.min((w-Q)/26,this.length),F=67108863^67108863>>>Q<<Q,R=V;if(Y-=$,Y=Math.max(0,Y),R){for(var _=0;_<$;_++)R.words[_]=this.words[_];R.length=$}if($!==0)if(this.length>$)for(this.length-=$,_=0;_<this.length;_++)this.words[_]=this.words[_+$];else this.words[0]=0,this.length=1;var k=0;for(_=this.length-1;_>=0&&(k!==0||_>=Y);_--){var H=this.words[_]|0;this.words[_]=k<<26-Q|H>>>Q,k=H&F}return R&&k!==0&&(R.words[R.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,T,V){return i(this.negative===0),this.iushrn(w,T,V)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){i(typeof w=="number"&&w>=0);var T=w%26,V=(w-T)/26,Y=1<<T;if(this.length<=V)return!1;var Q=this.words[V];return!!(Q&Y)},s.prototype.imaskn=function(w){i(typeof w=="number"&&w>=0);var T=w%26,V=(w-T)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(T!==0&&V++,this.length=Math.min(V,this.length),T!==0){var Y=67108863^67108863>>>T<<T;this.words[this.length-1]&=Y}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return i(typeof w=="number"),i(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(this.words[0]|0)<=w?(this.words[0]=w-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},s.prototype.isubn=function(w){if(i(typeof w=="number"),i(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,T,V){var Y=w.length+V,Q;this._expand(Y);var $,F=0;for(Q=0;Q<w.length;Q++){$=(this.words[Q+V]|0)+F;var R=(w.words[Q]|0)*T;$-=R&67108863,F=($>>26)-(R/67108864|0),this.words[Q+V]=$&67108863}for(;Q<this.length-V;Q++)$=(this.words[Q+V]|0)+F,F=$>>26,this.words[Q+V]=$&67108863;if(F===0)return this._strip();for(i(F===-1),F=0,Q=0;Q<this.length;Q++)$=-(this.words[Q]|0)+F,F=$>>26,this.words[Q]=$&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,T){var V=this.length-w.length,Y=this.clone(),Q=w,$=Q.words[Q.length-1]|0,F=this._countBits($);V=26-F,V!==0&&(Q=Q.ushln(V),Y.iushln(V),$=Q.words[Q.length-1]|0);var R=Y.length-Q.length,_;if(T!=="mod"){_=new s(null),_.length=R+1,_.words=new Array(_.length);for(var k=0;k<_.length;k++)_.words[k]=0}var H=Y.clone()._ishlnsubmul(Q,1,R);H.negative===0&&(Y=H,_&&(_.words[R]=1));for(var L=R-1;L>=0;L--){var g=(Y.words[Q.length+L]|0)*67108864+(Y.words[Q.length+L-1]|0);for(g=Math.min(g/$|0,67108863),Y._ishlnsubmul(Q,g,L);Y.negative!==0;)g--,Y.negative=0,Y._ishlnsubmul(Q,1,L),Y.isZero()||(Y.negative^=1);_&&(_.words[L]=g)}return _&&_._strip(),Y._strip(),T!=="div"&&V!==0&&Y.iushrn(V),{div:_||null,mod:Y}},s.prototype.divmod=function(w,T,V){if(i(!w.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var Y,Q,$;return this.negative!==0&&w.negative===0?($=this.neg().divmod(w,T),T!=="mod"&&(Y=$.div.neg()),T!=="div"&&(Q=$.mod.neg(),V&&Q.negative!==0&&Q.iadd(w)),{div:Y,mod:Q}):this.negative===0&&w.negative!==0?($=this.divmod(w.neg(),T),T!=="mod"&&(Y=$.div.neg()),{div:Y,mod:$.mod}):(this.negative&w.negative)!==0?($=this.neg().divmod(w.neg(),T),T!=="div"&&(Q=$.mod.neg(),V&&Q.negative!==0&&Q.isub(w)),{div:$.div,mod:Q}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?T==="div"?{div:this.divn(w.words[0]),mod:null}:T==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,T)},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var T=this.divmod(w);if(T.mod.isZero())return T.div;var V=T.div.negative!==0?T.mod.isub(w):T.mod,Y=w.ushrn(1),Q=w.andln(1),$=V.cmp(Y);return $<0||Q===1&&$===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},s.prototype.modrn=function(w){var T=w<0;T&&(w=-w),i(w<=67108863);for(var V=(1<<26)%w,Y=0,Q=this.length-1;Q>=0;Q--)Y=(V*Y+(this.words[Q]|0))%w;return T?-Y:Y},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var T=w<0;T&&(w=-w),i(w<=67108863);for(var V=0,Y=this.length-1;Y>=0;Y--){var Q=(this.words[Y]|0)+V*67108864;this.words[Y]=Q/w|0,V=Q%w}return this._strip(),T?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){i(w.negative===0),i(!w.isZero());var T=this,V=w.clone();T.negative!==0?T=T.umod(w):T=T.clone();for(var Y=new s(1),Q=new s(0),$=new s(0),F=new s(1),R=0;T.isEven()&&V.isEven();)T.iushrn(1),V.iushrn(1),++R;for(var _=V.clone(),k=T.clone();!T.isZero();){for(var H=0,L=1;(T.words[0]&L)===0&&H<26;++H,L<<=1);if(H>0)for(T.iushrn(H);H-- >0;)(Y.isOdd()||Q.isOdd())&&(Y.iadd(_),Q.isub(k)),Y.iushrn(1),Q.iushrn(1);for(var g=0,D=1;(V.words[0]&D)===0&&g<26;++g,D<<=1);if(g>0)for(V.iushrn(g);g-- >0;)($.isOdd()||F.isOdd())&&($.iadd(_),F.isub(k)),$.iushrn(1),F.iushrn(1);T.cmp(V)>=0?(T.isub(V),Y.isub($),Q.isub(F)):(V.isub(T),$.isub(Y),F.isub(Q))}return{a:$,b:F,gcd:V.iushln(R)}},s.prototype._invmp=function(w){i(w.negative===0),i(!w.isZero());var T=this,V=w.clone();T.negative!==0?T=T.umod(w):T=T.clone();for(var Y=new s(1),Q=new s(0),$=V.clone();T.cmpn(1)>0&&V.cmpn(1)>0;){for(var F=0,R=1;(T.words[0]&R)===0&&F<26;++F,R<<=1);if(F>0)for(T.iushrn(F);F-- >0;)Y.isOdd()&&Y.iadd($),Y.iushrn(1);for(var _=0,k=1;(V.words[0]&k)===0&&_<26;++_,k<<=1);if(_>0)for(V.iushrn(_);_-- >0;)Q.isOdd()&&Q.iadd($),Q.iushrn(1);T.cmp(V)>=0?(T.isub(V),Y.isub(Q)):(V.isub(T),Q.isub(Y))}var H;return T.cmpn(1)===0?H=Y:H=Q,H.cmpn(0)<0&&H.iadd(w),H},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var T=this.clone(),V=w.clone();T.negative=0,V.negative=0;for(var Y=0;T.isEven()&&V.isEven();Y++)T.iushrn(1),V.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;V.isEven();)V.iushrn(1);var Q=T.cmp(V);if(Q<0){var $=T;T=V,V=$}else if(Q===0||V.cmpn(1)===0)break;T.isub(V)}while(!0);return V.iushln(Y)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){i(typeof w=="number");var T=w%26,V=(w-T)/26,Y=1<<T;if(this.length<=V)return this._expand(V+1),this.words[V]|=Y,this;for(var Q=Y,$=V;Q!==0&&$<this.length;$++){var F=this.words[$]|0;F+=Q,Q=F>>>26,F&=67108863,this.words[$]=F}return Q!==0&&(this.words[$]=Q,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var T=w<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var V;if(this.length>1)V=1;else{T&&(w=-w),i(w<=67108863,"Number is too big");var Y=this.words[0]|0;V=Y===w?0:Y<w?-1:1}return this.negative!==0?-V|0:V},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var T=this.ucmp(w);return this.negative!==0?-T|0:T},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var T=0,V=this.length-1;V>=0;V--){var Y=this.words[V]|0,Q=w.words[V]|0;if(Y!==Q){Y<Q?T=-1:Y>Q&&(T=1);break}}return T},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new st(w)},s.prototype.toRed=function(w){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return i(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return i(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var K={k256:null,p224:null,p192:null,p25519:null};function j(I,w){this.name=I,this.p=new s(w,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},j.prototype.ireduce=function(w){var T=w,V;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),V=T.bitLength();while(V>this.n);var Y=V<this.n?-1:T.ucmp(this.p);return Y===0?(T.words[0]=0,T.length=1):Y>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},j.prototype.split=function(w,T){w.iushrn(this.n,0,T)},j.prototype.imulK=function(w){return w.imul(this.k)};function b(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(b,j),b.prototype.split=function(w,T){for(var V=4194303,Y=Math.min(w.length,9),Q=0;Q<Y;Q++)T.words[Q]=w.words[Q];if(T.length=Y,w.length<=9){w.words[0]=0,w.length=1;return}var $=w.words[9];for(T.words[T.length++]=$&V,Q=10;Q<w.length;Q++){var F=w.words[Q]|0;w.words[Q-10]=(F&V)<<4|$>>>22,$=F}$>>>=22,w.words[Q-10]=$,$===0&&w.length>10?w.length-=10:w.length-=9},b.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var T=0,V=0;V<w.length;V++){var Y=w.words[V]|0;T+=Y*977,w.words[V]=T&67108863,T=Y*64+(T/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w};function B(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(B,j);function J(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(J,j);function it(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(it,j),it.prototype.imulK=function(w){for(var T=0,V=0;V<w.length;V++){var Y=(w.words[V]|0)*19+T,Q=Y&67108863;Y>>>=26,w.words[V]=Q,T=Y}return T!==0&&(w.words[w.length++]=T),w},s._prime=function(w){if(K[w])return K[w];var T;if(w==="k256")T=new b;else if(w==="p224")T=new B;else if(w==="p192")T=new J;else if(w==="p25519")T=new it;else throw new Error("Unknown prime "+w);return K[w]=T,T};function st(I){if(typeof I=="string"){var w=s._prime(I);this.m=w.p,this.prime=w}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}st.prototype._verify1=function(w){i(w.negative===0,"red works only with positives"),i(w.red,"red works only with red numbers")},st.prototype._verify2=function(w,T){i((w.negative|T.negative)===0,"red works only with positives"),i(w.red&&w.red===T.red,"red works only with red numbers")},st.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(u(w,w.umod(this.m)._forceRed(this)),w)},st.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},st.prototype.add=function(w,T){this._verify2(w,T);var V=w.add(T);return V.cmp(this.m)>=0&&V.isub(this.m),V._forceRed(this)},st.prototype.iadd=function(w,T){this._verify2(w,T);var V=w.iadd(T);return V.cmp(this.m)>=0&&V.isub(this.m),V},st.prototype.sub=function(w,T){this._verify2(w,T);var V=w.sub(T);return V.cmpn(0)<0&&V.iadd(this.m),V._forceRed(this)},st.prototype.isub=function(w,T){this._verify2(w,T);var V=w.isub(T);return V.cmpn(0)<0&&V.iadd(this.m),V},st.prototype.shl=function(w,T){return this._verify1(w),this.imod(w.ushln(T))},st.prototype.imul=function(w,T){return this._verify2(w,T),this.imod(w.imul(T))},st.prototype.mul=function(w,T){return this._verify2(w,T),this.imod(w.mul(T))},st.prototype.isqr=function(w){return this.imul(w,w.clone())},st.prototype.sqr=function(w){return this.mul(w,w)},st.prototype.sqrt=function(w){if(w.isZero())return w.clone();var T=this.m.andln(3);if(i(T%2===1),T===3){var V=this.m.add(new s(1)).iushrn(2);return this.pow(w,V)}for(var Y=this.m.subn(1),Q=0;!Y.isZero()&&Y.andln(1)===0;)Q++,Y.iushrn(1);i(!Y.isZero());var $=new s(1).toRed(this),F=$.redNeg(),R=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,R).cmp(F)!==0;)_.redIAdd(F);for(var k=this.pow(_,Y),H=this.pow(w,Y.addn(1).iushrn(1)),L=this.pow(w,Y),g=Q;L.cmp($)!==0;){for(var D=L,S=0;D.cmp($)!==0;S++)D=D.redSqr();i(S<g);var lt=this.pow(k,new s(1).iushln(g-S-1));H=H.redMul(lt),k=lt.redSqr(),L=L.redMul(k),g=S}return H},st.prototype.invm=function(w){var T=w._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},st.prototype.pow=function(w,T){if(T.isZero())return new s(1).toRed(this);if(T.cmpn(1)===0)return w.clone();var V=4,Y=new Array(1<<V);Y[0]=new s(1).toRed(this),Y[1]=w;for(var Q=2;Q<Y.length;Q++)Y[Q]=this.mul(Y[Q-1],w);var $=Y[0],F=0,R=0,_=T.bitLength()%26;for(_===0&&(_=26),Q=T.length-1;Q>=0;Q--){for(var k=T.words[Q],H=_-1;H>=0;H--){var L=k>>H&1;if($!==Y[0]&&($=this.sqr($)),L===0&&F===0){R=0;continue}F<<=1,F|=L,R++,!(R!==V&&(Q!==0||H!==0))&&($=this.mul($,Y[F]),R=0,F=0)}_=26}return $},st.prototype.convertTo=function(w){var T=w.umod(this.m);return T===w?T.clone():T},st.prototype.convertFrom=function(w){var T=w.clone();return T.red=null,T},s.mont=function(w){return new z(w)};function z(I){st.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(z,st),z.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},z.prototype.convertFrom=function(w){var T=this.imod(w.mul(this.rinv));return T.red=null,T},z.prototype.imul=function(w,T){if(w.isZero()||T.isZero())return w.words[0]=0,w.length=1,w;var V=w.imul(T),Y=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Q=V.isub(Y).iushrn(this.shift),$=Q;return Q.cmp(this.m)>=0?$=Q.isub(this.m):Q.cmpn(0)<0&&($=Q.iadd(this.m)),$._forceRed(this)},z.prototype.mul=function(w,T){if(w.isZero()||T.isZero())return new s(0)._forceRed(this);var V=w.mul(T),Y=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Q=V.isub(Y).iushrn(this.shift),$=Q;return Q.cmp(this.m)>=0?$=Q.isub(this.m):Q.cmpn(0)<0&&($=Q.iadd(this.m)),$._forceRed(this)},z.prototype.invm=function(w){var T=this.imod(w._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(n,jF)})(i0)),i0.exports}var UF=Fb();const Bs=Po(UF);var Ap={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var kS;function DF(){return kS||(kS=1,(function(n,t){var e=Ob(),i=e.Buffer;function r(o,a){for(var l in o)a[l]=o[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?n.exports=e:(r(e,t),t.Buffer=s);function s(o,a,l){return i(o,a,l)}s.prototype=Object.create(i.prototype),r(i,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var d=i(o);return a!==void 0?typeof l=="string"?d.fill(a,l):d.fill(a):d.fill(0),d},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Ap,Ap.exports)),Ap.exports}var p1,RS;function zF(){if(RS)return p1;RS=1;var n=DF().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<e.length;s++){var o=e.charAt(s),a=o.charCodeAt(0);if(i[a]!==255)throw new TypeError(o+" is ambiguous");i[a]=s}var l=e.length,d=e.charAt(0),u=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(C){if((Array.isArray(C)||C instanceof Uint8Array)&&(C=n.from(C)),!n.isBuffer(C))throw new TypeError("Expected Buffer");if(C.length===0)return"";for(var v=0,A=0,x=0,P=C.length;x!==P&&C[x]===0;)x++,v++;for(var W=(P-x)*h+1>>>0,K=new Uint8Array(W);x!==P;){for(var j=C[x],b=0,B=W-1;(j!==0||b<A)&&B!==-1;B--,b++)j+=256*K[B]>>>0,K[B]=j%l>>>0,j=j/l>>>0;if(j!==0)throw new Error("Non-zero carry");A=b,x++}for(var J=W-A;J!==W&&K[J]===0;)J++;for(var it=d.repeat(v);J<W;++J)it+=e.charAt(K[J]);return it}function p(C){if(typeof C!="string")throw new TypeError("Expected String");if(C.length===0)return n.alloc(0);for(var v=0,A=0,x=0;C[v]===d;)A++,v++;for(var P=(C.length-v)*u+1>>>0,W=new Uint8Array(P);v<C.length;){var K=C.charCodeAt(v);if(K>255)return;var j=i[K];if(j===255)return;for(var b=0,B=P-1;(j!==0||b<x)&&B!==-1;B--,b++)j+=l*W[B]>>>0,W[B]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");x=b,v++}for(var J=P-x;J!==P&&W[J]===0;)J++;var it=n.allocUnsafe(A+(P-J));it.fill(0,0,A);for(var st=A;J!==P;)it[st++]=W[J++];return it}function E(C){var v=p(C);if(v)return v;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:p,decode:E}}return p1=t,p1}var m1,NS;function vI(){if(NS)return m1;NS=1;var n=zF(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return m1=n(t),m1}var GF=vI();const gi=Po(GF),MS=tI;var bn={};function po(n,t,e){return t<=n&&n<=e}function Nm(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function WF(n){for(var t=String(n),e=t.length,i=0,r=[];i<e;){var s=t.charCodeAt(i);if(s<55296||s>57343)r.push(s);else if(56320<=s&&s<=57343)r.push(65533);else if(55296<=s&&s<=56319)if(i===e-1)r.push(65533);else{var o=n.charCodeAt(i+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;r.push(65536+(a<<10)+l),i+=1}else r.push(65533)}i+=1}return r}function VF(n){for(var t="",e=0;e<n.length;++e){var i=n[e];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode((i>>10)+55296,(i&1023)+56320))}return t}var G0=-1;function jb(n){this.tokens=[].slice.call(n)}jb.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():G0},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var yu=-1;function g1(n,t){if(n)throw TypeError("Decoder error");return t||65533}var W0="utf-8";function V0(n,t){if(!(this instanceof V0))return new V0(n,t);if(n=n!==void 0?String(n).toLowerCase():W0,n!==W0)throw new Error("Encoding not supported. Only utf-8 is supported");t=Nm(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}V0.prototype={decode:function(t,e){var i;typeof t=="object"&&t instanceof ArrayBuffer?i=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):i=new Uint8Array(0),e=Nm(e),this._streaming||(this._decoder=new qF({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var r=new jb(i),s=[],o;!r.endOfStream()&&(o=this._decoder.handler(r,r.read()),o!==yu);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(r,r.read()),o===yu)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!r.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),VF(s)}};function q0(n,t){if(!(this instanceof q0))return new q0(n,t);if(n=n!==void 0?String(n).toLowerCase():W0,n!==W0)throw new Error("Encoding not supported. Only utf-8 is supported");t=Nm(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}q0.prototype={encode:function(t,e){t=t?String(t):"",e=Nm(e),this._streaming||(this._encoder=new $F(this._options)),this._streaming=!!e.stream;for(var i=[],r=new jb(WF(t)),s;!r.endOfStream()&&(s=this._encoder.handler(r,r.read()),s!==yu);)Array.isArray(s)?i.push.apply(i,s):i.push(s);if(!this._streaming){for(;s=this._encoder.handler(r,r.read()),s!==yu;)Array.isArray(s)?i.push.apply(i,s):i.push(s);this._encoder=null}return new Uint8Array(i)}};function qF(n){var t=n.fatal,e=0,i=0,r=0,s=128,o=191;this.handler=function(a,l){if(l===G0&&r!==0)return r=0,g1(t);if(l===G0)return yu;if(r===0){if(po(l,0,127))return l;if(po(l,194,223))r=1,e=l-192;else if(po(l,224,239))l===224&&(s=160),l===237&&(o=159),r=2,e=l-224;else if(po(l,240,244))l===240&&(s=144),l===244&&(o=143),r=3,e=l-240;else return g1(t);return e=e<<6*r,null}if(!po(l,s,o))return e=r=i=0,s=128,o=191,a.prepend(l),g1(t);if(s=128,o=191,i+=1,e+=l-128<<6*(r-i),i!==r)return null;var d=e;return e=r=i=0,d}}function $F(n){n.fatal,this.handler=function(t,e){if(e===G0)return yu;if(po(e,0,127))return e;var i,r;po(e,128,2047)?(i=1,r=192):po(e,2048,65535)?(i=2,r=224):po(e,65536,1114111)&&(i=3,r=240);for(var s=[(e>>6*i)+r];i>0;){var o=e>>6*(i-1);s.push(128|o&63),i-=1}return s}}const HF=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:V0,TextEncoder:q0},Symbol.toStringTag,{value:"Module"})),KF=yb(HF);var BS;function ZF(){if(BS)return bn;BS=1;var n=bn&&bn.__createBinding||(Object.create?(function(J,it,st,z){z===void 0&&(z=st),Object.defineProperty(J,z,{enumerable:!0,get:function(){return it[st]}})}):(function(J,it,st,z){z===void 0&&(z=st),J[z]=it[st]})),t=bn&&bn.__setModuleDefault||(Object.create?(function(J,it){Object.defineProperty(J,"default",{enumerable:!0,value:it})}):function(J,it){J.default=it}),e=bn&&bn.__decorate||function(J,it,st,z){var I=arguments.length,w=I<3?it:z===null?z=Object.getOwnPropertyDescriptor(it,st):z,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(J,it,st,z);else for(var V=J.length-1;V>=0;V--)(T=J[V])&&(w=(I<3?T(w):I>3?T(it,st,w):T(it,st))||w);return I>3&&w&&Object.defineProperty(it,st,w),w},i=bn&&bn.__importStar||function(J){if(J&&J.__esModule)return J;var it={};if(J!=null)for(var st in J)st!=="default"&&Object.hasOwnProperty.call(J,st)&&n(it,J,st);return t(it,J),it},r=bn&&bn.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(bn,"__esModule",{value:!0}),bn.deserializeUnchecked=bn.deserialize=bn.serialize=bn.BinaryReader=bn.BinaryWriter=bn.BorshError=bn.baseDecode=bn.baseEncode=void 0;const s=r(Fb()),o=r(vI()),a=i(KF),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,d=new l("utf-8",{fatal:!0});function u(J){return typeof J=="string"&&(J=ke.from(J,"utf8")),o.default.encode(ke.from(J))}bn.baseEncode=u;function h(J){return ke.from(o.default.decode(J))}bn.baseDecode=h;const m=1024;class p extends Error{constructor(it){super(it),this.fieldPath=[],this.originalMessage=it}addToFieldPath(it){this.fieldPath.splice(0,0,it),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}bn.BorshError=p;class E{constructor(){this.buf=ke.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ke.concat([this.buf,ke.alloc(m)]))}writeU8(it){this.maybeResize(),this.buf.writeUInt8(it,this.length),this.length+=1}writeU16(it){this.maybeResize(),this.buf.writeUInt16LE(it,this.length),this.length+=2}writeU32(it){this.maybeResize(),this.buf.writeUInt32LE(it,this.length),this.length+=4}writeU64(it){this.maybeResize(),this.writeBuffer(ke.from(new s.default(it).toArray("le",8)))}writeU128(it){this.maybeResize(),this.writeBuffer(ke.from(new s.default(it).toArray("le",16)))}writeU256(it){this.maybeResize(),this.writeBuffer(ke.from(new s.default(it).toArray("le",32)))}writeU512(it){this.maybeResize(),this.writeBuffer(ke.from(new s.default(it).toArray("le",64)))}writeBuffer(it){this.buf=ke.concat([ke.from(this.buf.subarray(0,this.length)),it,ke.alloc(m)]),this.length+=it.length}writeString(it){this.maybeResize();const st=ke.from(it,"utf8");this.writeU32(st.length),this.writeBuffer(st)}writeFixedArray(it){this.writeBuffer(ke.from(it))}writeArray(it,st){this.maybeResize(),this.writeU32(it.length);for(const z of it)this.maybeResize(),st(z)}toArray(){return this.buf.subarray(0,this.length)}}bn.BinaryWriter=E;function C(J,it,st){const z=st.value;st.value=function(...I){try{return z.apply(this,I)}catch(w){if(w instanceof RangeError){const T=w.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(T)>=0)throw new p("Reached the end of buffer when deserializing")}throw w}}}class v{constructor(it){this.buf=it,this.offset=0}readU8(){const it=this.buf.readUInt8(this.offset);return this.offset+=1,it}readU16(){const it=this.buf.readUInt16LE(this.offset);return this.offset+=2,it}readU32(){const it=this.buf.readUInt32LE(this.offset);return this.offset+=4,it}readU64(){const it=this.readBuffer(8);return new s.default(it,"le")}readU128(){const it=this.readBuffer(16);return new s.default(it,"le")}readU256(){const it=this.readBuffer(32);return new s.default(it,"le")}readU512(){const it=this.readBuffer(64);return new s.default(it,"le")}readBuffer(it){if(this.offset+it>this.buf.length)throw new p(`Expected buffer length ${it} isn't within bounds`);const st=this.buf.slice(this.offset,this.offset+it);return this.offset+=it,st}readString(){const it=this.readU32(),st=this.readBuffer(it);try{return d.decode(st)}catch(z){throw new p(`Error decoding UTF-8 string: ${z}`)}}readFixedArray(it){return new Uint8Array(this.readBuffer(it))}readArray(it){const st=this.readU32(),z=Array();for(let I=0;I<st;++I)z.push(it());return z}}e([C],v.prototype,"readU8",null),e([C],v.prototype,"readU16",null),e([C],v.prototype,"readU32",null),e([C],v.prototype,"readU64",null),e([C],v.prototype,"readU128",null),e([C],v.prototype,"readU256",null),e([C],v.prototype,"readU512",null),e([C],v.prototype,"readString",null),e([C],v.prototype,"readFixedArray",null),e([C],v.prototype,"readArray",null),bn.BinaryReader=v;function A(J){return J.charAt(0).toUpperCase()+J.slice(1)}function x(J,it,st,z,I){try{if(typeof z=="string")I[`write${A(z)}`](st);else if(z instanceof Array)if(typeof z[0]=="number"){if(st.length!==z[0])throw new p(`Expecting byte array of length ${z[0]}, but got ${st.length} bytes`);I.writeFixedArray(st)}else if(z.length===2&&typeof z[1]=="number"){if(st.length!==z[1])throw new p(`Expecting byte array of length ${z[1]}, but got ${st.length} bytes`);for(let w=0;w<z[1];w++)x(J,null,st[w],z[0],I)}else I.writeArray(st,w=>{x(J,it,w,z[0],I)});else if(z.kind!==void 0)switch(z.kind){case"option":{st==null?I.writeU8(0):(I.writeU8(1),x(J,it,st,z.type,I));break}case"map":{I.writeU32(st.size),st.forEach((w,T)=>{x(J,it,T,z.key,I),x(J,it,w,z.value,I)});break}default:throw new p(`FieldType ${z} unrecognized`)}else P(J,st,I)}catch(w){throw w instanceof p&&w.addToFieldPath(it),w}}function P(J,it,st){if(typeof it.borshSerialize=="function"){it.borshSerialize(st);return}const z=J.get(it.constructor);if(!z)throw new p(`Class ${it.constructor.name} is missing in schema`);if(z.kind==="struct")z.fields.map(([I,w])=>{x(J,I,it[I],w,st)});else if(z.kind==="enum"){const I=it[z.field];for(let w=0;w<z.values.length;++w){const[T,V]=z.values[w];if(T===I){st.writeU8(w),x(J,T,it[T],V,st);break}}}else throw new p(`Unexpected schema kind: ${z.kind} for ${it.constructor.name}`)}function W(J,it,st=E){const z=new st;return P(J,it,z),z.toArray()}bn.serialize=W;function K(J,it,st,z){try{if(typeof st=="string")return z[`read${A(st)}`]();if(st instanceof Array){if(typeof st[0]=="number")return z.readFixedArray(st[0]);if(typeof st[1]=="number"){const I=[];for(let w=0;w<st[1];w++)I.push(K(J,null,st[0],z));return I}else return z.readArray(()=>K(J,it,st[0],z))}if(st.kind==="option")return z.readU8()?K(J,it,st.type,z):void 0;if(st.kind==="map"){let I=new Map;const w=z.readU32();for(let T=0;T<w;T++){const V=K(J,it,st.key,z),Y=K(J,it,st.value,z);I.set(V,Y)}return I}return j(J,st,z)}catch(I){throw I instanceof p&&I.addToFieldPath(it),I}}function j(J,it,st){if(typeof it.borshDeserialize=="function")return it.borshDeserialize(st);const z=J.get(it);if(!z)throw new p(`Class ${it.name} is missing in schema`);if(z.kind==="struct"){const I={};for(const[w,T]of J.get(it).fields)I[w]=K(J,w,T,st);return new it(I)}if(z.kind==="enum"){const I=st.readU8();if(I>=z.values.length)throw new p(`Enum index: ${I} is out of range`);const[w,T]=z.values[I],V=K(J,w,T,st);return new it({[w]:V})}throw new p(`Unexpected schema kind: ${z.kind} for ${it.constructor.name}`)}function b(J,it,st,z=v){const I=new z(st),w=j(J,it,I);if(I.offset<st.length)throw new p(`Unexpected ${st.length-I.offset} bytes after deserialized data`);return w}bn.deserialize=b;function B(J,it,st,z=v){const I=new z(st);return j(J,it,I)}return bn.deserializeUnchecked=B,bn}var y1=ZF(),Vt={},PS;function QF(){if(PS)return Vt;PS=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.s16=Vt.s8=Vt.nu64be=Vt.u48be=Vt.u40be=Vt.u32be=Vt.u24be=Vt.u16be=Vt.nu64=Vt.u48=Vt.u40=Vt.u32=Vt.u24=Vt.u16=Vt.u8=Vt.offset=Vt.greedy=Vt.Constant=Vt.UTF8=Vt.CString=Vt.Blob=Vt.Boolean=Vt.BitField=Vt.BitStructure=Vt.VariantLayout=Vt.Union=Vt.UnionLayoutDiscriminator=Vt.UnionDiscriminator=Vt.Structure=Vt.Sequence=Vt.DoubleBE=Vt.Double=Vt.FloatBE=Vt.Float=Vt.NearInt64BE=Vt.NearInt64=Vt.NearUInt64BE=Vt.NearUInt64=Vt.IntBE=Vt.Int=Vt.UIntBE=Vt.UInt=Vt.OffsetLayout=Vt.GreedyCount=Vt.ExternalLayout=Vt.bindConstructorLayout=Vt.nameWithProperty=Vt.Layout=Vt.uint8ArrayToBuffer=Vt.checkUint8Array=void 0,Vt.constant=Vt.utf8=Vt.cstr=Vt.blob=Vt.unionLayoutDiscriminator=Vt.union=Vt.seq=Vt.bits=Vt.struct=Vt.f64be=Vt.f64=Vt.f32be=Vt.f32=Vt.ns64be=Vt.s48be=Vt.s40be=Vt.s32be=Vt.s24be=Vt.s16be=Vt.ns64=Vt.s48=Vt.s40=Vt.s32=Vt.s24=void 0;const n=Ob();function t(_){if(!(_ instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Vt.checkUint8Array=t;function e(_){return t(_),n.Buffer.from(_.buffer,_.byteOffset,_.length)}Vt.uint8ArrayToBuffer=e;class i{constructor(k,H){if(!Number.isInteger(k))throw new TypeError("span must be an integer");this.span=k,this.property=H}makeDestinationObject(){return{}}getSpan(k,H){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(k){const H=Object.create(this.constructor.prototype);return Object.assign(H,this),H.property=k,H}fromArray(k){}}Vt.Layout=i;function r(_,k){return k.property?_+"["+k.property+"]":_}Vt.nameWithProperty=r;function s(_,k){if(typeof _!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(_,"layout_"))throw new Error("Class is already bound to a layout");if(!(k&&k instanceof i))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(k,"boundConstructor_"))throw new Error("layout is already bound to a constructor");_.layout_=k,k.boundConstructor_=_,k.makeDestinationObject=(()=>new _),Object.defineProperty(_.prototype,"encode",{value(H,L){return k.encode(this,H,L)},writable:!0}),Object.defineProperty(_,"decode",{value(H,L){return k.decode(H,L)},writable:!0})}Vt.bindConstructorLayout=s;class o extends i{isCount(){throw new Error("ExternalLayout is abstract")}}Vt.ExternalLayout=o;class a extends o{constructor(k=1,H){if(!Number.isInteger(k)||0>=k)throw new TypeError("elementSpan must be a (positive) integer");super(-1,H),this.elementSpan=k}isCount(){return!0}decode(k,H=0){t(k);const L=k.length-H;return Math.floor(L/this.elementSpan)}encode(k,H,L){return 0}}Vt.GreedyCount=a;class l extends o{constructor(k,H=0,L){if(!(k instanceof i))throw new TypeError("layout must be a Layout");if(!Number.isInteger(H))throw new TypeError("offset must be integer or undefined");super(k.span,L||k.property),this.layout=k,this.offset=H}isCount(){return this.layout instanceof d||this.layout instanceof u}decode(k,H=0){return this.layout.decode(k,H+this.offset)}encode(k,H,L=0){return this.layout.encode(k,H,L+this.offset)}}Vt.OffsetLayout=l;class d extends i{constructor(k,H){if(super(k,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(k,H=0){return e(k).readUIntLE(H,this.span)}encode(k,H,L=0){return e(H).writeUIntLE(k,L,this.span),this.span}}Vt.UInt=d;class u extends i{constructor(k,H){if(super(k,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(k,H=0){return e(k).readUIntBE(H,this.span)}encode(k,H,L=0){return e(H).writeUIntBE(k,L,this.span),this.span}}Vt.UIntBE=u;class h extends i{constructor(k,H){if(super(k,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(k,H=0){return e(k).readIntLE(H,this.span)}encode(k,H,L=0){return e(H).writeIntLE(k,L,this.span),this.span}}Vt.Int=h;class m extends i{constructor(k,H){if(super(k,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(k,H=0){return e(k).readIntBE(H,this.span)}encode(k,H,L=0){return e(H).writeIntBE(k,L,this.span),this.span}}Vt.IntBE=m;const p=Math.pow(2,32);function E(_){const k=Math.floor(_/p),H=_-k*p;return{hi32:k,lo32:H}}function C(_,k){return _*p+k}class v extends i{constructor(k){super(8,k)}decode(k,H=0){const L=e(k),g=L.readUInt32LE(H),D=L.readUInt32LE(H+4);return C(D,g)}encode(k,H,L=0){const g=E(k),D=e(H);return D.writeUInt32LE(g.lo32,L),D.writeUInt32LE(g.hi32,L+4),8}}Vt.NearUInt64=v;class A extends i{constructor(k){super(8,k)}decode(k,H=0){const L=e(k),g=L.readUInt32BE(H),D=L.readUInt32BE(H+4);return C(g,D)}encode(k,H,L=0){const g=E(k),D=e(H);return D.writeUInt32BE(g.hi32,L),D.writeUInt32BE(g.lo32,L+4),8}}Vt.NearUInt64BE=A;class x extends i{constructor(k){super(8,k)}decode(k,H=0){const L=e(k),g=L.readUInt32LE(H),D=L.readInt32LE(H+4);return C(D,g)}encode(k,H,L=0){const g=E(k),D=e(H);return D.writeUInt32LE(g.lo32,L),D.writeInt32LE(g.hi32,L+4),8}}Vt.NearInt64=x;class P extends i{constructor(k){super(8,k)}decode(k,H=0){const L=e(k),g=L.readInt32BE(H),D=L.readUInt32BE(H+4);return C(g,D)}encode(k,H,L=0){const g=E(k),D=e(H);return D.writeInt32BE(g.hi32,L),D.writeUInt32BE(g.lo32,L+4),8}}Vt.NearInt64BE=P;class W extends i{constructor(k){super(4,k)}decode(k,H=0){return e(k).readFloatLE(H)}encode(k,H,L=0){return e(H).writeFloatLE(k,L),4}}Vt.Float=W;class K extends i{constructor(k){super(4,k)}decode(k,H=0){return e(k).readFloatBE(H)}encode(k,H,L=0){return e(H).writeFloatBE(k,L),4}}Vt.FloatBE=K;class j extends i{constructor(k){super(8,k)}decode(k,H=0){return e(k).readDoubleLE(H)}encode(k,H,L=0){return e(H).writeDoubleLE(k,L),8}}Vt.Double=j;class b extends i{constructor(k){super(8,k)}decode(k,H=0){return e(k).readDoubleBE(H)}encode(k,H,L=0){return e(H).writeDoubleBE(k,L),8}}Vt.DoubleBE=b;class B extends i{constructor(k,H,L){if(!(k instanceof i))throw new TypeError("elementLayout must be a Layout");if(!(H instanceof o&&H.isCount()||Number.isInteger(H)&&0<=H))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let g=-1;!(H instanceof o)&&0<k.span&&(g=H*k.span),super(g,L),this.elementLayout=k,this.count=H}getSpan(k,H=0){if(0<=this.span)return this.span;let L=0,g=this.count;if(g instanceof o&&(g=g.decode(k,H)),0<this.elementLayout.span)L=g*this.elementLayout.span;else{let D=0;for(;D<g;)L+=this.elementLayout.getSpan(k,H+L),++D}return L}decode(k,H=0){const L=[];let g=0,D=this.count;for(D instanceof o&&(D=D.decode(k,H));g<D;)L.push(this.elementLayout.decode(k,H)),H+=this.elementLayout.getSpan(k,H),g+=1;return L}encode(k,H,L=0){const g=this.elementLayout,D=k.reduce((S,lt)=>S+g.encode(lt,H,L+S),0);return this.count instanceof o&&this.count.encode(k.length,H,L),D}}Vt.Sequence=B;class J extends i{constructor(k,H,L){if(!(Array.isArray(k)&&k.reduce((D,S)=>D&&S instanceof i,!0)))throw new TypeError("fields must be array of Layout instances");typeof H=="boolean"&&L===void 0&&(L=H,H=void 0);for(const D of k)if(0>D.span&&D.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let g=-1;try{g=k.reduce((D,S)=>D+S.getSpan(),0)}catch{}super(g,H),this.fields=k,this.decodePrefixes=!!L}getSpan(k,H=0){if(0<=this.span)return this.span;let L=0;try{L=this.fields.reduce((g,D)=>{const S=D.getSpan(k,H);return H+=S,g+S},0)}catch{throw new RangeError("indeterminate span")}return L}decode(k,H=0){t(k);const L=this.makeDestinationObject();for(const g of this.fields)if(g.property!==void 0&&(L[g.property]=g.decode(k,H)),H+=g.getSpan(k,H),this.decodePrefixes&&k.length===H)break;return L}encode(k,H,L=0){const g=L;let D=0,S=0;for(const lt of this.fields){let ct=lt.span;if(S=0<ct?ct:0,lt.property!==void 0){const G=k[lt.property];G!==void 0&&(S=lt.encode(G,H,L),0>ct&&(ct=lt.getSpan(H,L)))}D=L,L+=ct}return D+S-g}fromArray(k){const H=this.makeDestinationObject();for(const L of this.fields)L.property!==void 0&&0<k.length&&(H[L.property]=k.shift());return H}layoutFor(k){if(typeof k!="string")throw new TypeError("property must be string");for(const H of this.fields)if(H.property===k)return H}offsetOf(k){if(typeof k!="string")throw new TypeError("property must be string");let H=0;for(const L of this.fields){if(L.property===k)return H;0>L.span?H=-1:0<=H&&(H+=L.span)}}}Vt.Structure=J;class it{constructor(k){this.property=k}decode(k,H){throw new Error("UnionDiscriminator is abstract")}encode(k,H,L){throw new Error("UnionDiscriminator is abstract")}}Vt.UnionDiscriminator=it;class st extends it{constructor(k,H){if(!(k instanceof o&&k.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(H||k.property||"variant"),this.layout=k}decode(k,H){return this.layout.decode(k,H)}encode(k,H,L){return this.layout.encode(k,H,L)}}Vt.UnionLayoutDiscriminator=st;class z extends i{constructor(k,H,L){let g;if(k instanceof d||k instanceof u)g=new st(new l(k));else if(k instanceof o&&k.isCount())g=new st(k);else if(k instanceof it)g=k;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(H===void 0&&(H=null),!(H===null||H instanceof i))throw new TypeError("defaultLayout must be null or a Layout");if(H!==null){if(0>H.span)throw new Error("defaultLayout must have constant span");H.property===void 0&&(H=H.replicate("content"))}let D=-1;H&&(D=H.span,0<=D&&(k instanceof d||k instanceof u)&&(D+=g.layout.span)),super(D,L),this.discriminator=g,this.usesPrefixDiscriminator=k instanceof d||k instanceof u,this.defaultLayout=H,this.registry={};let S=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(lt){return S(lt)},this.configGetSourceVariant=function(lt){S=lt.bind(this)}}getSpan(k,H=0){if(0<=this.span)return this.span;const L=this.getVariant(k,H);if(!L)throw new Error("unable to determine span for unrecognized variant");return L.getSpan(k,H)}defaultGetSourceVariant(k){if(Object.prototype.hasOwnProperty.call(k,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(k,this.defaultLayout.property))return;const H=this.registry[k[this.discriminator.property]];if(H&&(!H.layout||H.property&&Object.prototype.hasOwnProperty.call(k,H.property)))return H}else for(const H in this.registry){const L=this.registry[H];if(L.property&&Object.prototype.hasOwnProperty.call(k,L.property))return L}throw new Error("unable to infer src variant")}decode(k,H=0){let L;const g=this.discriminator,D=g.decode(k,H),S=this.registry[D];if(S===void 0){const lt=this.defaultLayout;let ct=0;this.usesPrefixDiscriminator&&(ct=g.layout.span),L=this.makeDestinationObject(),L[g.property]=D,L[lt.property]=lt.decode(k,H+ct)}else L=S.decode(k,H);return L}encode(k,H,L=0){const g=this.getSourceVariant(k);if(g===void 0){const D=this.discriminator,S=this.defaultLayout;let lt=0;return this.usesPrefixDiscriminator&&(lt=D.layout.span),D.encode(k[D.property],H,L),lt+S.encode(k[S.property],H,L+lt)}return g.encode(k,H,L)}addVariant(k,H,L){const g=new I(this,k,H,L);return this.registry[k]=g,g}getVariant(k,H=0){let L;return k instanceof Uint8Array?L=this.discriminator.decode(k,H):L=k,this.registry[L]}}Vt.Union=z;class I extends i{constructor(k,H,L,g){if(!(k instanceof z))throw new TypeError("union must be a Union");if(!Number.isInteger(H)||0>H)throw new TypeError("variant must be a (non-negative) integer");if(typeof L=="string"&&g===void 0&&(g=L,L=null),L){if(!(L instanceof i))throw new TypeError("layout must be a Layout");if(k.defaultLayout!==null&&0<=L.span&&L.span>k.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof g!="string")throw new TypeError("variant must have a String property")}let D=k.span;0>k.span&&(D=L?L.span:0,0<=D&&k.usesPrefixDiscriminator&&(D+=k.discriminator.layout.span)),super(D,g),this.union=k,this.variant=H,this.layout=L||null}getSpan(k,H=0){if(0<=this.span)return this.span;let L=0;this.union.usesPrefixDiscriminator&&(L=this.union.discriminator.layout.span);let g=0;return this.layout&&(g=this.layout.getSpan(k,H+L)),L+g}decode(k,H=0){const L=this.makeDestinationObject();if(this!==this.union.getVariant(k,H))throw new Error("variant mismatch");let g=0;return this.union.usesPrefixDiscriminator&&(g=this.union.discriminator.layout.span),this.layout?L[this.property]=this.layout.decode(k,H+g):this.property?L[this.property]=!0:this.union.usesPrefixDiscriminator&&(L[this.union.discriminator.property]=this.variant),L}encode(k,H,L=0){let g=0;if(this.union.usesPrefixDiscriminator&&(g=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(k,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,H,L);let D=g;if(this.layout&&(this.layout.encode(k[this.property],H,L+g),D+=this.layout.getSpan(H,L+g),0<=this.union.span&&D>this.union.span))throw new Error("encoded variant overruns containing union");return D}fromArray(k){if(this.layout)return this.layout.fromArray(k)}}Vt.VariantLayout=I;function w(_){return 0>_&&(_+=4294967296),_}class T extends i{constructor(k,H,L){if(!(k instanceof d||k instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof H=="string"&&L===void 0&&(L=H,H=!1),4<k.span)throw new RangeError("word cannot exceed 32 bits");super(k.span,L),this.word=k,this.msb=!!H,this.fields=[];let g=0;this._packedSetValue=function(D){return g=w(D),this},this._packedGetValue=function(){return g}}decode(k,H=0){const L=this.makeDestinationObject(),g=this.word.decode(k,H);this._packedSetValue(g);for(const D of this.fields)D.property!==void 0&&(L[D.property]=D.decode(k));return L}encode(k,H,L=0){const g=this.word.decode(H,L);this._packedSetValue(g);for(const D of this.fields)if(D.property!==void 0){const S=k[D.property];S!==void 0&&D.encode(S)}return this.word.encode(this._packedGetValue(),H,L)}addField(k,H){const L=new V(this,k,H);return this.fields.push(L),L}addBoolean(k){const H=new Y(this,k);return this.fields.push(H),H}fieldFor(k){if(typeof k!="string")throw new TypeError("property must be string");for(const H of this.fields)if(H.property===k)return H}}Vt.BitStructure=T;class V{constructor(k,H,L){if(!(k instanceof T))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(H)||0>=H)throw new TypeError("bits must be positive integer");const g=8*k.span,D=k.fields.reduce((S,lt)=>S+lt.bits,0);if(H+D>g)throw new Error("bits too long for span remainder ("+(g-D)+" of "+g+" remain)");this.container=k,this.bits=H,this.valueMask=(1<<H)-1,H===32&&(this.valueMask=4294967295),this.start=D,this.container.msb&&(this.start=g-D-H),this.wordMask=w(this.valueMask<<this.start),this.property=L}decode(k,H){const L=this.container._packedGetValue();return w(L&this.wordMask)>>>this.start}encode(k){if(typeof k!="number"||!Number.isInteger(k)||k!==w(k&this.valueMask))throw new TypeError(r("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const H=this.container._packedGetValue(),L=w(k<<this.start);this.container._packedSetValue(w(H&~this.wordMask)|L)}}Vt.BitField=V;class Y extends V{constructor(k,H){super(k,1,H)}decode(k,H){return!!super.decode(k,H)}encode(k){typeof k=="boolean"&&(k=+k),super.encode(k)}}Vt.Boolean=Y;class Q extends i{constructor(k,H){if(!(k instanceof o&&k.isCount()||Number.isInteger(k)&&0<=k))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let L=-1;k instanceof o||(L=k),super(L,H),this.length=k}getSpan(k,H){let L=this.span;return 0>L&&(L=this.length.decode(k,H)),L}decode(k,H=0){let L=this.span;return 0>L&&(L=this.length.decode(k,H)),e(k).slice(H,H+L)}encode(k,H,L){let g=this.length;if(this.length instanceof o&&(g=k.length),!(k instanceof Uint8Array&&g===k.length))throw new TypeError(r("Blob.encode",this)+" requires (length "+g+") Uint8Array as src");if(L+g>H.length)throw new RangeError("encoding overruns Uint8Array");const D=e(k);return e(H).write(D.toString("hex"),L,g,"hex"),this.length instanceof o&&this.length.encode(g,H,L),g}}Vt.Blob=Q;class $ extends i{constructor(k){super(-1,k)}getSpan(k,H=0){t(k);let L=H;for(;L<k.length&&k[L]!==0;)L+=1;return 1+L-H}decode(k,H=0){const L=this.getSpan(k,H);return e(k).slice(H,H+L-1).toString("utf-8")}encode(k,H,L=0){typeof k!="string"&&(k=String(k));const g=n.Buffer.from(k,"utf8"),D=g.length;if(L+D>H.length)throw new RangeError("encoding overruns Buffer");const S=e(H);return g.copy(S,L),S[L+D]=0,D+1}}Vt.CString=$;class F extends i{constructor(k,H){if(typeof k=="string"&&H===void 0&&(H=k,k=void 0),k===void 0)k=-1;else if(!Number.isInteger(k))throw new TypeError("maxSpan must be an integer");super(-1,H),this.maxSpan=k}getSpan(k,H=0){return t(k),k.length-H}decode(k,H=0){const L=this.getSpan(k,H);if(0<=this.maxSpan&&this.maxSpan<L)throw new RangeError("text length exceeds maxSpan");return e(k).slice(H,H+L).toString("utf-8")}encode(k,H,L=0){typeof k!="string"&&(k=String(k));const g=n.Buffer.from(k,"utf8"),D=g.length;if(0<=this.maxSpan&&this.maxSpan<D)throw new RangeError("text length exceeds maxSpan");if(L+D>H.length)throw new RangeError("encoding overruns Buffer");return g.copy(e(H),L),D}}Vt.UTF8=F;class R extends i{constructor(k,H){super(0,H),this.value=k}decode(k,H){return this.value}encode(k,H,L){return 0}}return Vt.Constant=R,Vt.greedy=((_,k)=>new a(_,k)),Vt.offset=((_,k,H)=>new l(_,k,H)),Vt.u8=(_=>new d(1,_)),Vt.u16=(_=>new d(2,_)),Vt.u24=(_=>new d(3,_)),Vt.u32=(_=>new d(4,_)),Vt.u40=(_=>new d(5,_)),Vt.u48=(_=>new d(6,_)),Vt.nu64=(_=>new v(_)),Vt.u16be=(_=>new u(2,_)),Vt.u24be=(_=>new u(3,_)),Vt.u32be=(_=>new u(4,_)),Vt.u40be=(_=>new u(5,_)),Vt.u48be=(_=>new u(6,_)),Vt.nu64be=(_=>new A(_)),Vt.s8=(_=>new h(1,_)),Vt.s16=(_=>new h(2,_)),Vt.s24=(_=>new h(3,_)),Vt.s32=(_=>new h(4,_)),Vt.s40=(_=>new h(5,_)),Vt.s48=(_=>new h(6,_)),Vt.ns64=(_=>new x(_)),Vt.s16be=(_=>new m(2,_)),Vt.s24be=(_=>new m(3,_)),Vt.s32be=(_=>new m(4,_)),Vt.s40be=(_=>new m(5,_)),Vt.s48be=(_=>new m(6,_)),Vt.ns64be=(_=>new P(_)),Vt.f32=(_=>new W(_)),Vt.f32be=(_=>new K(_)),Vt.f64=(_=>new j(_)),Vt.f64be=(_=>new b(_)),Vt.struct=((_,k,H)=>new J(_,k,H)),Vt.bits=((_,k,H)=>new T(_,k,H)),Vt.seq=((_,k,H)=>new B(_,k,H)),Vt.union=((_,k,H)=>new z(_,k,H)),Vt.unionLayoutDiscriminator=((_,k)=>new st(_,k)),Vt.blob=((_,k)=>new Q(_,k)),Vt.cstr=(_=>new $(_)),Vt.utf8=((_,k)=>new F(_,k)),Vt.constant=((_,k)=>new R(_,k)),Vt}var _t=QF(),YF=8078e3,XF=8078001,JF=8078004,t7=8078005,e7=8078006,n7=8078011;function xI(n){return Array.isArray(n)?"%5B"+n.map(xI).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function i7([n,t]){return`${n}=${xI(t)}`}function r7(n){const t=Object.entries(n).map(i7).join("&");return btoa(t)}function s7(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${r7(t)}'`),`${e}\``}}var tu=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,i;if(t){const{cause:s,...o}=t;s&&(i={cause:s}),Object.keys(o).length>0&&(e=o)}const r=s7(n,e);super(r,i),this.context={__code:n,...e},this.name="SolanaError"}};function o7(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function a7(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(o7(t,n));return n.write(t,e,0),e}})}function c7(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function Nl(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function l7(n,t){if(Nl(n)!==Nl(t))throw new tu(JF);if(Nl(n)&&Nl(t)&&n.fixedSize!==t.fixedSize)throw new tu(t7,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!Nl(n)&&!Nl(t)&&n.maxSize!==t.maxSize)throw new tu(e7,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function u7(n,t,e=0){if(t.length-e<=0)throw new tu(YF,{codecDescription:n})}function d7(n,t,e,i=0){const r=e.length-i;if(r<t)throw new tu(XF,{bytesLength:r,codecDescription:n,expected:t})}function f7(n,t,e,i){if(i<t||i>e)throw new tu(n7,{codecDescription:n,max:e,min:t,value:i})}function EI(n){return n?.endian!==1}function h7(n){return a7({fixedSize:n.size,write(t,e,i){n.range&&f7(n.name,n.range[0],n.range[1],t);const r=new ArrayBuffer(n.size);return n.set(new DataView(r),t,EI(n.config)),e.set(new Uint8Array(r),i),i+n.size}})}function p7(n){return c7({fixedSize:n.size,read(t,e=0){u7(n.name,t,e),d7(n.name,n.size,t,e);const i=new DataView(m7(t,e,n.size));return[n.get(i,EI(n.config)),e+n.size]}})}function m7(n,t,e){const i=n.byteOffset+(t??0),r=e??n.byteLength;return n.buffer.slice(i,i+r)}var SI=(n={})=>h7({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,i)=>t.setBigUint64(0,BigInt(e),i),size:8}),g7=(n={})=>p7({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),y7=(n={})=>l7(SI(n),g7(n));let w7=class extends TypeError{constructor(t,e){let i;const{message:r,explanation:s,...o}=t,{path:a}=t,l=a.length===0?r:`At path: ${a.join(".")} -- ${r}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>i??(i=[t,...e()])}};function _7(n){return Jf(n)&&typeof n[Symbol.iterator]=="function"}function Jf(n){return typeof n=="object"&&n!=null}function $0(n){return Jf(n)&&!Array.isArray(n)}function hs(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function b7(n){const{done:t,value:e}=n.next();return t?void 0:e}function v7(n,t,e,i){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:r,branch:s}=t,{type:o}=e,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${hs(i)}\``}=n;return{value:i,type:o,refinement:a,key:r[r.length-1],path:r,branch:s,...n,message:l}}function*OS(n,t,e,i){_7(n)||(n=[n]);for(const r of n){const s=v7(r,t,e,i);s&&(yield s)}}function*Ub(n,t,e={}){const{path:i=[],branch:r=[n],coerce:s=!1,mask:o=!1}=e,a={path:i,branch:r,mask:o};s&&(n=t.coercer(n,a));let l="valid";for(const d of t.validator(n,a))d.explanation=e.message,l="not_valid",yield[d,void 0];for(let[d,u,h]of t.entries(n,a)){const m=Ub(u,h,{path:d===void 0?i:[...i,d],branch:d===void 0?r:[...r,u],coerce:s,mask:o,message:e.message});for(const p of m)p[0]?(l=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):s&&(u=p[1],d===void 0?n=u:n instanceof Map?n.set(d,u):n instanceof Set?n.add(u):Jf(n)&&(u!==void 0||d in n)&&(n[d]=u))}if(l!=="not_valid")for(const d of t.refiner(n,a))d.explanation=e.message,l="not_refined",yield[d,void 0];l==="valid"&&(yield[void 0,n])}let qs=class{constructor(t){const{type:e,schema:i,validator:r,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=t;this.type=e,this.schema=i,this.entries=a,this.coercer=o,r?this.validator=(l,d)=>{const u=r(l,d);return OS(u,d,this,l)}:this.validator=()=>[],s?this.refiner=(l,d)=>{const u=s(l,d);return OS(u,d,this,l)}:this.refiner=()=>[]}assert(t,e){return LI(t,this,e)}create(t,e){return ue(t,this,e)}is(t){return CI(t,this)}mask(t,e){return x7(t,this,e)}validate(t,e={}){return th(t,this,e)}};function LI(n,t,e){const i=th(n,t,{message:e});if(i[0])throw i[0]}function ue(n,t,e){const i=th(n,t,{coerce:!0,message:e});if(i[0])throw i[0];return i[1]}function x7(n,t,e){const i=th(n,t,{coerce:!0,mask:!0,message:e});if(i[0])throw i[0];return i[1]}function CI(n,t){return!th(n,t)[0]}function th(n,t,e={}){const i=Ub(n,t,e),r=b7(i);return r[0]?[new w7(r[0],function*(){for(const o of i)o[0]&&(yield o[0])}),void 0]:[void 0,r[1]]}function Zc(n,t){return new qs({type:n,schema:null,validator:t})}function E7(){return Zc("any",()=>!0)}function he(n){return new qs({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,i]of t.entries())yield[e,i,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${hs(t)}`}})}function Gs(){return Zc("boolean",n=>typeof n=="boolean")}function Db(n){return Zc("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${hs(t)}`)}function Wn(n){const t=hs(n),e=typeof n;return new qs({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(i){return i===n||`Expected the literal \`${t}\`, but received: ${hs(i)}`}})}function S7(){return Zc("never",()=>!1)}function pe(n){return new qs({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function Ut(){return Zc("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${hs(n)}`)}function Ne(n){return new qs({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function AI(n,t){return new qs({type:"record",schema:null,*entries(e){if(Jf(e))for(const i in e){const r=e[i];yield[i,i,n],yield[i,r,t]}},validator(e){return $0(e)||`Expected an object, but received: ${hs(e)}`},coercer(e){return $0(e)?{...e}:e}})}function ce(){return Zc("string",n=>typeof n=="string"||`Expected a string, but received: ${hs(n)}`)}function zb(n){const t=S7();return new qs({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const i=Math.max(n.length,e.length);for(let r=0;r<i;r++)yield[r,e[r],n[r]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${hs(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ie(n){const t=Object.keys(n);return new qs({type:"type",schema:n,*entries(e){if(Jf(e))for(const i of t)yield[i,e[i],n[i]]},validator(e){return $0(e)||`Expected an object, but received: ${hs(e)}`},coercer(e){return $0(e)?{...e}:e}})}function nr(n){const t=n.map(e=>e.type).join(" | ");return new qs({type:"union",schema:null,coercer(e,i){for(const r of n){const[s,o]=r.validate(e,{coerce:!0,mask:i.mask});if(!s)return o}return e},validator(e,i){const r=[];for(const s of n){const[...o]=Ub(e,s,i),[a]=o;if(a[0])for(const[l]of o)l&&r.push(l);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${hs(e)}`,...r]}})}function Bu(){return Zc("unknown",()=>!0)}function eh(n,t,e){return new qs({...n,coercer:(i,r)=>CI(i,t)?n.coercer(e(i,r),r):n.coercer(i,r)})}var Ip,L7=new Uint8Array(16);function II(){if(!Ip&&(Ip=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ip))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ip(L7)}const C7=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Mm(n){return typeof n=="string"&&C7.test(n)}var ki=[];for(var w1=0;w1<256;++w1)ki.push((w1+256).toString(16).substr(1));function Bm(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ki[n[t+0]]+ki[n[t+1]]+ki[n[t+2]]+ki[n[t+3]]+"-"+ki[n[t+4]]+ki[n[t+5]]+"-"+ki[n[t+6]]+ki[n[t+7]]+"-"+ki[n[t+8]]+ki[n[t+9]]+"-"+ki[n[t+10]]+ki[n[t+11]]+ki[n[t+12]]+ki[n[t+13]]+ki[n[t+14]]+ki[n[t+15]]).toLowerCase();if(!Mm(e))throw TypeError("Stringified UUID is invalid");return e}var FS,_1,b1=0,v1=0;function A7(n,t,e){var i=t&&e||0,r=t||new Array(16);n=n||{};var s=n.node||FS,o=n.clockseq!==void 0?n.clockseq:_1;if(s==null||o==null){var a=n.random||(n.rng||II)();s==null&&(s=FS=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=_1=(a[6]<<8|a[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),d=n.nsecs!==void 0?n.nsecs:v1+1,u=l-b1+(d-v1)/1e4;if(u<0&&n.clockseq===void 0&&(o=o+1&16383),(u<0||l>b1)&&n.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");b1=l,v1=d,_1=o,l+=122192928e5;var h=((l&268435455)*1e4+d)%4294967296;r[i++]=h>>>24&255,r[i++]=h>>>16&255,r[i++]=h>>>8&255,r[i++]=h&255;var m=l/4294967296*1e4&268435455;r[i++]=m>>>8&255,r[i++]=m&255,r[i++]=m>>>24&15|16,r[i++]=m>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var p=0;p<6;++p)r[i+p]=s[p];return t||Bm(r)}function TI(n){if(!Mm(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function I7(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var T7="6ba7b810-9dad-11d1-80b4-00c04fd430c8",k7="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function kI(n,t,e){function i(r,s,o,a){if(typeof r=="string"&&(r=I7(r)),typeof s=="string"&&(s=TI(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+r.length);if(l.set(s),l.set(r,s.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,o){a=a||0;for(var d=0;d<16;++d)o[a+d]=l[d];return o}return Bm(l)}try{i.name=n}catch{}return i.DNS=T7,i.URL=k7,i}function R7(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return N7(M7(B7(n),n.length*8))}function N7(n){for(var t=[],e=n.length*32,i="0123456789abcdef",r=0;r<e;r+=8){var s=n[r>>5]>>>r%32&255,o=parseInt(i.charAt(s>>>4&15)+i.charAt(s&15),16);t.push(o)}return t}function RI(n){return(n+64>>>9<<4)+14+1}function M7(n,t){n[t>>5]|=128<<t%32,n[RI(t)-1]=t;for(var e=1732584193,i=-271733879,r=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=e,l=i,d=r,u=s;e=Di(e,i,r,s,n[o],7,-680876936),s=Di(s,e,i,r,n[o+1],12,-389564586),r=Di(r,s,e,i,n[o+2],17,606105819),i=Di(i,r,s,e,n[o+3],22,-1044525330),e=Di(e,i,r,s,n[o+4],7,-176418897),s=Di(s,e,i,r,n[o+5],12,1200080426),r=Di(r,s,e,i,n[o+6],17,-1473231341),i=Di(i,r,s,e,n[o+7],22,-45705983),e=Di(e,i,r,s,n[o+8],7,1770035416),s=Di(s,e,i,r,n[o+9],12,-1958414417),r=Di(r,s,e,i,n[o+10],17,-42063),i=Di(i,r,s,e,n[o+11],22,-1990404162),e=Di(e,i,r,s,n[o+12],7,1804603682),s=Di(s,e,i,r,n[o+13],12,-40341101),r=Di(r,s,e,i,n[o+14],17,-1502002290),i=Di(i,r,s,e,n[o+15],22,1236535329),e=zi(e,i,r,s,n[o+1],5,-165796510),s=zi(s,e,i,r,n[o+6],9,-1069501632),r=zi(r,s,e,i,n[o+11],14,643717713),i=zi(i,r,s,e,n[o],20,-373897302),e=zi(e,i,r,s,n[o+5],5,-701558691),s=zi(s,e,i,r,n[o+10],9,38016083),r=zi(r,s,e,i,n[o+15],14,-660478335),i=zi(i,r,s,e,n[o+4],20,-405537848),e=zi(e,i,r,s,n[o+9],5,568446438),s=zi(s,e,i,r,n[o+14],9,-1019803690),r=zi(r,s,e,i,n[o+3],14,-187363961),i=zi(i,r,s,e,n[o+8],20,1163531501),e=zi(e,i,r,s,n[o+13],5,-1444681467),s=zi(s,e,i,r,n[o+2],9,-51403784),r=zi(r,s,e,i,n[o+7],14,1735328473),i=zi(i,r,s,e,n[o+12],20,-1926607734),e=Gi(e,i,r,s,n[o+5],4,-378558),s=Gi(s,e,i,r,n[o+8],11,-2022574463),r=Gi(r,s,e,i,n[o+11],16,1839030562),i=Gi(i,r,s,e,n[o+14],23,-35309556),e=Gi(e,i,r,s,n[o+1],4,-1530992060),s=Gi(s,e,i,r,n[o+4],11,1272893353),r=Gi(r,s,e,i,n[o+7],16,-155497632),i=Gi(i,r,s,e,n[o+10],23,-1094730640),e=Gi(e,i,r,s,n[o+13],4,681279174),s=Gi(s,e,i,r,n[o],11,-358537222),r=Gi(r,s,e,i,n[o+3],16,-722521979),i=Gi(i,r,s,e,n[o+6],23,76029189),e=Gi(e,i,r,s,n[o+9],4,-640364487),s=Gi(s,e,i,r,n[o+12],11,-421815835),r=Gi(r,s,e,i,n[o+15],16,530742520),i=Gi(i,r,s,e,n[o+2],23,-995338651),e=Wi(e,i,r,s,n[o],6,-198630844),s=Wi(s,e,i,r,n[o+7],10,1126891415),r=Wi(r,s,e,i,n[o+14],15,-1416354905),i=Wi(i,r,s,e,n[o+5],21,-57434055),e=Wi(e,i,r,s,n[o+12],6,1700485571),s=Wi(s,e,i,r,n[o+3],10,-1894986606),r=Wi(r,s,e,i,n[o+10],15,-1051523),i=Wi(i,r,s,e,n[o+1],21,-2054922799),e=Wi(e,i,r,s,n[o+8],6,1873313359),s=Wi(s,e,i,r,n[o+15],10,-30611744),r=Wi(r,s,e,i,n[o+6],15,-1560198380),i=Wi(i,r,s,e,n[o+13],21,1309151649),e=Wi(e,i,r,s,n[o+4],6,-145523070),s=Wi(s,e,i,r,n[o+11],10,-1120210379),r=Wi(r,s,e,i,n[o+2],15,718787259),i=Wi(i,r,s,e,n[o+9],21,-343485551),e=Ia(e,a),i=Ia(i,l),r=Ia(r,d),s=Ia(s,u)}return[e,i,r,s]}function B7(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(RI(t)),i=0;i<t;i+=8)e[i>>5]|=(n[i/8]&255)<<i%32;return e}function Ia(n,t){var e=(n&65535)+(t&65535),i=(n>>16)+(t>>16)+(e>>16);return i<<16|e&65535}function P7(n,t){return n<<t|n>>>32-t}function Pm(n,t,e,i,r,s){return Ia(P7(Ia(Ia(t,n),Ia(i,s)),r),e)}function Di(n,t,e,i,r,s,o){return Pm(t&e|~t&i,n,t,r,s,o)}function zi(n,t,e,i,r,s,o){return Pm(t&i|e&~i,n,t,r,s,o)}function Gi(n,t,e,i,r,s,o){return Pm(t^e^i,n,t,r,s,o)}function Wi(n,t,e,i,r,s,o){return Pm(e^(t|~i),n,t,r,s,o)}var O7=kI("v3",48,R7);function F7(n,t,e){n=n||{};var i=n.random||(n.rng||II)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){e=e||0;for(var r=0;r<16;++r)t[e+r]=i[r];return t}return Bm(i)}function j7(n,t,e,i){switch(n){case 0:return t&e^~t&i;case 1:return t^e^i;case 2:return t&e^t&i^e&i;case 3:return t^e^i}}function x1(n,t){return n<<t|n>>>32-t}function U7(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var i=unescape(encodeURIComponent(n));n=[];for(var r=0;r<i.length;++r)n.push(i.charCodeAt(r))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var d=new Uint32Array(16),u=0;u<16;++u)d[u]=n[l*64+u*4]<<24|n[l*64+u*4+1]<<16|n[l*64+u*4+2]<<8|n[l*64+u*4+3];a[l]=d}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),p=0;p<16;++p)m[p]=a[h][p];for(var E=16;E<80;++E)m[E]=x1(m[E-3]^m[E-8]^m[E-14]^m[E-16],1);for(var C=e[0],v=e[1],A=e[2],x=e[3],P=e[4],W=0;W<80;++W){var K=Math.floor(W/20),j=x1(C,5)+j7(K,v,A,x)+P+t[K]+m[W]>>>0;P=x,x=A,A=x1(v,30)>>>0,v=C,C=j}e[0]=e[0]+C>>>0,e[1]=e[1]+v>>>0,e[2]=e[2]+A>>>0,e[3]=e[3]+x>>>0,e[4]=e[4]+P>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var D7=kI("v5",80,U7);const z7="00000000-0000-0000-0000-000000000000";function G7(n){if(!Mm(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const W7=Object.freeze(Object.defineProperty({__proto__:null,NIL:z7,parse:TI,stringify:Bm,v1:A7,v3:O7,v4:F7,v5:D7,validate:Mm,version:G7},Symbol.toStringTag,{value:"Module"})),NI=yb(W7);var E1,jS;function V7(){if(jS)return E1;jS=1;const n=NI.v4;return E1=function(e,i,r,s){if(typeof e!="string")throw new TypeError(e+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:e};if(o===2&&(a.jsonrpc="2.0"),i){if(typeof i!="object"&&!Array.isArray(i))throw new TypeError(i+" must be an object, array or omitted");a.params=i}if(typeof r>"u"){const l=typeof s.generator=="function"?s.generator:function(){return n()};a.id=l(a,s)}else o===2&&r===null?s.notificationIdNull&&(a.id=null):a.id=r;return a},E1}var S1,US;function q7(){if(US)return S1;US=1;const n=NI.v4,t=V7(),e=function(i,r){if(!(this instanceof e))return new e(i,r);r||(r={}),this.options={reviver:typeof r.reviver<"u"?r.reviver:null,replacer:typeof r.replacer<"u"?r.replacer:null,generator:typeof r.generator<"u"?r.generator:function(){return n()},version:typeof r.version<"u"?r.version:2,notificationIdNull:typeof r.notificationIdNull=="boolean"?r.notificationIdNull:!1},this.callServer=i};return S1=e,e.prototype.request=function(i,r,s,o){const a=this;let l=null;const d=Array.isArray(i)&&typeof r=="function";if(this.options.version===1&&d)throw new TypeError("JSON-RPC 1.0 does not support batching");if(d||!d&&i&&typeof i=="object"&&typeof r=="function")o=r,l=i;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=t(i,r,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(p){if(m){o(p);return}throw p}if(!m)return l}let h;try{h=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(h,function(m,p){a._parseResponse(m,p,o)}),l},e.prototype._parseResponse=function(i,r,s){if(i){s(i);return}if(!r){s();return}let o;try{o=JSON.parse(r,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(d){return typeof d.error<"u"},l=function(d){return!a(d)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},S1}var $7=q7();const H7=Po($7);var L1={exports:{}},DS;function K7(){return DS||(DS=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(l,d,u){this.fn=l,this.context=d,this.once=u||!1}function s(l,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,h||l,m),E=e?e+d:d;return l._events[E]?l._events[E].fn?l._events[E]=[l._events[E],p]:l._events[E].push(p):(l._events[E]=p,l._eventsCount++),l}function o(l,d){--l._eventsCount===0?l._events=new i:delete l._events[d]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},a.prototype.listeners=function(d){var u=e?e+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,E=new Array(p);m<p;m++)E[m]=h[m].fn;return E},a.prototype.listenerCount=function(d){var u=e?e+d:d,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(d,u,h,m,p,E){var C=e?e+d:d;if(!this._events[C])return!1;var v=this._events[C],A=arguments.length,x,P;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,m),!0;case 5:return v.fn.call(v.context,u,h,m,p),!0;case 6:return v.fn.call(v.context,u,h,m,p,E),!0}for(P=1,x=new Array(A-1);P<A;P++)x[P-1]=arguments[P];v.fn.apply(v.context,x)}else{var W=v.length,K;for(P=0;P<W;P++)switch(v[P].once&&this.removeListener(d,v[P].fn,void 0,!0),A){case 1:v[P].fn.call(v[P].context);break;case 2:v[P].fn.call(v[P].context,u);break;case 3:v[P].fn.call(v[P].context,u,h);break;case 4:v[P].fn.call(v[P].context,u,h,m);break;default:if(!x)for(K=1,x=new Array(A-1);K<A;K++)x[K-1]=arguments[K];v[P].fn.apply(v[P].context,x)}}return!0},a.prototype.on=function(d,u,h){return s(this,d,u,h,!1)},a.prototype.once=function(d,u,h){return s(this,d,u,h,!0)},a.prototype.removeListener=function(d,u,h,m){var p=e?e+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var E=this._events[p];if(E.fn)E.fn===u&&(!m||E.once)&&(!h||E.context===h)&&o(this,p);else{for(var C=0,v=[],A=E.length;C<A;C++)(E[C].fn!==u||m&&!E[C].once||h&&E[C].context!==h)&&v.push(E[C]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},a.prototype.removeAllListeners=function(d){var u;return d?(u=e?e+d:d,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(L1)),L1.exports}var Z7=K7();const MI=Po(Z7);var Q7=class extends MI{socket;constructor(n,t){super(),this.socket=new window.WebSocket(n,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(n,t,e){const i=e||t;try{this.socket.send(n),i()}catch(r){i(r)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function Y7(n,t){return new Q7(n,t)}var X7=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},J7=class extends MI{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:i=!0,reconnect_interval:r=1e3,max_reconnects:s=5,...o}={},a,l){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=r,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new X7,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,i){return!i&&typeof e=="object"&&(i=e,e=null),new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(n,t),a={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(a),i,l=>{if(l)return s(l);this.queue[o]={promise:[r,s]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,i)=>{if(!this.ready)return i(new Error("socket not ready"));const r={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(r),s=>{if(s)return i(s);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket&&this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=Oe.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const i=[e.notification];if(e.params.constructor===Object)i.push(e.params);else for(let r=0;r<e.params.length;r++)i.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",e,i),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",e,i),1))})}};const tj=BigInt(0),Bd=BigInt(1),ej=BigInt(2),nj=BigInt(7),ij=BigInt(256),rj=BigInt(113),BI=[],PI=[],OI=[];for(let n=0,t=Bd,e=1,i=0;n<24;n++){[e,i]=[i,(2*e+3*i)%5],BI.push(2*(5*i+e)),PI.push((n+1)*(n+2)/2%64);let r=tj;for(let s=0;s<7;s++)t=(t<<Bd^(t>>nj)*rj)%ij,t&ej&&(r^=Bd<<(Bd<<BigInt(s))-Bd);OI.push(r)}const FI=X8(OI,!0),sj=FI[0],oj=FI[1],zS=(n,t,e)=>e>32?KO(n,t,e):$O(n,t,e),GS=(n,t,e)=>e>32?ZO(n,t,e):HO(n,t,e);function aj(n,t=24){const e=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,d=e[l],u=e[l+1],h=zS(d,u,1)^e[a],m=GS(d,u,1)^e[a+1];for(let p=0;p<50;p+=10)n[o+p]^=h,n[o+p+1]^=m}let r=n[2],s=n[3];for(let o=0;o<24;o++){const a=PI[o],l=zS(r,s,a),d=GS(r,s,a),u=BI[o];r=n[u],s=n[u+1],n[u]=l,n[u+1]=d}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}n[0]^=sj[i],n[1]^=oj[i]}Na(e)}let cj=class jI extends Tb{constructor(t,e,i,r=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=i,this.enableXOF=r,this.rounds=s,Rf(i),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=OO(this.state)}clone(){return this._cloneInto()}keccak(){mS(this.state32),aj(this.state32,this.rounds),mS(this.state32),this.posOut=0,this.pos=0}update(t){mu(this),t=km(t),Io(t);const{blockLen:e,state:i}=this,r=t.length;for(let s=0;s<r;){const o=Math.min(e-this.pos,r-s);for(let a=0;a<o;a++)i[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:i,blockLen:r}=this;t[i]^=e,(e&128)!==0&&i===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){mu(this,!1),Io(t),this.finish();const e=this.state,{blockLen:i}=this;for(let r=0,s=t.length;r<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-r);t.set(e.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Rf(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Z8(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Na(this.state)}_cloneInto(t){const{blockLen:e,suffix:i,outputLen:r,rounds:s,enableXOF:o}=this;return t||(t=new jI(e,i,r,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=i,t.outputLen=r,t.enableXOF=o,t.destroyed=this.destroyed,t}};const lj=(n,t,e)=>kb(()=>new cj(t,n,e)),WS=lj(1,136,256/8);class UI extends Tb{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,K8(t);const i=km(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(i.length>r?t.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Na(s)}update(t){return mu(this),this.iHash.update(t),this}digestInto(t){mu(this),Io(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:i,finished:r,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const DI=(n,t,e)=>new UI(n,t).update(e).digest();DI.create=(n,t)=>new UI(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const VS=(n,t)=>(n+(n>=0?t:-t)/zI)/t;function uj(n,t,e){const[[i,r],[s,o]]=t,a=VS(o*n,e),l=VS(-r*n,e);let d=n-a*i-l*s,u=-a*r-l*o;const h=d<bo,m=u<bo;h&&(d=-d),m&&(u=-u);const p=Yf(Math.ceil(iI(e)/2))+eu;if(d<bo||d>=p||u<bo||u>=p)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:h,k1:d,k2neg:m,k2:u}}function jw(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function C1(n,t){const e={};for(let i of Object.keys(t))e[i]=n[i]===void 0?t[i]:n[i];return jc(e.lowS,"lowS"),jc(e.prehash,"prehash"),e.format!==void 0&&jw(e.format),e}class dj extends Error{constructor(t=""){super(t)}}const lo={Err:dj,_tlv:{encode:(n,t)=>{const{Err:e}=lo;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const i=t.length/2,r=Cp(i);if(r.length/2&128)throw new e("tlv.encode: long form length too big");const s=i>127?Cp(r.length/2|128):"";return Cp(n)+s+r+t},decode(n,t){const{Err:e}=lo;let i=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[i++]!==n)throw new e("tlv.decode: wrong tlv");const r=t[i++],s=!!(r&128);let o=0;if(!s)o=r;else{const l=r&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");const d=t.subarray(i,i+l);if(d.length!==l)throw new e("tlv.decode: length bytes not complete");if(d[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const u of d)o=o<<8|u;if(i+=l,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(i,i+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(i+o)}}},_int:{encode(n){const{Err:t}=lo;if(n<bo)throw new t("integer: negative integers are not allowed");let e=Cp(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=lo;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Rm(n)}},toSig(n){const{Err:t,_int:e,_tlv:i}=lo,r=Qn("signature",n),{v:s,l:o}=i.decode(48,r);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l}=i.decode(2,s),{v:d,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(d)}},hexFromSig(n){const{_tlv:t,_int:e}=lo,i=t.encode(2,e.encode(n.r)),r=t.encode(2,e.encode(n.s)),s=i+r;return t.encode(48,s)}},bo=BigInt(0),eu=BigInt(1),zI=BigInt(2),Tp=BigInt(3),fj=BigInt(4);function Vl(n,t){const{BYTES:e}=n;let i;if(typeof t=="bigint")i=t;else{let r=Qn("private key",t);try{i=n.fromBytes(r)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}function hj(n,t={}){const e=_I("weierstrass",n,t),{Fp:i,Fn:r}=e;let s=e.CURVE;const{h:o,n:a}=s;Xf(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=t;if(l&&(!i.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=WI(i,r);function u(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(z,I,w){const{x:T,y:V}=I.toAffine(),Y=i.toBytes(T);if(jc(w,"isCompressed"),w){u();const Q=!i.isOdd(V);return Ms(GI(Q),Y)}else return Ms(Uint8Array.of(4),Y,i.toBytes(V))}function m(z){cs(z,void 0,"Point");const{publicKey:I,publicKeyUncompressed:w}=d,T=z.length,V=z[0],Y=z.subarray(1);if(T===I&&(V===2||V===3)){const Q=i.fromBytes(Y);if(!i.isValid(Q))throw new Error("bad point: is not on curve, wrong x");const $=C(Q);let F;try{F=i.sqrt($)}catch(k){const H=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}u();const R=i.isOdd(F);return(V&1)===1!==R&&(F=i.neg(F)),{x:Q,y:F}}else if(T===w&&V===4){const Q=i.BYTES,$=i.fromBytes(Y.subarray(0,Q)),F=i.fromBytes(Y.subarray(Q,Q*2));if(!v($,F))throw new Error("bad point: is not on curve");return{x:$,y:F}}else throw new Error(`bad point: got length ${T}, expected compressed=${I} or uncompressed=${w}`)}const p=t.toBytes||h,E=t.fromBytes||m;function C(z){const I=i.sqr(z),w=i.mul(I,z);return i.add(i.add(w,i.mul(z,s.a)),s.b)}function v(z,I){const w=i.sqr(I),T=C(z);return i.eql(w,T)}if(!v(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const A=i.mul(i.pow(s.a,Tp),fj),x=i.mul(i.sqr(s.b),BigInt(27));if(i.is0(i.add(A,x)))throw new Error("bad curve params: a or b");function P(z,I,w=!1){if(!i.isValid(I)||w&&i.is0(I))throw new Error(`bad point coordinate ${z}`);return I}function W(z){if(!(z instanceof J))throw new Error("ProjectivePoint expected")}function K(z){if(!l||!l.basises)throw new Error("no endo");return uj(z,l.basises,r.ORDER)}const j=D0((z,I)=>{const{X:w,Y:T,Z:V}=z;if(i.eql(V,i.ONE))return{x:w,y:T};const Y=z.is0();I==null&&(I=Y?i.ONE:i.inv(V));const Q=i.mul(w,I),$=i.mul(T,I),F=i.mul(V,I);if(Y)return{x:i.ZERO,y:i.ZERO};if(!i.eql(F,i.ONE))throw new Error("invZ was invalid");return{x:Q,y:$}}),b=D0(z=>{if(z.is0()){if(t.allowInfinityPoint&&!i.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:I,y:w}=z.toAffine();if(!i.isValid(I)||!i.isValid(w))throw new Error("bad point: x or y not field elements");if(!v(I,w))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function B(z,I,w,T,V){return w=new J(i.mul(w.X,z),w.Y,w.Z),I=z0(T,I),w=z0(V,w),I.add(w)}class J{constructor(I,w,T){this.X=P("x",I),this.Y=P("y",w,!0),this.Z=P("z",T),Object.freeze(this)}static CURVE(){return s}static fromAffine(I){const{x:w,y:T}=I||{};if(!I||!i.isValid(w)||!i.isValid(T))throw new Error("invalid affine point");if(I instanceof J)throw new Error("projective point not allowed");return i.is0(w)&&i.is0(T)?J.ZERO:new J(w,T,i.ONE)}static fromBytes(I){const w=J.fromAffine(E(cs(I,void 0,"point")));return w.assertValidity(),w}static fromHex(I){return J.fromBytes(Qn("pointHex",I))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(I=8,w=!0){return st.createCache(this,I),w||this.multiply(Tp),this}assertValidity(){b(this)}hasEvenY(){const{y:I}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(I)}equals(I){W(I);const{X:w,Y:T,Z:V}=this,{X:Y,Y:Q,Z:$}=I,F=i.eql(i.mul(w,$),i.mul(Y,V)),R=i.eql(i.mul(T,$),i.mul(Q,V));return F&&R}negate(){return new J(this.X,i.neg(this.Y),this.Z)}double(){const{a:I,b:w}=s,T=i.mul(w,Tp),{X:V,Y,Z:Q}=this;let $=i.ZERO,F=i.ZERO,R=i.ZERO,_=i.mul(V,V),k=i.mul(Y,Y),H=i.mul(Q,Q),L=i.mul(V,Y);return L=i.add(L,L),R=i.mul(V,Q),R=i.add(R,R),$=i.mul(I,R),F=i.mul(T,H),F=i.add($,F),$=i.sub(k,F),F=i.add(k,F),F=i.mul($,F),$=i.mul(L,$),R=i.mul(T,R),H=i.mul(I,H),L=i.sub(_,H),L=i.mul(I,L),L=i.add(L,R),R=i.add(_,_),_=i.add(R,_),_=i.add(_,H),_=i.mul(_,L),F=i.add(F,_),H=i.mul(Y,Q),H=i.add(H,H),_=i.mul(H,L),$=i.sub($,_),R=i.mul(H,k),R=i.add(R,R),R=i.add(R,R),new J($,F,R)}add(I){W(I);const{X:w,Y:T,Z:V}=this,{X:Y,Y:Q,Z:$}=I;let F=i.ZERO,R=i.ZERO,_=i.ZERO;const k=s.a,H=i.mul(s.b,Tp);let L=i.mul(w,Y),g=i.mul(T,Q),D=i.mul(V,$),S=i.add(w,T),lt=i.add(Y,Q);S=i.mul(S,lt),lt=i.add(L,g),S=i.sub(S,lt),lt=i.add(w,V);let ct=i.add(Y,$);return lt=i.mul(lt,ct),ct=i.add(L,D),lt=i.sub(lt,ct),ct=i.add(T,V),F=i.add(Q,$),ct=i.mul(ct,F),F=i.add(g,D),ct=i.sub(ct,F),_=i.mul(k,lt),F=i.mul(H,D),_=i.add(F,_),F=i.sub(g,_),_=i.add(g,_),R=i.mul(F,_),g=i.add(L,L),g=i.add(g,L),D=i.mul(k,D),lt=i.mul(H,lt),g=i.add(g,D),D=i.sub(L,D),D=i.mul(k,D),lt=i.add(lt,D),L=i.mul(g,lt),R=i.add(R,L),L=i.mul(ct,lt),F=i.mul(S,F),F=i.sub(F,L),L=i.mul(S,g),_=i.mul(ct,_),_=i.add(_,L),new J(F,R,_)}subtract(I){return this.add(I.negate())}is0(){return this.equals(J.ZERO)}multiply(I){const{endo:w}=t;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let T,V;const Y=Q=>st.cached(this,Q,$=>_c(J,$));if(w){const{k1neg:Q,k1:$,k2neg:F,k2:R}=K(I),{p:_,f:k}=Y($),{p:H,f:L}=Y(R);V=k.add(L),T=B(w.beta,_,H,Q,F)}else{const{p:Q,f:$}=Y(I);T=Q,V=$}return _c(J,[T,V])[0]}multiplyUnsafe(I){const{endo:w}=t,T=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===bo||T.is0())return J.ZERO;if(I===eu)return T;if(st.hasCache(this))return this.multiply(I);if(w){const{k1neg:V,k1:Y,k2neg:Q,k2:$}=K(I),{p1:F,p2:R}=xF(J,T,Y,$);return B(w.beta,F,R,V,Q)}else return st.unsafe(T,I)}multiplyAndAddUnsafe(I,w,T){const V=this.multiplyUnsafe(w).add(I.multiplyUnsafe(T));return V.is0()?void 0:V}toAffine(I){return j(this,I)}isTorsionFree(){const{isTorsionFree:I}=t;return o===eu?!0:I?I(J,this):st.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:I}=t;return o===eu?this:I?I(J,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(I=!0){return jc(I,"isCompressed"),this.assertValidity(),p(J,this,I)}toHex(I=!0){return Nc(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(I=!0){return this.toBytes(I)}_setWindowSize(I){this.precompute(I)}static normalizeZ(I){return _c(J,I)}static msm(I,w){return wI(J,r,I,w)}static fromPrivateKey(I){return J.BASE.multiply(Vl(r,I))}}J.BASE=new J(s.Gx,s.Gy,i.ONE),J.ZERO=new J(i.ZERO,i.ONE,i.ZERO),J.Fp=i,J.Fn=r;const it=r.BITS,st=new yI(J,t.endo?Math.ceil(it/2):it);return J.BASE.precompute(8),J}function GI(n){return Uint8Array.of(n?2:3)}function WI(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function pj(n,t={}){const{Fn:e}=n,i=t.randomBytes||Rb,r=Object.assign(WI(n.Fp,e),{seed:pI(e.ORDER)});function s(p){try{return!!Vl(e,p)}catch{return!1}}function o(p,E){const{publicKey:C,publicKeyUncompressed:v}=r;try{const A=p.length;return E===!0&&A!==C||E===!1&&A!==v?!1:!!n.fromBytes(p)}catch{return!1}}function a(p=i(r.seed)){return _F(cs(p,r.seed,"seed"),e.ORDER)}function l(p,E=!0){return n.BASE.multiply(Vl(e,p)).toBytes(E)}function d(p){const E=a(p);return{secretKey:E,publicKey:l(E)}}function u(p){if(typeof p=="bigint")return!1;if(p instanceof n)return!0;const{secretKey:E,publicKey:C,publicKeyUncompressed:v}=r;if(e.allowedLengths||E===C)return;const A=Qn("key",p).length;return A===C||A===v}function h(p,E,C=!0){if(u(p)===!0)throw new Error("first arg must be private key");if(u(E)===!1)throw new Error("second arg must be public key");const v=Vl(e,p);return n.fromHex(E).multiply(v).toBytes(C)}return Object.freeze({getPublicKey:l,getSharedSecret:h,keygen:d,Point:n,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:p=>Vl(e,p),precompute(p=8,E=n.BASE){return E.precompute(p,!1)}},lengths:r})}function mj(n,t,e={}){K8(t),Xf(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const i=e.randomBytes||Rb,r=e.hmac||((w,...T)=>DI(t,w,Ms(...T))),{Fp:s,Fn:o}=n,{ORDER:a,BITS:l}=o,{keygen:d,getPublicKey:u,getSharedSecret:h,utils:m,lengths:p}=pj(n,e),E={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},C="compact";function v(w){const T=a>>eu;return w>T}function A(w,T){if(!o.isValidNot0(T))throw new Error(`invalid signature ${w}: out of range 1..Point.Fn.ORDER`);return T}function x(w,T){jw(T);const V=p.signature,Y=T==="compact"?V:T==="recovered"?V+1:void 0;return cs(w,Y,`${T} signature`)}class P{constructor(T,V,Y){this.r=A("r",T),this.s=A("s",V),Y!=null&&(this.recovery=Y),Object.freeze(this)}static fromBytes(T,V=C){x(T,V);let Y;if(V==="der"){const{r:R,s:_}=lo.toSig(cs(T));return new P(R,_)}V==="recovered"&&(Y=T[0],V="compact",T=T.subarray(1));const Q=o.BYTES,$=T.subarray(0,Q),F=T.subarray(Q,Q*2);return new P(o.fromBytes($),o.fromBytes(F),Y)}static fromHex(T,V){return this.fromBytes(U0(T),V)}addRecoveryBit(T){return new P(this.r,this.s,T)}recoverPublicKey(T){const V=s.ORDER,{r:Y,s:Q,recovery:$}=this;if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");if(a*zI<V&&$>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=$===2||$===3?Y+a:Y;if(!s.isValid(R))throw new Error("recovery id 2 or 3 invalid");const _=s.toBytes(R),k=n.fromBytes(Ms(GI(($&1)===0),_)),H=o.inv(R),L=K(Qn("msgHash",T)),g=o.create(-L*H),D=o.create(Q*H),S=n.BASE.multiplyUnsafe(g).add(k.multiplyUnsafe(D));if(S.is0())throw new Error("point at infinify");return S.assertValidity(),S}hasHighS(){return v(this.s)}toBytes(T=C){if(jw(T),T==="der")return U0(lo.hexFromSig(this));const V=o.toBytes(this.r),Y=o.toBytes(this.s);if(T==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ms(Uint8Array.of(this.recovery),V,Y)}return Ms(V,Y)}toHex(T){return Nc(this.toBytes(T))}assertValidity(){}static fromCompact(T){return P.fromBytes(Qn("sig",T),"compact")}static fromDER(T){return P.fromBytes(Qn("sig",T),"der")}normalizeS(){return this.hasHighS()?new P(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Nc(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Nc(this.toBytes("compact"))}}const W=e.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");const V=Rm(T),Y=T.length*8-l;return Y>0?V>>BigInt(Y):V},K=e.bits2int_modN||function(T){return o.create(W(T))},j=Yf(l);function b(w){return Fw("num < 2^"+l,w,bo,j),o.toBytes(w)}function B(w,T){return cs(w,void 0,"message"),T?cs(t(w),void 0,"prehashed message"):w}function J(w,T,V){if(["recovered","canonical"].some(g=>g in V))throw new Error("sign() legacy options not supported");const{lowS:Y,prehash:Q,extraEntropy:$}=C1(V,E);w=B(w,Q);const F=K(w),R=Vl(o,T),_=[b(R),b(F)];if($!=null&&$!==!1){const g=$===!0?i(p.secretKey):$;_.push(Qn("extraEntropy",g))}const k=Ms(..._),H=F;function L(g){const D=W(g);if(!o.isValidNot0(D))return;const S=o.inv(D),lt=n.BASE.multiply(D).toAffine(),ct=o.create(lt.x);if(ct===bo)return;const G=o.create(S*o.create(H+ct*R));if(G===bo)return;let ft=(lt.x===ct?0:2)|Number(lt.y&eu),vt=G;return Y&&v(G)&&(vt=o.neg(G),ft^=1),new P(ct,vt,ft)}return{seed:k,k2sig:L}}function it(w,T,V={}){w=Qn("message",w);const{seed:Y,k2sig:Q}=J(w,T,V);return lF(t.outputLen,o.BYTES,r)(Y,Q)}function st(w){let T;const V=typeof w=="string"||Qf(w),Y=!V&&w!==null&&typeof w=="object"&&typeof w.r=="bigint"&&typeof w.s=="bigint";if(!V&&!Y)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(Y)T=new P(w.r,w.s);else if(V){try{T=P.fromBytes(Qn("sig",w),"der")}catch(Q){if(!(Q instanceof lo.Err))throw Q}if(!T)try{T=P.fromBytes(Qn("sig",w),"compact")}catch{return!1}}return T||!1}function z(w,T,V,Y={}){const{lowS:Q,prehash:$,format:F}=C1(Y,E);if(V=Qn("publicKey",V),T=B(Qn("message",T),$),"strict"in Y)throw new Error("options.strict was renamed to lowS");const R=F===void 0?st(w):P.fromBytes(Qn("sig",w),F);if(R===!1)return!1;try{const _=n.fromBytes(V);if(Q&&R.hasHighS())return!1;const{r:k,s:H}=R,L=K(T),g=o.inv(H),D=o.create(L*g),S=o.create(k*g),lt=n.BASE.multiplyUnsafe(D).add(_.multiplyUnsafe(S));return lt.is0()?!1:o.create(lt.x)===k}catch{return!1}}function I(w,T,V={}){const{prehash:Y}=C1(V,E);return T=B(T,Y),P.fromBytes(w,"recovered").recoverPublicKey(T).toBytes()}return Object.freeze({keygen:d,getPublicKey:u,getSharedSecret:h,utils:m,lengths:p,Point:n,sign:it,verify:z,recoverPublicKey:I,Signature:P,hash:t})}function gj(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let i=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const r=Kc(t.n,{BITS:n.nBitLength,allowedLengths:i,modFromBytes:n.wrapPrivateKey}),s={Fp:e,Fn:r,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:s}}function yj(n){const{CURVE:t,curveOpts:e}=gj(n),i={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:i}}function wj(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,fI(e.Fn.ORDER,e.Fn.BITS))})}function _j(n){const{CURVE:t,curveOpts:e,hash:i,ecdsaOpts:r}=yj(n),s=hj(t,e),o=mj(s,i,r);return wj(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bj(n,t){const e=i=>_j({...n,hash:i});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gb={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},vj={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},qS=BigInt(2);function xj(n){const t=Gb.p,e=BigInt(3),i=BigInt(6),r=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),d=n*n*n%t,u=d*d*n%t,h=Zn(u,e,t)*u%t,m=Zn(h,e,t)*u%t,p=Zn(m,qS,t)*d%t,E=Zn(p,r,t)*p%t,C=Zn(E,s,t)*E%t,v=Zn(C,a,t)*C%t,A=Zn(v,l,t)*v%t,x=Zn(A,a,t)*C%t,P=Zn(x,e,t)*u%t,W=Zn(P,o,t)*E%t,K=Zn(W,i,t)*d%t,j=Zn(K,qS,t);if(!Uw.eql(Uw.sqr(j),n))throw new Error("Cannot find square root");return j}const Uw=Kc(Gb.p,{sqrt:xj}),Wb=bj({...Gb,Fp:Uw,lowS:!0,endo:vj},tI),Ej=Mu.utils.randomPrivateKey,$S=()=>{const n=Mu.utils.randomPrivateKey(),t=H0(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},H0=Mu.getPublicKey;function HS(n){try{return Mu.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Vb=(n,t)=>Mu.sign(n,t.slice(0,32)),Sj=Mu.verify,He=n=>Oe.isBuffer(n)?n:n instanceof Uint8Array?Oe.from(n.buffer,n.byteOffset,n.byteLength):Oe.from(n);let qb=class{constructor(t){Object.assign(this,t)}encode(){return Oe.from(y1.serialize(uf,this))}static decode(t){return y1.deserialize(uf,this,t)}static decodeUnchecked(t){return y1.deserializeUnchecked(uf,this,t)}};class Lj extends qb{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const uf=new Map;var VI;const qI=32,Us=32;function Cj(n){return n._bn!==void 0}let KS=1;class Zt extends qb{constructor(t){if(super({}),this._bn=void 0,Cj(t))this._bn=t._bn;else{if(typeof t=="string"){const e=gi.decode(t);if(e.length!=Us)throw new Error("Invalid public key input");this._bn=new Bs(e)}else this._bn=new Bs(t);if(this._bn.byteLength()>Us)throw new Error("Invalid public key input")}}static unique(){const t=new Zt(KS);return KS+=1,new Zt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return gi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Oe);if(t.length===Us)return t;const e=Oe.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,i){const r=Oe.concat([t.toBuffer(),Oe.from(e),i.toBuffer()]),s=MS(r);return new Zt(s)}static createProgramAddressSync(t,e){let i=Oe.alloc(0);t.forEach(function(s){if(s.length>qI)throw new TypeError("Max seed length exceeded");i=Oe.concat([i,He(s)])}),i=Oe.concat([i,e.toBuffer(),Oe.from("ProgramDerivedAddress")]);const r=MS(i);if(HS(r))throw new Error("Invalid seeds, address must fall off the curve");return new Zt(r)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let i=255,r;for(;i!=0;){try{const s=t.concat(Oe.from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new Zt(t);return HS(e.toBytes())}}VI=Zt;Zt.default=new VI("11111111111111111111111111111111");uf.set(Zt,{kind:"struct",fields:[["_bn","u256"]]});class Aj{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=He(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=He(Ej()),this._publicKey=He(H0(this._secretKey))}get publicKey(){return new Zt(this._publicKey)}get secretKey(){return Oe.concat([this._secretKey,this._publicKey],64)}}const Ij=new Zt("BPFLoader1111111111111111111111111111111111"),Ta=1232,Om=127,Mf=64;class $b extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty($b.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Hb extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Hb.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ql extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ql.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Bf{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const i=new Map;this.keySegments().flat().forEach((s,o)=>{i.set(s.toBase58(),o)});const r=s=>{const o=i.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(s=>({programIdIndex:r(s.programId),accountKeyIndexes:s.keys.map(o=>r(o.pubkey)),data:s.data}))}}const tn=(n="publicKey")=>_t.blob(32,n),Tj=(n="signature")=>_t.blob(64,n),bc=(n="string")=>{const t=_t.struct([_t.u32("length"),_t.u32("lengthPadding"),_t.blob(_t.offset(_t.u32(),-8),"chars")],n),e=t.decode.bind(t),i=t.encode.bind(t),r=t;return r.decode=(s,o)=>e(s,o).chars.toString(),r.encode=(s,o,a)=>{const l={chars:Oe.from(s,"utf8")};return i(l,o,a)},r.alloc=s=>_t.u32().span+_t.u32().span+Oe.from(s,"utf8").length,r},kj=(n="authorized")=>_t.struct([tn("staker"),tn("withdrawer")],n),Rj=(n="lockup")=>_t.struct([_t.ns64("unixTimestamp"),_t.ns64("epoch"),tn("custodian")],n),Nj=(n="voteInit")=>_t.struct([tn("nodePubkey"),tn("authorizedVoter"),tn("authorizedWithdrawer"),_t.u8("commission")],n),Mj=(n="voteAuthorizeWithSeedArgs")=>_t.struct([_t.u32("voteAuthorizationType"),tn("currentAuthorityDerivedKeyOwnerPubkey"),bc("currentAuthorityDerivedKeySeed"),tn("newAuthorized")],n);function $I(n,t){const e=r=>{if(r.span>=0)return r.span;if(typeof r.alloc=="function")return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){const s=t[r.property];if(Array.isArray(s))return s.length*e(r.elementLayout)}else if("fields"in r)return $I({layout:r},t[r.property]);return 0};let i=0;return n.layout.fields.forEach(r=>{i+=e(r)}),i}function wr(n){let t=0,e=0;for(;;){let i=n.shift();if(t|=(i&127)<<e*7,e+=1,(i&128)===0)break}return t}function Ir(n,t){let e=t;for(;;){let i=e&127;if(e>>=7,e==0){n.push(i);break}else i|=128,n.push(i)}}function hn(n,t){if(!n)throw new Error(t||"Assertion failed")}class Fm{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const i=new Map,r=o=>{const a=o.toBase58();let l=i.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},i.set(a,l)),l},s=r(e);s.isSigner=!0,s.isWritable=!0;for(const o of t){r(o.programId).isInvoked=!0;for(const a of o.keys){const l=r(a.pubkey);l.isSigner||=a.isSigner,l.isWritable||=a.isWritable}}return new Fm(e,i)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];hn(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,l])=>l.isSigner&&l.isWritable),i=t.filter(([,l])=>l.isSigner&&!l.isWritable),r=t.filter(([,l])=>!l.isSigner&&l.isWritable),s=t.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:e.length+i.length,numReadonlySignedAccounts:i.length,numReadonlyUnsignedAccounts:s.length};{hn(e.length>0,"Expected at least one writable signer key");const[l]=e[0];hn(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([l])=>new Zt(l)),...i.map(([l])=>new Zt(l)),...r.map(([l])=>new Zt(l)),...s.map(([l])=>new Zt(l))];return[o,a]}extractTableLookup(t){const[e,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[r,s]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&r.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:r},{writable:i,readonly:s}]}drainKeysFoundInLookupTable(t,e){const i=new Array,r=new Array;for(const[s,o]of this.keyMetaMap.entries())if(e(o)){const a=new Zt(s),l=t.findIndex(d=>d.equals(a));l>=0&&(hn(l<256,"Max lookup table index exceeded"),i.push(l),r.push(a),this.keyMetaMap.delete(s))}return[i,r]}}const HI="Reached end of buffer unexpectedly";function Ps(n){if(n.length===0)throw new Error(HI);return n.shift()}function _r(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(HI);return n.splice(...t)}class ps{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new Zt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:gi.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Bf(this.staticAccountKeys)}static compile(t){const e=Fm.compile(t.instructions,t.payerKey),[i,r]=e.getMessageComponents(),o=new Bf(r).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:gi.encode(a.data)}));return new ps({header:i,accountKeys:r,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const i=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return i<s}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ir(e,t);const i=this.instructions.map(h=>{const{accounts:m,programIdIndex:p}=h,E=Array.from(gi.decode(h.data));let C=[];Ir(C,m.length);let v=[];return Ir(v,E.length),{programIdIndex:p,keyIndicesCount:Oe.from(C),keyIndices:m,dataLength:Oe.from(v),data:E}});let r=[];Ir(r,i.length);let s=Oe.alloc(Ta);Oe.from(r).copy(s);let o=r.length;i.forEach(h=>{const p=_t.struct([_t.u8("programIdIndex"),_t.blob(h.keyIndicesCount.length,"keyIndicesCount"),_t.seq(_t.u8("keyIndex"),h.keyIndices.length,"keyIndices"),_t.blob(h.dataLength.length,"dataLength"),_t.seq(_t.u8("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=p}),s=s.slice(0,o);const a=_t.struct([_t.blob(1,"numRequiredSignatures"),_t.blob(1,"numReadonlySignedAccounts"),_t.blob(1,"numReadonlyUnsignedAccounts"),_t.blob(e.length,"keyCount"),_t.seq(tn("key"),t,"keys"),tn("recentBlockhash")]),l={numRequiredSignatures:Oe.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Oe.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Oe.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Oe.from(e),keys:this.accountKeys.map(h=>He(h.toBytes())),recentBlockhash:gi.decode(this.recentBlockhash)};let d=Oe.alloc(2048);const u=a.encode(l,d);return s.copy(d,u),d.slice(0,u+s.length)}static from(t){let e=[...t];const i=Ps(e);if(i!==(i&Om))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=Ps(e),s=Ps(e),o=wr(e);let a=[];for(let m=0;m<o;m++){const p=_r(e,0,Us);a.push(new Zt(Oe.from(p)))}const l=_r(e,0,Us),d=wr(e);let u=[];for(let m=0;m<d;m++){const p=Ps(e),E=wr(e),C=_r(e,0,E),v=wr(e),A=_r(e,0,v),x=gi.encode(Oe.from(A));u.push({programIdIndex:p,accounts:C,data:x})}const h={header:{numRequiredSignatures:i,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:s},recentBlockhash:gi.encode(Oe.from(l)),accountKeys:a,instructions:u};return new ps(h)}}class Uc{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Bf(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,i=this.staticAccountKeys.length;if(t>=i){const r=t-i,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return r<s}else if(t>=this.header.numRequiredSignatures){const r=t-e,o=i-e-this.header.numReadonlyUnsignedAccounts;return r<o}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const i of this.addressTableLookups){const r=t.find(s=>s.key.equals(i.accountKey));if(!r)throw new Error(`Failed to find address lookup table account for table key ${i.accountKey.toBase58()}`);for(const s of i.writableIndexes)if(s<r.state.addresses.length)e.writable.push(r.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${i.accountKey.toBase58()}`);for(const s of i.readonlyIndexes)if(s<r.state.addresses.length)e.readonly.push(r.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${i.accountKey.toBase58()}`)}return e}static compile(t){const e=Fm.compile(t.instructions,t.payerKey),i=new Array,r={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const u of s){const h=e.extractTableLookup(u);if(h!==void 0){const[m,{writable:p,readonly:E}]=h;i.push(m),r.writable.push(...p),r.readonly.push(...E)}}const[o,a]=e.getMessageComponents(),d=new Bf(a,r).compileInstructions(t.instructions);return new Uc({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:d,addressTableLookups:i})}serialize(){const t=Array();Ir(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),i=Array();Ir(i,this.compiledInstructions.length);const r=this.serializeAddressTableLookups(),s=Array();Ir(s,this.addressTableLookups.length);const o=_t.struct([_t.u8("prefix"),_t.struct([_t.u8("numRequiredSignatures"),_t.u8("numReadonlySignedAccounts"),_t.u8("numReadonlyUnsignedAccounts")],"header"),_t.blob(t.length,"staticAccountKeysLength"),_t.seq(tn(),this.staticAccountKeys.length,"staticAccountKeys"),tn("recentBlockhash"),_t.blob(i.length,"instructionsLength"),_t.blob(e.length,"serializedInstructions"),_t.blob(s.length,"addressTableLookupsLength"),_t.blob(r.length,"serializedAddressTableLookups")]),a=new Uint8Array(Ta),d=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:gi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(i),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:r},a);return a.slice(0,d)}serializeInstructions(){let t=0;const e=new Uint8Array(Ta);for(const i of this.compiledInstructions){const r=Array();Ir(r,i.accountKeyIndexes.length);const s=Array();Ir(s,i.data.length);const o=_t.struct([_t.u8("programIdIndex"),_t.blob(r.length,"encodedAccountKeyIndexesLength"),_t.seq(_t.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),_t.blob(s.length,"encodedDataLength"),_t.blob(i.data.length,"data")]);t+=o.encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:i.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Ta);for(const i of this.addressTableLookups){const r=Array();Ir(r,i.writableIndexes.length);const s=Array();Ir(s,i.readonlyIndexes.length);const o=_t.struct([tn("accountKey"),_t.blob(r.length,"encodedWritableIndexesLength"),_t.seq(_t.u8(),i.writableIndexes.length,"writableIndexes"),_t.blob(s.length,"encodedReadonlyIndexesLength"),_t.seq(_t.u8(),i.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:i.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const i=Ps(e),r=i&Om;hn(i!==r,"Expected versioned message but received legacy message");const s=r;hn(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Ps(e),numReadonlySignedAccounts:Ps(e),numReadonlyUnsignedAccounts:Ps(e)},a=[],l=wr(e);for(let E=0;E<l;E++)a.push(new Zt(_r(e,0,Us)));const d=gi.encode(_r(e,0,Us)),u=wr(e),h=[];for(let E=0;E<u;E++){const C=Ps(e),v=wr(e),A=_r(e,0,v),x=wr(e),P=new Uint8Array(_r(e,0,x));h.push({programIdIndex:C,accountKeyIndexes:A,data:P})}const m=wr(e),p=[];for(let E=0;E<m;E++){const C=new Zt(_r(e,0,Us)),v=wr(e),A=_r(e,0,v),x=wr(e),P=_r(e,0,x);p.push({accountKey:C,writableIndexes:A,readonlyIndexes:P})}return new Uc({header:o,staticAccountKeys:a,recentBlockhash:d,compiledInstructions:h,addressTableLookups:p})}}const jm={deserializeMessageVersion(n){const t=n[0],e=t&Om;return e===t?"legacy":e},deserialize:n=>{const t=jm.deserializeMessageVersion(n);if(t==="legacy")return ps.from(n);if(t===0)return Uc.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let oo=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const Bj=Oe.alloc(Mf).fill(0);class pn{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Oe.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:i})=>({pubkey:t.toJSON(),isSigner:e,isWritable:i})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ke{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:i}=t;this.minNonceContextSlot=e,this.nonceInfo=i}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:i}=t;this.recentBlockhash=e,this.lastValidBlockHeight=i}else{const{recentBlockhash:e,nonceInfo:i}=t;i&&(this.nonceInfo=i),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new pn(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let i;if(this.feePayer)i=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)i=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let C=0;C<e.length;C++)if(e[C].programId===void 0)throw new Error(`Transaction instruction index ${C} has undefined program id`);const r=[],s=[];e.forEach(C=>{C.keys.forEach(A=>{s.push({...A})});const v=C.programId.toString();r.includes(v)||r.push(v)}),r.forEach(C=>{s.push({pubkey:new Zt(C),isSigner:!1,isWritable:!1})});const o=[];s.forEach(C=>{const v=C.pubkey.toString(),A=o.findIndex(x=>x.pubkey.toString()===v);A>-1?(o[A].isWritable=o[A].isWritable||C.isWritable,o[A].isSigner=o[A].isSigner||C.isSigner):o.push(C)}),o.sort(function(C,v){if(C.isSigner!==v.isSigner)return C.isSigner?-1:1;if(C.isWritable!==v.isWritable)return C.isWritable?-1:1;const A={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return C.pubkey.toBase58().localeCompare(v.pubkey.toBase58(),"en",A)});const a=o.findIndex(C=>C.pubkey.equals(i));if(a>-1){const[C]=o.splice(a,1);C.isSigner=!0,C.isWritable=!0,o.unshift(C)}else o.unshift({pubkey:i,isSigner:!0,isWritable:!0});for(const C of this.signatures){const v=o.findIndex(A=>A.pubkey.equals(C.publicKey));if(v>-1)o[v].isSigner||(o[v].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${C.publicKey.toString()}`)}let l=0,d=0,u=0;const h=[],m=[];o.forEach(({pubkey:C,isSigner:v,isWritable:A})=>{v?(h.push(C.toString()),l+=1,A||(d+=1)):(m.push(C.toString()),A||(u+=1))});const p=h.concat(m),E=e.map(C=>{const{data:v,programId:A}=C;return{programIdIndex:p.indexOf(A.toString()),accounts:C.keys.map(x=>p.indexOf(x.pubkey.toString())),data:gi.encode(v)}});return E.forEach(C=>{hn(C.programIdIndex>=0),C.accounts.forEach(v=>hn(v>=0))}),new ps({header:{numRequiredSignatures:l,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:u},accountKeys:p,recentBlockhash:t,instructions:E})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((r,s)=>e[s].equals(r.publicKey))||(this.signatures=e.map(i=>({signature:null,publicKey:i}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(i=>{const r=i.toString();return e.has(r)?!1:(e.add(r),!0)}).map(i=>({signature:null,publicKey:i}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,i=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),i.push(s))}this.signatures=i.map(s=>({signature:null,publicKey:s.publicKey}));const r=this._compile();this._partialSign(r,...i)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,i=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),i.push(s))}const r=this._compile();this._partialSign(r,...i)}_partialSign(t,...e){const i=t.serialize();e.forEach(r=>{const s=Vb(i,r.secretKey);this._addSignature(r.publicKey,He(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){hn(e.length===64);const i=this.signatures.findIndex(r=>t.equals(r.publicKey));if(i<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[i].signature=Oe.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const i={};for(const{signature:r,publicKey:s}of this.signatures)r===null?e&&(i.missing||=[]).push(s):Sj(r,t,s.toBytes())||(i.invalid||=[]).push(s);return i.invalid||i.missing?i:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:i}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),r=this.serializeMessage();if(i){const s=this._getMessageSignednessErrors(r,e);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(r)}_serialize(t){const{signatures:e}=this,i=[];Ir(i,e.length);const r=i.length+e.length*64+t.length,s=Oe.alloc(r);return hn(e.length<256),Oe.from(i).copy(s,0),e.forEach(({signature:o},a)=>{o!==null&&(hn(o.length===64,"signature has invalid length"),Oe.from(o).copy(s,i.length+a*64))}),t.copy(s,i.length+e.length*64),hn(s.length<=Ta,`Transaction too large: ${s.length} > ${Ta}`),s}get keys(){return hn(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return hn(this.instructions.length===1),this.instructions[0].programId}get data(){return hn(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const i=wr(e);let r=[];for(let s=0;s<i;s++){const o=_r(e,0,Mf);r.push(gi.encode(Oe.from(o)))}return Ke.populate(ps.from(e),r)}static populate(t,e=[]){const i=new Ke;return i.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(i.feePayer=t.accountKeys[0]),e.forEach((r,s)=>{const o={signature:r==gi.encode(Bj)?null:gi.decode(r),publicKey:t.accountKeys[s]};i.signatures.push(o)}),t.instructions.forEach(r=>{const s=r.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:i.signatures.some(l=>l.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});i.instructions.push(new pn({keys:s,programId:t.accountKeys[r.programIdIndex],data:gi.decode(r.data)}))}),i._message=t,i._json=i.toJSON(),i}}class Kb{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:i,compiledInstructions:r,recentBlockhash:s}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=i,d=o-a;hn(d>0,"Message header is invalid");const u=t.staticAccountKeys.length-o-l;hn(u>=0,"Message header is invalid");const h=t.getAccountKeys(e),m=h.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const p=[];for(const E of r){const C=[];for(const A of E.accountKeyIndexes){const x=h.get(A);if(x===void 0)throw new Error(`Failed to find key for account key index ${A}`);const P=A<o;let W;P?W=A<d:A<h.staticAccountKeys.length?W=A-o<u:W=A-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,C.push({pubkey:x,isSigner:A<i.numRequiredSignatures,isWritable:W})}const v=h.get(E.programIdIndex);if(v===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);p.push(new pn({programId:v,data:He(E.data),keys:C}))}return new Kb({payerKey:m,instructions:p,recentBlockhash:s})}compileToLegacyMessage(){return ps.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Uc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class wu{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)hn(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const i=[];for(let r=0;r<t.header.numRequiredSignatures;r++)i.push(new Uint8Array(Mf));this.signatures=i}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ir(e,this.signatures.length);const i=_t.struct([_t.blob(e.length,"encodedSignaturesLength"),_t.seq(Tj(),this.signatures.length,"signatures"),_t.blob(t.length,"serializedMessage")]),r=new Uint8Array(2048),s=i.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},r);return r.slice(0,s)}static deserialize(t){let e=[...t];const i=[],r=wr(e);for(let o=0;o<r;o++)i.push(new Uint8Array(_r(e,0,Mf)));const s=jm.deserialize(new Uint8Array(e));return new wu(s,i)}sign(t){const e=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const r of t){const s=i.findIndex(o=>o.equals(r.publicKey));hn(s>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[s]=Vb(e,r.secretKey)}}addSignature(t,e){hn(e.byteLength===64,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(t));hn(r>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=e}}const Pj=160,Oj=64,Fj=Pj/Oj,KI=1e3/Fj,Rs=new Zt("SysvarC1ock11111111111111111111111111111111"),jj=new Zt("SysvarEpochSchedu1e111111111111111111111111"),Uj=new Zt("Sysvar1nstructions1111111111111111111111111"),r0=new Zt("SysvarRecentB1ockHashes11111111111111111111"),_u=new Zt("SysvarRent111111111111111111111111111111111"),Dj=new Zt("SysvarRewards111111111111111111111111111111"),zj=new Zt("SysvarS1otHashes111111111111111111111111111"),Gj=new Zt("SysvarS1otHistory11111111111111111111111111"),s0=new Zt("SysvarStakeHistory1111111111111111111111111");class Pf extends Error{constructor({action:t,signature:e,transactionMessage:i,logs:r}){const s=r?`Logs: 
${JSON.stringify(r.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${i}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${i}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=i,this.transactionLogs=r||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,i)=>{t.getTransaction(this.signature).then(r=>{if(r&&r.meta&&r.meta.logMessages){const s=r.meta.logMessages;this.transactionLogs=s,e(s)}else i(new Error("Log messages not found"))}).catch(i)})),await this.transactionLogs}}const Wj={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Te extends Error{constructor({code:t,message:e,data:i},r){super(r!=null?`${r}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=i,this.name="SolanaJSONRPCError"}}async function Dw(n,t,e,i){const r=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},s=await n.sendTransaction(t,e,r);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:i?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},i&&i.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:a}=t.nonceInfo,l=a.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:i?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:l,nonceValue:t.nonceInfo.nonce,signature:s},i&&i.commitment)).value}else i?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(s,i&&i.commitment)).value;if(o.err)throw s!=null?new Pf({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function pc(n){return new Promise(t=>setTimeout(t,n))}function rn(n,t){const e=n.layout.span>=0?n.layout.span:$I(n,t),i=Oe.alloc(e),r=Object.assign({instruction:n.index},t);return n.layout.encode(r,i),i}function wn(n,t){let e;try{e=n.layout.decode(t)}catch(i){throw new Error("invalid instruction; "+i)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const ZI=_t.nu64("lamportsPerSignature"),QI=_t.struct([_t.u32("version"),_t.u32("state"),tn("authorizedPubkey"),tn("nonce"),_t.struct([ZI],"feeCalculator")]),zw=QI.span;class Um{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=QI.decode(He(t),0);return new Um({authorizedPubkey:new Zt(e.authorizedPubkey),nonce:new Zt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function bu(n){const t=_t.blob(8,n),e=t.decode.bind(t),i=t.encode.bind(t),r=t,s=y7();return r.decode=(o,a)=>{const l=e(o,a);return s.decode(l)},r.encode=(o,a,l)=>{const d=s.encode(o);return i(d,a,l)},r}class Vj{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const i=_t.u32("instruction").decode(t.data);let r;for(const[s,o]of Object.entries(Cn))if(o.index==i){r=s;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:i,programId:r}=wn(Cn.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:i,programId:new Zt(r)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=wn(Cn.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:i,programId:r}=wn(Cn.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:i,programId:new Zt(r)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=wn(Cn.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:i,space:r,programId:s}=wn(Cn.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Zt(e),seed:i,space:r,programId:new Zt(s)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=wn(Cn.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new Zt(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:i,programId:r}=wn(Cn.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Zt(e),seed:i,programId:new Zt(r)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:i,lamports:r,space:s,programId:o}=wn(Cn.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new Zt(e),seed:i,lamports:r,space:s,programId:new Zt(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=wn(Cn.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new Zt(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),wn(Cn.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=wn(Cn.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=wn(Cn.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new Zt(e)}}static checkProgramId(t){if(!t.equals(Un.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Cn=Object.freeze({Create:{index:0,layout:_t.struct([_t.u32("instruction"),_t.ns64("lamports"),_t.ns64("space"),tn("programId")])},Assign:{index:1,layout:_t.struct([_t.u32("instruction"),tn("programId")])},Transfer:{index:2,layout:_t.struct([_t.u32("instruction"),bu("lamports")])},CreateWithSeed:{index:3,layout:_t.struct([_t.u32("instruction"),tn("base"),bc("seed"),_t.ns64("lamports"),_t.ns64("space"),tn("programId")])},AdvanceNonceAccount:{index:4,layout:_t.struct([_t.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:_t.struct([_t.u32("instruction"),_t.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:_t.struct([_t.u32("instruction"),tn("authorized")])},AuthorizeNonceAccount:{index:7,layout:_t.struct([_t.u32("instruction"),tn("authorized")])},Allocate:{index:8,layout:_t.struct([_t.u32("instruction"),_t.ns64("space")])},AllocateWithSeed:{index:9,layout:_t.struct([_t.u32("instruction"),tn("base"),bc("seed"),_t.ns64("space"),tn("programId")])},AssignWithSeed:{index:10,layout:_t.struct([_t.u32("instruction"),tn("base"),bc("seed"),tn("programId")])},TransferWithSeed:{index:11,layout:_t.struct([_t.u32("instruction"),bu("lamports"),bc("seed"),tn("programId")])},UpgradeNonceAccount:{index:12,layout:_t.struct([_t.u32("instruction")])}});class Un{constructor(){}static createAccount(t){const e=Cn.Create,i=rn(e,{lamports:t.lamports,space:t.space,programId:He(t.programId.toBuffer())});return new pn({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:i})}static transfer(t){let e,i;if("basePubkey"in t){const r=Cn.TransferWithSeed;e=rn(r,{lamports:BigInt(t.lamports),seed:t.seed,programId:He(t.programId.toBuffer())}),i=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const r=Cn.Transfer;e=rn(r,{lamports:BigInt(t.lamports)}),i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new pn({keys:i,programId:this.programId,data:e})}static assign(t){let e,i;if("basePubkey"in t){const r=Cn.AssignWithSeed;e=rn(r,{base:He(t.basePubkey.toBuffer()),seed:t.seed,programId:He(t.programId.toBuffer())}),i=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const r=Cn.Assign;e=rn(r,{programId:He(t.programId.toBuffer())}),i=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new pn({keys:i,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Cn.CreateWithSeed,i=rn(e,{base:He(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:He(t.programId.toBuffer())});let r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new pn({keys:r,programId:this.programId,data:i})}static createNonceAccount(t){const e=new Ke;"basePubkey"in t&&"seed"in t?e.add(Un.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:zw,programId:this.programId})):e.add(Un.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:zw,programId:this.programId}));const i={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(i)),e}static nonceInitialize(t){const e=Cn.InitializeNonceAccount,i=rn(e,{authorized:He(t.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:r0,isSigner:!1,isWritable:!1},{pubkey:_u,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new pn(r)}static nonceAdvance(t){const e=Cn.AdvanceNonceAccount,i=rn(e),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:r0,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new pn(r)}static nonceWithdraw(t){const e=Cn.WithdrawNonceAccount,i=rn(e,{lamports:t.lamports});return new pn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:r0,isSigner:!1,isWritable:!1},{pubkey:_u,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static nonceAuthorize(t){const e=Cn.AuthorizeNonceAccount,i=rn(e,{authorized:He(t.newAuthorizedPubkey.toBuffer())});return new pn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static allocate(t){let e,i;if("basePubkey"in t){const r=Cn.AllocateWithSeed;e=rn(r,{base:He(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:He(t.programId.toBuffer())}),i=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const r=Cn.Allocate;e=rn(r,{space:t.space}),i=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new pn({keys:i,programId:this.programId,data:e})}}Un.programId=new Zt("11111111111111111111111111111111");const qj=Ta-300;class Dc{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Dc.chunkSize)+1+1)}static async load(t,e,i,r,s){{const h=await t.getMinimumBalanceForRentExemption(s.length),m=await t.getAccountInfo(i.publicKey,"confirmed");let p=null;if(m!==null){if(m.executable)return console.error("Program load failed, account is already executable"),!1;m.data.length!==s.length&&(p=p||new Ke,p.add(Un.allocate({accountPubkey:i.publicKey,space:s.length}))),m.owner.equals(r)||(p=p||new Ke,p.add(Un.assign({accountPubkey:i.publicKey,programId:r}))),m.lamports<h&&(p=p||new Ke,p.add(Un.transfer({fromPubkey:e.publicKey,toPubkey:i.publicKey,lamports:h-m.lamports})))}else p=new Ke().add(Un.createAccount({fromPubkey:e.publicKey,newAccountPubkey:i.publicKey,lamports:h>0?h:1,space:s.length,programId:r}));p!==null&&await Dw(t,p,[e,i],{commitment:"confirmed"})}const o=_t.struct([_t.u32("instruction"),_t.u32("offset"),_t.u32("bytesLength"),_t.u32("bytesLengthPadding"),_t.seq(_t.u8("byte"),_t.offset(_t.u32(),-8),"bytes")]),a=Dc.chunkSize;let l=0,d=s,u=[];for(;d.length>0;){const h=d.slice(0,a),m=Oe.alloc(a+16);o.encode({instruction:0,offset:l,bytes:h,bytesLength:0,bytesLengthPadding:0},m);const p=new Ke().add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:r,data:m});u.push(Dw(t,p,[e,i],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await pc(1e3/4),l+=a,d=d.slice(a)}await Promise.all(u);{const h=_t.struct([_t.u32("instruction")]),m=Oe.alloc(h.span);h.encode({instruction:1},m);const p=new Ke().add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:_u,isSigner:!1,isWritable:!1}],programId:r,data:m}),E="processed",C=await t.sendTransaction(p,[e,i],{preflightCommitment:E}),{context:v,value:A}=await t.confirmTransaction({signature:C,lastValidBlockHeight:p.lastValidBlockHeight,blockhash:p.recentBlockhash},E);if(A.err)throw new Error(`Transaction ${C} failed (${JSON.stringify(A)})`);for(;;){try{if(await t.getSlot({commitment:E})>v.slot)break}catch{}await new Promise(x=>setTimeout(x,Math.round(KI/2)))}}return!0}}Dc.chunkSize=qj;const $j=new Zt("BPFLoader2111111111111111111111111111111111");class Hj{static getMinNumSignatures(t){return Dc.getMinNumSignatures(t)}static load(t,e,i,r,s){return Dc.load(t,e,i,s,r)}}function Kj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var A1,ZS;function Zj(){if(ZS)return A1;ZS=1;var n=Object.prototype.toString,t=Object.keys||function(i){var r=[];for(var s in i)r.push(s);return r};function e(i,r){var s,o,a,l,d,u,h;if(i===!0)return"true";if(i===!1)return"false";switch(typeof i){case"object":if(i===null)return null;if(i.toJSON&&typeof i.toJSON=="function")return e(i.toJSON(),r);if(h=n.call(i),h==="[object Array]"){for(a="[",o=i.length-1,s=0;s<o;s++)a+=e(i[s],!0)+",";return o>-1&&(a+=e(i[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=t(i).sort(),o=l.length,a="",s=0;s<o;)d=l[s],u=e(i[d],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(d)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(i);case"function":case"undefined":return r?null:void 0;case"string":return JSON.stringify(i);default:return isFinite(i)?i:null}}return A1=function(i){var r=e(i,!1);if(r!==void 0)return""+r},A1}var Qj=Zj(),QS=Kj(Qj);const Pd=32;function I1(n){let t=0;for(;n>1;)n/=2,t++;return t}function Yj(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class YI{constructor(t,e,i,r,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=i,this.firstNormalEpoch=r,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=I1(Yj(t+Pd+1))-I1(Pd)-1,i=this.getSlotsInEpoch(e),r=t-(i-Pd);return[e,r]}else{const e=t-this.firstNormalSlot,i=Math.floor(e/this.slotsPerEpoch),r=this.firstNormalEpoch+i,s=e%this.slotsPerEpoch;return[r,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Pd:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+I1(Pd)):this.slotsPerEpoch}}var Xj=globalThis.fetch;class Jj extends J7{constructor(t,e,i){const r=s=>{const o=Y7(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(r,t,e,i),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function tU(n,t){let e;try{e=n.layout.decode(t)}catch(i){throw new Error("invalid instruction; "+i)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const YS=56;class Gw{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=tU(eU,t),i=t.length-YS;hn(i>=0,"lookup table is invalid"),hn(i%32===0,"lookup table is invalid");const r=i/32,{addresses:s}=_t.struct([_t.seq(tn(),r,"addresses")]).decode(t.slice(YS));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new Zt(e.authority[0]):void 0,addresses:s.map(o=>new Zt(o))}}}const eU={index:1,layout:_t.struct([_t.u32("typeIndex"),bu("deactivationSlot"),_t.nu64("lastExtendedSlot"),_t.u8("lastExtendedStartIndex"),_t.u8(),_t.seq(tn(),_t.offset(_t.u8(),-1),"authority")])},nU=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function iU(n){const t=n.match(nU);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,i,r,s]=t,o=n.startsWith("https:")?"wss:":"ws:",a=r==null?null:parseInt(r.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${i}${l}${s}`}const $n=eh(Db(Zt),ce(),n=>new Zt(n)),XI=zb([ce(),Wn("base64")]),Zb=eh(Db(Oe),XI,n=>Oe.from(n[0],"base64")),JI=30*1e3;function rU(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Sn(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:i,...r}=n;t=i,e=r}return{commitment:t,config:e}}function XS(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function tT(n){return nr([ie({jsonrpc:Wn("2.0"),id:ce(),result:n}),ie({jsonrpc:Wn("2.0"),id:ce(),error:ie({code:Bu(),message:ce(),data:Ne(E7())})})])}const sU=tT(Bu());function $e(n){return eh(tT(n),sU,t=>"error"in t?t:{...t,result:ue(t.result,n)})}function ti(n){return $e(ie({context:ie({slot:Ut()}),value:n}))}function Dm(n){return ie({context:ie({slot:Ut()}),value:n})}function T1(n,t){return n===0?new Uc({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new Zt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:gi.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new ps(t)}const oU=ie({foundation:Ut(),foundationTerm:Ut(),initial:Ut(),taper:Ut(),terminal:Ut()}),aU=$e(he(pe(ie({epoch:Ut(),effectiveSlot:Ut(),amount:Ut(),postBalance:Ut(),commission:Ne(pe(Ut()))})))),cU=he(ie({slot:Ut(),prioritizationFee:Ut()})),lU=ie({total:Ut(),validator:Ut(),foundation:Ut(),epoch:Ut()}),uU=ie({epoch:Ut(),slotIndex:Ut(),slotsInEpoch:Ut(),absoluteSlot:Ut(),blockHeight:Ne(Ut()),transactionCount:Ne(Ut())}),dU=ie({slotsPerEpoch:Ut(),leaderScheduleSlotOffset:Ut(),warmup:Gs(),firstNormalEpoch:Ut(),firstNormalSlot:Ut()}),fU=AI(ce(),he(Ut())),Qc=pe(nr([ie({}),ce()])),hU=ie({err:Qc}),pU=Wn("receivedSignature"),mU=ie({"solana-core":ce(),"feature-set":Ne(Ut())}),gU=ie({program:ce(),programId:$n,parsed:Bu()}),yU=ie({programId:$n,accounts:he($n),data:ce()}),JS=ti(ie({err:pe(nr([ie({}),ce()])),logs:pe(he(ce())),accounts:Ne(pe(he(pe(ie({executable:Gs(),owner:ce(),lamports:Ut(),data:he(ce()),rentEpoch:Ne(Ut())}))))),unitsConsumed:Ne(Ut()),returnData:Ne(pe(ie({programId:ce(),data:zb([ce(),Wn("base64")])}))),innerInstructions:Ne(pe(he(ie({index:Ut(),instructions:he(nr([gU,yU]))}))))})),wU=ti(ie({byIdentity:AI(ce(),he(Ut())),range:ie({firstSlot:Ut(),lastSlot:Ut()})}));function _U(n,t,e,i,r,s){const o=e||Xj;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return i&&(l=async(u,h)=>{const m=await new Promise((p,E)=>{try{i(u,h,(C,v)=>p([C,v]))}catch(C){E(C)}});return await o(...m)}),new H7(async(u,h)=>{const m={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},_D)};try{let p=5,E,C=500;for(;l?E=await l(n,m):E=await o(n,m),!(E.status!==429||r===!0||(p-=1,p===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${C}ms delay...`),await pc(C),C*=2;const v=await E.text();E.ok?h(null,v):h(new Error(`${E.status} ${E.statusText}: ${v}`))}catch(p){p instanceof Error&&h(p)}},{})}function bU(n){return(t,e)=>new Promise((i,r)=>{n.request(t,e,(s,o)=>{if(s){r(s);return}i(o)})})}function vU(n){return t=>new Promise((e,i)=>{t.length===0&&e([]);const r=t.map(s=>n.request(s.methodName,s.args));n.request(r,(s,o)=>{if(s){i(s);return}e(o)})})}const xU=$e(oU),EU=$e(lU),SU=$e(cU),LU=$e(uU),CU=$e(dU),AU=$e(fU),IU=$e(Ut()),TU=ti(ie({total:Ut(),circulating:Ut(),nonCirculating:Ut(),nonCirculatingAccounts:he($n)})),Ww=ie({amount:ce(),uiAmount:pe(Ut()),decimals:Ut(),uiAmountString:Ne(ce())}),kU=ti(he(ie({address:$n,amount:ce(),uiAmount:pe(Ut()),decimals:Ut(),uiAmountString:Ne(ce())}))),RU=ti(he(ie({pubkey:$n,account:ie({executable:Gs(),owner:$n,lamports:Ut(),data:Zb,rentEpoch:Ut()})}))),Vw=ie({program:ce(),parsed:Bu(),space:Ut()}),NU=ti(he(ie({pubkey:$n,account:ie({executable:Gs(),owner:$n,lamports:Ut(),data:Vw,rentEpoch:Ut()})}))),MU=ti(he(ie({lamports:Ut(),address:$n}))),Of=ie({executable:Gs(),owner:$n,lamports:Ut(),data:Zb,rentEpoch:Ut()}),BU=ie({pubkey:$n,account:Of}),PU=eh(nr([Db(Oe),Vw]),nr([XI,Vw]),n=>Array.isArray(n)?ue(n,Zb):n),qw=ie({executable:Gs(),owner:$n,lamports:Ut(),data:PU,rentEpoch:Ut()}),OU=ie({pubkey:$n,account:qw}),FU=ie({state:nr([Wn("active"),Wn("inactive"),Wn("activating"),Wn("deactivating")]),active:Ut(),inactive:Ut()}),jU=$e(he(ie({signature:ce(),slot:Ut(),err:Qc,memo:pe(ce()),blockTime:Ne(pe(Ut()))}))),UU=$e(he(ie({signature:ce(),slot:Ut(),err:Qc,memo:pe(ce()),blockTime:Ne(pe(Ut()))}))),DU=ie({subscription:Ut(),result:Dm(Of)}),zU=ie({pubkey:$n,account:Of}),GU=ie({subscription:Ut(),result:Dm(zU)}),WU=ie({parent:Ut(),slot:Ut(),root:Ut()}),VU=ie({subscription:Ut(),result:WU}),qU=nr([ie({type:nr([Wn("firstShredReceived"),Wn("completed"),Wn("optimisticConfirmation"),Wn("root")]),slot:Ut(),timestamp:Ut()}),ie({type:Wn("createdBank"),parent:Ut(),slot:Ut(),timestamp:Ut()}),ie({type:Wn("frozen"),slot:Ut(),timestamp:Ut(),stats:ie({numTransactionEntries:Ut(),numSuccessfulTransactions:Ut(),numFailedTransactions:Ut(),maxTransactionsPerEntry:Ut()})}),ie({type:Wn("dead"),slot:Ut(),timestamp:Ut(),err:ce()})]),$U=ie({subscription:Ut(),result:qU}),HU=ie({subscription:Ut(),result:Dm(nr([hU,pU]))}),KU=ie({subscription:Ut(),result:Ut()}),ZU=ie({pubkey:ce(),gossip:pe(ce()),tpu:pe(ce()),rpc:pe(ce()),version:pe(ce())}),tL=ie({votePubkey:ce(),nodePubkey:ce(),activatedStake:Ut(),epochVoteAccount:Gs(),epochCredits:he(zb([Ut(),Ut(),Ut()])),commission:Ut(),lastVote:Ut(),rootSlot:pe(Ut())}),QU=$e(ie({current:he(tL),delinquent:he(tL)})),YU=nr([Wn("processed"),Wn("confirmed"),Wn("finalized")]),XU=ie({slot:Ut(),confirmations:pe(Ut()),err:Qc,confirmationStatus:Ne(YU)}),JU=ti(he(pe(XU))),tD=$e(Ut()),eT=ie({accountKey:$n,writableIndexes:he(Ut()),readonlyIndexes:he(Ut())}),Qb=ie({signatures:he(ce()),message:ie({accountKeys:he(ce()),header:ie({numRequiredSignatures:Ut(),numReadonlySignedAccounts:Ut(),numReadonlyUnsignedAccounts:Ut()}),instructions:he(ie({accounts:he(Ut()),data:ce(),programIdIndex:Ut()})),recentBlockhash:ce(),addressTableLookups:Ne(he(eT))})}),nT=ie({pubkey:$n,signer:Gs(),writable:Gs(),source:Ne(nr([Wn("transaction"),Wn("lookupTable")]))}),iT=ie({accountKeys:he(nT),signatures:he(ce())}),rT=ie({parsed:Bu(),program:ce(),programId:$n}),sT=ie({accounts:he($n),data:ce(),programId:$n}),eD=nr([sT,rT]),nD=nr([ie({parsed:Bu(),program:ce(),programId:ce()}),ie({accounts:he(ce()),data:ce(),programId:ce()})]),oT=eh(eD,nD,n=>"accounts"in n?ue(n,sT):ue(n,rT)),aT=ie({signatures:he(ce()),message:ie({accountKeys:he(nT),instructions:he(oT),recentBlockhash:ce(),addressTableLookups:Ne(pe(he(eT)))})}),K0=ie({accountIndex:Ut(),mint:ce(),owner:Ne(ce()),programId:Ne(ce()),uiTokenAmount:Ww}),cT=ie({writable:he($n),readonly:he($n)}),zm=ie({err:Qc,fee:Ut(),innerInstructions:Ne(pe(he(ie({index:Ut(),instructions:he(ie({accounts:he(Ut()),data:ce(),programIdIndex:Ut()}))})))),preBalances:he(Ut()),postBalances:he(Ut()),logMessages:Ne(pe(he(ce()))),preTokenBalances:Ne(pe(he(K0))),postTokenBalances:Ne(pe(he(K0))),loadedAddresses:Ne(cT),computeUnitsConsumed:Ne(Ut()),costUnits:Ne(Ut())}),Yb=ie({err:Qc,fee:Ut(),innerInstructions:Ne(pe(he(ie({index:Ut(),instructions:he(oT)})))),preBalances:he(Ut()),postBalances:he(Ut()),logMessages:Ne(pe(he(ce()))),preTokenBalances:Ne(pe(he(K0))),postTokenBalances:Ne(pe(he(K0))),loadedAddresses:Ne(cT),computeUnitsConsumed:Ne(Ut()),costUnits:Ne(Ut())}),Pu=nr([Wn(0),Wn("legacy")]),Yc=ie({pubkey:ce(),lamports:Ut(),postBalance:pe(Ut()),rewardType:pe(ce()),commission:Ne(pe(Ut()))}),iD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),transactions:he(ie({transaction:Qb,meta:pe(zm),version:Ne(Pu)})),rewards:Ne(he(Yc)),blockTime:pe(Ut()),blockHeight:pe(Ut())}))),rD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),rewards:Ne(he(Yc)),blockTime:pe(Ut()),blockHeight:pe(Ut())}))),sD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),transactions:he(ie({transaction:iT,meta:pe(zm),version:Ne(Pu)})),rewards:Ne(he(Yc)),blockTime:pe(Ut()),blockHeight:pe(Ut())}))),oD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),transactions:he(ie({transaction:aT,meta:pe(Yb),version:Ne(Pu)})),rewards:Ne(he(Yc)),blockTime:pe(Ut()),blockHeight:pe(Ut())}))),aD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),transactions:he(ie({transaction:iT,meta:pe(Yb),version:Ne(Pu)})),rewards:Ne(he(Yc)),blockTime:pe(Ut()),blockHeight:pe(Ut())}))),cD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),rewards:Ne(he(Yc)),blockTime:pe(Ut()),blockHeight:pe(Ut())}))),lD=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),transactions:he(ie({transaction:Qb,meta:pe(zm)})),rewards:Ne(he(Yc)),blockTime:pe(Ut())}))),eL=$e(pe(ie({blockhash:ce(),previousBlockhash:ce(),parentSlot:Ut(),signatures:he(ce()),blockTime:pe(Ut())}))),k1=$e(pe(ie({slot:Ut(),meta:pe(zm),blockTime:Ne(pe(Ut())),transaction:Qb,version:Ne(Pu)}))),kp=$e(pe(ie({slot:Ut(),transaction:aT,meta:pe(Yb),blockTime:Ne(pe(Ut())),version:Ne(Pu)}))),uD=ti(ie({blockhash:ce(),lastValidBlockHeight:Ut()})),dD=ti(Gs()),fD=ie({slot:Ut(),numTransactions:Ut(),numSlots:Ut(),samplePeriodSecs:Ut()}),hD=$e(he(fD)),pD=ti(pe(ie({feeCalculator:ie({lamportsPerSignature:Ut()})}))),mD=$e(ce()),gD=$e(ce()),yD=ie({err:Qc,logs:he(ce()),signature:ce()}),wD=ie({result:Dm(yD),subscription:Ut()}),_D={"solana-client":"js/1.0.0-maintenance"};class Z0{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const d={};return async u=>{const{commitment:h,config:m}=Sn(u),p=this._buildArgs([],h,void 0,m),E=QS(p);return d[E]=d[E]??(async()=>{try{const C=await this._rpcRequest("getBlockHeight",p),v=ue(C,$e(Ut()));if("error"in v)throw new Te(v.error,"failed to get block height information");return v.result}finally{delete d[E]}})(),await d[E]}})();let i,r,s,o,a,l;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,i=e.wsEndpoint,r=e.httpHeaders,s=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,l=e.httpAgent),this._rpcEndpoint=rU(t),this._rpcWsEndpoint=i||iU(t),this._rpcClient=_U(t,r,s,o,a,l),this._rpcRequest=bU(this._rpcClient),this._rpcBatchRequest=vU(this._rpcClient),this._rpcWebSocket=new Jj(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgs([t.toBase58()],i,void 0,r),o=await this._rpcRequest("getBalance",s),a=ue(o,ti(Ut()));if("error"in a)throw new Te(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(i=>i.value).catch(i=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+i)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),i=ue(e,$e(pe(Ut())));if("error"in i)throw new Te(i.error,`failed to get block time for slot ${t}`);return i.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ue(t,$e(Ut()));if("error"in e)throw new Te(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ue(t,IU);if("error"in e)throw new Te(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const i=await this._rpcRequest("getSupply",[e]),r=ue(i,TU);if("error"in r)throw new Te(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){const i=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenSupply",i),s=ue(r,ti(Ww));if("error"in s)throw new Te(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const i=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenAccountBalance",i),s=ue(r,ti(Ww));if("error"in s)throw new Te(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,i){const{commitment:r,config:s}=Sn(i);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,r,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),d=ue(l,RU);if("error"in d)throw new Te(d.error,`failed to get token accounts owned by account ${t.toBase58()}`);return d.result}async getParsedTokenAccountsByOwner(t,e,i){let r=[t.toBase58()];"mint"in e?r.push({mint:e.mint.toBase58()}):r.push({programId:e.programId.toBase58()});const s=this._buildArgs(r,i,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=ue(o,NU);if("error"in a)throw new Te(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},i=e.filter||e.commitment?[e]:[],r=await this._rpcRequest("getLargestAccounts",i),s=ue(r,MU);if("error"in s)throw new Te(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const i=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenLargestAccounts",i),s=ue(r,kU);if("error"in s)throw new Te(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgs([t.toBase58()],i,"base64",r),o=await this._rpcRequest("getAccountInfo",s),a=ue(o,ti(pe(Of)));if("error"in a)throw new Te(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgs([t.toBase58()],i,"jsonParsed",r),o=await this._rpcRequest("getAccountInfo",s),a=ue(o,ti(pe(qw)));if("error"in a)throw new Te(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(i){throw new Error("failed to get info about account "+t.toBase58()+": "+i)}}async getMultipleParsedAccounts(t,e){const{commitment:i,config:r}=Sn(e),s=t.map(d=>d.toBase58()),o=this._buildArgs([s],i,"jsonParsed",r),a=await this._rpcRequest("getMultipleAccounts",o),l=ue(a,ti(he(pe(qw))));if("error"in l)throw new Te(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:i,config:r}=Sn(e),s=t.map(d=>d.toBase58()),o=this._buildArgs([s],i,"base64",r),a=await this._rpcRequest("getMultipleAccounts",o),l=ue(a,ti(he(pe(Of))));if("error"in l)throw new Te(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,i){const{commitment:r,config:s}=Sn(e),o=this._buildArgs([t.toBase58()],r,void 0,{...s,epoch:i??s?.epoch}),a=await this._rpcRequest("getStakeActivation",o),l=ue(a,$e(FU));if("error"in l)throw new Te(l.error,`failed to get Stake Activation ${t.toBase58()}`);return l.result}async getProgramAccounts(t,e){const{commitment:i,config:r}=Sn(e),{encoding:s,...o}=r||{},a=this._buildArgs([t.toBase58()],i,s||"base64",{...o,...o.filters?{filters:XS(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),d=he(BU),u=o.withContext===!0?ue(l,ti(d)):ue(l,$e(d));if("error"in u)throw new Te(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgs([t.toBase58()],i,"jsonParsed",r),o=await this._rpcRequest("getProgramAccounts",s),a=ue(o,$e(he(OU)));if("error"in a)throw new Te(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){let i;if(typeof t=="string")i=t;else{const s=t;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);i=s.signature}let r;try{r=gi.decode(i)}catch{throw new Error("signature must be base58 encoded: "+i)}return hn(r.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:i}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,i)=>{t!=null&&(t.aborted?i(t.reason):t.addEventListener("abort",()=>{i(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let i,r,s=!1;const o=new Promise((l,d)=>{try{i=this.onSignature(e,(h,m)=>{i=void 0;const p={context:m,value:h};l({__type:oo.PROCESSED,response:p})},t);const u=new Promise(h=>{i==null?h():r=this._onSubscriptionStateChange(i,m=>{m==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(e);if(s||h==null)return;const{context:m,value:p}=h;if(p!=null)if(p?.err)d(p.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(p.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(p.confirmationStatus==="processed"||p.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:oo.PROCESSED,response:{context:m,value:p}})}})()}catch(u){d(u)}});return{abortConfirmation:()=>{r&&(r(),r=void 0),i!=null&&(this.removeSignatureListener(i),i=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:i,signature:r}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let p=await m();if(!s){for(;p<=i;)if(await pc(1e3),s||(p=await m(),s))return;h({__type:oo.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),d=this.getCancellationPromise(e);let u;try{const h=await Promise.race([d,l,o]);if(h.__type===oo.PROCESSED)u=h.response;else throw new $b(r)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:i,nonceAccountPubkey:r,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(p=>{let E=s,C=null;const v=async()=>{try{const{context:A,value:x}=await this.getNonceAndContext(r,{commitment:t,minContextSlot:i});return C=A.slot,x?.nonce}catch{return E}};(async()=>{if(E=await v(),!a)for(;;){if(s!==E){p({__type:oo.NONCE_INVALID,slotInWhichNonceDidAdvance:C});return}if(await pc(2e3),a||(E=await v(),a))return}})()}),{abortConfirmation:d,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),h=this.getCancellationPromise(e);let m;try{const p=await Promise.race([h,u,l]);if(p.__type===oo.PROCESSED)m=p.response;else{let E;for(;;){const C=await this.getSignatureStatus(o);if(C==null)break;if(C.context.slot<(p.slotInWhichNonceDidAdvance??i)){await pc(400);continue}E=C;break}if(E?.value){const C=t||"finalized",{confirmationStatus:v}=E.value;switch(C){case"processed":case"recent":if(v!=="processed"&&v!=="confirmed"&&v!=="finalized")throw new ql(o);break;case"confirmed":case"single":case"singleGossip":if(v!=="confirmed"&&v!=="finalized")throw new ql(o);break;case"finalized":case"max":case"root":if(v!=="finalized")throw new ql(o);break;default:}m={context:E.context,value:{err:E.value.err}}}else throw new ql(o)}}finally{a=!0,d()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let i;const r=new Promise(l=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{d=this._confirmTransactionInitialTimeout||3e4;break}}i=setTimeout(()=>l({__type:oo.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const l=await Promise.race([o,r]);if(l.__type===oo.PROCESSED)a=l.response;else throw new Hb(e,l.timeoutMs/1e3)}finally{clearTimeout(i),s()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ue(t,$e(he(ZU)));if("error"in e)throw new Te(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),i=await this._rpcRequest("getVoteAccounts",e),r=ue(i,QU);if("error"in r)throw new Te(r.error,"failed to get vote accounts");return r.result}async getSlot(t){const{commitment:e,config:i}=Sn(t),r=this._buildArgs([],e,void 0,i),s=await this._rpcRequest("getSlot",r),o=ue(s,$e(Ut()));if("error"in o)throw new Te(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:i}=Sn(t),r=this._buildArgs([],e,void 0,i),s=await this._rpcRequest("getSlotLeader",r),o=ue(s,$e(ce()));if("error"in o)throw new Te(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const i=[t,e],r=await this._rpcRequest("getSlotLeaders",i),s=ue(r,$e(he($n)));if("error"in s)throw new Te(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:i,value:r}=await this.getSignatureStatuses([t],e);hn(r.length===1);const s=r[0];return{context:i,value:s}}async getSignatureStatuses(t,e){const i=[t];e&&i.push(e);const r=await this._rpcRequest("getSignatureStatuses",i),s=ue(r,JU);if("error"in s)throw new Te(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:i}=Sn(t),r=this._buildArgs([],e,void 0,i),s=await this._rpcRequest("getTransactionCount",r),o=ue(s,$e(Ut()));if("error"in o)throw new Te(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),i=await this._rpcRequest("getInflationGovernor",e),r=ue(i,xU);if("error"in r)throw new Te(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,i){const{commitment:r,config:s}=Sn(i),o=this._buildArgs([t.map(d=>d.toBase58())],r,void 0,{...s,epoch:e??s?.epoch}),a=await this._rpcRequest("getInflationReward",o),l=ue(a,aU);if("error"in l)throw new Te(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ue(t,EU);if("error"in e)throw new Te(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:i}=Sn(t),r=this._buildArgs([],e,void 0,i),s=await this._rpcRequest("getEpochInfo",r),o=ue(s,LU);if("error"in o)throw new Te(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ue(t,CU);if("error"in e)throw new Te(e.error,"failed to get epoch schedule");const i=e.result;return new YI(i.slotsPerEpoch,i.leaderScheduleSlotOffset,i.warmup,i.firstNormalEpoch,i.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ue(t,AU);if("error"in e)throw new Te(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const i=this._buildArgs([t],e),r=await this._rpcRequest("getMinimumBalanceForRentExemption",i),s=ue(r,tD);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:i}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:i,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),i=ue(e,hD);if("error"in i)throw new Te(i.error,"failed to get recent performance samples");return i.result}async getFeeCalculatorForBlockhash(t,e){const i=this._buildArgs([t],e),r=await this._rpcRequest("getFeeCalculatorForBlockhash",i),s=ue(r,pD);if("error"in s)throw new Te(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const i=He(t.serialize()).toString("base64"),r=this._buildArgs([i],e),s=await this._rpcRequest("getFeeForMessage",r),o=ue(s,ti(pe(Ut())));if("error"in o)throw new Te(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),i=e?.length?[e]:[],r=await this._rpcRequest("getRecentPrioritizationFees",i),s=ue(r,SU);if("error"in s)throw new Te(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:i}=Sn(t),r=this._buildArgs([],e,void 0,i),s=await this._rpcRequest("getLatestBlockhash",r),o=ue(s,uD);if("error"in o)throw new Te(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgs([t],i,void 0,r),o=await this._rpcRequest("isBlockhashValid",s),a=ue(o,dD);if("error"in a)throw new Te(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ue(t,$e(mU));if("error"in e)throw new Te(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ue(t,$e(ce()));if("error"in e)throw new Te(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgsAtLeastConfirmed([t],i,void 0,r),o=await this._rpcRequest("getBlock",s);try{switch(r?.transactionDetails){case"accounts":{const a=ue(o,sD);if("error"in a)throw a.error;return a.result}case"none":{const a=ue(o,rD);if("error"in a)throw a.error;return a.result}default:{const a=ue(o,iD);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:d,meta:u,version:h})=>({meta:u,transaction:{...d,message:T1(h,d.message)},version:h}))}:null}}}catch(a){throw new Te(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",r),o=await this._rpcRequest("getBlock",s);try{switch(r?.transactionDetails){case"accounts":{const a=ue(o,aD);if("error"in a)throw a.error;return a.result}case"none":{const a=ue(o,cD);if("error"in a)throw a.error;return a.result}default:{const a=ue(o,oD);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Te(a,"failed to get block")}}async getBlockProduction(t){let e,i;if(typeof t=="string")i=t;else if(t){const{commitment:a,...l}=t;i=a,e=l}const r=this._buildArgs([],i,"base64",e),s=await this._rpcRequest("getBlockProduction",r),o=ue(s,wU);if("error"in o)throw new Te(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgsAtLeastConfirmed([t],i,void 0,r),o=await this._rpcRequest("getTransaction",s),a=ue(o,k1);if("error"in a)throw new Te(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:T1(l.version,l.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:i,config:r}=Sn(e),s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",r),o=await this._rpcRequest("getTransaction",s),a=ue(o,kp);if("error"in a)throw new Te(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:i,config:r}=Sn(e),s=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],i,"jsonParsed",r)}));return(await this._rpcBatchRequest(s)).map(l=>{const d=ue(l,kp);if("error"in d)throw new Te(d.error,"failed to get transactions");return d.result})}async getTransactions(t,e){const{commitment:i,config:r}=Sn(e),s=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],i,void 0,r)}));return(await this._rpcBatchRequest(s)).map(l=>{const d=ue(l,k1);if("error"in d)throw new Te(d.error,"failed to get transactions");const u=d.result;return u&&{...u,transaction:{...u.transaction,message:T1(u.version,u.transaction.message)}}})}async getConfirmedBlock(t,e){const i=this._buildArgsAtLeastConfirmed([t],e),r=await this._rpcRequest("getBlock",i),s=ue(r,lD);if("error"in s)throw new Te(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:d})=>{const u=new ps(l.message);return{meta:d,transaction:{...l,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:d})=>({meta:d,transaction:Ke.populate(l.message,l.signatures)}))}}async getBlocks(t,e,i){const r=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],i),s=await this._rpcRequest("getBlocks",r),o=ue(s,$e(he(Ut())));if("error"in o)throw new Te(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const i=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",i),s=ue(r,eL);if("error"in s)throw new Te(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const i=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",i),s=ue(r,eL);if("error"in s)throw new Te(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const i=this._buildArgsAtLeastConfirmed([t],e),r=await this._rpcRequest("getTransaction",i),s=ue(r,k1);if("error"in s)throw new Te(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new ps(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Ke.populate(a,l)}}async getParsedConfirmedTransaction(t,e){const i=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),r=await this._rpcRequest("getTransaction",i),s=ue(r,kp);if("error"in s)throw new Te(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const i=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(i)).map(o=>{const a=ue(o,kp);if("error"in a)throw new Te(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,i){let r={},s=await this.getFirstAvailableBlock();for(;!("until"in r)&&(e--,!(e<=0||e<s));)try{const l=await this.getConfirmedBlockSignatures(e,"finalized");l.signatures.length>0&&(r.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in r)&&(i++,!(i>o));)try{const l=await this.getConfirmedBlockSignatures(i);l.signatures.length>0&&(r.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(t,r)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(t,e,i){const r=this._buildArgsAtLeastConfirmed([t.toBase58()],i,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",r),o=ue(s,jU);if("error"in o)throw new Te(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,i){const r=this._buildArgsAtLeastConfirmed([t.toBase58()],i,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",r),o=ue(s,UU);if("error"in o)throw new Te(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:i,value:r}=await this.getAccountInfoAndContext(t,e);let s=null;return r!==null&&(s=new Gw({key:t,state:Gw.deserialize(r.data)})),{context:i,value:s}}async getNonceAndContext(t,e){const{context:i,value:r}=await this.getAccountInfoAndContext(t,e);let s=null;return r!==null&&(s=Um.fromAccountData(r.data)),{context:i,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(i=>i.value).catch(i=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+i)})}async requestAirdrop(t,e){const i=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),r=ue(i,mD);if("error"in r)throw new Te(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await pc(100);const i=Date.now()-this._blockhashInfo.lastFetch>=JI;if(this._blockhashInfo.latestBlockhash!==null&&!i)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,i=e?e.blockhash:null;for(let r=0;r<50;r++){const s=await this.getLatestBlockhash("finalized");if(i!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await pc(KI/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:i}=Sn(t),r=this._buildArgs([],e,"base64",i),s=await this._rpcRequest("getStakeMinimumDelegation",r),o=ue(s,ti(Ut()));if("error"in o)throw new Te(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,i){if("message"in t){const C=t.serialize(),v=Oe.from(C).toString("base64");if(Array.isArray(e)||i!==void 0)throw new Error("Invalid arguments");const A=e||{};A.encoding="base64","commitment"in A||(A.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(A.innerInstructions=e.innerInstructions);const x=[v,A],P=await this._rpcRequest("simulateTransaction",x),W=ue(P,JS);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let r;if(t instanceof Ke){let E=t;r=new Ke,r.feePayer=E.feePayer,r.instructions=t.instructions,r.nonceInfo=E.nonceInfo,r.signatures=E.signatures}else r=Ke.populate(t),r._message=r._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(r.nonceInfo&&s)r.sign(...s);else{let E=this._disableBlockhashCaching;for(;;){const C=await this._blockhashWithExpiryBlockHeight(E);if(r.lastValidBlockHeight=C.lastValidBlockHeight,r.recentBlockhash=C.blockhash,!s)break;if(r.sign(...s),!r.signature)throw new Error("!signature");const v=r.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v)){this._blockhashInfo.simulatedSignatures.push(v);break}else E=!0}}const o=r._compile(),a=o.serialize(),d=r._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(i){const E=(Array.isArray(i)?i:o.nonProgramIds()).map(C=>C.toBase58());u.accounts={encoding:"base64",addresses:E}}s&&(u.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(u.innerInstructions=e.innerInstructions);const h=[d,u],m=await this._rpcRequest("simulateTransaction",h),p=ue(m,JS);if("error"in p){let E;if("data"in p.error&&(E=p.error.data.logs,E&&Array.isArray(E))){const C=`
    `,v=C+E.join(C);console.error(p.error.message,v)}throw new Pf({action:"simulate",signature:"",transactionMessage:p.error.message,logs:E})}return p.result}async sendTransaction(t,e,i){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const r=e;if(t.nonceInfo)t.sign(...r);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...r),!t.signature)throw new Error("!signature");const l=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=t.serialize();return await this.sendRawTransaction(s,i)}async sendRawTransaction(t,e){const i=He(t).toString("base64");return await this.sendEncodedTransaction(i,e)}async sendEncodedTransaction(t,e){const i={encoding:"base64"},r=e&&e.skipPreflight,s=r===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(i.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(i.minContextSlot=e.minContextSlot),r&&(i.skipPreflight=r),s&&(i.preflightCommitment=s);const o=[t,i],a=await this._rpcRequest("sendTransaction",o),l=ue(a,gD);if("error"in l){let d;throw"data"in l.error&&(d=l.error.data.logs),new Pf({action:r?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:d})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,i])=>{this._setSubscription(e,{...i,state:"pending"})})}_setSubscription(t,e){const i=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,i!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(s=>{try{s(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const i=this._subscriptionHashByClientSubscriptionId[t];if(i==null)return()=>{};const r=this._subscriptionStateChangeCallbacksByHash[i]||=new Set;return r.add(e),()=>{r.delete(e),r.size===0&&delete this._subscriptionStateChangeCallbacksByHash[i]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(i){i instanceof Error&&console.log(`Error when closing socket connection: ${i.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async i=>{const r=this._subscriptionsByHash[i];if(r!==void 0)switch(r.state){case"pending":case"unsubscribed":if(r.callbacks.size===0){delete this._subscriptionsByHash[i],r.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=r;try{this._setSubscription(i,{...r,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(i,{...r,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=r.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!e())return;this._setSubscription(i,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":r.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=r;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(i,{...r,state:"unsubscribing"}),this._setSubscription(i,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(i,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(i,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const i=this._subscriptionCallbacksByServerSubscriptionId[t];i!==void 0&&i.forEach(r=>{try{r(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:i}=ue(t,DU);this._handleServerNotification(i,[e.value,e.context])}_makeSubscription(t,e){const i=this._nextClientSubscriptionId++,r=QS([t.method,e]),s=this._subscriptionsByHash[r];return s===void 0?this._subscriptionsByHash[r]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[i]=r,this._subscriptionDisposeFunctionsByClientSubscriptionId[i]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[i],delete this._subscriptionHashByClientSubscriptionId[i];const o=this._subscriptionsByHash[r];hn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${i}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),i}onAccountChange(t,e,i){const{commitment:r,config:s}=Sn(i),o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:i}=ue(t,GU);this._handleServerNotification(i,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,i,r){const{commitment:s,config:o}=Sn(i),a=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",o||(r?{filters:XS(r)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,i){const r=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],i||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:i}=ue(t,wD);this._handleServerNotification(i,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:i}=ue(t,VU);this._handleServerNotification(i,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:i}=ue(t,$U);this._handleServerNotification(i,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const i=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];i?await i():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,i,r){const s=e||this._commitment;if(s||i||r){let o={};i&&(o.encoding=i),s&&(o.commitment=s),r&&(o=Object.assign(o,r)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,i,r){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,i,r)}_wsOnSignatureNotification(t){const{result:e,subscription:i}=ue(t,HU);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(i),this._handleServerNotification(i,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,i){const r=this._buildArgs([t],i||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return s}onSignatureWithOptions(t,e,i){const{commitment:r,...s}={...i,commitment:i&&i.commitment||this._commitment||"finalized"},o=this._buildArgs([t],r,void 0,s),a=this._makeSubscription({callback:(l,d)=>{e(l,d);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:i}=ue(t,KU);this._handleServerNotification(i,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class nu{constructor(t){this._keypair=void 0,this._keypair=t??$S()}static generate(){return new nu($S())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const i=t.slice(32,64);if(!e||!e.skipValidation){const r=t.slice(0,32),s=H0(r);for(let o=0;o<32;o++)if(i[o]!==s[o])throw new Error("provided secretKey is invalid")}return new nu({publicKey:i,secretKey:t})}static fromSeed(t){const e=H0(t),i=new Uint8Array(64);return i.set(t),i.set(e,32),new nu({publicKey:e,secretKey:i})}get publicKey(){return new Zt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const mo=Object.freeze({CreateLookupTable:{index:0,layout:_t.struct([_t.u32("instruction"),bu("recentSlot"),_t.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:_t.struct([_t.u32("instruction")])},ExtendLookupTable:{index:2,layout:_t.struct([_t.u32("instruction"),bu(),_t.seq(tn(),_t.offset(_t.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:_t.struct([_t.u32("instruction")])},CloseLookupTable:{index:4,layout:_t.struct([_t.u32("instruction")])}});class bD{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const i=_t.u32("instruction").decode(t.data);let r;for(const[s,o]of Object.entries(mo))if(o.index==i){r=s;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=wn(mo.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=wn(mo.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(i=>new Zt(i))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Xb.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Xb{constructor(){}static createLookupTable(t){const[e,i]=Zt.findProgramAddressSync([t.authority.toBuffer(),SI().encode(t.recentSlot)],this.programId),r=mo.CreateLookupTable,s=rn(r,{recentSlot:BigInt(t.recentSlot),bumpSeed:i}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Un.programId,isSigner:!1,isWritable:!1}];return[new pn({programId:this.programId,keys:o,data:s}),e]}static freezeLookupTable(t){const e=mo.FreezeLookupTable,i=rn(e),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new pn({programId:this.programId,keys:r,data:i})}static extendLookupTable(t){const e=mo.ExtendLookupTable,i=rn(e,{addresses:t.addresses.map(s=>s.toBytes())}),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&r.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Un.programId,isSigner:!1,isWritable:!1}),new pn({programId:this.programId,keys:r,data:i})}static deactivateLookupTable(t){const e=mo.DeactivateLookupTable,i=rn(e),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new pn({programId:this.programId,keys:r,data:i})}static closeLookupTable(t){const e=mo.CloseLookupTable,i=rn(e),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new pn({programId:this.programId,keys:r,data:i})}}Xb.programId=new Zt("AddressLookupTab1e1111111111111111111111111");class vD{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const i=_t.u8("instruction").decode(t.data);let r;for(const[s,o]of Object.entries(Os))if(o.index==i){r=s;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:i}=wn(Os.RequestUnits,t.data);return{units:e,additionalFee:i}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=wn(Os.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=wn(Os.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=wn(Os.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Jb.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Os=Object.freeze({RequestUnits:{index:0,layout:_t.struct([_t.u8("instruction"),_t.u32("units"),_t.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:_t.struct([_t.u8("instruction"),_t.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:_t.struct([_t.u8("instruction"),_t.u32("units")])},SetComputeUnitPrice:{index:3,layout:_t.struct([_t.u8("instruction"),bu("microLamports")])}});class Jb{constructor(){}static requestUnits(t){const e=Os.RequestUnits,i=rn(e,t);return new pn({keys:[],programId:this.programId,data:i})}static requestHeapFrame(t){const e=Os.RequestHeapFrame,i=rn(e,t);return new pn({keys:[],programId:this.programId,data:i})}static setComputeUnitLimit(t){const e=Os.SetComputeUnitLimit,i=rn(e,t);return new pn({keys:[],programId:this.programId,data:i})}static setComputeUnitPrice(t){const e=Os.SetComputeUnitPrice,i=rn(e,{microLamports:BigInt(t.microLamports)});return new pn({keys:[],programId:this.programId,data:i})}}Jb.programId=new Zt("ComputeBudget111111111111111111111111111111");const nL=64,iL=32,rL=64,sL=_t.struct([_t.u8("numSignatures"),_t.u8("padding"),_t.u16("signatureOffset"),_t.u16("signatureInstructionIndex"),_t.u16("publicKeyOffset"),_t.u16("publicKeyInstructionIndex"),_t.u16("messageDataOffset"),_t.u16("messageDataSize"),_t.u16("messageInstructionIndex")]);class Gm{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:i,signature:r,instructionIndex:s}=t;hn(e.length===iL,`Public Key must be ${iL} bytes but received ${e.length} bytes`),hn(r.length===rL,`Signature must be ${rL} bytes but received ${r.length} bytes`);const o=sL.span,a=o+e.length,l=a+r.length,d=1,u=Oe.alloc(l+i.length),h=s??65535;return sL.encode({numSignatures:d,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:l,messageDataSize:i.length,messageInstructionIndex:h},u),u.fill(e,o),u.fill(r,a),u.fill(i,l),new pn({keys:[],programId:Gm.programId,data:u})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:i,instructionIndex:r}=t;hn(e.length===nL,`Private key must be ${nL} bytes but received ${e.length} bytes`);try{const s=nu.fromSecretKey(e),o=s.publicKey.toBytes(),a=Vb(i,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:i,signature:a,instructionIndex:r})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Gm.programId=new Zt("Ed25519SigVerify111111111111111111111111111");const xD=(n,t)=>{const e=Wb.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};Wb.utils.isValidPrivateKey;const ED=Wb.getPublicKey,oL=32,R1=20,aL=64,SD=11,N1=_t.struct([_t.u8("numSignatures"),_t.u16("signatureOffset"),_t.u8("signatureInstructionIndex"),_t.u16("ethAddressOffset"),_t.u8("ethAddressInstructionIndex"),_t.u16("messageDataOffset"),_t.u16("messageDataSize"),_t.u8("messageInstructionIndex"),_t.blob(20,"ethAddress"),_t.blob(64,"signature"),_t.u8("recoveryId")]);class iu{constructor(){}static publicKeyToEthAddress(t){hn(t.length===aL,`Public key must be ${aL} bytes but received ${t.length} bytes`);try{return Oe.from(WS(He(t))).slice(-R1)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:i,signature:r,recoveryId:s,instructionIndex:o}=t;return iu.createInstructionWithEthAddress({ethAddress:iu.publicKeyToEthAddress(e),message:i,signature:r,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:i,signature:r,recoveryId:s,instructionIndex:o=0}=t;let a;typeof e=="string"?e.startsWith("0x")?a=Oe.from(e.substr(2),"hex"):a=Oe.from(e,"hex"):a=e,hn(a.length===R1,`Address must be ${R1} bytes but received ${a.length} bytes`);const l=1+SD,d=l,u=l+a.length,h=u+r.length+1,m=1,p=Oe.alloc(N1.span+i.length);return N1.encode({numSignatures:m,signatureOffset:u,signatureInstructionIndex:o,ethAddressOffset:d,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:i.length,messageInstructionIndex:o,signature:He(r),ethAddress:He(a),recoveryId:s},p),p.fill(He(i),N1.span),new pn({keys:[],programId:iu.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:i,instructionIndex:r}=t;hn(e.length===oL,`Private key must be ${oL} bytes but received ${e.length} bytes`);try{const s=He(e),o=ED(s,!1).slice(1),a=Oe.from(WS(He(i))),[l,d]=xD(a,s);return this.createInstructionWithPublicKey({publicKey:o,message:i,signature:l,recoveryId:d,instructionIndex:r})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}iu.programId=new Zt("KeccakSecp256k11111111111111111111111111111");var lT;const uT=new Zt("StakeConfig11111111111111111111111111111111");class dT{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class nh{constructor(t,e,i){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=i}}lT=nh;nh.default=new lT(0,0,Zt.default);class LD{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const i=_t.u32("instruction").decode(t.data);let r;for(const[s,o]of Object.entries(Ei))if(o.index==i){r=s;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:i}=wn(Ei.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new dT(new Zt(e.staker),new Zt(e.withdrawer)),lockup:new nh(i.unixTimestamp,i.epoch,new Zt(i.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),wn(Ei.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:i}=wn(Ei.Authorize,t.data),r={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Zt(e),stakeAuthorizationType:{index:i}};return t.keys.length>3&&(r.custodianPubkey=t.keys[3].pubkey),r}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:i,authoritySeed:r,authorityOwner:s}=wn(Ei.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:r,authorityOwner:new Zt(s),newAuthorizedPubkey:new Zt(e),stakeAuthorizationType:{index:i}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=wn(Ei.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),wn(Ei.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=wn(Ei.Withdraw,t.data),i={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(i.custodianPubkey=t.keys[5].pubkey),i}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),wn(Ei.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Wm.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ei=Object.freeze({Initialize:{index:0,layout:_t.struct([_t.u32("instruction"),kj(),Rj()])},Authorize:{index:1,layout:_t.struct([_t.u32("instruction"),tn("newAuthorized"),_t.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:_t.struct([_t.u32("instruction")])},Split:{index:3,layout:_t.struct([_t.u32("instruction"),_t.ns64("lamports")])},Withdraw:{index:4,layout:_t.struct([_t.u32("instruction"),_t.ns64("lamports")])},Deactivate:{index:5,layout:_t.struct([_t.u32("instruction")])},Merge:{index:7,layout:_t.struct([_t.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:_t.struct([_t.u32("instruction"),tn("newAuthorized"),_t.u32("stakeAuthorizationType"),bc("authoritySeed"),tn("authorityOwner")])}}),CD=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Wm{constructor(){}static initialize(t){const{stakePubkey:e,authorized:i,lockup:r}=t,s=r||nh.default,o=Ei.Initialize,a=rn(o,{authorized:{staker:He(i.staker.toBuffer()),withdrawer:He(i.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:He(s.custodian.toBuffer())}}),l={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:_u,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new pn(l)}static createAccountWithSeed(t){const e=new Ke;e.add(Un.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:i,authorized:r,lockup:s}=t;return e.add(this.initialize({stakePubkey:i,authorized:r,lockup:s}))}static createAccount(t){const e=new Ke;e.add(Un.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:i,authorized:r,lockup:s}=t;return e.add(this.initialize({stakePubkey:i,authorized:r,lockup:s}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:i,votePubkey:r}=t,s=Ei.Delegate,o=rn(s);return new Ke().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:s0,isSigner:!1,isWritable:!1},{pubkey:uT,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:i,newAuthorizedPubkey:r,stakeAuthorizationType:s,custodianPubkey:o}=t,a=Ei.Authorize,l=rn(a,{newAuthorized:He(r.toBuffer()),stakeAuthorizationType:s.index}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Rs,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ke().add({keys:d,programId:this.programId,data:l})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:i,authoritySeed:r,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:l}=t,d=Ei.AuthorizeWithSeed,u=rn(d,{newAuthorized:He(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:r,authorityOwner:He(s.toBuffer())}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:Rs,isSigner:!1,isWritable:!1}];return l&&h.push({pubkey:l,isSigner:!0,isWritable:!1}),new Ke().add({keys:h,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:i,splitStakePubkey:r,lamports:s}=t,o=Ei.Split,a=rn(o,{lamports:s});return new pn({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t,e){const i=new Ke;return i.add(Un.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),i.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:i,authorizedPubkey:r,splitStakePubkey:s,basePubkey:o,seed:a,lamports:l}=t,d=new Ke;return d.add(Un.allocate({accountPubkey:s,basePubkey:o,seed:a,space:this.space,programId:this.programId})),e&&e>0&&d.add(Un.transfer({fromPubkey:t.authorizedPubkey,toPubkey:s,lamports:e})),d.add(this.splitInstruction({stakePubkey:i,authorizedPubkey:r,splitStakePubkey:s,lamports:l}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:i,authorizedPubkey:r}=t,s=Ei.Merge,o=rn(s);return new Ke().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:s0,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:i,toPubkey:r,lamports:s,custodianPubkey:o}=t,a=Ei.Withdraw,l=rn(a,{lamports:s}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:s0,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ke().add({keys:d,programId:this.programId,data:l})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:i}=t,r=Ei.Deactivate,s=rn(r);return new Ke().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Wm.programId=new Zt("Stake11111111111111111111111111111111111111");Wm.space=200;class fT{constructor(t,e,i,r){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=i,this.commission=r}}class AD{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const i=_t.u32("instruction").decode(t.data);let r;for(const[s,o]of Object.entries(Fs))if(o.index==i){r=s;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=wn(Fs.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new fT(new Zt(e.nodePubkey),new Zt(e.authorizedVoter),new Zt(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:i}=wn(Fs.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Zt(e),voteAuthorizationType:{index:i}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:i,newAuthorized:r,voteAuthorizationType:s}}=wn(Fs.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Zt(e),currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:new Zt(r),voteAuthorizationType:{index:s},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=wn(Fs.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ou.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Fs=Object.freeze({InitializeAccount:{index:0,layout:_t.struct([_t.u32("instruction"),Nj()])},Authorize:{index:1,layout:_t.struct([_t.u32("instruction"),tn("newAuthorized"),_t.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:_t.struct([_t.u32("instruction"),_t.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:_t.struct([_t.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:_t.struct([_t.u32("instruction"),Mj()])}}),ID=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Ou{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:i,voteInit:r}=t,s=Fs.InitializeAccount,o=rn(s,{voteInit:{nodePubkey:He(r.nodePubkey.toBuffer()),authorizedVoter:He(r.authorizedVoter.toBuffer()),authorizedWithdrawer:He(r.authorizedWithdrawer.toBuffer()),commission:r.commission}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:_u,isSigner:!1,isWritable:!1},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new pn(a)}static createAccount(t){const e=new Ke;return e.add(Un.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:i,newAuthorizedPubkey:r,voteAuthorizationType:s}=t,o=Fs.Authorize,a=rn(o,{newAuthorized:He(r.toBuffer()),voteAuthorizationType:s.index}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return new Ke().add({keys:l,programId:this.programId,data:a})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:i,currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=t,l=Fs.AuthorizeWithSeed,d=rn(l,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:He(i.toBuffer()),currentAuthorityDerivedKeySeed:r,newAuthorized:He(s.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:Rs,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Ke().add({keys:u,programId:this.programId,data:d})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:i,lamports:r,toPubkey:s}=t,o=Fs.Withdraw,a=rn(o,{lamports:r}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}];return new Ke().add({keys:l,programId:this.programId,data:a})}static safeWithdraw(t,e,i){if(t.lamports>e-i)throw new Error("Withdraw will leave vote account with insufficient funds.");return Ou.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:i,nodePubkey:r}=t,s=Fs.UpdateValidatorIdentity,o=rn(s),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return new Ke().add({keys:a,programId:this.programId,data:o})}}Ou.programId=new Zt("Vote111111111111111111111111111111111111111");Ou.space=3762;const hT=new Zt("Va1idator1nfo111111111111111111111111111111"),TD=ie({name:ce(),website:Ne(ce()),details:Ne(ce()),iconUrl:Ne(ce()),keybaseUsername:Ne(ce())});class tv{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(wr(e)!==2)return null;const r=[];for(let s=0;s<2;s++){const o=new Zt(_r(e,0,Us)),a=Ps(e)===1;r.push({publicKey:o,isSigner:a})}if(r[0].publicKey.equals(hT)&&r[1].isSigner){const s=bc().decode(Oe.from(e)),o=JSON.parse(s);return LI(o,TD),new tv(r[1].publicKey,o)}return null}}const kD=new Zt("Vote111111111111111111111111111111111111111"),RD=_t.struct([tn("nodePubkey"),tn("authorizedWithdrawer"),_t.u8("commission"),_t.nu64(),_t.seq(_t.struct([_t.nu64("slot"),_t.u32("confirmationCount")]),_t.offset(_t.u32(),-8),"votes"),_t.u8("rootSlotValid"),_t.nu64("rootSlot"),_t.nu64(),_t.seq(_t.struct([_t.nu64("epoch"),tn("authorizedVoter")]),_t.offset(_t.u32(),-8),"authorizedVoters"),_t.struct([_t.seq(_t.struct([tn("authorizedPubkey"),_t.nu64("epochOfLastAuthorizedSwitch"),_t.nu64("targetEpoch")]),32,"buf"),_t.nu64("idx"),_t.u8("isEmpty")],"priorVoters"),_t.nu64(),_t.seq(_t.struct([_t.nu64("epoch"),_t.nu64("credits"),_t.nu64("prevCredits")]),_t.offset(_t.u32(),-8),"epochCredits"),_t.struct([_t.nu64("slot"),_t.nu64("timestamp")],"lastTimestamp")]);class ev{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const i=RD.decode(He(t),4);let r=i.rootSlot;return i.rootSlotValid||(r=null),new ev({nodePubkey:new Zt(i.nodePubkey),authorizedWithdrawer:new Zt(i.authorizedWithdrawer),commission:i.commission,votes:i.votes,rootSlot:r,authorizedVoters:i.authorizedVoters.map(ND),priorVoters:MD(i.priorVoters),epochCredits:i.epochCredits,lastTimestamp:i.lastTimestamp})}}function ND({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new Zt(n)}}function cL({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new Zt(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function MD({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(cL),...n.slice(0,t).map(cL)]}const lL={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function pT(n,t){const e=t===!1?"http":"https";if(!n)return lL[e].devnet;const i=lL[e][n];if(!i)throw new Error(`Unknown ${e} cluster: ${n}`);return i}async function BD(n,t,e,i){let r,s;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(r=e,s=i):s=e;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await n.sendRawTransaction(t,o),l=s&&s.commitment,u=(await(r?n.confirmTransaction(r,l):n.confirmTransaction(a,l))).value;if(u.err)throw a!=null?new Pf({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(u)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(u)})`);return a}const Ma=1e9,PD=Object.freeze(Object.defineProperty({__proto__:null,Account:Aj,AddressLookupTableAccount:Gw,AddressLookupTableInstruction:bD,AddressLookupTableProgram:Xb,Authorized:dT,BLOCKHASH_CACHE_TIMEOUT_MS:JI,BPF_LOADER_DEPRECATED_PROGRAM_ID:Ij,BPF_LOADER_PROGRAM_ID:$j,BpfLoader:Hj,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Os,ComputeBudgetInstruction:vD,ComputeBudgetProgram:Jb,Connection:Z0,Ed25519Program:Gm,Enum:Lj,EpochSchedule:YI,FeeCalculatorLayout:ZI,Keypair:nu,LAMPORTS_PER_SOL:Ma,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:mo,Loader:Dc,Lockup:nh,MAX_SEED_LENGTH:qI,Message:ps,MessageAccountKeys:Bf,MessageV0:Uc,NONCE_ACCOUNT_LENGTH:zw,NonceAccount:Um,PACKET_DATA_SIZE:Ta,PUBLIC_KEY_LENGTH:Us,PublicKey:Zt,SIGNATURE_LENGTH_IN_BYTES:Mf,SOLANA_SCHEMA:uf,STAKE_CONFIG_ID:uT,STAKE_INSTRUCTION_LAYOUTS:Ei,SYSTEM_INSTRUCTION_LAYOUTS:Cn,SYSVAR_CLOCK_PUBKEY:Rs,SYSVAR_EPOCH_SCHEDULE_PUBKEY:jj,SYSVAR_INSTRUCTIONS_PUBKEY:Uj,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:r0,SYSVAR_RENT_PUBKEY:_u,SYSVAR_REWARDS_PUBKEY:Dj,SYSVAR_SLOT_HASHES_PUBKEY:zj,SYSVAR_SLOT_HISTORY_PUBKEY:Gj,SYSVAR_STAKE_HISTORY_PUBKEY:s0,Secp256k1Program:iu,SendTransactionError:Pf,SolanaJSONRPCError:Te,SolanaJSONRPCErrorCode:Wj,StakeAuthorizationLayout:CD,StakeInstruction:LD,StakeProgram:Wm,Struct:qb,SystemInstruction:Vj,SystemProgram:Un,Transaction:Ke,TransactionExpiredBlockheightExceededError:$b,TransactionExpiredNonceInvalidError:ql,TransactionExpiredTimeoutError:Hb,TransactionInstruction:pn,TransactionMessage:Kb,TransactionStatus:oo,VALIDATOR_INFO_KEY:hT,VERSION_PREFIX_MASK:Om,VOTE_PROGRAM_ID:kD,ValidatorInfo:tv,VersionedMessage:jm,VersionedTransaction:wu,VoteAccount:ev,VoteAuthorizationLayout:ID,VoteInit:fT,VoteInstruction:AD,VoteProgram:Ou,clusterApiUrl:pT,sendAndConfirmRawTransaction:BD,sendAndConfirmTransaction:Dw},Symbol.toStringTag,{value:"Module"}));var M1={exports:{}},uL;function OD(){return uL||(uL=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(l,d,u){this.fn=l,this.context=d,this.once=u||!1}function s(l,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,h||l,m),E=e?e+d:d;return l._events[E]?l._events[E].fn?l._events[E]=[l._events[E],p]:l._events[E].push(p):(l._events[E]=p,l._eventsCount++),l}function o(l,d){--l._eventsCount===0?l._events=new i:delete l._events[d]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},a.prototype.listeners=function(d){var u=e?e+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,E=new Array(p);m<p;m++)E[m]=h[m].fn;return E},a.prototype.listenerCount=function(d){var u=e?e+d:d,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(d,u,h,m,p,E){var C=e?e+d:d;if(!this._events[C])return!1;var v=this._events[C],A=arguments.length,x,P;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,m),!0;case 5:return v.fn.call(v.context,u,h,m,p),!0;case 6:return v.fn.call(v.context,u,h,m,p,E),!0}for(P=1,x=new Array(A-1);P<A;P++)x[P-1]=arguments[P];v.fn.apply(v.context,x)}else{var W=v.length,K;for(P=0;P<W;P++)switch(v[P].once&&this.removeListener(d,v[P].fn,void 0,!0),A){case 1:v[P].fn.call(v[P].context);break;case 2:v[P].fn.call(v[P].context,u);break;case 3:v[P].fn.call(v[P].context,u,h);break;case 4:v[P].fn.call(v[P].context,u,h,m);break;default:if(!x)for(K=1,x=new Array(A-1);K<A;K++)x[K-1]=arguments[K];v[P].fn.apply(v[P].context,x)}}return!0},a.prototype.on=function(d,u,h){return s(this,d,u,h,!1)},a.prototype.once=function(d,u,h){return s(this,d,u,h,!0)},a.prototype.removeListener=function(d,u,h,m){var p=e?e+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var E=this._events[p];if(E.fn)E.fn===u&&(!m||E.once)&&(!h||E.context===h)&&o(this,p);else{for(var C=0,v=[],A=E.length;C<A;C++)(E[C].fn!==u||m&&!E[C].once||h&&E[C].context!==h)&&v.push(E[C]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},a.prototype.removeAllListeners=function(d){var u;return d?(u=e?e+d:d,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(M1)),M1.exports}var FD=OD();const jD=Po(FD);class Si extends Error{constructor(t,e){super(t),this.error=e}}class zc extends Si{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class UD extends Si{constructor(){super(...arguments),this.name="WalletLoadError"}}class $l extends Si{constructor(){super(...arguments),this.name="WalletConfigError"}}class Gc extends Si{constructor(){super(...arguments),this.name="WalletConnectionError"}}class nv extends Si{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class iv extends Si{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class vc extends Si{constructor(){super(...arguments),this.name="WalletAccountError"}}class vu extends Si{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class ei extends Si{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class vo extends Si{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class ls extends Si{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Vm extends Si{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class dL extends Si{constructor(){super(...arguments),this.name="WalletSignInError"}}var Qe;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(Qe||(Qe={}));class mT extends jD{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,i={}){const r=this.publicKey;if(!r)throw new ei;return t.feePayer=t.feePayer||r,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:i.preflightCommitment,minContextSlot:i.minContextSlot})).blockhash,t}}function gT(n){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(n())for(const s of t)s()}const i=setInterval(e,1e3);t.push(()=>clearInterval(i)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function $w(){if(!navigator)return!1;const n=navigator.userAgent.toLowerCase(),t=n.includes("iphone")||n.includes("ipad"),e=n.includes("safari");return t&&e}function xo(n){return"version"in n}class DD extends mT{async sendTransaction(t,e,i={}){let r=!0;try{if(xo(t)){if(!this.supportedTransactionVersions)throw new vo("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new vo(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const s=t.serialize();return await e.sendRawTransaction(s,i)}catch(s){throw s instanceof ls?(r=!1,s):new vo(s?.message,s)}}else try{const{signers:s,...o}=i;t=await this.prepareTransaction(t,e,o),s?.length&&t.partialSign(...s),t=await this.signTransaction(t);const a=t.serialize();return await e.sendRawTransaction(a,o)}catch(s){throw s instanceof ls?(r=!1,s):new vo(s?.message,s)}}catch(s){throw r&&this.emit("error",s),s}}async signAllTransactions(t){for(const i of t)if(xo(i)){if(!this.supportedTransactionVersions)throw new ls("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(i.version))throw new ls(`Signing transaction version ${i.version} isn't supported by this wallet`)}const e=[];for(const i of t)e.push(await this.signTransaction(i));return e}}class rv extends DD{}class zD extends rv{}const er="solana:signAndSendTransaction",Mc="solana:signIn",go="solana:signMessage",jn="solana:signTransaction",qm="standard:connect",Q0="standard:disconnect",$m="standard:events";function GD(n){return qm in n.features&&$m in n.features&&(er in n.features||jn in n.features)}var Hw;(function(n){n.Mainnet="mainnet-beta",n.Testnet="testnet",n.Devnet="devnet"})(Hw||(Hw={}));const yT=rt.createContext({});function Hm(){return rt.useContext(yT)}const WD=({children:n,endpoint:t,config:e={commitment:"confirmed"}})=>{const i=rt.useMemo(()=>new Z0(t,e),[t,e]);return Mt.createElement(yT.Provider,{value:{connection:i}},n)};class fL extends Si{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const VD=[],Km={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){os("call","select")},connect(){return Promise.reject(os("call","connect"))},disconnect(){return Promise.reject(os("call","disconnect"))},sendTransaction(){return Promise.reject(os("call","sendTransaction"))},signTransaction(){return Promise.reject(os("call","signTransaction"))},signAllTransactions(){return Promise.reject(os("call","signAllTransactions"))},signMessage(){return Promise.reject(os("call","signMessage"))},signIn(){return Promise.reject(os("call","signIn"))}};Object.defineProperty(Km,"wallets",{get(){return os("read","wallets"),VD}});Object.defineProperty(Km,"wallet",{get(){return os("read","wallet"),null}});Object.defineProperty(Km,"publicKey",{get(){return os("read","publicKey"),null}});function os(n,t){const e=new Error(`You have tried to ${n} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(e),e}const wT=rt.createContext(Km);function Nr(){return rt.useContext(wT)}function qD(n,t){const e=rt.useState(()=>{try{const s=localStorage.getItem(n);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return t}),i=e[0],r=rt.useRef(!0);return rt.useEffect(()=>{if(r.current){r.current=!1;return}try{i===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(i))}catch(s){typeof window<"u"&&console.error(s)}},[i,n]),e}var Ml={},B1,hL;function $D(){return hL||(hL=1,B1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),B1}var P1={},ua={},pL;function Xc(){if(pL)return ua;pL=1;let n;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ua.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},ua.getSymbolTotalCodewords=function(i){return t[i]},ua.getBCHDigit=function(e){let i=0;for(;e!==0;)i++,e>>>=1;return i},ua.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');n=i},ua.isKanjiModeEnabled=function(){return typeof n<"u"},ua.toSJIS=function(i){return n(i)},ua}var O1={},mL;function sv(){return mL||(mL=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+e)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,r){if(n.isValid(i))return i;try{return t(i)}catch{return r}}})(O1)),O1}var F1,gL;function HD(){if(gL)return F1;gL=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let i=0;i<e;i++)this.putBit((t>>>e-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},F1=n,F1}var j1,yL;function KD(){if(yL)return j1;yL=1;function n(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return n.prototype.set=function(t,e,i,r){const s=t*this.size+e;this.data[s]=i,r&&(this.reservedBit[s]=!0)},n.prototype.get=function(t,e){return this.data[t*this.size+e]},n.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i},n.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},j1=n,j1}var U1={},wL;function ZD(){return wL||(wL=1,(function(n){const t=Xc().getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const r=Math.floor(i/7)+2,s=t(i),o=s===145?26:Math.ceil((s-13)/(2*r-2))*2,a=[s-7];for(let l=1;l<r-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},n.getPositions=function(i){const r=[],s=n.getRowColCoords(i),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||r.push([s[a],s[l]]);return r}})(U1)),U1}var D1={},_L;function QD(){if(_L)return D1;_L=1;const n=Xc().getSymbolSize,t=7;return D1.getPositions=function(i){const r=n(i);return[[0,0],[r-t,0],[0,r-t]]},D1}var z1={},bL;function YD(){return bL||(bL=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const s=r.size;let o=0,a=0,l=0,d=null,u=null;for(let h=0;h<s;h++){a=l=0,d=u=null;for(let m=0;m<s;m++){let p=r.get(h,m);p===d?a++:(a>=5&&(o+=t.N1+(a-5)),d=p,a=1),p=r.get(m,h),p===u?l++:(l>=5&&(o+=t.N1+(l-5)),u=p,l=1)}a>=5&&(o+=t.N1+(a-5)),l>=5&&(o+=t.N1+(l-5))}return o},n.getPenaltyN2=function(r){const s=r.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const d=r.get(a,l)+r.get(a,l+1)+r.get(a+1,l)+r.get(a+1,l+1);(d===4||d===0)&&o++}return o*t.N2},n.getPenaltyN3=function(r){const s=r.size;let o=0,a=0,l=0;for(let d=0;d<s;d++){a=l=0;for(let u=0;u<s;u++)a=a<<1&2047|r.get(d,u),u>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|r.get(u,d),u>=10&&(l===1488||l===93)&&o++}return o*t.N3},n.getPenaltyN4=function(r){let s=0;const o=r.data.length;for(let l=0;l<o;l++)s+=r.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*t.N4};function e(i,r,s){switch(i){case n.Patterns.PATTERN000:return(r+s)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(r+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return r*s%2+r*s%3===0;case n.Patterns.PATTERN110:return(r*s%2+r*s%3)%2===0;case n.Patterns.PATTERN111:return(r*s%3+(r+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(r,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,e(r,l,a))},n.getBestMask=function(r,s){const o=Object.keys(n.Patterns).length;let a=0,l=1/0;for(let d=0;d<o;d++){s(d),n.applyMask(d,r);const u=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(d,r),u<l&&(l=u,a=d)}return a}})(z1)),z1}var Rp={},vL;function _T(){if(vL)return Rp;vL=1;const n=sv(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Rp.getBlocksCount=function(r,s){switch(s){case n.L:return t[(r-1)*4+0];case n.M:return t[(r-1)*4+1];case n.Q:return t[(r-1)*4+2];case n.H:return t[(r-1)*4+3];default:return}},Rp.getTotalCodewordsCount=function(r,s){switch(s){case n.L:return e[(r-1)*4+0];case n.M:return e[(r-1)*4+1];case n.Q:return e[(r-1)*4+2];case n.H:return e[(r-1)*4+3];default:return}},Rp}var G1={},Od={},xL;function XD(){if(xL)return Od;xL=1;const n=new Uint8Array(512),t=new Uint8Array(256);return(function(){let i=1;for(let r=0;r<255;r++)n[r]=i,t[i]=r,i<<=1,i&256&&(i^=285);for(let r=255;r<512;r++)n[r]=n[r-255]})(),Od.log=function(i){if(i<1)throw new Error("log("+i+")");return t[i]},Od.exp=function(i){return n[i]},Od.mul=function(i,r){return i===0||r===0?0:n[t[i]+t[r]]},Od}var EL;function JD(){return EL||(EL=1,(function(n){const t=XD();n.mul=function(i,r){const s=new Uint8Array(i.length+r.length-1);for(let o=0;o<i.length;o++)for(let a=0;a<r.length;a++)s[o+a]^=t.mul(i[o],r[a]);return s},n.mod=function(i,r){let s=new Uint8Array(i);for(;s.length-r.length>=0;){const o=s[0];for(let l=0;l<r.length;l++)s[l]^=t.mul(r[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},n.generateECPolynomial=function(i){let r=new Uint8Array([1]);for(let s=0;s<i;s++)r=n.mul(r,new Uint8Array([1,t.exp(s)]));return r}})(G1)),G1}var W1,SL;function tz(){if(SL)return W1;SL=1;const n=JD();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(i){this.degree=i,this.genPoly=n.generateECPolynomial(this.degree)},t.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(i.length+this.degree);r.set(i);const s=n.mod(r,this.genPoly),o=this.degree-s.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(s,o),a}return s},W1=t,W1}var V1={},q1={},$1={},LL;function bT(){return LL||(LL=1,$1.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),$1}var Ss={},CL;function vT(){if(CL)return Ss;CL=1;const n="[0-9]+",t="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;Ss.KANJI=new RegExp(e,"g"),Ss.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ss.BYTE=new RegExp(i,"g"),Ss.NUMERIC=new RegExp(n,"g"),Ss.ALPHANUMERIC=new RegExp(t,"g");const r=new RegExp("^"+e+"$"),s=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ss.testKanji=function(l){return r.test(l)},Ss.testNumeric=function(l){return s.test(l)},Ss.testAlphanumeric=function(l){return o.test(l)},Ss}var AL;function Jc(){return AL||(AL=1,(function(n){const t=bT(),e=vT();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return e.testNumeric(s)?n.NUMERIC:e.testAlphanumeric(s)?n.ALPHANUMERIC:e.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function i(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(s,o){if(n.isValid(s))return s;try{return i(s)}catch{return o}}})(q1)),q1}var IL;function ez(){return IL||(IL=1,(function(n){const t=Xc(),e=_T(),i=sv(),r=Jc(),s=bT(),o=7973,a=t.getBCHDigit(o);function l(m,p,E){for(let C=1;C<=40;C++)if(p<=n.getCapacity(C,E,m))return C}function d(m,p){return r.getCharCountIndicator(m,p)+4}function u(m,p){let E=0;return m.forEach(function(C){const v=d(C.mode,p);E+=v+C.getBitsLength()}),E}function h(m,p){for(let E=1;E<=40;E++)if(u(m,E)<=n.getCapacity(E,p,r.MIXED))return E}n.from=function(p,E){return s.isValid(p)?parseInt(p,10):E},n.getCapacity=function(p,E,C){if(!s.isValid(p))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=r.BYTE);const v=t.getSymbolTotalCodewords(p),A=e.getTotalCodewordsCount(p,E),x=(v-A)*8;if(C===r.MIXED)return x;const P=x-d(C,p);switch(C){case r.NUMERIC:return Math.floor(P/10*3);case r.ALPHANUMERIC:return Math.floor(P/11*2);case r.KANJI:return Math.floor(P/13);case r.BYTE:default:return Math.floor(P/8)}},n.getBestVersionForData=function(p,E){let C;const v=i.from(E,i.M);if(Array.isArray(p)){if(p.length>1)return h(p,v);if(p.length===0)return 1;C=p[0]}else C=p;return l(C.mode,C.getLength(),v)},n.getEncodedBits=function(p){if(!s.isValid(p)||p<7)throw new Error("Invalid QR Code version");let E=p<<12;for(;t.getBCHDigit(E)-a>=0;)E^=o<<t.getBCHDigit(E)-a;return p<<12|E}})(V1)),V1}var H1={},TL;function nz(){if(TL)return H1;TL=1;const n=Xc(),t=1335,e=21522,i=n.getBCHDigit(t);return H1.getEncodedBits=function(s,o){const a=s.bit<<3|o;let l=a<<10;for(;n.getBCHDigit(l)-i>=0;)l^=t<<n.getBCHDigit(l)-i;return(a<<10|l)^e},H1}var K1={},Z1,kL;function iz(){if(kL)return Z1;kL=1;const n=Jc();function t(e){this.mode=n.NUMERIC,this.data=e.toString()}return t.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let r,s,o;for(r=0;r+3<=this.data.length;r+=3)s=this.data.substr(r,3),o=parseInt(s,10),i.put(o,10);const a=this.data.length-r;a>0&&(s=this.data.substr(r),o=parseInt(s,10),i.put(o,a*3+1))},Z1=t,Z1}var Q1,RL;function rz(){if(RL)return Q1;RL=1;const n=Jc(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(i){this.mode=n.ALPHANUMERIC,this.data=i}return e.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s;for(s=0;s+2<=this.data.length;s+=2){let o=t.indexOf(this.data[s])*45;o+=t.indexOf(this.data[s+1]),r.put(o,11)}this.data.length%2&&r.put(t.indexOf(this.data[s]),6)},Q1=e,Q1}var Y1,NL;function sz(){if(NL)return Y1;NL=1;const n=Jc();function t(e){this.mode=n.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return t.getBitsLength=function(i){return i*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let i=0,r=this.data.length;i<r;i++)e.put(this.data[i],8)},Y1=t,Y1}var X1,ML;function oz(){if(ML)return X1;ML=1;const n=Jc(),t=Xc();function e(i){this.mode=n.KANJI,this.data=i}return e.getBitsLength=function(r){return r*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let r;for(r=0;r<this.data.length;r++){let s=t.toSJIS(this.data[r]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),i.put(s,13)}},X1=e,X1}var J1={exports:{}},BL;function az(){return BL||(BL=1,(function(n){var t={single_source_shortest_paths:function(e,i,r){var s={},o={};o[i]=0;var a=t.PriorityQueue.make();a.push(i,0);for(var l,d,u,h,m,p,E,C,v;!a.empty();){l=a.pop(),d=l.value,h=l.cost,m=e[d]||{};for(u in m)m.hasOwnProperty(u)&&(p=m[u],E=h+p,C=o[u],v=typeof o[u]>"u",(v||C>E)&&(o[u]=E,a.push(u,E),s[u]=d))}if(typeof r<"u"&&typeof o[r]>"u"){var A=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(A)}return s},extract_shortest_path_from_predecessor_list:function(e,i){for(var r=[],s=i;s;)r.push(s),e[s],s=e[s];return r.reverse(),r},find_path:function(e,i,r){var s=t.single_source_shortest_paths(e,i,r);return t.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(e){var i=t.PriorityQueue,r={},s;e=e||{};for(s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r.queue=[],r.sorter=e.sorter||i.default_sorter,r},default_sorter:function(e,i){return e.cost-i.cost},push:function(e,i){var r={value:e,cost:i};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=t})(J1)),J1.exports}var PL;function cz(){return PL||(PL=1,(function(n){const t=Jc(),e=iz(),i=rz(),r=sz(),s=oz(),o=vT(),a=Xc(),l=az();function d(A){return unescape(encodeURIComponent(A)).length}function u(A,x,P){const W=[];let K;for(;(K=A.exec(P))!==null;)W.push({data:K[0],index:K.index,mode:x,length:K[0].length});return W}function h(A){const x=u(o.NUMERIC,t.NUMERIC,A),P=u(o.ALPHANUMERIC,t.ALPHANUMERIC,A);let W,K;return a.isKanjiModeEnabled()?(W=u(o.BYTE,t.BYTE,A),K=u(o.KANJI,t.KANJI,A)):(W=u(o.BYTE_KANJI,t.BYTE,A),K=[]),x.concat(P,W,K).sort(function(b,B){return b.index-B.index}).map(function(b){return{data:b.data,mode:b.mode,length:b.length}})}function m(A,x){switch(x){case t.NUMERIC:return e.getBitsLength(A);case t.ALPHANUMERIC:return i.getBitsLength(A);case t.KANJI:return s.getBitsLength(A);case t.BYTE:return r.getBitsLength(A)}}function p(A){return A.reduce(function(x,P){const W=x.length-1>=0?x[x.length-1]:null;return W&&W.mode===P.mode?(x[x.length-1].data+=P.data,x):(x.push(P),x)},[])}function E(A){const x=[];for(let P=0;P<A.length;P++){const W=A[P];switch(W.mode){case t.NUMERIC:x.push([W,{data:W.data,mode:t.ALPHANUMERIC,length:W.length},{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.ALPHANUMERIC:x.push([W,{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.KANJI:x.push([W,{data:W.data,mode:t.BYTE,length:d(W.data)}]);break;case t.BYTE:x.push([{data:W.data,mode:t.BYTE,length:d(W.data)}])}}return x}function C(A,x){const P={},W={start:{}};let K=["start"];for(let j=0;j<A.length;j++){const b=A[j],B=[];for(let J=0;J<b.length;J++){const it=b[J],st=""+j+J;B.push(st),P[st]={node:it,lastCount:0},W[st]={};for(let z=0;z<K.length;z++){const I=K[z];P[I]&&P[I].node.mode===it.mode?(W[I][st]=m(P[I].lastCount+it.length,it.mode)-m(P[I].lastCount,it.mode),P[I].lastCount+=it.length):(P[I]&&(P[I].lastCount=it.length),W[I][st]=m(it.length,it.mode)+4+t.getCharCountIndicator(it.mode,x))}}K=B}for(let j=0;j<K.length;j++)W[K[j]].end=0;return{map:W,table:P}}function v(A,x){let P;const W=t.getBestModeForData(A);if(P=t.from(x,W),P!==t.BYTE&&P.bit<W.bit)throw new Error('"'+A+'" cannot be encoded with mode '+t.toString(P)+`.
 Suggested mode is: `+t.toString(W));switch(P===t.KANJI&&!a.isKanjiModeEnabled()&&(P=t.BYTE),P){case t.NUMERIC:return new e(A);case t.ALPHANUMERIC:return new i(A);case t.KANJI:return new s(A);case t.BYTE:return new r(A)}}n.fromArray=function(x){return x.reduce(function(P,W){return typeof W=="string"?P.push(v(W,null)):W.data&&P.push(v(W.data,W.mode)),P},[])},n.fromString=function(x,P){const W=h(x,a.isKanjiModeEnabled()),K=E(W),j=C(K,P),b=l.find_path(j.map,"start","end"),B=[];for(let J=1;J<b.length-1;J++)B.push(j.table[b[J]].node);return n.fromArray(p(B))},n.rawSplit=function(x){return n.fromArray(h(x,a.isKanjiModeEnabled()))}})(K1)),K1}var OL;function lz(){if(OL)return P1;OL=1;const n=Xc(),t=sv(),e=HD(),i=KD(),r=ZD(),s=QD(),o=YD(),a=_T(),l=tz(),d=ez(),u=nz(),h=Jc(),m=cz();function p(j,b){const B=j.size,J=s.getPositions(b);for(let it=0;it<J.length;it++){const st=J[it][0],z=J[it][1];for(let I=-1;I<=7;I++)if(!(st+I<=-1||B<=st+I))for(let w=-1;w<=7;w++)z+w<=-1||B<=z+w||(I>=0&&I<=6&&(w===0||w===6)||w>=0&&w<=6&&(I===0||I===6)||I>=2&&I<=4&&w>=2&&w<=4?j.set(st+I,z+w,!0,!0):j.set(st+I,z+w,!1,!0))}}function E(j){const b=j.size;for(let B=8;B<b-8;B++){const J=B%2===0;j.set(B,6,J,!0),j.set(6,B,J,!0)}}function C(j,b){const B=r.getPositions(b);for(let J=0;J<B.length;J++){const it=B[J][0],st=B[J][1];for(let z=-2;z<=2;z++)for(let I=-2;I<=2;I++)z===-2||z===2||I===-2||I===2||z===0&&I===0?j.set(it+z,st+I,!0,!0):j.set(it+z,st+I,!1,!0)}}function v(j,b){const B=j.size,J=d.getEncodedBits(b);let it,st,z;for(let I=0;I<18;I++)it=Math.floor(I/3),st=I%3+B-8-3,z=(J>>I&1)===1,j.set(it,st,z,!0),j.set(st,it,z,!0)}function A(j,b,B){const J=j.size,it=u.getEncodedBits(b,B);let st,z;for(st=0;st<15;st++)z=(it>>st&1)===1,st<6?j.set(st,8,z,!0):st<8?j.set(st+1,8,z,!0):j.set(J-15+st,8,z,!0),st<8?j.set(8,J-st-1,z,!0):st<9?j.set(8,15-st-1+1,z,!0):j.set(8,15-st-1,z,!0);j.set(J-8,8,1,!0)}function x(j,b){const B=j.size;let J=-1,it=B-1,st=7,z=0;for(let I=B-1;I>0;I-=2)for(I===6&&I--;;){for(let w=0;w<2;w++)if(!j.isReserved(it,I-w)){let T=!1;z<b.length&&(T=(b[z]>>>st&1)===1),j.set(it,I-w,T),st--,st===-1&&(z++,st=7)}if(it+=J,it<0||B<=it){it-=J,J=-J;break}}}function P(j,b,B){const J=new e;B.forEach(function(w){J.put(w.mode.bit,4),J.put(w.getLength(),h.getCharCountIndicator(w.mode,j)),w.write(J)});const it=n.getSymbolTotalCodewords(j),st=a.getTotalCodewordsCount(j,b),z=(it-st)*8;for(J.getLengthInBits()+4<=z&&J.put(0,4);J.getLengthInBits()%8!==0;)J.putBit(0);const I=(z-J.getLengthInBits())/8;for(let w=0;w<I;w++)J.put(w%2?17:236,8);return W(J,j,b)}function W(j,b,B){const J=n.getSymbolTotalCodewords(b),it=a.getTotalCodewordsCount(b,B),st=J-it,z=a.getBlocksCount(b,B),I=J%z,w=z-I,T=Math.floor(J/z),V=Math.floor(st/z),Y=V+1,Q=T-V,$=new l(Q);let F=0;const R=new Array(z),_=new Array(z);let k=0;const H=new Uint8Array(j.buffer);for(let lt=0;lt<z;lt++){const ct=lt<w?V:Y;R[lt]=H.slice(F,F+ct),_[lt]=$.encode(R[lt]),F+=ct,k=Math.max(k,ct)}const L=new Uint8Array(J);let g=0,D,S;for(D=0;D<k;D++)for(S=0;S<z;S++)D<R[S].length&&(L[g++]=R[S][D]);for(D=0;D<Q;D++)for(S=0;S<z;S++)L[g++]=_[S][D];return L}function K(j,b,B,J){let it;if(Array.isArray(j))it=m.fromArray(j);else if(typeof j=="string"){let T=b;if(!T){const V=m.rawSplit(j);T=d.getBestVersionForData(V,B)}it=m.fromString(j,T||40)}else throw new Error("Invalid data");const st=d.getBestVersionForData(it,B);if(!st)throw new Error("The amount of data is too big to be stored in a QR Code");if(!b)b=st;else if(b<st)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+st+`.
`);const z=P(b,B,it),I=n.getSymbolSize(b),w=new i(I);return p(w,b),E(w),C(w,b),A(w,B,0),b>=7&&v(w,b),x(w,z),isNaN(J)&&(J=o.getBestMask(w,A.bind(null,w,B))),o.applyMask(J,w),A(w,B,J),{modules:w,version:b,errorCorrectionLevel:B,maskPattern:J,segments:it}}return P1.create=function(b,B){if(typeof b>"u"||b==="")throw new Error("No input text");let J=t.M,it,st;return typeof B<"u"&&(J=t.from(B.errorCorrectionLevel,t.M),it=d.from(B.version),st=o.from(B.maskPattern),B.toSJISFunc&&n.setToSJISFunction(B.toSJISFunc)),K(b,it,J,st)},P1}var t2={},e2={},FL;function xT(){return FL||(FL=1,(function(n){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let i=e.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+e);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const r=parseInt(i.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const r=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:r,color:{dark:t(i.color.dark||"#000000ff"),light:t(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,r){return r.width&&r.width>=i+r.margin*2?r.width/(i+r.margin*2):r.scale},n.getImageWidth=function(i,r){const s=n.getScale(i,r);return Math.floor((i+r.margin*2)*s)},n.qrToImageData=function(i,r,s){const o=r.modules.size,a=r.modules.data,l=n.getScale(o,s),d=Math.floor((o+s.margin*2)*l),u=s.margin*l,h=[s.color.light,s.color.dark];for(let m=0;m<d;m++)for(let p=0;p<d;p++){let E=(m*d+p)*4,C=s.color.light;if(m>=u&&p>=u&&m<d-u&&p<d-u){const v=Math.floor((m-u)/l),A=Math.floor((p-u)/l);C=h[a[v*o+A]?1:0]}i[E++]=C.r,i[E++]=C.g,i[E++]=C.b,i[E]=C.a}}})(e2)),e2}var jL;function uz(){return jL||(jL=1,(function(n){const t=xT();function e(r,s,o){r.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,a){let l=a,d=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(d=i()),l=t.getOptions(l);const u=t.getImageWidth(s.modules.size,l),h=d.getContext("2d"),m=h.createImageData(u,u);return t.qrToImageData(m.data,s,l),e(h,d,u),h.putImageData(m,0,0),d},n.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const d=n.render(s,o,l),u=l.type||"image/png",h=l.rendererOpts||{};return d.toDataURL(u,h.quality)}})(t2)),t2}var n2={},UL;function dz(){if(UL)return n2;UL=1;const n=xT();function t(r,s){const o=r.a/255,a=s+'="'+r.hex+'"';return o<1?a+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function e(r,s,o){let a=r+s;return typeof o<"u"&&(a+=" "+o),a}function i(r,s,o){let a="",l=0,d=!1,u=0;for(let h=0;h<r.length;h++){const m=Math.floor(h%s),p=Math.floor(h/s);!m&&!d&&(d=!0),r[h]?(u++,h>0&&m>0&&r[h-1]||(a+=d?e("M",m+o,.5+p+o):e("m",l,0),l=0,d=!1),m+1<s&&r[h+1]||(a+=e("h",u),u=0)):l++}return a}return n2.render=function(s,o,a){const l=n.getOptions(o),d=s.modules.size,u=s.modules.data,h=d+l.margin*2,m=l.color.light.a?"<path "+t(l.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",p="<path "+t(l.color.dark,"stroke")+' d="'+i(u,d,l.margin)+'"/>',E='viewBox="0 0 '+h+" "+h+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+E+' shape-rendering="crispEdges">'+m+p+`</svg>
`;return typeof a=="function"&&a(null,v),v},n2}var DL;function fz(){if(DL)return Ml;DL=1;const n=$D(),t=lz(),e=uz(),i=dz();function r(s,o,a,l,d){const u=[].slice.call(arguments,1),h=u.length,m=typeof u[h-1]=="function";if(!m&&!n())throw new Error("Callback required as last argument");if(m){if(h<2)throw new Error("Too few arguments provided");h===2?(d=a,a=o,o=l=void 0):h===3&&(o.getContext&&typeof d>"u"?(d=l,l=void 0):(d=l,l=a,a=o,o=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(a=o,o=l=void 0):h===2&&!o.getContext&&(l=a,a=o,o=void 0),new Promise(function(p,E){try{const C=t.create(a,l);p(s(C,o,l))}catch(C){E(C)}})}try{const p=t.create(a,l);d(null,s(p,o,l))}catch(p){d(p)}}return Ml.create=t.create,Ml.toCanvas=r.bind(null,e.render),Ml.toDataURL=r.bind(null,e.renderToDataURL),Ml.toString=r.bind(null,function(s,o,a){return i.render(s,a)}),Ml}fz();function i2(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Ff="solana:mainnet",ET="solana:devnet",ST="solana:testnet",hz="solana:localnet",pz="https://api.mainnet-beta.solana.com";function mz(n){return n.includes(pz)?Ff:/\bdevnet\b/i.test(n)?ET:/\btestnet\b/i.test(n)?ST:/\blocalhost\b/i.test(n)||/\b127\.0\.0\.1\b/.test(n)?hz:Ff}function gz(n){let t=`${n.domain} wants you to sign in with your Solana account:
`;t+=`${n.address}`,n.statement&&(t+=`

${n.statement}`);const e=[];if(n.uri&&e.push(`URI: ${n.uri}`),n.version&&e.push(`Version: ${n.version}`),n.chainId&&e.push(`Chain ID: ${n.chainId}`),n.nonce&&e.push(`Nonce: ${n.nonce}`),n.issuedAt&&e.push(`Issued At: ${n.issuedAt}`),n.expirationTime&&e.push(`Expiration Time: ${n.expirationTime}`),n.notBefore&&e.push(`Not Before: ${n.notBefore}`),n.requestId&&e.push(`Request ID: ${n.requestId}`),n.resources){e.push("Resources:");for(const i of n.resources)e.push(`- ${i}`)}return e.length&&(t+=`

${e.join(`
`)}`),t}function yz(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}var wz=n=>yz({read(t,e){const i=e===0?t:t.slice(e);if(i.length===0)return["",0];let r=i.findIndex(l=>l!==0);r=r===-1?i.length:r;const s=n[0].repeat(r);if(r===i.length)return[s,t.length];const o=i.slice(r).reduce((l,d)=>l*256n+BigInt(d),0n),a=_z(o,n);return[s+a,t.length]}});function _z(n,t){const e=BigInt(t.length),i=[];for(;n>0n;)i.unshift(t[Number(n%e)]),n/=e;return i.join("")}var bz="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",vz=()=>wz(bz);const To={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class ko extends Error{constructor(...t){const[e,i,r]=t;super(i),this.code=e,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class LT extends Error{constructor(...t){const[e,i,r,s]=t;super(r),this.code=i,this.data=s,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function ui(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function l(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):r(u.value).then(a,l)}d((i=i.apply(n,[])).next())})}function xz(n){return window.btoa(n)}function zL(n,t){return window.btoa(String.fromCharCode.call(null,...n))}function CT(n){return new Uint8Array(window.atob(n).split("").map(t=>t.charCodeAt(0)))}function r2(n,t){return ui(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",n),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,e),r=new Uint8Array(e.byteLength+i.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(i),e.byteLength),r})}function Ez(n){return gz(n)}function Sz(n){return xz(Ez(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Lz="solana:signTransactions",GL="solana:cloneAuthorization";function Cz(n){return vz().decode(n)}function Az(n){return Cz(CT(n))}function Iz(n,t){return new Proxy({},{get(e,i){return i==="then"?null:(e[i]==null&&(e[i]=function(r){return ui(this,void 0,void 0,function*(){const{method:s,params:o}=Tz(i,r,n),a=yield t(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Rz(o.sign_in_payload,a,t)),kz(i,a,n)})}),e[i])},defineProperty(){return!1},deleteProperty(){return!1}})}function Tz(n,t,e){let i=t,r=n.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(n){case"authorize":{let{chain:s}=i;if(e==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=i.cluster}i.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}i.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=i;if(s)switch(e){case"legacy":{r="reauthorize",i={auth_token:s,identity:o};break}default:{r="authorize";break}}break}}return{method:r,params:i}}function kz(n,t,e){switch(n){case"getCapabilities":{const i=t;switch(e){case"legacy":{const r=[Lz];return i.supports_clone_authorization===!0&&r.push(GL),Object.assign(Object.assign({},i),{features:r})}case"v1":return Object.assign(Object.assign({},i),{supports_sign_and_send_transactions:!0,supports_clone_authorization:i.features.includes(GL)})}}}return t}function Rz(n,t,e){var i;return ui(this,void 0,void 0,function*(){const r=(i=n.domain)!==null&&i!==void 0?i:window.location.host,s=t.accounts[0].address,o=Sz(Object.assign(Object.assign({},n),{domain:r,address:Az(s)})),a=yield e("sign_messages",{addresses:[s],payloads:[o]}),l=CT(a.signed_payloads[0]),d=zL(l.slice(0,l.length-64)),u=zL(l.slice(l.length-64));return{address:s,signed_message:d.length==0?o:d,signature:u}})}const xc=4;function Nz(n){if(n>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(xc);return new DataView(t).setUint32(0,n,!1),new Uint8Array(t)}const Kw=12,AT=65;function Mz(n,t,e){return ui(this,void 0,void 0,function*(){const i=Nz(t),r=new Uint8Array(Kw);crypto.getRandomValues(r);const s=yield crypto.subtle.encrypt(TT(i,r),e,new TextEncoder().encode(n)),o=new Uint8Array(i.byteLength+r.byteLength+s.byteLength);return o.set(new Uint8Array(i),0),o.set(new Uint8Array(r),i.byteLength),o.set(new Uint8Array(s),i.byteLength+r.byteLength),o})}function IT(n,t){return ui(this,void 0,void 0,function*(){const e=n.slice(0,xc),i=n.slice(xc,xc+Kw),r=n.slice(xc+Kw),s=yield crypto.subtle.decrypt(TT(e,i),t,r);return Bz().decode(s)})}function TT(n,t){return{additionalData:n,iv:t,name:"AES-GCM",tagLength:128}}let s2;function Bz(){return s2===void 0&&(s2=new TextDecoder("utf-8")),s2}function Pz(){return ui(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function o2(){return ui(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Oz(n){let t="";const e=new Uint8Array(n),i=e.byteLength;for(let r=0;r<i;r++)t+=String.fromCharCode(e[r]);return window.btoa(t)}function Fz(){return kT(49152+Math.floor(Math.random()*16384))}function kT(n){if(n<49152||n>65535)throw new ko(To.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${n} given.`,{port:n});return n}function jz(n){return n.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const Uz="solana-wallet";function WL(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function Dz(n,t){let e=null;if(t){try{e=new URL(t)}catch{}if(e?.protocol!=="https:")throw new ko(To.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${Uz}:/`));const i=n.startsWith("/")?n:[...WL(e.pathname),...WL(n)].join("/");return new URL(i,e)}function zz(n,t,e,i=["v1"]){return ui(this,void 0,void 0,function*(){const r=kT(t),s=yield crypto.subtle.exportKey("raw",n),o=Oz(s),a=Dz("v1/associate/local",e);return a.searchParams.set("association",jz(o)),a.searchParams.set("port",`${r}`),i.forEach(l=>{a.searchParams.set("v",l)}),a})}function Gz(n,t){return ui(this,void 0,void 0,function*(){const e=JSON.stringify(n),i=n.id;return Mz(e,i,t)})}function Wz(n,t){return ui(this,void 0,void 0,function*(){const e=yield IT(n,t),i=JSON.parse(e);if(Object.hasOwnProperty.call(i,"error"))throw new LT(i.id,i.error.code,i.error.message);return i})}function Vz(n,t,e){return ui(this,void 0,void 0,function*(){const[i,r]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",n.slice(0,AT),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:r},e,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function qz(n,t){return ui(this,void 0,void 0,function*(){const e=yield IT(n,t),i=JSON.parse(e);let r="legacy";if(Object.hasOwnProperty.call(i,"v"))switch(i.v){case 1:case"1":case"v1":r="v1";break;case"legacy":r="legacy";break;default:throw new ko(To.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${i.v}`)}return{protocol_version:r}})}const Y0={Firefox:0,Other:1};function $z(){return navigator.userAgent.indexOf("Firefox/")!==-1?Y0.Firefox:Y0.Other}function Hz(){return new Promise((n,t)=>{function e(){clearTimeout(r),window.removeEventListener("blur",i)}function i(){e(),n()}window.addEventListener("blur",i);const r=setTimeout(()=>{e(),t()},3e3)})}let Fd=null;function Kz(n){Fd==null&&(Fd=document.createElement("iframe"),Fd.style.display="none",document.body.appendChild(Fd)),Fd.contentWindow.location.href=n.toString()}function Zz(n){return ui(this,void 0,void 0,function*(){if(n.protocol==="https:")window.location.assign(n);else try{const t=$z();switch(t){case Y0.Firefox:Kz(n);break;case Y0.Other:{const e=Hz();window.location.assign(n),yield e;break}default:}}catch{throw new ko(To.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Qz(n,t){return ui(this,void 0,void 0,function*(){const e=Fz(),i=yield zz(n,e,t);return yield Zz(i),e})}const VL={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Yz="com.solana.mobilewalletadapter.v1";function Xz(){if(typeof window>"u"||window.isSecureContext!==!0)throw new ko(To.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Jz(n){let t;try{t=new URL(n)}catch{throw new ko(To.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new ko(To.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function qL(n){return new DataView(n).getUint32(0,!1)}function t9(n,t){return ui(this,void 0,void 0,function*(){Xz();const e=yield Pz(),r=`ws://localhost:${yield Qz(e.publicKey,t?.baseUri)}/solana-wallet`;let s;const o=(()=>{const u=[...VL.retryDelayScheduleMs];return()=>u.length>1?u.shift():u[0]})();let a=1,l=0,d={__type:"disconnected"};return new Promise((u,h)=>{let m;const p={},E=()=>ui(this,void 0,void 0,function*(){if(d.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);return}m.removeEventListener("open",E);const{associationKeypair:K}=d,j=yield o2();m.send(yield r2(j.publicKey,K.privateKey)),d={__type:"hello_req_sent",associationPublicKey:K.publicKey,ecdhPrivateKey:j.privateKey}}),C=K=>{K.wasClean?d={__type:"disconnected"}:h(new ko(To.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${K.code}: ${K.reason}).`,{closeEvent:K})),x()},v=K=>ui(this,void 0,void 0,function*(){x(),Date.now()-s>=VL.timeoutMs?h(new ko(To.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${r}.`)):(yield new Promise(j=>{const b=o();P=window.setTimeout(j,b)}),W())}),A=K=>ui(this,void 0,void 0,function*(){const j=yield K.data.arrayBuffer();switch(d.__type){case"connecting":if(j.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const b=yield o2();m.send(yield r2(b.publicKey,e.privateKey)),d={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:b.privateKey};break;case"connected":try{const B=j.slice(0,xc),J=qL(B);if(J!==l+1)throw new Error("Encrypted message has invalid sequence number");l=J;const it=yield Wz(j,d.sharedSecret),st=p[it.id];delete p[it.id],st.resolve(it.result)}catch(B){if(B instanceof LT){const J=p[B.jsonRpcMessageId];delete p[B.jsonRpcMessageId],J.reject(B)}else throw B}break;case"hello_req_sent":{if(j.byteLength===0){const z=yield o2();m.send(yield r2(z.publicKey,e.privateKey)),d={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:z.privateKey};break}const B=yield Vz(j,d.associationPublicKey,d.ecdhPrivateKey),J=j.slice(AT),it=J.byteLength!==0?yield ui(this,void 0,void 0,function*(){const z=J.slice(0,xc),I=qL(z);if(I!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=I,qz(J,B)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:B,sessionProperties:it};const st=Iz(it.protocol_version,(z,I)=>ui(this,void 0,void 0,function*(){const w=a++;return m.send(yield Gz({id:w,jsonrpc:"2.0",method:z,params:I??{}},B)),new Promise((T,V)=>{p[w]={resolve(Y){switch(z){case"authorize":case"reauthorize":{const{wallet_uri_base:Q}=Y;if(Q!=null)try{Jz(Q)}catch($){V($);return}break}}T(Y)},reject:V}})}));try{u(yield n(st))}catch(z){h(z)}finally{x(),m.close()}break}}});let x,P;const W=()=>{x&&x(),d={__type:"connecting",associationKeypair:e},s===void 0&&(s=Date.now()),m=new WebSocket(r,[Yz]),m.addEventListener("open",E),m.addEventListener("close",C),m.addEventListener("error",v),m.addEventListener("message",A),x=()=>{window.clearTimeout(P),m.removeEventListener("open",E),m.removeEventListener("close",C),m.removeEventListener("error",v),m.removeEventListener("message",A)}};W()})})}var a2,$L;function e9(){if($L)return a2;$L=1;function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),i=0;i<e.length;i++)e[i]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=r}var a=t.length,l=t.charAt(0),d=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var C=0,v=0,A=0,x=E.length;A!==x&&E[A]===0;)A++,C++;for(var P=(x-A)*u+1>>>0,W=new Uint8Array(P);A!==x;){for(var K=E[A],j=0,b=P-1;(K!==0||j<v)&&b!==-1;b--,j++)K+=256*W[b]>>>0,W[b]=K%a>>>0,K=K/a>>>0;if(K!==0)throw new Error("Non-zero carry");v=j,A++}for(var B=P-v;B!==P&&W[B]===0;)B++;for(var J=l.repeat(C);B<P;++B)J+=t.charAt(W[B]);return J}function m(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;for(var C=0,v=0,A=0;E[C]===l;)v++,C++;for(var x=(E.length-C)*d+1>>>0,P=new Uint8Array(x);E[C];){var W=E.charCodeAt(C);if(W>255)return;var K=e[W];if(K===255)return;for(var j=0,b=x-1;(K!==0||j<A)&&b!==-1;b--,j++)K+=a*P[b]>>>0,P[b]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");A=j,C++}for(var B=x-A;B!==x&&P[B]===0;)B++;for(var J=new Uint8Array(v+(x-B)),it=v;B!==x;)J[it++]=P[B++];return J}function p(E){var C=m(E);if(C)return C;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:m,decode:p}}return a2=n,a2}var c2,HL;function n9(){return HL||(HL=1,c2=e9()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),c2}var i9=n9();const Zw=Po(i9);function Fn(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function l(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):r(u.value).then(a,l)}d((i=i.apply(n,[])).next())})}function te(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)}function oi(n,t,e,i,r){if(typeof t=="function"?n!==t||!0:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(n,e),e}var Jd,mi,oc,Ul,RT,NT,MT,o0;const r9=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,s9=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,o9=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class a9{constructor(){Jd.add(this),mi.set(this,null),oc.set(this,{}),Ul.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),te(this,Jd,"m",NT).call(this),te(this,mi,"f")&&(te(this,mi,"f").style.display="flex")},this.close=(t=void 0)=>{var e;console.debug("Modal close"),te(this,Jd,"m",MT).call(this),te(this,mi,"f")&&(te(this,mi,"f").style.display="none"),(e=te(this,oc,"f").close)===null||e===void 0||e.forEach(i=>i(t))},o0.set(this,t=>{t.key==="Escape"&&this.close(t)}),this.init=this.init.bind(this),oi(this,mi,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return Fn(this,void 0,void 0,function*(){console.log("Injecting modal"),te(this,Jd,"m",RT).call(this)})}addEventListener(t,e){var i;return!((i=te(this,oc,"f")[t])===null||i===void 0)&&i.push(e)||(te(this,oc,"f")[t]=[e]),()=>this.removeEventListener(t,e)}removeEventListener(t,e){var i;te(this,oc,"f")[t]=(i=te(this,oc,"f")[t])===null||i===void 0?void 0:i.filter(r=>e!==r)}}mi=new WeakMap,oc=new WeakMap,Ul=new WeakMap,o0=new WeakMap,Jd=new WeakSet,RT=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){te(this,mi,"f")||oi(this,mi,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}oi(this,mi,document.createElement("div")),te(this,mi,"f").id="mobile-wallet-adapter-embedded-root-ui",te(this,mi,"f").innerHTML=r9,te(this,mi,"f").style.display="none";const t=te(this,mi,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");t&&(t.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent=s9+this.contentStyles;const i=document.createElement("div");i.innerHTML=o9,this.dom=i.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(te(this,mi,"f")),document.body.appendChild(i)},NT=function(){if(!te(this,mi,"f")||te(this,Ul,"f"))return;[...te(this,mi,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e?.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",te(this,o0,"f")),oi(this,Ul,!0)},MT=function(){if(!te(this,Ul,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",te(this,o0,"f")),!te(this,mi,"f")))return;[...te(this,mi,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e?.removeEventListener("click",this.close)),oi(this,Ul,!1)};const c9="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function Np(n){return window.btoa(String.fromCharCode.call(null,...n))}function da(n){return new Uint8Array(window.atob(n).split("").map(t=>t.charCodeAt(0)))}var Dl,Ec,Qw,Yw,Xw,Jw,tf,Vi,ao,va,zl,ac,a0,ef,c0,t_,l0,BT,e_,u0,Gl,d0,nf,f0,Wl,rf,h0,n_,i_,p0,m0,r_,s_,g0;const PT="Mobile Wallet Adapter",l9=64,u9=[er,jn,go,Mc];class d9{constructor(t){Dl.add(this),Ec.set(this,{}),Qw.set(this,"1.0.0"),Yw.set(this,PT),Xw.set(this,"https://solanamobile.com/wallets"),Jw.set(this,c9),tf.set(this,void 0),Vi.set(this,void 0),ao.set(this,void 0),va.set(this,!1),zl.set(this,0),ac.set(this,[]),a0.set(this,void 0),ef.set(this,void 0),c0.set(this,void 0),t_.set(this,(e,i)=>{var r;return!((r=te(this,Ec,"f")[e])===null||r===void 0)&&r.push(i)||(te(this,Ec,"f")[e]=[i]),()=>te(this,Dl,"m",BT).call(this,e,i)}),e_.set(this,({silent:e}={})=>Fn(this,void 0,void 0,function*(){if(te(this,va,"f")||this.connected)return{accounts:this.accounts};oi(this,va,!0);try{if(e){const i=yield te(this,ao,"f").get();if(i)yield te(this,d0,"f").call(this,i.capabilities),yield te(this,Gl,"f").call(this,i);else return{accounts:this.accounts}}else yield te(this,u0,"f").call(this)}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{oi(this,va,!1)}return{accounts:this.accounts}})),u0.set(this,e=>Fn(this,void 0,void 0,function*(){try{const i=yield te(this,ao,"f").get();if(i)return te(this,Gl,"f").call(this,i),i;const r=yield te(this,a0,"f").select(te(this,ac,"f"));return yield te(this,Wl,"f").call(this,s=>Fn(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([s.getCapabilities(),s.authorize({chain:r,identity:te(this,tf,"f"),sign_in_payload:e})]),l=te(this,h0,"f").call(this,a.accounts),d=Object.assign(Object.assign({},a),{accounts:l,chain:r,capabilities:o});return Promise.all([te(this,d0,"f").call(this,o),te(this,ao,"f").set(d),te(this,Gl,"f").call(this,d)]),d}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),Gl.set(this,e=>Fn(this,void 0,void 0,function*(){var i;const r=te(this,Vi,"f")==null||((i=te(this,Vi,"f"))===null||i===void 0?void 0:i.accounts.length)!==e.accounts.length||te(this,Vi,"f").accounts.some((s,o)=>s.address!==e.accounts[o].address);oi(this,Vi,e),r&&te(this,Dl,"m",l0).call(this,"change",{accounts:this.accounts})})),d0.set(this,e=>Fn(this,void 0,void 0,function*(){const i=e.features.includes("solana:signTransactions"),r=e.supports_sign_and_send_transactions,s=er in this.features!==r||jn in this.features!==i;oi(this,ef,Object.assign(Object.assign({},(r||!r&&!i)&&{[er]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:te(this,p0,"f")}}),i&&{[jn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:te(this,m0,"f")}})),s&&te(this,Dl,"m",l0).call(this,"change",{features:this.features})})),nf.set(this,(e,i,r)=>Fn(this,void 0,void 0,function*(){var s,o;try{const[a,l]=yield Promise.all([(o=(s=te(this,Vi,"f"))===null||s===void 0?void 0:s.capabilities)!==null&&o!==void 0?o:yield e.getCapabilities(),e.authorize({auth_token:i,identity:te(this,tf,"f"),chain:r})]),d=te(this,h0,"f").call(this,l.accounts),u=Object.assign(Object.assign({},l),{accounts:d,chain:r,capabilities:a});Promise.all([te(this,ao,"f").set(u),te(this,Gl,"f").call(this,u)])}catch(a){throw te(this,f0,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),f0.set(this,()=>Fn(this,void 0,void 0,function*(){var e;te(this,ao,"f").clear(),oi(this,va,!1),oi(this,zl,(e=te(this,zl,"f"),e++,e)),oi(this,Vi,void 0),te(this,Dl,"m",l0).call(this,"change",{accounts:this.accounts})})),Wl.set(this,e=>Fn(this,void 0,void 0,function*(){var i;const r=(i=te(this,Vi,"f"))===null||i===void 0?void 0:i.wallet_uri_base,s=r?{baseUri:r}:void 0,o=te(this,zl,"f");try{return yield t9(e,s)}catch(a){throw te(this,zl,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield te(this,c0,"f").call(this,this)),a}})),rf.set(this,()=>{if(!te(this,Vi,"f"))throw new Error("Wallet not connected");return{authToken:te(this,Vi,"f").auth_token,chain:te(this,Vi,"f").chain}}),h0.set(this,e=>e.map(i=>{var r,s;const o=da(i.address);return{address:Zw.encode(o),publicKey:o,label:i.label,icon:i.icon,chains:(r=i.chains)!==null&&r!==void 0?r:te(this,ac,"f"),features:(s=i.features)!==null&&s!==void 0?s:u9}})),n_.set(this,e=>Fn(this,void 0,void 0,function*(){const{authToken:i,chain:r}=te(this,rf,"f").call(this);try{const s=e.map(o=>Np(o));return yield te(this,Wl,"f").call(this,o=>Fn(this,void 0,void 0,function*(){return yield te(this,nf,"f").call(this,o,i,r),(yield o.signTransactions({payloads:s})).signed_payloads.map(da)}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),i_.set(this,(e,i)=>Fn(this,void 0,void 0,function*(){const{authToken:r,chain:s}=te(this,rf,"f").call(this);try{return yield te(this,Wl,"f").call(this,o=>Fn(this,void 0,void 0,function*(){const[a,l]=yield Promise.all([o.getCapabilities(),te(this,nf,"f").call(this,o,r,s)]);if(a.supports_sign_and_send_transactions){const d=Np(e);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},i),{payloads:[d]}))).signatures.map(da)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),p0.set(this,(...e)=>Fn(this,void 0,void 0,function*(){const i=[];for(const r of e){const s=yield te(this,i_,"f").call(this,r.transaction,r.options);i.push({signature:s})}return i})),m0.set(this,(...e)=>Fn(this,void 0,void 0,function*(){return(yield te(this,n_,"f").call(this,e.map(({transaction:i})=>i))).map(i=>({signedTransaction:i}))})),r_.set(this,(...e)=>Fn(this,void 0,void 0,function*(){const{authToken:i,chain:r}=te(this,rf,"f").call(this),s=e.map(({account:a})=>Np(a.publicKey)),o=e.map(({message:a})=>Np(a));try{return yield te(this,Wl,"f").call(this,a=>Fn(this,void 0,void 0,function*(){return yield te(this,nf,"f").call(this,a,i,r),(yield a.signMessages({addresses:s,payloads:o})).signed_payloads.map(da).map(d=>({signedMessage:d,signature:d.slice(-l9)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),s_.set(this,(...e)=>Fn(this,void 0,void 0,function*(){const i=[];if(e.length>1)for(const r of e)i.push(yield te(this,g0,"f").call(this,r));else return[yield te(this,g0,"f").call(this,e[0])];return i})),g0.set(this,e=>Fn(this,void 0,void 0,function*(){var i,r,s;oi(this,va,!0);try{const o=yield te(this,u0,"f").call(this,Object.assign(Object.assign({},e),{domain:(i=e?.domain)!==null&&i!==void 0?i:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,l=o.accounts.find(d=>d.address==a);return{account:Object.assign(Object.assign({},l??{address:Zw.encode(da(a))}),{publicKey:da(a),chains:(r=l?.chains)!==null&&r!==void 0?r:te(this,ac,"f"),features:(s=l?.features)!==null&&s!==void 0?s:o.capabilities.features}),signedMessage:da(o.sign_in_result.signed_message),signature:da(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{oi(this,va,!1)}})),oi(this,ao,t.authorizationCache),oi(this,tf,t.appIdentity),oi(this,ac,t.chains),oi(this,a0,t.chainSelector),oi(this,c0,t.onWalletNotFound),oi(this,ef,{[er]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:te(this,p0,"f")},[jn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:te(this,m0,"f")}})}get version(){return te(this,Qw,"f")}get name(){return te(this,Yw,"f")}get url(){return te(this,Xw,"f")}get icon(){return te(this,Jw,"f")}get chains(){return te(this,ac,"f")}get features(){return Object.assign({[qm]:{version:"1.0.0",connect:te(this,e_,"f")},[Q0]:{version:"1.0.0",disconnect:te(this,f0,"f")},[$m]:{version:"1.0.0",on:te(this,t_,"f")},[go]:{version:"1.0.0",signMessage:te(this,r_,"f")},[Mc]:{version:"1.0.0",signIn:te(this,s_,"f")}},te(this,ef,"f"))}get accounts(){var t,e;return(e=(t=te(this,Vi,"f"))===null||t===void 0?void 0:t.accounts)!==null&&e!==void 0?e:[]}get connected(){return!!te(this,Vi,"f")}get isAuthorized(){return!!te(this,Vi,"f")}get currentAuthorization(){return te(this,Vi,"f")}get cachedAuthorizationResult(){return te(this,ao,"f").get()}}Ec=new WeakMap,Qw=new WeakMap,Yw=new WeakMap,Xw=new WeakMap,Jw=new WeakMap,tf=new WeakMap,Vi=new WeakMap,ao=new WeakMap,va=new WeakMap,zl=new WeakMap,ac=new WeakMap,a0=new WeakMap,ef=new WeakMap,c0=new WeakMap,t_=new WeakMap,e_=new WeakMap,u0=new WeakMap,Gl=new WeakMap,d0=new WeakMap,nf=new WeakMap,f0=new WeakMap,Wl=new WeakMap,rf=new WeakMap,h0=new WeakMap,n_=new WeakMap,i_=new WeakMap,p0=new WeakMap,m0=new WeakMap,r_=new WeakMap,s_=new WeakMap,g0=new WeakMap,Dl=new WeakSet,l0=function(t,...e){var i;(i=te(this,Ec,"f")[t])===null||i===void 0||i.forEach(r=>r.apply(null,e))},BT=function(t,e){var i;te(this,Ec,"f")[t]=(i=te(this,Ec,"f")[t])===null||i===void 0?void 0:i.filter(r=>e!==r)};const f9="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",h9="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class p9 extends a9{constructor(){super(...arguments),this.contentStyles=g9,this.contentHtml=m9}initWithError(t){super.init(),this.populateError(t)}populateError(t){var e,i;const r=(e=this.dom)===null||e===void 0?void 0:e.getElementById("mobile-wallet-adapter-error-message"),s=(i=this.dom)===null||i===void 0?void 0:i.getElementById("mobile-wallet-adapter-error-action");if(r){if(t.name==="SolanaMobileWalletAdapterError")switch(t.code){case"ERROR_WALLET_NOT_FOUND":r.innerHTML=f9,s&&s.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":r.innerHTML=h9,s&&(s.style.display="none");return}r.innerHTML=`An unexpected error occurred: ${t.message}`}else console.log("Failed to locate error dialog element")}}const m9=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,g9=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function y9(){return Fn(this,void 0,void 0,function*(){if(typeof window<"u"){const n=window.navigator.userAgent.toLowerCase(),t=new p9;n.includes("wv")?t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),t.open()}})}const l2="SolanaMobileWalletAdapterDefaultAuthorizationCache";function w9(){let n;try{n=window.localStorage}catch{}return{clear(){return Fn(this,void 0,void 0,function*(){if(n)try{n.removeItem(l2)}catch{}})},get(){return Fn(this,void 0,void 0,function*(){if(n)try{const t=JSON.parse(n.getItem(l2));if(t&&t.accounts){const e=t.accounts.map(i=>Object.assign(Object.assign({},i),{publicKey:"publicKey"in i?new Uint8Array(Object.values(i.publicKey)):Zw.decode(i.address)}));return Object.assign(Object.assign({},t),{accounts:e})}else return t||void 0}catch{}})},set(t){return Fn(this,void 0,void 0,function*(){if(n)try{n.setItem(l2,JSON.stringify(t))}catch{}})}}}function _9(){return{select(n){return Fn(this,void 0,void 0,function*(){return n.length===1?n[0]:n.includes(Ff)?Ff:n[0]})}}}function Ln(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{d(i.next(u))}catch(h){o(h)}}function l(u){try{d(i.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):r(u.value).then(a,l)}d((i=i.apply(n,[])).next())})}function Pe(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)}function Cr(n,t,e,i,r){if(typeof t=="function"?n!==t||!0:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(n,e),e}const o_="standard:connect",b9="standard:disconnect",v9="standard:events";function u2(n){return window.btoa(String.fromCharCode.call(null,...n))}function x9(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var vi,Gn,Aa,yo,y0,uo,cc,a_,c_,OT,X0,w0,Sa;const _0=PT,E9=64;function S9(n){return"version"in n}function FT(n){switch(n){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return n}}class L9 extends zD{constructor(t,e){super(),vi.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Gn.set(this,void 0),Aa.set(this,!1),yo.set(this,x9()?Qe.Loadable:Qe.Unsupported),y0.set(this,void 0),uo.set(this,void 0),cc.set(this,void 0),a_.set(this,i=>Ln(this,void 0,void 0,function*(){if(i.accounts&&i.accounts.length>0){Pe(this,vi,"m",OT).call(this);const r=yield Pe(this,y0,"f").call(this,i.accounts);r!==Pe(this,uo,"f")&&(Cr(this,uo,r),Cr(this,cc,void 0),this.emit("connect",this.publicKey))}})),Cr(this,y0,i=>Ln(this,void 0,void 0,function*(){var r;const s=yield e.addressSelector.select(i.map(({publicKey:o})=>u2(o)));return(r=i.find(({publicKey:o})=>u2(o)===s))!==null&&r!==void 0?r:i[0]})),Cr(this,Gn,t),Pe(this,Gn,"f").features[v9].on("change",Pe(this,a_,"f")),this.name=Pe(this,Gn,"f").name,this.icon=Pe(this,Gn,"f").icon,this.url=Pe(this,Gn,"f").url}get publicKey(){var t;if(!Pe(this,cc,"f")&&Pe(this,uo,"f"))try{Cr(this,cc,new Zt(Pe(this,uo,"f").publicKey),"f")}catch(e){throw new vu(e instanceof Error&&e?.message||"Unknown error",e)}return(t=Pe(this,cc,"f"))!==null&&t!==void 0?t:null}get connected(){return Pe(this,Gn,"f").connected}get connecting(){return Pe(this,Aa,"f")}get readyState(){return Pe(this,yo,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Ln(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Ln(this,void 0,void 0,function*(){Pe(this,vi,"m",c_).call(this,!0)})}connect(){return Ln(this,void 0,void 0,function*(){Pe(this,vi,"m",c_).call(this)})}performAuthorization(t){return Ln(this,void 0,void 0,function*(){try{const e=yield Pe(this,Gn,"f").cachedAuthorizationResult;return e?(yield Pe(this,Gn,"f").features[o_].connect({silent:!0}),e):(t?yield Pe(this,Gn,"f").features[Mc].signIn(t):yield Pe(this,Gn,"f").features[o_].connect(),yield yield Pe(this,Gn,"f").cachedAuthorizationResult)}catch(e){throw new Gc(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return Ln(this,void 0,void 0,function*(){return yield Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){Cr(this,Aa,!1),Cr(this,cc,void 0),Cr(this,uo,void 0),yield Pe(this,Gn,"f").features[b9].disconnect(),this.emit("disconnect")}))})}signIn(t){return Ln(this,void 0,void 0,function*(){return Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){var e;if(Pe(this,yo,"f")!==Qe.Installed&&Pe(this,yo,"f")!==Qe.Loadable)throw new zc;Cr(this,Aa,!0);try{const i=yield Pe(this,Gn,"f").features[Mc].signIn(Object.assign(Object.assign({},t),{domain:(e=t?.domain)!==null&&e!==void 0?e:window.location.host}));if(i.length>0)return i[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(i){throw new Gc(i instanceof Error&&i.message||"Unknown error",i)}finally{Cr(this,Aa,!1)}}))})}signMessage(t){return Ln(this,void 0,void 0,function*(){return yield Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){const e=Pe(this,vi,"m",X0).call(this);try{return(yield Pe(this,Gn,"f").features[go].signMessage({account:e,message:t}))[0].signature}catch(i){throw new Vm(i?.message,i)}}))})}sendTransaction(t,e,i){return Ln(this,void 0,void 0,function*(){return yield Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){const r=Pe(this,vi,"m",X0).call(this);try{let s=function(){let o;switch(e.commitment){case"confirmed":case"finalized":case"processed":o=e.commitment;break;default:o="finalized"}let a;switch(i?.preflightCommitment){case"confirmed":case"finalized":case"processed":a=i.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(er in Pe(this,Gn,"f").features){const o=FT(Pe(this,Gn,"f").currentAuthorization.chain),[a]=(yield Pe(this,Gn,"f").features[er].signAndSendTransaction({account:r,transaction:t.serialize(),chain:o,options:i?{skipPreflight:i.skipPreflight,maxRetries:i.maxRetries}:void 0})).map((l=>u2(l.signature)));return a}else{const[o]=yield Pe(this,vi,"m",w0).call(this,[t]);if(S9(o))return yield e.sendTransaction(o);{const a=o.serialize();return yield e.sendRawTransaction(a,Object.assign(Object.assign({},i),{preflightCommitment:s()}))}}}catch(s){throw new vo(s?.message,s)}}))})}signTransaction(t){return Ln(this,void 0,void 0,function*(){return yield Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){const[e]=yield Pe(this,vi,"m",w0).call(this,[t]);return e}))})}signAllTransactions(t){return Ln(this,void 0,void 0,function*(){return yield Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){return yield Pe(this,vi,"m",w0).call(this,t)}))})}}Gn=new WeakMap,Aa=new WeakMap,yo=new WeakMap,y0=new WeakMap,uo=new WeakMap,cc=new WeakMap,a_=new WeakMap,vi=new WeakSet,c_=function(t=!1){return Ln(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield Pe(this,vi,"m",Sa).call(this,()=>Ln(this,void 0,void 0,function*(){if(Pe(this,yo,"f")!==Qe.Installed&&Pe(this,yo,"f")!==Qe.Loadable)throw new zc;Cr(this,Aa,!0);try{yield Pe(this,Gn,"f").features[o_].connect({silent:t})}catch(e){throw new Gc(e instanceof Error&&e.message||"Unknown error",e)}finally{Cr(this,Aa,!1)}}))})},OT=function(){Pe(this,yo,"f")!==Qe.Installed&&this.emit("readyStateChange",Cr(this,yo,Qe.Installed))},X0=function(){if(!Pe(this,Gn,"f").isAuthorized||!Pe(this,uo,"f"))throw new ei;return Pe(this,uo,"f")},w0=function(t){return Ln(this,void 0,void 0,function*(){const e=Pe(this,vi,"m",X0).call(this);try{if(jn in Pe(this,Gn,"f").features)return Pe(this,Gn,"f").features[jn].signTransaction(...t.map(i=>({account:e,transaction:i.serialize()}))).then(i=>i.map(r=>{const s=r.signedTransaction,a=s[0]*E9+1;return jm.deserializeMessageVersion(s.slice(a,s.length))==="legacy"?Ke.from(s):wu.deserialize(s)}));throw new Error("Connected wallet does not support signing transactions")}catch(i){throw new ls(i?.message,i)}})},Sa=function(t){return Ln(this,void 0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})};class C9 extends L9{constructor(t){var e;const i=FT((e=t.chain)!==null&&e!==void 0?e:t.cluster);super(new d9({appIdentity:t.appIdentity,authorizationCache:{set:t.authorizationResultCache.set,get:()=>Ln(this,void 0,void 0,function*(){return yield t.authorizationResultCache.get()}),clear:t.authorizationResultCache.clear},chains:[i],chainSelector:_9(),onWalletNotFound:()=>Ln(this,void 0,void 0,function*(){t.onWalletNotFound(this)})}),{addressSelector:t.addressSelector,chain:i})}}class A9 extends C9{}function I9(){return{select(n){return Ln(this,void 0,void 0,function*(){return n[0]})}}}function T9(){return w9()}function k9(n){return Ln(this,void 0,void 0,function*(){return y9()})}function R9(){return k9}var N9=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},M9=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},b0;function B9(n){const t=({register:e})=>e(n);try{window.dispatchEvent(new P9(t))}catch(e){console.error(`wallet-standard:register-wallet event could not be dispatched
`,e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>t(e))}catch(e){console.error(`wallet-standard:app-ready event listener could not be added
`,e)}}class P9 extends Event{get detail(){return N9(this,b0,"f")}get type(){return"wallet-standard:register-wallet"}constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),b0.set(this,void 0),M9(this,b0,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}b0=new WeakMap;function O9(n,t){if(n===t)return!0;const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function F9(n){if(n.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let d=0;d<t.length;d++)t[d]=255;for(let d=0;d<n.length;d++){const u=n.charAt(d),h=u.charCodeAt(0);if(t[h]!==255)throw new TypeError(u+" is ambiguous");t[h]=d}const e=n.length,i=n.charAt(0),r=Math.log(e)/Math.log(256),s=Math.log(256)/Math.log(e);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let u=0,h=0,m=0;const p=d.length;for(;m!==p&&d[m]===0;)m++,u++;const E=(p-m)*s+1>>>0,C=new Uint8Array(E);for(;m!==p;){let x=d[m],P=0;for(let W=E-1;(x!==0||P<h)&&W!==-1;W--,P++)x+=256*C[W]>>>0,C[W]=x%e>>>0,x=x/e>>>0;if(x!==0)throw new Error("Non-zero carry");h=P,m++}let v=E-h;for(;v!==E&&C[v]===0;)v++;let A=i.repeat(u);for(;v<E;++v)A+=n.charAt(C[v]);return A}function a(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let u=0,h=0,m=0;for(;d[u]===i;)h++,u++;const p=(d.length-u)*r+1>>>0,E=new Uint8Array(p);for(;u<d.length;){const x=d.charCodeAt(u);if(x>255)return;let P=t[x];if(P===255)return;let W=0;for(let K=p-1;(P!==0||W<m)&&K!==-1;K--,W++)P+=e*E[K]>>>0,E[K]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");m=W,u++}let C=p-m;for(;C!==p&&E[C]===0;)C++;const v=new Uint8Array(h+(p-C));let A=h;for(;C!==p;)v[A++]=E[C++];return v}function l(d){const u=a(d);if(u)return u;throw new Error("Non-base"+e+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var j9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const U9=F9(j9);var Ae=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},ai=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},Ni,yr,Sc,Lc,lc,sf,J0,fn,tm,l_,v0,u_,df,d_,KL,ZL,QL,YL;class D9 extends mT{get name(){return Ae(this,fn,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return Ae(this,fn,"f").icon}get readyState(){return Ae(this,tm,"f")}get publicKey(){return Ae(this,Sc,"f")}get connecting(){return Ae(this,Lc,"f")}get supportedTransactionVersions(){return Ae(this,J0,"f")}get wallet(){return Ae(this,fn,"f")}get standard(){return!0}constructor({wallet:t}){super(),Ni.add(this),yr.set(this,void 0),Sc.set(this,void 0),Lc.set(this,void 0),lc.set(this,void 0),sf.set(this,void 0),J0.set(this,void 0),fn.set(this,void 0),tm.set(this,typeof window>"u"||typeof document>"u"?Qe.Unsupported:Qe.Installed),d_.set(this,e=>{if("accounts"in e){const i=Ae(this,fn,"f").accounts[0];Ae(this,yr,"f")&&!Ae(this,lc,"f")&&i!==Ae(this,yr,"f")&&(i?Ae(this,Ni,"m",v0).call(this,i):(this.emit("error",new nv),Ae(this,Ni,"m",u_).call(this)))}"features"in e&&Ae(this,Ni,"m",df).call(this)}),ai(this,fn,t,"f"),ai(this,yr,null,"f"),ai(this,Sc,null,"f"),ai(this,Lc,!1,"f"),ai(this,lc,!1,"f"),ai(this,sf,Ae(this,fn,"f").features[$m].on("change",Ae(this,d_,"f")),"f"),Ae(this,Ni,"m",df).call(this)}destroy(){ai(this,yr,null,"f"),ai(this,Sc,null,"f"),ai(this,Lc,!1,"f"),ai(this,lc,!1,"f");const t=Ae(this,sf,"f");t&&(ai(this,sf,null,"f"),t())}async autoConnect(){return Ae(this,Ni,"m",l_).call(this,{silent:!0})}async connect(){return Ae(this,Ni,"m",l_).call(this)}async disconnect(){if(Q0 in Ae(this,fn,"f").features)try{ai(this,lc,!0,"f"),await Ae(this,fn,"f").features[Q0].disconnect()}catch(t){this.emit("error",new iv(t?.message,t))}finally{ai(this,lc,!1,"f")}Ae(this,Ni,"m",u_).call(this)}async sendTransaction(t,e,i={}){try{const r=Ae(this,yr,"f");if(!r)throw new ei;let s;if(er in Ae(this,fn,"f").features)if(r.features.includes(er))s=er;else if(jn in Ae(this,fn,"f").features&&r.features.includes(jn))s=jn;else throw new vc;else if(jn in Ae(this,fn,"f").features){if(!r.features.includes(jn))throw new vc;s=jn}else throw new $l;const o=mz(e.rpcEndpoint);if(!r.chains.includes(o))throw new vo;try{const{signers:a,...l}=i;let d;if(xo(t)?(a?.length&&t.sign(a),d=t.serialize()):(t=await this.prepareTransaction(t,e,l),a?.length&&t.partialSign(...a),d=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===er){const[u]=await Ae(this,fn,"f").features[er].signAndSendTransaction({account:r,chain:o,transaction:d,options:{preflightCommitment:i2(l.preflightCommitment||e.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return U9.encode(u.signature)}else{const[u]=await Ae(this,fn,"f").features[jn].signTransaction({account:r,chain:o,transaction:d,options:{preflightCommitment:i2(l.preflightCommitment||e.commitment),minContextSlot:l.minContextSlot}});return await e.sendRawTransaction(u.signedTransaction,{...l,preflightCommitment:i2(l.preflightCommitment||e.commitment)})}}catch(a){throw a instanceof Si?a:new vo(a?.message,a)}}catch(r){throw this.emit("error",r),r}}}yr=new WeakMap,Sc=new WeakMap,Lc=new WeakMap,lc=new WeakMap,sf=new WeakMap,J0=new WeakMap,fn=new WeakMap,tm=new WeakMap,d_=new WeakMap,Ni=new WeakSet,l_=async function(t){try{if(this.connected||this.connecting)return;if(Ae(this,tm,"f")!==Qe.Installed)throw new zc;if(ai(this,Lc,!0,"f"),!Ae(this,fn,"f").accounts.length)try{await Ae(this,fn,"f").features[qm].connect(t)}catch(i){throw new Gc(i?.message,i)}const e=Ae(this,fn,"f").accounts[0];if(!e)throw new vc;Ae(this,Ni,"m",v0).call(this,e)}catch(e){throw this.emit("error",e),e}finally{ai(this,Lc,!1,"f")}},v0=function(t){let e;try{e=new Zt(t.address)}catch(i){throw new vu(i?.message,i)}ai(this,yr,t,"f"),ai(this,Sc,e,"f"),Ae(this,Ni,"m",df).call(this),this.emit("connect",e)},u_=function(){ai(this,yr,null,"f"),ai(this,Sc,null,"f"),Ae(this,Ni,"m",df).call(this),this.emit("disconnect")},df=function(){const t=er in Ae(this,fn,"f").features?Ae(this,fn,"f").features[er].supportedTransactionVersions:Ae(this,fn,"f").features[jn].supportedTransactionVersions;ai(this,J0,O9(t,["legacy"])?null:new Set(t),"f"),jn in Ae(this,fn,"f").features&&Ae(this,yr,"f")?.features.includes(jn)?(this.signTransaction=Ae(this,Ni,"m",KL),this.signAllTransactions=Ae(this,Ni,"m",ZL)):(delete this.signTransaction,delete this.signAllTransactions),go in Ae(this,fn,"f").features&&Ae(this,yr,"f")?.features.includes(go)?this.signMessage=Ae(this,Ni,"m",QL):delete this.signMessage,Mc in Ae(this,fn,"f").features?this.signIn=Ae(this,Ni,"m",YL):delete this.signIn},KL=async function(t){try{const e=Ae(this,yr,"f");if(!e)throw new ei;if(!(jn in Ae(this,fn,"f").features))throw new $l;if(!e.features.includes(jn))throw new vc;try{const r=(await Ae(this,fn,"f").features[jn].signTransaction({account:e,transaction:xo(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return xo(t)?wu.deserialize(r):Ke.from(r)}catch(i){throw i instanceof Si?i:new ls(i?.message,i)}}catch(e){throw this.emit("error",e),e}},ZL=async function(t){try{const e=Ae(this,yr,"f");if(!e)throw new ei;if(!(jn in Ae(this,fn,"f").features))throw new $l;if(!e.features.includes(jn))throw new vc;try{const i=await Ae(this,fn,"f").features[jn].signTransaction(...t.map(r=>({account:e,transaction:xo(r)?r.serialize():new Uint8Array(r.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((r,s)=>{const o=i[s].signedTransaction;return xo(r)?wu.deserialize(o):Ke.from(o)})}catch(i){throw new ls(i?.message,i)}}catch(e){throw this.emit("error",e),e}},QL=async function(t){try{const e=Ae(this,yr,"f");if(!e)throw new ei;if(!(go in Ae(this,fn,"f").features))throw new $l;if(!e.features.includes(go))throw new vc;try{return(await Ae(this,fn,"f").features[go].signMessage({account:e,message:t}))[0].signature}catch(i){throw new Vm(i?.message,i)}}catch(e){throw this.emit("error",e),e}},YL=async function(t={}){try{if(!(Mc in Ae(this,fn,"f").features))throw new $l;let e;try{[e]=await Ae(this,fn,"f").features[Mc].signIn(t)}catch(i){throw new dL(i?.message,i)}if(!e)throw new dL;return Ae(this,Ni,"m",v0).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const z9=GD;var G9=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},W9=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},x0;let Ar;const Zm=new Set;function V9(n){ff=void 0,Zm.add(n)}function q9(n){ff=void 0,Zm.delete(n)}const Hl={};function $9(){if(Ar||(Ar=Object.freeze({register:XL,get:H9,on:K9}),typeof window>"u"))return Ar;const n=Object.freeze({register:XL});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(n))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new Z9(n))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return Ar}function XL(...n){return n=n.filter(t=>!Zm.has(t)),n.length?(n.forEach(t=>V9(t)),Hl.register?.forEach(t=>f_(()=>t(...n))),function(){n.forEach(e=>q9(e)),Hl.unregister?.forEach(e=>f_(()=>e(...n)))}):()=>{}}let ff;function H9(){return ff||(ff=[...Zm]),ff}function K9(n,t){return Hl[n]?.push(t)||(Hl[n]=[t]),function(){Hl[n]=Hl[n]?.filter(i=>t!==i)}}function f_(n){try{n()}catch(t){console.error(t)}}class Z9 extends Event{get detail(){return G9(this,x0,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),x0.set(this,void 0),W9(this,x0,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}x0=new WeakMap;function Q9(){if(Ar||(Ar=$9(),typeof window>"u"))return Ar;const n=window.navigator.wallets||[];if(!Array.isArray(n))return console.error("window.navigator.wallets is not an array"),Ar;const{register:t}=Ar,e=(...i)=>i.forEach(r=>f_(()=>r({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),Ar}return e(...n),Ar}function Y9(n){const t=JL(()=>new Set),{get:e,on:i}=JL(()=>Q9()),[r,s]=rt.useState(()=>tC(e()));rt.useEffect(()=>{const a=[i("register",(...l)=>s(d=>[...d,...tC(l)])),i("unregister",(...l)=>s(d=>d.filter(u=>l.some(h=>h===u.wallet))))];return()=>a.forEach(l=>l())},[i]);const o=X9(r);return rt.useEffect(()=>{if(!o)return;const a=new Set(r);new Set(o.filter(d=>!a.has(d))).forEach(d=>d.destroy())},[o,r]),rt.useEffect(()=>()=>r.forEach(a=>a.destroy()),[]),rt.useMemo(()=>[...r,...n.filter(({name:a})=>r.some(l=>l.name===a)?(t.has(a)||(t.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[r,n,t])}function JL(n){const t=rt.useRef(void 0);return t.current===void 0&&(t.current={value:n()}),t.current.value}function X9(n){const t=rt.useRef(void 0);return rt.useEffect(()=>{t.current=n}),t.current}function tC(n){return n.filter(z9).map(t=>new D9({wallet:t}))}var ru;(function(n){n[n.DESKTOP_WEB=0]="DESKTOP_WEB",n[n.MOBILE_WEB=1]="MOBILE_WEB"})(ru||(ru={}));function J9(n){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(n)}function tG({adapters:n,userAgentString:t}){return n.some(e=>e.name!==_0&&e.readyState===Qe.Installed)?ru.DESKTOP_WEB:t&&/android/i.test(t)&&!J9(t)?ru.MOBILE_WEB:ru.DESKTOP_WEB}function eG(n){return n?/devnet/i.test(n)?"devnet":/testnet/i.test(n)?"testnet":"mainnet-beta":"mainnet-beta"}function nG({children:n,wallets:t,adapter:e,isUnloadingRef:i,onAutoConnectRequest:r,onConnectError:s,onError:o,onSelectWallet:a}){const l=rt.useRef(!1),[d,u]=rt.useState(!1),h=rt.useRef(!1),[m,p]=rt.useState(!1),[E,C]=rt.useState(()=>e?.publicKey??null),[v,A]=rt.useState(()=>e?.connected??!1),x=rt.useRef(o);rt.useEffect(()=>(x.current=o,()=>{x.current=void 0}),[o]);const P=rt.useRef((T,V)=>(i.current||(x.current?x.current(T,V):(console.error(T,V),T instanceof zc&&typeof window<"u"&&V&&window.open(V.url,"_blank"))),T)),[W,K]=rt.useState(()=>t.map(T=>({adapter:T,readyState:T.readyState})).filter(({readyState:T})=>T!==Qe.Unsupported));rt.useEffect(()=>{K(V=>t.map((Y,Q)=>{const $=V[Q];return $&&$.adapter===Y&&$.readyState===Y.readyState?$:{adapter:Y,readyState:Y.readyState}}).filter(({readyState:Y})=>Y!==Qe.Unsupported));function T(V){K(Y=>{const Q=Y.findIndex(({adapter:F})=>F===this);if(Q===-1)return Y;const{adapter:$}=Y[Q];return[...Y.slice(0,Q),{adapter:$,readyState:V},...Y.slice(Q+1)].filter(({readyState:F})=>F!==Qe.Unsupported)})}return t.forEach(V=>V.on("readyStateChange",T,V)),()=>{t.forEach(V=>V.off("readyStateChange",T,V))}},[e,t]);const j=rt.useMemo(()=>W.find(T=>T.adapter===e)??null,[e,W]);rt.useEffect(()=>{if(!e)return;const T=Q=>{C(Q),l.current=!1,u(!1),A(!0),h.current=!1,p(!1)},V=()=>{i.current||(C(null),l.current=!1,u(!1),A(!1),h.current=!1,p(!1))},Y=Q=>{P.current(Q,e)};return e.on("connect",T),e.on("disconnect",V),e.on("error",Y),()=>{e.off("connect",T),e.off("disconnect",V),e.off("error",Y),V()}},[e,i]);const b=rt.useRef(!1);rt.useEffect(()=>()=>{b.current=!1},[e]),rt.useEffect(()=>{b.current||l.current||v||!r||!(j?.readyState===Qe.Installed||j?.readyState===Qe.Loadable)||(l.current=!0,u(!0),b.current=!0,(async function(){try{await r()}catch{s()}finally{u(!1),l.current=!1}})())},[v,r,s,j]);const B=rt.useCallback(async(T,V,Y)=>{if(!e)throw P.current(new fL);if(!v)throw P.current(new ei,e);return await e.sendTransaction(T,V,Y)},[e,v]),J=rt.useMemo(()=>e&&"signTransaction"in e?async T=>{if(!v)throw P.current(new ei,e);return await e.signTransaction(T)}:void 0,[e,v]),it=rt.useMemo(()=>e&&"signAllTransactions"in e?async T=>{if(!v)throw P.current(new ei,e);return await e.signAllTransactions(T)}:void 0,[e,v]),st=rt.useMemo(()=>e&&"signMessage"in e?async T=>{if(!v)throw P.current(new ei,e);return await e.signMessage(T)}:void 0,[e,v]),z=rt.useMemo(()=>e&&"signIn"in e?async T=>await e.signIn(T):void 0,[e]),I=rt.useCallback(async()=>{if(l.current||h.current||j?.adapter.connected)return;if(!j)throw P.current(new fL);const{adapter:T,readyState:V}=j;if(!(V===Qe.Installed||V===Qe.Loadable))throw P.current(new zc,T);l.current=!0,u(!0);try{await T.connect()}catch(Y){throw s(),Y}finally{u(!1),l.current=!1}},[s,j]),w=rt.useCallback(async()=>{if(!h.current&&e){h.current=!0,p(!0);try{await e.disconnect()}finally{p(!1),h.current=!1}}},[e]);return Mt.createElement(wT.Provider,{value:{autoConnect:!!r,wallets:W,wallet:j,publicKey:E,connected:v,connecting:d,disconnecting:m,select:a,connect:I,disconnect:w,sendTransaction:B,signTransaction:J,signAllTransactions:it,signMessage:st,signIn:z}},n)}let d2;function iG(){return d2===void 0&&(d2=globalThis.navigator?.userAgent??null),d2}function eC(n){const t=iG();return tG({adapters:n,userAgentString:t})===ru.MOBILE_WEB}function rG(){const n=globalThis.location;if(n)return`${n.protocol}//${n.host}`}function sG({children:n,wallets:t,autoConnect:e,localStorageKey:i="walletName",onError:r}){const{connection:s}=Hm(),o=Y9(t),a=rt.useMemo(()=>{if(!eC(o))return null;const x=o.find(P=>P.name===_0);return x||new A9({addressSelector:I9(),appIdentity:{uri:rG()},authorizationResultCache:T9(),cluster:eG(s?.rpcEndpoint),onWalletNotFound:R9()})},[o,s?.rpcEndpoint]),l=rt.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[d,u]=qD(i,null),h=rt.useMemo(()=>l.find(x=>x.name===d)??null,[l,d]),m=rt.useCallback(x=>{d!==x&&(h&&h.name!==_0&&h.disconnect(),u(x))},[h,u,d]);rt.useEffect(()=>{if(!h)return;function x(){C.current||u(null)}return h.on("disconnect",x),()=>{h.off("disconnect",x)}},[h,o,u,d]);const p=rt.useRef(!1),E=rt.useMemo(()=>{if(!(!e||!h))return async()=>{(e===!0||await e(h))&&(p.current?await h.connect():await h.autoConnect())}},[e,h]),C=rt.useRef(!1);rt.useEffect(()=>{if(d===_0&&eC(o)){C.current=!1;return}function x(){C.current=!0}return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[o,d]);const v=rt.useCallback(()=>{h&&m(null)},[h,m]),A=rt.useCallback(x=>{p.current=!0,m(x)},[m]);return Mt.createElement(nG,{wallets:l,adapter:h,isUnloadingRef:C,onAutoConnectRequest:E,onConnectError:v,onError:r,onSelectWallet:A},n)}const jT={setVisible(n){console.error(UT("call","setVisible"))},visible:!1};Object.defineProperty(jT,"visible",{get(){return console.error(UT("read","visible")),!1}});function UT(n,t){return`You have tried to  ${n} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const DT=rt.createContext(jT);function zT(){return rt.useContext(DT)}function oG({onSelectWallet:n}){const{connect:t,connected:e,connecting:i,disconnect:r,disconnecting:s,publicKey:o,select:a,wallet:l,wallets:d}=Nr();let u;i?u="connecting":e?u="connected":s?u="disconnecting":l?u="has-wallet":u="no-wallet";const h=rt.useCallback(()=>{t().catch(()=>{})},[t]),m=rt.useCallback(()=>{r().catch(()=>{})},[r]),p=rt.useCallback(()=>{n({onSelectWallet:a,wallets:d})},[n,a,d]);return{buttonState:u,onConnect:u==="has-wallet"?h:void 0,onDisconnect:u!=="disconnecting"&&u!=="no-wallet"?m:void 0,onSelectWallet:p,publicKey:o??void 0,walletIcon:l?.adapter.icon,walletName:l?.adapter.name}}const GT=n=>Mt.createElement("button",{className:`wallet-adapter-button ${n.className||""}`,disabled:n.disabled,style:n.style,onClick:n.onClick,tabIndex:n.tabIndex||0,type:"button"},n.startIcon&&Mt.createElement("i",{className:"wallet-adapter-button-start-icon"},n.startIcon),n.children,n.endIcon&&Mt.createElement("i",{className:"wallet-adapter-button-end-icon"},n.endIcon)),WT=({wallet:n,...t})=>n&&Mt.createElement("img",{src:n.adapter.icon,alt:`${n.adapter.name} icon`,...t});function aG({walletIcon:n,walletName:t,...e}){return Mt.createElement(GT,{...e,className:"wallet-adapter-button-trigger",startIcon:n&&t?Mt.createElement(WT,{wallet:{adapter:{icon:n,name:t}}}):void 0})}function cG({children:n,labels:t,...e}){const{setVisible:i}=zT(),{buttonState:r,onConnect:s,onDisconnect:o,publicKey:a,walletIcon:l,walletName:d}=oG({onSelectWallet(){i(!0)}}),[u,h]=rt.useState(!1),[m,p]=rt.useState(!1),E=rt.useRef(null);rt.useEffect(()=>{const v=A=>{const x=E.current;!x||x.contains(A.target)||p(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const C=rt.useMemo(()=>{if(n)return n;if(a){const v=a.toBase58();return v.slice(0,4)+".."+v.slice(-4)}else return r==="connecting"||r==="has-wallet"?t[r]:t["no-wallet"]},[r,n,t,a]);return Mt.createElement("div",{className:"wallet-adapter-dropdown"},Mt.createElement(aG,{...e,"aria-expanded":m,style:{pointerEvents:m?"none":"auto",...e.style},onClick:()=>{switch(r){case"no-wallet":i(!0);break;case"has-wallet":s&&s();break;case"connected":p(!0);break}},walletIcon:l,walletName:d},C),Mt.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${m&&"wallet-adapter-dropdown-list-active"}`,ref:E,role:"menu"},a?Mt.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),h(!0),setTimeout(()=>h(!1),400)},role:"menuitem"},u?t.copied:t["copy-address"]):null,Mt.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{i(!0),p(!1)},role:"menuitem"},t["change-wallet"]),o?Mt.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),p(!1)},role:"menuitem"},t.disconnect):null))}const nC=({id:n,children:t,expanded:e=!1})=>{const i=rt.useRef(null),r=rt.useRef(!0),s="height 250ms ease-out",o=()=>{const l=i.current;l&&requestAnimationFrame(()=>{l.style.height=l.scrollHeight+"px"})},a=()=>{const l=i.current;l&&requestAnimationFrame(()=>{l.style.height=l.offsetHeight+"px",l.style.overflow="hidden",requestAnimationFrame(()=>{l.style.height="0"})})};return rt.useLayoutEffect(()=>{e?o():a()},[e]),rt.useLayoutEffect(()=>{const l=i.current;if(!l)return;function d(){l&&(l.style.overflow=e?"initial":"hidden",e&&(l.style.height="auto"))}function u(h){l&&h.target===l&&h.propertyName==="height"&&d()}return r.current&&(d(),r.current=!1),l.addEventListener("transitionend",u),()=>l.removeEventListener("transitionend",u)},[e]),Mt.createElement("div",{className:"wallet-adapter-collapse",id:n,ref:i,role:"region",style:{height:0,transition:r.current?void 0:s}},t)},f2=({handleClick:n,tabIndex:t,wallet:e})=>Mt.createElement("li",null,Mt.createElement(GT,{onClick:n,startIcon:Mt.createElement(WT,{wallet:e}),tabIndex:t},e.adapter.name,e.readyState===Qe.Installed&&Mt.createElement("span",null,"Detected"))),lG=()=>Mt.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Mt.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),Mt.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),Mt.createElement("g",{clipPath:"url(#clip0_880_5115)"},Mt.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),Mt.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),Mt.createElement("defs",null,Mt.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Mt.createElement("stop",{stopColor:"#9945FF"}),Mt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Mt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Mt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Mt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Mt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Mt.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Mt.createElement("stop",{stopColor:"#9945FF"}),Mt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Mt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Mt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Mt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Mt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Mt.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},Mt.createElement("stop",{stopColor:"#9945FF"}),Mt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Mt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Mt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Mt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Mt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Mt.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},Mt.createElement("stop",{stopColor:"#9945FF"}),Mt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Mt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Mt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Mt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Mt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Mt.createElement("clipPath",{id:"clip0_880_5115"},Mt.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),uG=({className:n="",container:t="body"})=>{const e=rt.useRef(null),{wallets:i,select:r}=Nr(),{setVisible:s}=zT(),[o,a]=rt.useState(!1),[l,d]=rt.useState(!1),[u,h]=rt.useState(null),[m,p]=rt.useMemo(()=>{const P=[],W=[];for(const K of i)K.readyState===Qe.Installed?P.push(K):W.push(K);return P.length?[P,W]:[W,[]]},[i]),E=rt.useCallback(()=>{d(!1),setTimeout(()=>s(!1),150)},[s]),C=rt.useCallback(P=>{P.preventDefault(),E()},[E]),v=rt.useCallback((P,W)=>{r(W),C(P)},[r,C]),A=rt.useCallback(()=>a(!o),[o]),x=rt.useCallback(P=>{const W=e.current;if(!W)return;const K=W.querySelectorAll("button"),j=K[0],b=K[K.length-1];P.shiftKey?document.activeElement===j&&(b.focus(),P.preventDefault()):document.activeElement===b&&(j.focus(),P.preventDefault())},[e]);return rt.useLayoutEffect(()=>{const P=K=>{K.key==="Escape"?E():K.key==="Tab"&&x(K)},{overflow:W}=window.getComputedStyle(document.body);return setTimeout(()=>d(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",P,!1),()=>{document.body.style.overflow=W,window.removeEventListener("keydown",P,!1)}},[E,x]),rt.useLayoutEffect(()=>h(document.querySelector(t)),[t]),u&&Cb.createPortal(Mt.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${l&&"wallet-adapter-modal-fade-in"} ${n}`,ref:e,role:"dialog"},Mt.createElement("div",{className:"wallet-adapter-modal-container"},Mt.createElement("div",{className:"wallet-adapter-modal-wrapper"},Mt.createElement("button",{onClick:C,className:"wallet-adapter-modal-button-close"},Mt.createElement("svg",{width:"14",height:"14"},Mt.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),m.length?Mt.createElement(Mt.Fragment,null,Mt.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),Mt.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(P=>Mt.createElement(f2,{key:P.adapter.name,handleClick:W=>v(W,P.adapter.name),wallet:P})),p.length?Mt.createElement(nC,{expanded:o,id:"wallet-adapter-modal-collapse"},p.map(P=>Mt.createElement(f2,{key:P.adapter.name,handleClick:W=>v(W,P.adapter.name),tabIndex:o?0:-1,wallet:P}))):null),p.length?Mt.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:A,tabIndex:0},Mt.createElement("span",null,o?"Less ":"More ","options"),Mt.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Mt.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):Mt.createElement(Mt.Fragment,null,Mt.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),Mt.createElement("div",{className:"wallet-adapter-modal-middle"},Mt.createElement(lG,null)),p.length?Mt.createElement(Mt.Fragment,null,Mt.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:A,tabIndex:0},Mt.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),Mt.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Mt.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),Mt.createElement(nC,{expanded:o,id:"wallet-adapter-modal-collapse"},Mt.createElement("ul",{className:"wallet-adapter-modal-list"},p.map(P=>Mt.createElement(f2,{key:P.adapter.name,handleClick:W=>v(W,P.adapter.name),tabIndex:o?0:-1,wallet:P}))))):null))),Mt.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:C})),u)},dG=({children:n,...t})=>{const[e,i]=rt.useState(!1);return Mt.createElement(DT.Provider,{value:{visible:e,setVisible:i}},n,e&&Mt.createElement(uG,{...t}))},fG={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function hG(n){return Mt.createElement(cG,{...n,labels:fG})}const pG="modulepreload",mG=function(n){return"/"+n},iC={},Qm=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=o(e.map(d=>{if(d=mG(d),d in iC)return;iC[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":pG,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,E)=>{m.addEventListener("load",p),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},gG="Phantom";class yG extends rv{constructor(t={}){super(),this.name=gG,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Qe.Unsupported:Qe.NotDetected,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new nv),this.emit("disconnect"))},this._accountChanged=e=>{const i=this._publicKey;if(i){try{e=new Zt(e.toBytes())}catch(r){this.emit("error",new vu(r?.message,r));return}i.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Qe.Unsupported&&($w()?(this._readyState=Qe.Loadable,this.emit("readyStateChange",this._readyState)):gT(()=>window.phantom?.solana?.isPhantom||window.solana?.isPhantom?(this._readyState=Qe.Installed,this.emit("readyStateChange",this._readyState),!0):!1))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Qe.Installed&&await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this.readyState===Qe.Loadable){const i=encodeURIComponent(window.location.href),r=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${r}`;return}if(this.readyState!==Qe.Installed)throw new zc;this._connecting=!0;const t=window.phantom?.solana||window.solana;if(!t.isConnected)try{await t.connect()}catch(i){throw new Gc(i?.message,i)}if(!t.publicKey)throw new vc;let e;try{e=new Zt(t.publicKey.toBytes())}catch(i){throw new vu(i?.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=e,this.emit("connect",e)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new iv(e?.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,i={}){try{const r=this._wallet;if(!r)throw new ei;try{const{signers:s,...o}=i;xo(t)?s?.length&&t.sign(s):(t=await this.prepareTransaction(t,e,o),s?.length&&t.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||e.commitment;const{signature:a}=await r.signAndSendTransaction(t,o);return a}catch(s){throw s instanceof Si?s:new vo(s?.message,s)}}catch(r){throw this.emit("error",r),r}}async signTransaction(t){try{const e=this._wallet;if(!e)throw new ei;try{return await e.signTransaction(t)||t}catch(i){throw new ls(i?.message,i)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const e=this._wallet;if(!e)throw new ei;try{return await e.signAllTransactions(t)||t}catch(i){throw new ls(i?.message,i)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const e=this._wallet;if(!e)throw new ei;try{const{signature:i}=await e.signMessage(t);return i}catch(i){throw new Vm(i?.message,i)}}catch(e){throw this.emit("error",e),e}}}const wG="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var vn=function(n,t,e,i){if(e==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?i:e==="a"?i.call(n):i?i.value:t.get(n)},_G=function(n,t,e,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,e):r?r.value=e:t.set(n,e),e},E0,Cc,h_,p_,m_,qi,g_,VT,qT,y_,w_,__,b_,v_;class bG{constructor(){E0.add(this),Cc.set(this,{}),h_.set(this,"1.0.0"),p_.set(this,"MetaMask"),m_.set(this,wG),qi.set(this,null),g_.set(this,(t,e)=>(vn(this,Cc,"f")[t]?.push(e)||(vn(this,Cc,"f")[t]=[e]),()=>vn(this,E0,"m",qT).call(this,t,e))),y_.set(this,async()=>{if(!vn(this,qi,"f")){let t;try{t=(await Qm(async()=>{const{default:e}=await import("./index-DBUBalzM.js");return{default:e}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}_G(this,qi,new t,"f"),vn(this,qi,"f").on("standard_change",e=>vn(this,E0,"m",VT).call(this,"change",e))}return this.accounts.length||await vn(this,qi,"f").connect(),{accounts:this.accounts}}),w_.set(this,async()=>{vn(this,qi,"f")&&await vn(this,qi,"f").disconnect()}),__.set(this,async(...t)=>{if(!vn(this,qi,"f"))throw new ei;return await vn(this,qi,"f").standardSignAndSendTransaction(...t)}),b_.set(this,async(...t)=>{if(!vn(this,qi,"f"))throw new ei;return await vn(this,qi,"f").standardSignTransaction(...t)}),v_.set(this,async(...t)=>{if(!vn(this,qi,"f"))throw new ei;return await vn(this,qi,"f").standardSignMessage(...t)})}get version(){return vn(this,h_,"f")}get name(){return vn(this,p_,"f")}get icon(){return vn(this,m_,"f")}get chains(){return[Ff,ET,ST]}get features(){return{[qm]:{version:"1.0.0",connect:vn(this,y_,"f")},[Q0]:{version:"1.0.0",disconnect:vn(this,w_,"f")},[$m]:{version:"1.0.0",on:vn(this,g_,"f")},[er]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:vn(this,__,"f")},[jn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:vn(this,b_,"f")},[go]:{version:"1.0.0",signMessage:vn(this,v_,"f")}}}get accounts(){return vn(this,qi,"f")?vn(this,qi,"f").standardAccounts:[]}}Cc=new WeakMap,h_=new WeakMap,p_=new WeakMap,m_=new WeakMap,qi=new WeakMap,g_=new WeakMap,y_=new WeakMap,w_=new WeakMap,__=new WeakMap,b_=new WeakMap,v_=new WeakMap,E0=new WeakSet,VT=function(t,...e){vn(this,Cc,"f")[t]?.forEach(i=>i.apply(null,e))},qT=function(t,e){vn(this,Cc,"f")[t]=vn(this,Cc,"f")[t]?.filter(i=>e!==i)};let rC=!1;function vG(){rC||(B9(new bG),rC=!0)}async function xG(){const n="solflare-detect-metamask";function t(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:n,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function e(i){const r=i.data;r?.target==="metamask-inpage"&&r.data?.name==="metamask-provider"&&(r.data.data?.id===n?(window.removeEventListener("message",e),r.data.data.error||vG()):t())}window.addEventListener("message",e),window.setTimeout(()=>window.removeEventListener("message",e),5e3),t()}const EG="Solflare";class SG extends rv{constructor(t={}){super(),this.name=EG,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Qe.Unsupported:Qe.Loadable,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new nv),this.emit("disconnect"))},this._accountChanged=e=>{if(!e)return;const i=this._publicKey;if(i){try{e=new Zt(e.toBytes())}catch(r){this.emit("error",new vu(r?.message,r));return}i.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=t,this._readyState!==Qe.Unsupported&&(gT(()=>window.solflare?.isSolflare||window.SolflareApp?(this._readyState=Qe.Installed,this.emit("readyStateChange",this._readyState),!0):!1),xG())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.connected}get readyState(){return this._readyState}async autoConnect(){this.readyState===Qe.Loadable&&$w()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Qe.Loadable&&this._readyState!==Qe.Installed)throw new zc;if(this.readyState===Qe.Loadable&&$w()){const r=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${r}?ref=${s}`;return}let t;try{t=(await Qm(async()=>{const{default:r}=await import("./index-CSKIxZLl.js");return{default:r}},[])).default}catch(r){throw new UD(r?.message,r)}let e;try{e=new t({network:this._config.network})}catch(r){throw new $l(r?.message,r)}if(this._connecting=!0,!e.connected)try{await e.connect()}catch(r){throw new Gc(r?.message,r)}if(!e.publicKey)throw new Gc;let i;try{i=new Zt(e.publicKey.toBytes())}catch(r){throw new vu(r?.message,r)}e.on("disconnect",this._disconnected),e.on("accountChanged",this._accountChanged),this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new iv(e?.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,i={}){try{const r=this._wallet;if(!r)throw new ei;try{const{signers:s,...o}=i;return xo(t)?s?.length&&t.sign(s):(t=await this.prepareTransaction(t,e,o),s?.length&&t.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||e.commitment,await r.signAndSendTransaction(t,o)}catch(s){throw s instanceof Si?s:new vo(s?.message,s)}}catch(r){throw this.emit("error",r),r}}async signTransaction(t){try{const e=this._wallet;if(!e)throw new ei;try{return await e.signTransaction(t)||t}catch(i){throw new ls(i?.message,i)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const e=this._wallet;if(!e)throw new ei;try{return await e.signAllTransactions(t)||t}catch(i){throw new ls(i?.message,i)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const e=this._wallet;if(!e)throw new ei;try{return await e.signMessage(t,"utf8")}catch(i){throw new Vm(i?.message,i)}}catch(e){throw this.emit("error",e),e}}}var LG=n=>{switch(n){case"success":return IG;case"info":return kG;case"warning":return TG;case"error":return RG;default:return null}},CG=Array(12).fill(0),AG=({visible:n,className:t})=>Mt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":n},Mt.createElement("div",{className:"sonner-spinner"},CG.map((e,i)=>Mt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),IG=Mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Mt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),TG=Mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Mt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kG=Mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Mt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),RG=Mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Mt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),NG=Mt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Mt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Mt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),MG=()=>{let[n,t]=Mt.useState(document.hidden);return Mt.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),n},x_=1,BG=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let t=this.subscribers.indexOf(n);this.subscribers.splice(t,1)}),this.publish=n=>{this.subscribers.forEach(t=>t(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var t;let{message:e,...i}=n,r=typeof n?.id=="number"||((t=n.id)==null?void 0:t.length)>0?n.id:x_++,s=this.toasts.find(a=>a.id===r),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),s?this.toasts=this.toasts.map(a=>a.id===r?(this.publish({...a,...n,id:r,title:e}),{...a,...n,id:r,dismissible:o,title:e}):a):this.addToast({title:e,...i,dismissible:o,id:r}),r},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(t=>{this.subscribers.forEach(e=>e({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:n,dismiss:!0})),n),this.message=(n,t)=>this.create({...t,message:n}),this.error=(n,t)=>this.create({...t,message:n,type:"error"}),this.success=(n,t)=>this.create({...t,type:"success",message:n}),this.info=(n,t)=>this.create({...t,type:"info",message:n}),this.warning=(n,t)=>this.create({...t,type:"warning",message:n}),this.loading=(n,t)=>this.create({...t,type:"loading",message:n}),this.promise=(n,t)=>{if(!t)return;let e;t.loading!==void 0&&(e=this.create({...t,promise:n,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=n instanceof Promise?n:n(),r=e!==void 0,s,o=i.then(async l=>{if(s=["resolve",l],Mt.isValidElement(l))r=!1,this.create({id:e,type:"default",message:l});else if(OG(l)&&!l.ok){r=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:e,type:"error",message:d,description:u})}else if(t.success!==void 0){r=!1;let d=typeof t.success=="function"?await t.success(l):t.success,u=typeof t.description=="function"?await t.description(l):t.description;this.create({id:e,type:"success",message:d,description:u})}}).catch(async l=>{if(s=["reject",l],t.error!==void 0){r=!1;let d=typeof t.error=="function"?await t.error(l):t.error,u=typeof t.description=="function"?await t.description(l):t.description;this.create({id:e,type:"error",message:d,description:u})}}).finally(()=>{var l;r&&(this.dismiss(e),e=void 0),(l=t.finally)==null||l.call(t)}),a=()=>new Promise((l,d)=>o.then(()=>s[0]==="reject"?d(s[1]):l(s[1])).catch(d));return typeof e!="string"&&typeof e!="number"?{unwrap:a}:Object.assign(e,{unwrap:a})},this.custom=(n,t)=>{let e=t?.id||x_++;return this.create({jsx:n(e),id:e,...t}),e},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gr=new BG,PG=(n,t)=>{let e=t?.id||x_++;return gr.addToast({title:n,...t,id:e}),e},OG=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",FG=PG,jG=()=>gr.toasts,UG=()=>gr.getActiveToasts(),en=Object.assign(FG,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:jG,getToasts:UG});function DG(n,{insertAt:t}={}){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}DG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Mp(n){return n.label!==void 0}var zG=3,GG="32px",WG="16px",sC=4e3,VG=356,qG=14,$G=20,HG=200;function is(...n){return n.filter(Boolean).join(" ")}function KG(n){let[t,e]=n.split("-"),i=[];return t&&i.push(t),e&&i.push(e),i}var ZG=n=>{var t,e,i,r,s,o,a,l,d,u,h;let{invert:m,toast:p,unstyled:E,interacting:C,setHeights:v,visibleToasts:A,heights:x,index:P,toasts:W,expanded:K,removeToast:j,defaultRichColors:b,closeButton:B,style:J,cancelButtonStyle:it,actionButtonStyle:st,className:z="",descriptionClassName:I="",duration:w,position:T,gap:V,loadingIcon:Y,expandByDefault:Q,classNames:$,icons:F,closeButtonAriaLabel:R="Close toast",pauseWhenPageIsHidden:_}=n,[k,H]=Mt.useState(null),[L,g]=Mt.useState(null),[D,S]=Mt.useState(!1),[lt,ct]=Mt.useState(!1),[G,ft]=Mt.useState(!1),[vt,wt]=Mt.useState(!1),[bt,Ft]=Mt.useState(!1),[Pt,Gt]=Mt.useState(0),[$t,kt]=Mt.useState(0),Rt=Mt.useRef(p.duration||w||sC),Ht=Mt.useRef(null),Kt=Mt.useRef(null),se=P===0,_e=P+1<=A,ae=p.type,de=p.dismissible!==!1,fe=p.className||"",Yt=p.descriptionClassName||"",ut=Mt.useMemo(()=>x.findIndex(Nt=>Nt.toastId===p.id)||0,[x,p.id]),X=Mt.useMemo(()=>{var Nt;return(Nt=p.closeButton)!=null?Nt:B},[p.closeButton,B]),nt=Mt.useMemo(()=>p.duration||w||sC,[p.duration,w]),at=Mt.useRef(0),M=Mt.useRef(0),O=Mt.useRef(0),ht=Mt.useRef(null),[Et,mt]=T.split("-"),xt=Mt.useMemo(()=>x.reduce((Nt,Jt,Xt)=>Xt>=ut?Nt:Nt+Jt.height,0),[x,ut]),Lt=MG(),At=p.invert||m,jt=ae==="loading";M.current=Mt.useMemo(()=>ut*V+xt,[ut,xt]),Mt.useEffect(()=>{Rt.current=nt},[nt]),Mt.useEffect(()=>{S(!0)},[]),Mt.useEffect(()=>{let Nt=Kt.current;if(Nt){let Jt=Nt.getBoundingClientRect().height;return kt(Jt),v(Xt=>[{toastId:p.id,height:Jt,position:p.position},...Xt]),()=>v(Xt=>Xt.filter(ot=>ot.toastId!==p.id))}},[v,p.id]),Mt.useLayoutEffect(()=>{if(!D)return;let Nt=Kt.current,Jt=Nt.style.height;Nt.style.height="auto";let Xt=Nt.getBoundingClientRect().height;Nt.style.height=Jt,kt(Xt),v(ot=>ot.find(Z=>Z.toastId===p.id)?ot.map(Z=>Z.toastId===p.id?{...Z,height:Xt}:Z):[{toastId:p.id,height:Xt,position:p.position},...ot])},[D,p.title,p.description,v,p.id]);let Wt=Mt.useCallback(()=>{ct(!0),Gt(M.current),v(Nt=>Nt.filter(Jt=>Jt.toastId!==p.id)),setTimeout(()=>{j(p)},HG)},[p,j,v,M]);Mt.useEffect(()=>{if(p.promise&&ae==="loading"||p.duration===1/0||p.type==="loading")return;let Nt;return K||C||_&&Lt?(()=>{if(O.current<at.current){let Jt=new Date().getTime()-at.current;Rt.current=Rt.current-Jt}O.current=new Date().getTime()})():Rt.current!==1/0&&(at.current=new Date().getTime(),Nt=setTimeout(()=>{var Jt;(Jt=p.onAutoClose)==null||Jt.call(p,p),Wt()},Rt.current)),()=>clearTimeout(Nt)},[K,C,p,ae,_,Lt,Wt]),Mt.useEffect(()=>{p.delete&&Wt()},[Wt,p.delete]);function Bt(){var Nt,Jt,Xt;return F!=null&&F.loading?Mt.createElement("div",{className:is($?.loader,(Nt=p?.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":ae==="loading"},F.loading):Y?Mt.createElement("div",{className:is($?.loader,(Jt=p?.classNames)==null?void 0:Jt.loader,"sonner-loader"),"data-visible":ae==="loading"},Y):Mt.createElement(AG,{className:is($?.loader,(Xt=p?.classNames)==null?void 0:Xt.loader),visible:ae==="loading"})}return Mt.createElement("li",{tabIndex:0,ref:Kt,className:is(z,fe,$?.toast,(t=p?.classNames)==null?void 0:t.toast,$?.default,$?.[ae],(e=p?.classNames)==null?void 0:e[ae]),"data-sonner-toast":"","data-rich-colors":(i=p.richColors)!=null?i:b,"data-styled":!(p.jsx||p.unstyled||E),"data-mounted":D,"data-promise":!!p.promise,"data-swiped":bt,"data-removed":lt,"data-visible":_e,"data-y-position":Et,"data-x-position":mt,"data-index":P,"data-front":se,"data-swiping":G,"data-dismissible":de,"data-type":ae,"data-invert":At,"data-swipe-out":vt,"data-swipe-direction":L,"data-expanded":!!(K||Q&&D),style:{"--index":P,"--toasts-before":P,"--z-index":W.length-P,"--offset":`${lt?Pt:M.current}px`,"--initial-height":Q?"auto":`${$t}px`,...J,...p.style},onDragEnd:()=>{ft(!1),H(null),ht.current=null},onPointerDown:Nt=>{jt||!de||(Ht.current=new Date,Gt(M.current),Nt.target.setPointerCapture(Nt.pointerId),Nt.target.tagName!=="BUTTON"&&(ft(!0),ht.current={x:Nt.clientX,y:Nt.clientY}))},onPointerUp:()=>{var Nt,Jt,Xt,ot;if(vt||!de)return;ht.current=null;let Z=Number(((Nt=Kt.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),tt=Number(((Jt=Kt.current)==null?void 0:Jt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pt=new Date().getTime()-((Xt=Ht.current)==null?void 0:Xt.getTime()),gt=k==="x"?Z:tt,St=Math.abs(gt)/pt;if(Math.abs(gt)>=$G||St>.11){Gt(M.current),(ot=p.onDismiss)==null||ot.call(p,p),g(k==="x"?Z>0?"right":"left":tt>0?"down":"up"),Wt(),wt(!0),Ft(!1);return}ft(!1),H(null)},onPointerMove:Nt=>{var Jt,Xt,ot,Z;if(!ht.current||!de||((Jt=window.getSelection())==null?void 0:Jt.toString().length)>0)return;let tt=Nt.clientY-ht.current.y,pt=Nt.clientX-ht.current.x,gt=(Xt=n.swipeDirections)!=null?Xt:KG(T);!k&&(Math.abs(pt)>1||Math.abs(tt)>1)&&H(Math.abs(pt)>Math.abs(tt)?"x":"y");let St={x:0,y:0};k==="y"?(gt.includes("top")||gt.includes("bottom"))&&(gt.includes("top")&&tt<0||gt.includes("bottom")&&tt>0)&&(St.y=tt):k==="x"&&(gt.includes("left")||gt.includes("right"))&&(gt.includes("left")&&pt<0||gt.includes("right")&&pt>0)&&(St.x=pt),(Math.abs(St.x)>0||Math.abs(St.y)>0)&&Ft(!0),(ot=Kt.current)==null||ot.style.setProperty("--swipe-amount-x",`${St.x}px`),(Z=Kt.current)==null||Z.style.setProperty("--swipe-amount-y",`${St.y}px`)}},X&&!p.jsx?Mt.createElement("button",{"aria-label":R,"data-disabled":jt,"data-close-button":!0,onClick:jt||!de?()=>{}:()=>{var Nt;Wt(),(Nt=p.onDismiss)==null||Nt.call(p,p)},className:is($?.closeButton,(r=p?.classNames)==null?void 0:r.closeButton)},(s=F?.close)!=null?s:NG):null,p.jsx||rt.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Mt.createElement(Mt.Fragment,null,ae||p.icon||p.promise?Mt.createElement("div",{"data-icon":"",className:is($?.icon,(o=p?.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Bt():null,p.type!=="loading"?p.icon||F?.[ae]||LG(ae):null):null,Mt.createElement("div",{"data-content":"",className:is($?.content,(a=p?.classNames)==null?void 0:a.content)},Mt.createElement("div",{"data-title":"",className:is($?.title,(l=p?.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?Mt.createElement("div",{"data-description":"",className:is(I,Yt,$?.description,(d=p?.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),rt.isValidElement(p.cancel)?p.cancel:p.cancel&&Mp(p.cancel)?Mt.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||it,onClick:Nt=>{var Jt,Xt;Mp(p.cancel)&&de&&((Xt=(Jt=p.cancel).onClick)==null||Xt.call(Jt,Nt),Wt())},className:is($?.cancelButton,(u=p?.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,rt.isValidElement(p.action)?p.action:p.action&&Mp(p.action)?Mt.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||st,onClick:Nt=>{var Jt,Xt;Mp(p.action)&&((Xt=(Jt=p.action).onClick)==null||Xt.call(Jt,Nt),!Nt.defaultPrevented&&Wt())},className:is($?.actionButton,(h=p?.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function oC(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function QG(n,t){let e={};return[n,t].forEach((i,r)=>{let s=r===1,o=s?"--mobile-offset":"--offset",a=s?WG:GG;function l(d){["top","right","bottom","left"].forEach(u=>{e[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof i=="number"||typeof i=="string"?l(i):typeof i=="object"?["top","right","bottom","left"].forEach(d=>{i[d]===void 0?e[`${o}-${d}`]=a:e[`${o}-${d}`]=typeof i[d]=="number"?`${i[d]}px`:i[d]}):l(a)}),e}var YG=rt.forwardRef(function(n,t){let{invert:e,position:i="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:d,theme:u="light",richColors:h,duration:m,style:p,visibleToasts:E=zG,toastOptions:C,dir:v=oC(),gap:A=qG,loadingIcon:x,icons:P,containerAriaLabel:W="Notifications",pauseWhenPageIsHidden:K}=n,[j,b]=Mt.useState([]),B=Mt.useMemo(()=>Array.from(new Set([i].concat(j.filter(_=>_.position).map(_=>_.position)))),[j,i]),[J,it]=Mt.useState([]),[st,z]=Mt.useState(!1),[I,w]=Mt.useState(!1),[T,V]=Mt.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=Mt.useRef(null),Q=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=Mt.useRef(null),F=Mt.useRef(!1),R=Mt.useCallback(_=>{b(k=>{var H;return(H=k.find(L=>L.id===_.id))!=null&&H.delete||gr.dismiss(_.id),k.filter(({id:L})=>L!==_.id)})},[]);return Mt.useEffect(()=>gr.subscribe(_=>{if(_.dismiss){b(k=>k.map(H=>H.id===_.id?{...H,delete:!0}:H));return}setTimeout(()=>{z8.flushSync(()=>{b(k=>{let H=k.findIndex(L=>L.id===_.id);return H!==-1?[...k.slice(0,H),{...k[H],..._},...k.slice(H+1)]:[_,...k]})})})}),[]),Mt.useEffect(()=>{if(u!=="system"){V(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;let _=window.matchMedia("(prefers-color-scheme: dark)");try{_.addEventListener("change",({matches:k})=>{V(k?"dark":"light")})}catch{_.addListener(({matches:H})=>{try{V(H?"dark":"light")}catch(L){console.error(L)}})}},[u]),Mt.useEffect(()=>{j.length<=1&&z(!1)},[j]),Mt.useEffect(()=>{let _=k=>{var H,L;r.every(g=>k[g]||k.code===g)&&(z(!0),(H=Y.current)==null||H.focus()),k.code==="Escape"&&(document.activeElement===Y.current||(L=Y.current)!=null&&L.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),Mt.useEffect(()=>{if(Y.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,F.current=!1)}},[Y.current]),Mt.createElement("section",{ref:t,"aria-label":`${W} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},B.map((_,k)=>{var H;let[L,g]=_.split("-");return j.length?Mt.createElement("ol",{key:_,dir:v==="auto"?oC():v,tabIndex:-1,ref:Y,className:a,"data-sonner-toaster":!0,"data-theme":T,"data-y-position":L,"data-lifted":st&&j.length>1&&!s,"data-x-position":g,style:{"--front-toast-height":`${((H=J[0])==null?void 0:H.height)||0}px`,"--width":`${VG}px`,"--gap":`${A}px`,...p,...QG(l,d)},onBlur:D=>{F.current&&!D.currentTarget.contains(D.relatedTarget)&&(F.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||F.current||(F.current=!0,$.current=D.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{I||z(!1)},onDragEnd:()=>z(!1),onPointerDown:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||w(!0)},onPointerUp:()=>w(!1)},j.filter(D=>!D.position&&k===0||D.position===_).map((D,S)=>{var lt,ct;return Mt.createElement(ZG,{key:D.id,icons:P,index:S,toast:D,defaultRichColors:h,duration:(lt=C?.duration)!=null?lt:m,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:e,visibleToasts:E,closeButton:(ct=C?.closeButton)!=null?ct:o,interacting:I,position:_,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,removeToast:R,toasts:j.filter(G=>G.position==D.position),heights:J.filter(G=>G.position==D.position),setHeights:it,expandByDefault:s,gap:A,loadingIcon:x,expanded:st,pauseWhenPageIsHidden:K,swipeDirections:n.swipeDirections})})):null}))});const ov=rt.createContext({});function av(n){const t=rt.useRef(null);return t.current===null&&(t.current=n()),t.current}const Ym=rt.createContext(null),cv=rt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class XG extends rt.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=e.offsetHeight||0,i.width=e.offsetWidth||0,i.top=e.offsetTop,i.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function JG({children:n,isPresent:t}){const e=rt.useId(),i=rt.useRef(null),r=rt.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=rt.useContext(cv);return rt.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:d}=r.current;if(t||!i.current||!o||!a)return;i.current.dataset.motionPopId=e;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),U.jsx(XG,{isPresent:t,childRef:i,sizeRef:r,children:rt.cloneElement(n,{ref:i})})}const tW=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=av(eW),l=rt.useId(),d=rt.useCallback(h=>{a.set(h,!0);for(const m of a.values())if(!m)return;i&&i()},[a,i]),u=rt.useMemo(()=>({id:l,initial:t,isPresent:e,custom:r,onExitComplete:d,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),d]:[e,d]);return rt.useMemo(()=>{a.forEach((h,m)=>a.set(m,!1))},[e]),rt.useEffect(()=>{!e&&!a.size&&i&&i()},[e]),o==="popLayout"&&(n=U.jsx(JG,{isPresent:e,children:n})),U.jsx(Ym.Provider,{value:u,children:n})};function eW(){return new Map}function $T(n=!0){const t=rt.useContext(Ym);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:r}=t,s=rt.useId();rt.useEffect(()=>{n&&r(s)},[n]);const o=rt.useCallback(()=>n&&i&&i(s),[s,i,n]);return!e&&i?[!1,o]:[!0]}const Bp=n=>n.key||"";function aC(n){const t=[];return rt.Children.forEach(n,e=>{rt.isValidElement(e)&&t.push(e)}),t}const lv=typeof window<"u",HT=lv?rt.useLayoutEffect:rt.useEffect,KT=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=$T(o),d=rt.useMemo(()=>aC(n),[n]),u=o&&!a?[]:d.map(Bp),h=rt.useRef(!0),m=rt.useRef(d),p=av(()=>new Map),[E,C]=rt.useState(d),[v,A]=rt.useState(d);HT(()=>{h.current=!1,m.current=d;for(let W=0;W<v.length;W++){const K=Bp(v[W]);u.includes(K)?p.delete(K):p.get(K)!==!0&&p.set(K,!1)}},[v,u.length,u.join("-")]);const x=[];if(d!==E){let W=[...d];for(let K=0;K<v.length;K++){const j=v[K],b=Bp(j);u.includes(b)||(W.splice(K,0,j),x.push(j))}s==="wait"&&x.length&&(W=x),A(aC(W)),C(d);return}const{forceRender:P}=rt.useContext(ov);return U.jsx(U.Fragment,{children:v.map(W=>{const K=Bp(W),j=o&&!a?!1:d===v||u.includes(K),b=()=>{if(p.has(K))p.set(K,!0);else return;let B=!0;p.forEach(J=>{J||(B=!1)}),B&&(P?.(),A(m.current),o&&l?.(),i&&i())};return U.jsx(tW,{isPresent:j,initial:!h.current||e?void 0:!1,custom:j?void 0:t,presenceAffectsLayout:r,mode:s,onExitComplete:j?void 0:b,children:W},K)})})},kr=n=>n;let ZT=kr;function uv(n){let t;return()=>(t===void 0&&(t=n()),t)}const xu=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i},So=n=>n*1e3,Lo=n=>n/1e3,nW={useManualTiming:!1};function iW(n){let t=new Set,e=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(d){s.has(d)&&(l.schedule(d),n()),d(o)}const l={schedule:(d,u=!1,h=!1)=>{const p=h&&i?t:e;return u&&s.add(d),p.has(d)||p.add(d),d},cancel:d=>{e.delete(d),s.delete(d)},process:d=>{if(o=d,i){r=!0;return}i=!0,[t,e]=[e,t],t.forEach(a),t.clear(),i=!1,r&&(r=!1,l.process(d))}};return l}const Pp=["read","resolveKeyframes","update","preRender","render","postRender"],rW=40;function QT(n,t){let e=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,o=Pp.reduce((A,x)=>(A[x]=iW(s),A),{}),{read:a,resolveKeyframes:l,update:d,preRender:u,render:h,postRender:m}=o,p=()=>{const A=performance.now();e=!1,r.delta=i?1e3/60:Math.max(Math.min(A-r.timestamp,rW),1),r.timestamp=A,r.isProcessing=!0,a.process(r),l.process(r),d.process(r),u.process(r),h.process(r),m.process(r),r.isProcessing=!1,e&&t&&(i=!1,n(p))},E=()=>{e=!0,i=!0,r.isProcessing||n(p)};return{schedule:Pp.reduce((A,x)=>{const P=o[x];return A[x]=(W,K=!1,j=!1)=>(e||E(),P.schedule(W,K,j)),A},{}),cancel:A=>{for(let x=0;x<Pp.length;x++)o[Pp[x]].cancel(A)},state:r,steps:o}}const{schedule:Pn,cancel:Ba,state:Ri,steps:h2}=QT(typeof requestAnimationFrame<"u"?requestAnimationFrame:kr,!0),YT=rt.createContext({strict:!1}),cC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Eu={};for(const n in cC)Eu[n]={isEnabled:t=>cC[n].some(e=>!!t[e])};function sW(n){for(const t in n)Eu[t]={...Eu[t],...n[t]}}const oW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function em(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||oW.has(n)}let XT=n=>!em(n);function aW(n){n&&(XT=t=>t.startsWith("on")?!em(t):n(t))}try{aW(require("@emotion/is-prop-valid").default)}catch{}function cW(n,t,e){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(XT(r)||e===!0&&em(r)||!t&&!em(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function lW(n){if(typeof Proxy>"u")return n;const t=new Map,e=(...i)=>n(...i);return new Proxy(e,{get:(i,r)=>r==="create"?n:(t.has(r)||t.set(r,n(r)),t.get(r))})}const Xm=rt.createContext({});function jf(n){return typeof n=="string"||Array.isArray(n)}function Jm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const dv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fv=["initial",...dv];function tg(n){return Jm(n.animate)||fv.some(t=>jf(n[t]))}function JT(n){return!!(tg(n)||n.variants)}function uW(n,t){if(tg(n)){const{initial:e,animate:i}=n;return{initial:e===!1||jf(e)?e:void 0,animate:jf(i)?i:void 0}}return n.inherit!==!1?t:{}}function dW(n){const{initial:t,animate:e}=uW(n,rt.useContext(Xm));return rt.useMemo(()=>({initial:t,animate:e}),[lC(t),lC(e)])}function lC(n){return Array.isArray(n)?n.join(" "):n}const fW=Symbol.for("motionComponentSymbol");function Kl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function hW(n,t,e){return rt.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Kl(e)&&(e.current=i))},[t])}const hv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pW="framerAppearId",tk="data-"+hv(pW),{schedule:pv}=QT(queueMicrotask,!1),ek=rt.createContext({});function mW(n,t,e,i,r){var s,o;const{visualElement:a}=rt.useContext(Xm),l=rt.useContext(YT),d=rt.useContext(Ym),u=rt.useContext(cv).reducedMotion,h=rt.useRef(null);i=i||l.renderer,!h.current&&i&&(h.current=i(n,{visualState:t,parent:a,props:e,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const m=h.current,p=rt.useContext(ek);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&gW(h.current,e,r,p);const E=rt.useRef(!1);rt.useInsertionEffect(()=>{m&&E.current&&m.update(e,d)});const C=e[tk],v=rt.useRef(!!C&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,C))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,C)));return HT(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),pv.render(m.render),v.current&&m.animationState&&m.animationState.animateChanges())}),rt.useEffect(()=>{m&&(!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)===null||A===void 0||A.call(window,C)}),v.current=!1))}),m}function gW(n,t,e,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:nk(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Kl(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:d})}function nk(n){if(n)return n.options.allowProjection!==!1?n.projection:nk(n.parent)}function yW({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:i,Component:r}){var s,o;n&&sW(n);function a(d,u){let h;const m={...rt.useContext(cv),...d,layoutId:wW(d)},{isStatic:p}=m,E=dW(d),C=i(d,p);if(!p&&lv){_W();const v=bW(m);h=v.MeasureLayout,E.visualElement=mW(r,C,m,t,v.ProjectionNode)}return U.jsxs(Xm.Provider,{value:E,children:[h&&E.visualElement?U.jsx(h,{visualElement:E.visualElement,...m}):null,e(r,d,hW(C,E.visualElement,u),C,p,E.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=rt.forwardRef(a);return l[fW]=r,l}function wW({layoutId:n}){const t=rt.useContext(ov).id;return t&&n!==void 0?t+"-"+n:n}function _W(n,t){rt.useContext(YT).strict}function bW(n){const{drag:t,layout:e}=Eu;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t?.isEnabled(n)||e?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const vW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mv(n){return typeof n!="string"||n.includes("-")?!1:!!(vW.indexOf(n)>-1||/[A-Z]/u.test(n))}function uC(n){const t=[{},{}];return n?.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function gv(n,t,e,i){if(typeof t=="function"){const[r,s]=uC(i);t=t(e!==void 0?e:n.custom,r,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[r,s]=uC(i);t=t(e!==void 0?e:n.custom,r,s)}return t}const E_=n=>Array.isArray(n),xW=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),EW=n=>E_(n)?n[n.length-1]||0:n,Hi=n=>!!(n&&n.getVelocity);function S0(n){const t=Hi(n)?n.get():n;return xW(t)?t.toValue():t}function SW({scrapeMotionValuesFromProps:n,createRenderState:t,onUpdate:e},i,r,s){const o={latestValues:LW(i,r,s,n),renderState:t()};return e&&(o.onMount=a=>e({props:i,current:a,...o}),o.onUpdate=a=>e(a)),o}const ik=n=>(t,e)=>{const i=rt.useContext(Xm),r=rt.useContext(Ym),s=()=>SW(n,t,i,r);return e?s():av(s)};function LW(n,t,e,i){const r={},s=i(n,{});for(const m in s)r[m]=S0(s[m]);let{initial:o,animate:a}=n;const l=tg(n),d=JT(n);t&&d&&!l&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=e?e.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Jm(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const E=gv(n,m[p]);if(E){const{transitionEnd:C,transition:v,...A}=E;for(const x in A){let P=A[x];if(Array.isArray(P)){const W=u?P.length-1:0;P=P[W]}P!==null&&(r[x]=P)}for(const x in C)r[x]=C[x]}}}return r}const Fu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tl=new Set(Fu),rk=n=>t=>typeof t=="string"&&t.startsWith(n),sk=rk("--"),CW=rk("var(--"),yv=n=>CW(n)?AW.test(n.split("/*")[0].trim()):!1,AW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ok=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Ro=(n,t,e)=>e>t?t:e<n?n:e,ju={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Uf={...ju,transform:n=>Ro(0,1,n)},Op={...ju,default:1},ih=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),xa=ih("deg"),Ds=ih("%"),Fe=ih("px"),IW=ih("vh"),TW=ih("vw"),dC={...Ds,parse:n=>Ds.parse(n)/100,transform:n=>Ds.transform(n*100)},kW={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,backgroundPositionX:Fe,backgroundPositionY:Fe},RW={rotate:xa,rotateX:xa,rotateY:xa,rotateZ:xa,scale:Op,scaleX:Op,scaleY:Op,scaleZ:Op,skew:xa,skewX:xa,skewY:xa,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:Uf,originX:dC,originY:dC,originZ:Fe},fC={...ju,transform:Math.round},wv={...kW,...RW,zIndex:fC,size:Fe,fillOpacity:Uf,strokeOpacity:Uf,numOctaves:fC},NW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},MW=Fu.length;function BW(n,t,e){let i="",r=!0;for(let s=0;s<MW;s++){const o=Fu[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||e){const d=ok(a,wv[o]);if(!l){r=!1;const u=NW[o]||o;i+=`${u}(${d}) `}e&&(t[o]=d)}}return i=i.trim(),e?i=e(t,r?"":i):r&&(i="none"),i}function _v(n,t,e){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in t){const d=t[l];if(tl.has(l)){o=!0;continue}else if(sk(l)){r[l]=d;continue}else{const u=ok(d,wv[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(t.transform||(o||e?i.transform=BW(t,n.transform,e):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:d="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${d} ${u}`}}const PW={offset:"stroke-dashoffset",array:"stroke-dasharray"},OW={offset:"strokeDashoffset",array:"strokeDasharray"};function FW(n,t,e=1,i=0,r=!0){n.pathLength=1;const s=r?PW:OW;n[s.offset]=Fe.transform(-i);const o=Fe.transform(t),a=Fe.transform(e);n[s.array]=`${o} ${a}`}function hC(n,t,e){return typeof n=="string"?n:Fe.transform(t+e*n)}function jW(n,t,e){const i=hC(t,n.x,n.width),r=hC(e,n.y,n.height);return`${i} ${r}`}function bv(n,{attrX:t,attrY:e,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...d},u,h){if(_v(n,d,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:p,dimensions:E}=n;m.transform&&(E&&(p.transform=m.transform),delete m.transform),E&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=jW(E,r!==void 0?r:.5,s!==void 0?s:.5)),t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),i!==void 0&&(m.scale=i),o!==void 0&&FW(m,o,a,l,!1)}const vv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ak=()=>({...vv(),attrs:{}}),xv=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ck(n,{style:t,vars:e},i,r){Object.assign(n.style,t,r&&r.getProjectionStyles(i));for(const s in e)n.style.setProperty(s,e[s])}const lk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uk(n,t,e,i){ck(n,t,void 0,i);for(const r in t.attrs)n.setAttribute(lk.has(r)?r:hv(r),t.attrs[r])}const nm={};function UW(n){Object.assign(nm,n)}function dk(n,{layout:t,layoutId:e}){return tl.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!nm[n]||n==="opacity")}function Ev(n,t,e){var i;const{style:r}=n,s={};for(const o in r)(Hi(r[o])||t.style&&Hi(t.style[o])||dk(o,n)||((i=e?.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function fk(n,t,e){const i=Ev(n,t,e);for(const r in n)if(Hi(n[r])||Hi(t[r])){const s=Fu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function DW(n,t){try{t.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const pC=["x","y","width","height","cx","cy","r"],zW={useVisualState:ik({scrapeMotionValuesFromProps:fk,createRenderState:ak,onUpdate:({props:n,prevProps:t,current:e,renderState:i,latestValues:r})=>{if(!e)return;let s=!!n.drag;if(!s){for(const a in r)if(tl.has(a)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let a=0;a<pC.length;a++){const l=pC[a];n[l]!==t[l]&&(o=!0)}o&&Pn.read(()=>{DW(e,i),Pn.render(()=>{bv(i,r,xv(e.tagName),n.transformTemplate),uk(e,i)})})}})},GW={useVisualState:ik({scrapeMotionValuesFromProps:Ev,createRenderState:vv})};function hk(n,t,e){for(const i in t)!Hi(t[i])&&!dk(i,e)&&(n[i]=t[i])}function WW({transformTemplate:n},t){return rt.useMemo(()=>{const e=vv();return _v(e,t,n),Object.assign({},e.vars,e.style)},[t])}function VW(n,t){const e=n.style||{},i={};return hk(i,e,n),Object.assign(i,WW(n,t)),i}function qW(n,t){const e={},i=VW(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}function $W(n,t,e,i){const r=rt.useMemo(()=>{const s=ak();return bv(s,t,xv(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};hk(s,n.style,n),r.style={...s,...r.style}}return r}function HW(n=!1){return(e,i,r,{latestValues:s},o)=>{const l=(mv(e)?$W:qW)(i,s,o,e),d=cW(i,typeof e=="string",n),u=e!==rt.Fragment?{...d,...l,ref:r}:{},{children:h}=i,m=rt.useMemo(()=>Hi(h)?h.get():h,[h]);return rt.createElement(e,{...u,children:m})}}function KW(n,t){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...mv(i)?zW:GW,preloadedFeatures:n,useRender:HW(r),createVisualElement:t,Component:i};return yW(o)}}function pk(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}function eg(n,t,e){const i=n.getProps();return gv(i,t,e!==void 0?e:i.custom,n)}const ZW=uv(()=>window.ScrollTimeline!==void 0);class QW{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=e}attachTimeline(t,e){const i=this.animations.map(r=>{if(ZW()&&r.attachTimeline)return r.attachTimeline(t);if(typeof e=="function")return e(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class YW extends QW{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function Sv(n,t){return n?n[t]||n.default||n:void 0}const S_=2e4;function mk(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<S_;)t+=e,i=n.next(t);return t>=S_?1/0:t}function Lv(n){return typeof n=="function"}function mC(n,t){n.timeline=t,n.onfinish=null}const Cv=n=>Array.isArray(n)&&typeof n[0]=="number",XW={linearEasing:void 0};function JW(n,t){const e=uv(n);return()=>{var i;return(i=XW[t])!==null&&i!==void 0?i:e()}}const im=JW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gk=(n,t,e=10)=>{let i="";const r=Math.max(Math.round(t/e),2);for(let s=0;s<r;s++)i+=n(xu(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function yk(n){return!!(typeof n=="function"&&im()||!n||typeof n=="string"&&(n in L_||im())||Cv(n)||Array.isArray(n)&&n.every(yk))}const of=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,L_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:of([0,.65,.55,1]),circOut:of([.55,0,1,.45]),backIn:of([.31,.01,.66,-.59]),backOut:of([.33,1.53,.69,.99])};function wk(n,t){if(n)return typeof n=="function"&&im()?gk(n,t):Cv(n)?of(n):Array.isArray(n)?n.map(e=>wk(e,t)||L_.easeOut):L_[n]}const rs={x:!1,y:!1};function _k(){return rs.x||rs.y}function tV(n,t,e){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function bk(n,t){const e=tV(n),i=new AbortController,r={passive:!0,...t,signal:i.signal};return[e,r,()=>i.abort()]}function gC(n){return t=>{t.pointerType==="touch"||_k()||n(t)}}function eV(n,t,e={}){const[i,r,s]=bk(n,e),o=gC(a=>{const{target:l}=a,d=t(a);if(typeof d!="function"||!l)return;const u=gC(h=>{d(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const vk=(n,t)=>t?n===t?!0:vk(n,t.parentElement):!1,Av=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,nV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iV(n){return nV.has(n.tagName)||n.tabIndex!==-1}const af=new WeakSet;function yC(n){return t=>{t.key==="Enter"&&n(t)}}function p2(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const rV=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=yC(()=>{if(af.has(e))return;p2(e,"down");const r=yC(()=>{p2(e,"up")}),s=()=>p2(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function wC(n){return Av(n)&&!_k()}function sV(n,t,e={}){const[i,r,s]=bk(n,e),o=a=>{const l=a.currentTarget;if(!wC(a)||af.has(l))return;af.add(l);const d=t(a),u=(p,E)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!wC(p)||!af.has(l))&&(af.delete(l),typeof d=="function"&&d(p,{success:E}))},h=p=>{u(p,e.useGlobalTarget||vk(l,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",m,r)};return i.forEach(a=>{!iV(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",d=>rV(d,r),r)}),s}function oV(n){return n==="x"||n==="y"?rs[n]?null:(rs[n]=!0,()=>{rs[n]=!1}):rs.x||rs.y?null:(rs.x=rs.y=!0,()=>{rs.x=rs.y=!1})}const xk=new Set(["width","height","top","left","right","bottom",...Fu]);let L0;function aV(){L0=void 0}const zs={now:()=>(L0===void 0&&zs.set(Ri.isProcessing||nW.useManualTiming?Ri.timestamp:performance.now()),L0),set:n=>{L0=n,queueMicrotask(aV)}};function Iv(n,t){n.indexOf(t)===-1&&n.push(t)}function Tv(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}class kv{constructor(){this.subscriptions=[]}add(t){return Iv(this.subscriptions,t),()=>Tv(this.subscriptions,t)}notify(t,e,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Ek(n,t){return t?n*(1e3/t):0}const _C=30,cV=n=>!isNaN(parseFloat(n));class lV{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=zs.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=zs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=cV(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new kv);const i=this.events[t].add(e);return t==="change"?()=>{i(),Pn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=zs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_C)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,_C);return Ek(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Df(n,t){return new lV(n,t)}function uV(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Df(e))}function dV(n,t){const e=eg(n,t);let{transitionEnd:i={},transition:r={},...s}=e||{};s={...s,...i};for(const o in s){const a=EW(s[o]);uV(n,o,a)}}function fV(n){return!!(Hi(n)&&n.add)}function C_(n,t){const e=n.getValue("willChange");if(fV(e))return e.add(t)}function Sk(n){return n.props[tk]}const Lk=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,hV=1e-7,pV=12;function mV(n,t,e,i,r){let s,o,a=0;do o=t+(e-t)/2,s=Lk(o,i,r)-n,s>0?e=o:t=o;while(Math.abs(s)>hV&&++a<pV);return o}function rh(n,t,e,i){if(n===t&&e===i)return kr;const r=s=>mV(s,0,1,n,e);return s=>s===0||s===1?s:Lk(r(s),t,i)}const Ck=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,Ak=n=>t=>1-n(1-t),Ik=rh(.33,1.53,.69,.99),Rv=Ak(Ik),Tk=Ck(Rv),kk=n=>(n*=2)<1?.5*Rv(n):.5*(2-Math.pow(2,-10*(n-1))),Nv=n=>1-Math.sin(Math.acos(n)),Rk=Ak(Nv),Nk=Ck(Nv),Mk=n=>/^0[^.\s]+$/u.test(n);function gV(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Mk(n):!0}const hf=n=>Math.round(n*1e5)/1e5,Mv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yV(n){return n==null}const wV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bv=(n,t)=>e=>!!(typeof e=="string"&&wV.test(e)&&e.startsWith(n)||t&&!yV(e)&&Object.prototype.hasOwnProperty.call(e,t)),Bk=(n,t,e)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(Mv);return{[n]:parseFloat(r),[t]:parseFloat(s),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},_V=n=>Ro(0,255,n),m2={...ju,transform:n=>Math.round(_V(n))},Ac={test:Bv("rgb","red"),parse:Bk("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+m2.transform(n)+", "+m2.transform(t)+", "+m2.transform(e)+", "+hf(Uf.transform(i))+")"};function bV(n){let t="",e="",i="",r="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),t+=t,e+=e,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const A_={test:Bv("#"),parse:bV,transform:Ac.transform},Zl={test:Bv("hsl","hue"),parse:Bk("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ds.transform(hf(t))+", "+Ds.transform(hf(e))+", "+hf(Uf.transform(i))+")"},$i={test:n=>Ac.test(n)||A_.test(n)||Zl.test(n),parse:n=>Ac.test(n)?Ac.parse(n):Zl.test(n)?Zl.parse(n):A_.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ac.transform(n):Zl.transform(n)},vV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xV(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(Mv))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(vV))===null||e===void 0?void 0:e.length)||0)>0}const Pk="number",Ok="color",EV="var",SV="var(",bC="${}",LV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zf(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=t.replace(LV,l=>($i.test(l)?(i.color.push(s),r.push(Ok),e.push($i.parse(l))):l.startsWith(SV)?(i.var.push(s),r.push(EV),e.push(l)):(i.number.push(s),r.push(Pk),e.push(parseFloat(l))),++s,bC)).split(bC);return{values:e,split:a,indexes:i,types:r}}function Fk(n){return zf(n).values}function jk(n){const{split:t,types:e}=zf(n),i=t.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=t[o],r[o]!==void 0){const a=e[o];a===Pk?s+=hf(r[o]):a===Ok?s+=$i.transform(r[o]):s+=r[o]}return s}}const CV=n=>typeof n=="number"?0:n;function AV(n){const t=Fk(n);return jk(n)(t.map(CV))}const Pa={test:xV,parse:Fk,createTransformer:jk,getAnimatableNone:AV},IV=new Set(["brightness","contrast","saturate","opacity"]);function TV(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(Mv)||[];if(!i)return n;const r=e.replace(i,"");let s=IV.has(t)?1:0;return i!==e&&(s*=100),t+"("+s+r+")"}const kV=/\b([a-z-]*)\(.*?\)/gu,I_={...Pa,getAnimatableNone:n=>{const t=n.match(kV);return t?t.map(TV).join(" "):n}},RV={...wv,color:$i,backgroundColor:$i,outlineColor:$i,fill:$i,stroke:$i,borderColor:$i,borderTopColor:$i,borderRightColor:$i,borderBottomColor:$i,borderLeftColor:$i,filter:I_,WebkitFilter:I_},Pv=n=>RV[n];function Uk(n,t){let e=Pv(n);return e!==I_&&(e=Pa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const NV=new Set(["auto","none","0"]);function MV(n,t,e){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!NV.has(s)&&zf(s).values.length&&(r=n[i]),i++}if(r&&e)for(const s of t)n[s]=Uk(e,r)}const vC=n=>n===ju||n===Fe,xC=(n,t)=>parseFloat(n.split(", ")[t]),EC=(n,t)=>(e,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return xC(r[1],t);{const s=i.match(/^matrix\((.+)\)$/u);return s?xC(s[1],n):0}},BV=new Set(["x","y","z"]),PV=Fu.filter(n=>!BV.has(n));function OV(n){const t=[];return PV.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Su={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:EC(4,13),y:EC(5,14)};Su.translateX=Su.x;Su.translateY=Su.y;const Bc=new Set;let T_=!1,k_=!1;function Dk(){if(k_){const n=Array.from(Bc).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const r=OV(i);r.length&&(e.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const r=e.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}k_=!1,T_=!1,Bc.forEach(n=>n.complete()),Bc.clear()}function zk(){Bc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(k_=!0)})}function FV(){zk(),Dk()}class Ov{constructor(t,e,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Bc.add(this),T_||(T_=!0,Pn.read(zk),Pn.resolveKeyframes(Dk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:r}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const o=r?.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&e){const l=i.readValue(e,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),r&&o===void 0&&r.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Bc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Bc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Gk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),jV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UV(n){const t=jV.exec(n);if(!t)return[,];const[,e,i,r]=t;return[`--${e??i}`,r]}function Wk(n,t,e=1){const[i,r]=UV(n);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const o=s.trim();return Gk(o)?parseFloat(o):o}return yv(r)?Wk(r,t,e+1):r}const Vk=n=>t=>t.test(n),DV={test:n=>n==="auto",parse:n=>n},qk=[ju,Fe,Ds,xa,TW,IW,DV],SC=n=>qk.find(Vk(n));class $k extends Ov{constructor(t,e,i,r,s){super(t,e,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let d=t[l];if(typeof d=="string"&&(d=d.trim(),yv(d))){const u=Wk(d,e.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!xk.has(i)||t.length!==2)return;const[r,s]=t,o=SC(r),a=SC(s);if(o!==a)if(vC(o)&&vC(a))for(let l=0;l<t.length;l++){const d=t[l];typeof d=="string"&&(t[l]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let r=0;r<t.length;r++)gV(t[r])&&i.push(r);i.length&&MV(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Su[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(i,r).jump(r,!1)}measureEndState(){var t;const{element:e,name:i,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Su[i](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,d])=>{e.getValue(l).set(d)}),this.resolveNoneKeyframes()}}const LC=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Pa.test(n)||n==="0")&&!n.startsWith("url("));function zV(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function GV(n,t,e,i){const r=n[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],o=LC(r,t),a=LC(s,t);return!o||!a?!1:zV(n)||(e==="spring"||Lv(e))&&i}const WV=n=>n!==null;function ng(n,{repeat:t,repeatType:e="loop"},i){const r=n.filter(WV),s=t&&e!=="loop"&&t%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const VV=40;class Hk{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=zs.now(),this.options={autoplay:t,delay:e,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>VV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&FV(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=zs.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:d}=this.options;if(!d&&!GV(t,i,r,s))if(o)this.options.duration=0;else{l&&l(ng(t,this.options,e)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,e);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...u},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Vn=(n,t,e)=>n+(t-n)*e;function g2(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function qV({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let r=0,s=0,o=0;if(!t)r=s=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,l=2*e-a;r=g2(l,a,n+1/3),s=g2(l,a,n),o=g2(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function rm(n,t){return e=>e>0?t:n}const y2=(n,t,e)=>{const i=n*n,r=e*(t*t-i)+i;return r<0?0:Math.sqrt(r)},$V=[A_,Ac,Zl],HV=n=>$V.find(t=>t.test(n));function CC(n){const t=HV(n);if(!t)return!1;let e=t.parse(n);return t===Zl&&(e=qV(e)),e}const AC=(n,t)=>{const e=CC(n),i=CC(t);if(!e||!i)return rm(n,t);const r={...e};return s=>(r.red=y2(e.red,i.red,s),r.green=y2(e.green,i.green,s),r.blue=y2(e.blue,i.blue,s),r.alpha=Vn(e.alpha,i.alpha,s),Ac.transform(r))},KV=(n,t)=>e=>t(n(e)),sh=(...n)=>n.reduce(KV),R_=new Set(["none","hidden"]);function ZV(n,t){return R_.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function QV(n,t){return e=>Vn(n,t,e)}function Fv(n){return typeof n=="number"?QV:typeof n=="string"?yv(n)?rm:$i.test(n)?AC:JV:Array.isArray(n)?Kk:typeof n=="object"?$i.test(n)?AC:YV:rm}function Kk(n,t){const e=[...n],i=e.length,r=n.map((s,o)=>Fv(s)(s,t[o]));return s=>{for(let o=0;o<i;o++)e[o]=r[o](s);return e}}function YV(n,t){const e={...n,...t},i={};for(const r in e)n[r]!==void 0&&t[r]!==void 0&&(i[r]=Fv(n[r])(n[r],t[r]));return r=>{for(const s in i)e[s]=i[s](r);return e}}function XV(n,t){var e;const i=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=n.indexes[o][r[o]],l=(e=n.values[a])!==null&&e!==void 0?e:0;i[s]=l,r[o]++}return i}const JV=(n,t)=>{const e=Pa.createTransformer(t),i=zf(n),r=zf(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?R_.has(n)&&!r.values.length||R_.has(t)&&!i.values.length?ZV(n,t):sh(Kk(XV(i,r),r.values),e):rm(n,t)};function Zk(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Vn(n,t,e):Fv(n)(n,t)}const tq=5;function Qk(n,t,e){const i=Math.max(t-tq,0);return Ek(e-n(i),t-i)}const Yn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},w2=.001;function eq({duration:n=Yn.duration,bounce:t=Yn.bounce,velocity:e=Yn.velocity,mass:i=Yn.mass}){let r,s,o=1-t;o=Ro(Yn.minDamping,Yn.maxDamping,o),n=Ro(Yn.minDuration,Yn.maxDuration,Lo(n)),o<1?(r=d=>{const u=d*o,h=u*n,m=u-e,p=N_(d,o),E=Math.exp(-h);return w2-m/p*E},s=d=>{const h=d*o*n,m=h*e+e,p=Math.pow(o,2)*Math.pow(d,2)*n,E=Math.exp(-h),C=N_(Math.pow(d,2),o);return(-r(d)+w2>0?-1:1)*((m-p)*E)/C}):(r=d=>{const u=Math.exp(-d*n),h=(d-e)*n+1;return-w2+u*h},s=d=>{const u=Math.exp(-d*n),h=(e-d)*(n*n);return u*h});const a=5/n,l=iq(r,s,a);if(n=So(n),isNaN(l))return{stiffness:Yn.stiffness,damping:Yn.damping,duration:n};{const d=Math.pow(l,2)*i;return{stiffness:d,damping:o*2*Math.sqrt(i*d),duration:n}}}const nq=12;function iq(n,t,e){let i=e;for(let r=1;r<nq;r++)i=i-n(i)/t(i);return i}function N_(n,t){return n*Math.sqrt(1-t*t)}const rq=["duration","bounce"],sq=["stiffness","damping","mass"];function IC(n,t){return t.some(e=>n[e]!==void 0)}function oq(n){let t={velocity:Yn.velocity,stiffness:Yn.stiffness,damping:Yn.damping,mass:Yn.mass,isResolvedFromDuration:!1,...n};if(!IC(n,sq)&&IC(n,rq))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),r=i*i,s=2*Ro(.05,1,1-(n.bounce||0))*Math.sqrt(r);t={...t,mass:Yn.mass,stiffness:r,damping:s}}else{const e=eq(n);t={...t,...e,mass:Yn.mass},t.isResolvedFromDuration=!0}return t}function Yk(n=Yn.visualDuration,t=Yn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:r}=e;const s=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=oq({...e,velocity:-Lo(e.velocity||0)}),E=m||0,C=d/(2*Math.sqrt(l*u)),v=o-s,A=Lo(Math.sqrt(l/u)),x=Math.abs(v)<5;i||(i=x?Yn.restSpeed.granular:Yn.restSpeed.default),r||(r=x?Yn.restDelta.granular:Yn.restDelta.default);let P;if(C<1){const K=N_(A,C);P=j=>{const b=Math.exp(-C*A*j);return o-b*((E+C*A*v)/K*Math.sin(K*j)+v*Math.cos(K*j))}}else if(C===1)P=K=>o-Math.exp(-A*K)*(v+(E+A*v)*K);else{const K=A*Math.sqrt(C*C-1);P=j=>{const b=Math.exp(-C*A*j),B=Math.min(K*j,300);return o-b*((E+C*A*v)*Math.sinh(B)+K*v*Math.cosh(B))/K}}const W={calculatedDuration:p&&h||null,next:K=>{const j=P(K);if(p)a.done=K>=h;else{let b=0;C<1&&(b=K===0?So(E):Qk(P,K,j));const B=Math.abs(b)<=i,J=Math.abs(o-j)<=r;a.done=B&&J}return a.value=a.done?o:j,a},toString:()=>{const K=Math.min(mk(W),S_),j=gk(b=>W.next(K*b).value,K,30);return K+"ms "+j}};return W}function TC({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:d=.5,restSpeed:u}){const h=n[0],m={done:!1,value:h},p=B=>a!==void 0&&B<a||l!==void 0&&B>l,E=B=>a===void 0?l:l===void 0||Math.abs(a-B)<Math.abs(l-B)?a:l;let C=e*t;const v=h+C,A=o===void 0?v:o(v);A!==v&&(C=A-h);const x=B=>-C*Math.exp(-B/i),P=B=>A+x(B),W=B=>{const J=x(B),it=P(B);m.done=Math.abs(J)<=d,m.value=m.done?A:it};let K,j;const b=B=>{p(m.value)&&(K=B,j=Yk({keyframes:[m.value,E(m.value)],velocity:Qk(P,B,m.value),damping:r,stiffness:s,restDelta:d,restSpeed:u}))};return b(0),{calculatedDuration:null,next:B=>{let J=!1;return!j&&K===void 0&&(J=!0,W(B),b(B)),K!==void 0&&B>=K?j.next(B-K):(!J&&W(B),m)}}}const aq=rh(.42,0,1,1),cq=rh(0,0,.58,1),Xk=rh(.42,0,.58,1),lq=n=>Array.isArray(n)&&typeof n[0]!="number",uq={linear:kr,easeIn:aq,easeInOut:Xk,easeOut:cq,circIn:Nv,circInOut:Nk,circOut:Rk,backIn:Rv,backInOut:Tk,backOut:Ik,anticipate:kk},kC=n=>{if(Cv(n)){ZT(n.length===4);const[t,e,i,r]=n;return rh(t,e,i,r)}else if(typeof n=="string")return uq[n];return n};function dq(n,t,e){const i=[],r=e||Zk,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(t){const l=Array.isArray(t)?t[o]||kr:t;a=sh(l,a)}i.push(a)}return i}function fq(n,t,{clamp:e=!0,ease:i,mixer:r}={}){const s=n.length;if(ZT(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=dq(t,i,r),l=a.length,d=u=>{if(o&&u<n[0])return t[0];let h=0;if(l>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const m=xu(n[h],n[h+1],u);return a[h](m)};return e?u=>d(Ro(n[0],n[s-1],u)):d}function hq(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const r=xu(0,t,i);n.push(Vn(e,1,r))}}function pq(n){const t=[0];return hq(t,n.length-1),t}function mq(n,t){return n.map(e=>e*t)}function gq(n,t){return n.map(()=>t||Xk).splice(0,n.length-1)}function sm({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const r=lq(i)?i.map(kC):kC(i),s={done:!1,value:t[0]},o=mq(e&&e.length===t.length?e:pq(t),n),a=fq(o,t,{ease:Array.isArray(r)?r:gq(t,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const yq=n=>{const t=({timestamp:e})=>n(e);return{start:()=>Pn.update(t,!0),stop:()=>Ba(t),now:()=>Ri.isProcessing?Ri.timestamp:zs.now()}},wq={decay:TC,inertia:TC,tween:sm,keyframes:sm,spring:Yk},_q=n=>n/100;class jv extends Hk{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:e,motionValue:i,element:r,keyframes:s}=this.options,o=r?.KeyframeResolver||Ov,a=(l,d)=>this.onKeyframesResolved(l,d);this.resolver=new o(s,a,e,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=Lv(e)?e:wq[e]||sm;let l,d;a!==sm&&typeof t[0]!="number"&&(l=sh(_q,Zk(t[0],t[1])),t=[0,100]);const u=a({...this.options,keyframes:t});s==="mirror"&&(d=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=mk(u));const{calculatedDuration:h}=u,m=h+r,p=m*(i+1)-r;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:i}=this;if(!i){const{keyframes:B}=this.options;return{done:!0,value:B[B.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=i;if(this.startTime===null)return s.next(0);const{delay:m,repeat:p,repeatType:E,repeatDelay:C,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const A=this.currentTime-m*(this.speed>=0?1:-1),x=this.speed>=0?A<0:A>u;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let P=this.currentTime,W=s;if(p){const B=Math.min(this.currentTime,u)/h;let J=Math.floor(B),it=B%1;!it&&B>=1&&(it=1),it===1&&J--,J=Math.min(J,p+1),!!(J%2)&&(E==="reverse"?(it=1-it,C&&(it-=C/h)):E==="mirror"&&(W=o)),P=Ro(0,1,it)*h}const K=x?{done:!1,value:l[0]}:W.next(P);a&&(K.value=a(K.value));let{done:j}=K;!x&&d!==null&&(j=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return b&&r!==void 0&&(K.value=ng(l,this.options,r)),v&&v(K.value),b&&this.finish(),K}get duration(){const{resolved:t}=this;return t?Lo(t.calculatedDuration):0}get time(){return Lo(this.currentTime)}set time(t){t=So(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Lo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=yq,onPlay:e,startTime:i}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),e&&e();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const bq=new Set(["opacity","clipPath","filter","transform"]);function vq(n,t,e,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const d={[t]:e};l&&(d.offset=l);const u=wk(a,r);return Array.isArray(u)&&(d.easing=u),n.animate(d,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const xq=uv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),om=10,Eq=2e4;function Sq(n){return Lv(n.type)||n.type==="spring"||!yk(n.ease)}function Lq(n,t){const e=new jv({...t,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<Eq;)i=e.sample(s),r.push(i.value),s+=om;return{times:void 0,keyframes:r,duration:s-om,ease:"linear"}}const Jk={anticipate:kk,backInOut:Tk,circInOut:Nk};function Cq(n){return n in Jk}class RC extends Hk{constructor(t){super(t);const{name:e,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new $k(s,(o,a)=>this.onKeyframesResolved(o,a),e,i,r),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:d}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&im()&&Cq(s)&&(s=Jk[s]),Sq(this.options)){const{onComplete:h,onUpdate:m,motionValue:p,element:E,...C}=this.options,v=Lq(t,C);t=v.keyframes,t.length===1&&(t[1]=t[0]),i=v.duration,r=v.times,s=v.ease,o="keyframes"}const u=vq(a.owner.current,l,t,{...this.options,duration:i,times:r,ease:s});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(mC(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(ng(t,this.options,e)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return Lo(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return Lo(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.currentTime=So(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return kr;const{animation:i}=e;mC(i,t)}return kr}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:i,duration:r,type:s,ease:o,times:a}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:m,...p}=this.options,E=new jv({...p,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),C=So(this.time);d.setWithVelocity(E.sample(C-om).value,E.sample(C).value,om)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:d}=e.owner.getProps();return xq()&&i&&bq.has(i)&&!l&&!d&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Aq={type:"spring",stiffness:500,damping:25,restSpeed:10},Iq=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Tq={type:"keyframes",duration:.8},kq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rq=(n,{keyframes:t})=>t.length>2?Tq:tl.has(n)?n.startsWith("scale")?Iq(t[1]):Aq:kq;function Nq({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:d,...u}){return!!Object.keys(u).length}const Uv=(n,t,e,i={},r,s)=>o=>{const a=Sv(i,n)||{},l=a.delay||i.delay||0;let{elapsed:d=0}=i;d=d-So(l);let u={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-d,onUpdate:m=>{t.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:s?void 0:r};Nq(a)||(u={...u,...Rq(n,u)}),u.duration&&(u.duration=So(u.duration)),u.repeatDelay&&(u.repeatDelay=So(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&t.get()!==void 0){const m=ng(u.keyframes,a);if(m!==void 0)return Pn.update(()=>{u.onUpdate(m),u.onComplete()}),new YW([])}return!s&&RC.supports(u)?new RC(u):new jv(u)};function Mq({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function t6(n,t,{delay:e=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=t;i&&(o=i);const d=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const h in l){const m=n.getValue(h,(s=n.latestValues[h])!==null&&s!==void 0?s:null),p=l[h];if(p===void 0||u&&Mq(u,h))continue;const E={delay:e,...Sv(o||{},h)};let C=!1;if(window.MotionHandoffAnimation){const A=Sk(n);if(A){const x=window.MotionHandoffAnimation(A,h,Pn);x!==null&&(E.startTime=x,C=!0)}}C_(n,h),m.start(Uv(h,m,p,n.shouldReduceMotion&&xk.has(h)?{type:!1}:E,n,C));const v=m.animation;v&&d.push(v)}return a&&Promise.all(d).then(()=>{Pn.update(()=>{a&&dV(n,a)})}),d}function M_(n,t,e={}){var i;const r=eg(n,t,e.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(s=e.transitionOverride);const o=r?()=>Promise.all(t6(n,r,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=s;return Bq(n,t,u+d,h,m,e)}:()=>Promise.resolve(),{when:l}=s;if(l){const[d,u]=l==="beforeChildren"?[o,a]:[a,o];return d().then(()=>u())}else return Promise.all([o(),a(e.delay)])}function Bq(n,t,e=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(d=0)=>d*i:(d=0)=>a-d*i;return Array.from(n.variantChildren).sort(Pq).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(M_(d,t,{...s,delay:e+l(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Pq(n,t){return n.sortNodePosition(t)}function Oq(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const r=t.map(s=>M_(n,s,e));i=Promise.all(r)}else if(typeof t=="string")i=M_(n,t,e);else{const r=typeof t=="function"?eg(n,t,e.custom):t;i=Promise.all(t6(n,r,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}const Fq=fv.length;function e6(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?e6(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<Fq;e++){const i=fv[e],r=n.props[i];(jf(r)||r===!1)&&(t[i]=r)}return t}const jq=[...dv].reverse(),Uq=dv.length;function Dq(n){return t=>Promise.all(t.map(({animation:e,options:i})=>Oq(n,e,i)))}function zq(n){let t=Dq(n),e=NC(),i=!0;const r=l=>(d,u)=>{var h;const m=eg(n,u,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:p,transitionEnd:E,...C}=m;d={...d,...C,...E}}return d};function s(l){t=l(n)}function o(l){const{props:d}=n,u=e6(n.parent)||{},h=[],m=new Set;let p={},E=1/0;for(let v=0;v<Uq;v++){const A=jq[v],x=e[A],P=d[A]!==void 0?d[A]:u[A],W=jf(P),K=A===l?x.isActive:null;K===!1&&(E=v);let j=P===u[A]&&P!==d[A]&&W;if(j&&i&&n.manuallyAnimateOnMount&&(j=!1),x.protectedKeys={...p},!x.isActive&&K===null||!P&&!x.prevProp||Jm(P)||typeof P=="boolean")continue;const b=Gq(x.prevProp,P);let B=b||A===l&&x.isActive&&!j&&W||v>E&&W,J=!1;const it=Array.isArray(P)?P:[P];let st=it.reduce(r(A),{});K===!1&&(st={});const{prevResolvedValues:z={}}=x,I={...z,...st},w=Y=>{B=!0,m.has(Y)&&(J=!0,m.delete(Y)),x.needsAnimating[Y]=!0;const Q=n.getValue(Y);Q&&(Q.liveStyle=!1)};for(const Y in I){const Q=st[Y],$=z[Y];if(p.hasOwnProperty(Y))continue;let F=!1;E_(Q)&&E_($)?F=!pk(Q,$):F=Q!==$,F?Q!=null?w(Y):m.add(Y):Q!==void 0&&m.has(Y)?w(Y):x.protectedKeys[Y]=!0}x.prevProp=P,x.prevResolvedValues=st,x.isActive&&(p={...p,...st}),i&&n.blockInitialAnimation&&(B=!1),B&&(!(j&&b)||J)&&h.push(...it.map(Y=>({animation:Y,options:{type:A}})))}if(m.size){const v={};m.forEach(A=>{const x=n.getBaseTarget(A),P=n.getValue(A);P&&(P.liveStyle=!0),v[A]=x??null}),h.push({animation:v})}let C=!!h.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(C=!1),i=!1,C?t(h):Promise.resolve()}function a(l,d){var u;if(e[l].isActive===d)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(l,d)}),e[l].isActive=d;const h=o(l);for(const m in e)e[m].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>e,reset:()=>{e=NC(),i=!0}}}function Gq(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!pk(t,n):!1}function rc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NC(){return{animate:rc(!0),whileInView:rc(),whileHover:rc(),whileTap:rc(),whileDrag:rc(),whileFocus:rc(),exit:rc()}}class Da{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Wq extends Da{constructor(t){super(t),t.animationState||(t.animationState=zq(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Jm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Vq=0;class qq extends Da{constructor(){super(...arguments),this.id=Vq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const $q={animation:{Feature:Wq},exit:{Feature:qq}};function Gf(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function oh(n){return{point:{x:n.pageX,y:n.pageY}}}const Hq=n=>t=>Av(t)&&n(t,oh(t));function pf(n,t,e,i){return Gf(n,t,Hq(e),i)}const MC=(n,t)=>Math.abs(n-t);function Kq(n,t){const e=MC(n.x,t.x),i=MC(n.y,t.y);return Math.sqrt(e**2+i**2)}class n6{constructor(t,e,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=b2(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=Kq(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:E}=h,{timestamp:C}=Ri;this.history.push({...E,timestamp:C});const{onStart:v,onMove:A}=this.handlers;m||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=_2(m,this.transformPagePoint),Pn.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:E,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=b2(h.type==="pointercancel"?this.lastMoveEventInfo:_2(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,v),E&&E(h,v)},!Av(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=i,this.contextWindow=r||window;const o=oh(t),a=_2(o,this.transformPagePoint),{point:l}=a,{timestamp:d}=Ri;this.history=[{...l,timestamp:d}];const{onSessionStart:u}=e;u&&u(t,b2(a,this.history)),this.removeListeners=sh(pf(this.contextWindow,"pointermove",this.handlePointerMove),pf(this.contextWindow,"pointerup",this.handlePointerUp),pf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ba(this.updatePoint)}}function _2(n,t){return t?{point:t(n.point)}:n}function BC(n,t){return{x:n.x-t.x,y:n.y-t.y}}function b2({point:n},t){return{point:n,delta:BC(n,i6(t)),offset:BC(n,Zq(t)),velocity:Qq(t,.1)}}function Zq(n){return n[0]}function i6(n){return n[n.length-1]}function Qq(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const r=i6(n);for(;e>=0&&(i=n[e],!(r.timestamp-i.timestamp>So(t)));)e--;if(!i)return{x:0,y:0};const s=Lo(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const r6=1e-4,Yq=1-r6,Xq=1+r6,s6=.01,Jq=0-s6,t$=0+s6;function Rr(n){return n.max-n.min}function e$(n,t,e){return Math.abs(n-t)<=e}function PC(n,t,e,i=.5){n.origin=i,n.originPoint=Vn(t.min,t.max,n.origin),n.scale=Rr(e)/Rr(t),n.translate=Vn(e.min,e.max,n.origin)-n.originPoint,(n.scale>=Yq&&n.scale<=Xq||isNaN(n.scale))&&(n.scale=1),(n.translate>=Jq&&n.translate<=t$||isNaN(n.translate))&&(n.translate=0)}function mf(n,t,e,i){PC(n.x,t.x,e.x,i?i.originX:void 0),PC(n.y,t.y,e.y,i?i.originY:void 0)}function OC(n,t,e){n.min=e.min+t.min,n.max=n.min+Rr(t)}function n$(n,t,e){OC(n.x,t.x,e.x),OC(n.y,t.y,e.y)}function FC(n,t,e){n.min=t.min-e.min,n.max=n.min+Rr(t)}function gf(n,t,e){FC(n.x,t.x,e.x),FC(n.y,t.y,e.y)}function i$(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Vn(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Vn(e,n,i.max):Math.min(n,e)),n}function jC(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function r$(n,{top:t,left:e,bottom:i,right:r}){return{x:jC(n.x,e,r),y:jC(n.y,t,i)}}function UC(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function s$(n,t){return{x:UC(n.x,t.x),y:UC(n.y,t.y)}}function o$(n,t){let e=.5;const i=Rr(n),r=Rr(t);return r>i?e=xu(t.min,t.max-i,n.min):i>r&&(e=xu(n.min,n.max-r,t.min)),Ro(0,1,e)}function a$(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const B_=.35;function c$(n=B_){return n===!1?n=0:n===!0&&(n=B_),{x:DC(n,"left","right"),y:DC(n,"top","bottom")}}function DC(n,t,e){return{min:zC(n,t),max:zC(n,e)}}function zC(n,t){return typeof n=="number"?n:n[t]||0}const GC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ql=()=>({x:GC(),y:GC()}),WC=()=>({min:0,max:0}),Jn=()=>({x:WC(),y:WC()});function Gr(n){return[n("x"),n("y")]}function o6({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function l$({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function u$(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function v2(n){return n===void 0||n===1}function P_({scale:n,scaleX:t,scaleY:e}){return!v2(n)||!v2(t)||!v2(e)}function uc(n){return P_(n)||a6(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function a6(n){return VC(n.x)||VC(n.y)}function VC(n){return n&&n!=="0%"}function am(n,t,e){const i=n-e,r=t*i;return e+r}function qC(n,t,e,i,r){return r!==void 0&&(n=am(n,r,i)),am(n,e,i)+t}function O_(n,t=0,e=1,i,r){n.min=qC(n.min,t,e,i,r),n.max=qC(n.max,t,e,i,r)}function c6(n,{x:t,y:e}){O_(n.x,t.translate,t.scale,t.originPoint),O_(n.y,e.translate,e.scale,e.originPoint)}const $C=.999999999999,HC=1.0000000000001;function d$(n,t,e,i=!1){const r=e.length;if(!r)return;t.x=t.y=1;let s,o;for(let a=0;a<r;a++){s=e[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xl(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,c6(n,o)),i&&uc(s.latestValues)&&Xl(n,s.latestValues))}t.x<HC&&t.x>$C&&(t.x=1),t.y<HC&&t.y>$C&&(t.y=1)}function Yl(n,t){n.min=n.min+t,n.max=n.max+t}function KC(n,t,e,i,r=.5){const s=Vn(n.min,n.max,r);O_(n,t,e,s,i)}function Xl(n,t){KC(n.x,t.x,t.scaleX,t.scale,t.originX),KC(n.y,t.y,t.scaleY,t.scale,t.originY)}function l6(n,t){return o6(u$(n.getBoundingClientRect(),t))}function f$(n,t,e){const i=l6(n,e),{scroll:r}=t;return r&&(Yl(i.x,r.offset.x),Yl(i.y,r.offset.y)),i}const u6=({current:n})=>n?n.ownerDocument.defaultView:null,h$=new WeakMap;class p${constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jn(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(oh(u).point)},s=(u,h)=>{const{drag:m,dragPropagation:p,onDragStart:E}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oV(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gr(v=>{let A=this.getAxisMotionValue(v).get()||0;if(Ds.test(A)){const{projection:x}=this.visualElement;if(x&&x.layout){const P=x.layout.layoutBox[v];P&&(A=Rr(P)*(parseFloat(A)/100))}}this.originPoint[v]=A}),E&&Pn.postRender(()=>E(u,h)),C_(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:E,onDrag:C}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=h;if(p&&this.currentDirection===null){this.currentDirection=m$(v),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),C&&C(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Gr(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new n6(t,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:u6(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Pn.postRender(()=>s(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:r}=this.getProps();if(!i||!Fp(t,r,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=i$(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;e&&Kl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=r$(r.layoutBox,e):this.constraints=!1,this.elastic=c$(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=a$(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Kl(t))return!1;const i=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=f$(i,r.root,this.visualElement.getTransformPagePoint());let o=s$(r.layout.layoutBox,s);if(e){const a=e(l$(o));this.hasMutatedConstraints=!!a,a&&(o=o6(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},d=Gr(u=>{if(!Fp(u,e,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=r?200:1e6,p=r?40:1e7,E={type:"inertia",velocity:i?t[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,E)});return Promise.all(d).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return C_(this.visualElement,t),i.start(Uv(t,i,0,e,this.visualElement,!1))}stopAnimation(){Gr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Gr(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),r=i[e];return r||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Gr(e=>{const{drag:i}=this.getProps();if(!Fp(e,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(e);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[e];s.set(t[e]-Vn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Kl(e)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Gr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=o$({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Gr(o=>{if(!Fp(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:d}=this.constraints[o];a.set(Vn(l,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;h$.set(this.visualElement,this);const t=this.visualElement.current,e=pf(t,"pointerdown",l=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Kl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Pn.read(i);const o=Gf(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(Gr(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),e(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=B_,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Fp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function m$(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class g$ extends Da{constructor(t){super(t),this.removeGroupControls=kr,this.removeListeners=kr,this.controls=new p$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ZC=n=>(t,e)=>{n&&Pn.postRender(()=>n(t,e))};class y$ extends Da{constructor(){super(...arguments),this.removePointerDownListener=kr}onPointerDown(t){this.session=new n6(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:u6(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:ZC(t),onStart:ZC(e),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Pn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=pf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const C0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QC(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const jd={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Fe.test(n))n=parseFloat(n);else return n;const e=QC(n,t.target.x),i=QC(n,t.target.y);return`${e}% ${i}%`}},w$={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,r=Pa.parse(n);if(r.length>5)return i;const s=Pa.createTransformer(n),o=typeof r[0]!="number"?1:0,a=e.x.scale*t.x,l=e.y.scale*t.y;r[0+o]/=a,r[1+o]/=l;const d=Vn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),s(r)}};class _$ extends rt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=t;UW(b$),s&&(e.group&&e.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),C0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||t.layoutDependency!==e||e===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Pn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function d6(n){const[t,e]=$T(),i=rt.useContext(ov);return U.jsx(_$,{...n,layoutGroup:i,switchLayoutGroup:rt.useContext(ek),isPresent:t,safeToRemove:e})}const b$={borderRadius:{...jd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jd,borderTopRightRadius:jd,borderBottomLeftRadius:jd,borderBottomRightRadius:jd,boxShadow:w$};function v$(n,t,e){const i=Hi(n)?n:Df(n);return i.start(Uv("",i,t,e)),i.animation}function x$(n){return n instanceof SVGElement&&n.tagName!=="svg"}const E$=(n,t)=>n.depth-t.depth;class S${constructor(){this.children=[],this.isDirty=!1}add(t){Iv(this.children,t),this.isDirty=!0}remove(t){Tv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(E$),this.isDirty=!1,this.children.forEach(t)}}function L$(n,t){const e=zs.now(),i=({timestamp:r})=>{const s=r-e;s>=t&&(Ba(i),n(s-t))};return Pn.read(i,!0),()=>Ba(i)}const f6=["TopLeft","TopRight","BottomLeft","BottomRight"],C$=f6.length,YC=n=>typeof n=="string"?parseFloat(n):n,XC=n=>typeof n=="number"||Fe.test(n);function A$(n,t,e,i,r,s){r?(n.opacity=Vn(0,e.opacity!==void 0?e.opacity:1,I$(i)),n.opacityExit=Vn(t.opacity!==void 0?t.opacity:1,0,T$(i))):s&&(n.opacity=Vn(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,i));for(let o=0;o<C$;o++){const a=`border${f6[o]}Radius`;let l=JC(t,a),d=JC(e,a);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||XC(l)===XC(d)?(n[a]=Math.max(Vn(YC(l),YC(d),i),0),(Ds.test(d)||Ds.test(l))&&(n[a]+="%")):n[a]=d}(t.rotate||e.rotate)&&(n.rotate=Vn(t.rotate||0,e.rotate||0,i))}function JC(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const I$=h6(0,.5,Rk),T$=h6(.5,.95,kr);function h6(n,t,e){return i=>i<n?0:i>t?1:e(xu(n,t,i))}function t4(n,t){n.min=t.min,n.max=t.max}function zr(n,t){t4(n.x,t.x),t4(n.y,t.y)}function e4(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function n4(n,t,e,i,r){return n-=t,n=am(n,1/e,i),r!==void 0&&(n=am(n,1/r,i)),n}function k$(n,t=0,e=1,i=.5,r,s=n,o=n){if(Ds.test(t)&&(t=parseFloat(t),t=Vn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Vn(s.min,s.max,i);n===s&&(a-=t),n.min=n4(n.min,t,e,a,r),n.max=n4(n.max,t,e,a,r)}function i4(n,t,[e,i,r],s,o){k$(n,t[e],t[i],t[r],t.scale,s,o)}const R$=["x","scaleX","originX"],N$=["y","scaleY","originY"];function r4(n,t,e,i){i4(n.x,t,R$,e?e.x:void 0,i?i.x:void 0),i4(n.y,t,N$,e?e.y:void 0,i?i.y:void 0)}function s4(n){return n.translate===0&&n.scale===1}function p6(n){return s4(n.x)&&s4(n.y)}function o4(n,t){return n.min===t.min&&n.max===t.max}function M$(n,t){return o4(n.x,t.x)&&o4(n.y,t.y)}function a4(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function m6(n,t){return a4(n.x,t.x)&&a4(n.y,t.y)}function c4(n){return Rr(n.x)/Rr(n.y)}function l4(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class B${constructor(){this.members=[]}add(t){Iv(this.members,t),t.scheduleRender()}remove(t){if(Tv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let i;for(let r=e;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function P$(n,t,e){let i="";const r=n.x.translate/t.x,s=n.y.translate/t.y,o=e?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:p,skewY:E}=e;d&&(i=`perspective(${d}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),m&&(i+=`rotateY(${m}deg) `),p&&(i+=`skewX(${p}deg) `),E&&(i+=`skewY(${E}deg) `)}const a=n.x.scale*t.x,l=n.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const dc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},cf=typeof window<"u"&&window.MotionDebug!==void 0,x2=["","X","Y","Z"],O$={visibility:"hidden"},u4=1e3;let F$=0;function E2(n,t,e,i){const{latestValues:r}=t;r[n]&&(e[n]=r[n],t.setStaticValue(n,0),i&&(i[n]=0))}function g6(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=Sk(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Pn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&g6(i)}function y6({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=t?.()){this.id=F$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,cf&&(dc.totalNodes=dc.resolvedTargetDeltas=dc.recalculatedProjection=0),this.nodes.forEach(D$),this.nodes.forEach(q$),this.nodes.forEach($$),this.nodes.forEach(z$),cf&&window.MotionDebug.record(dc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new S$)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=x$(o),this.instance=o;const{layoutId:l,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(d||l)&&(this.isLayoutDirty=!0),n){let h;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=L$(m,250),C0.hasAnimatedSinceResize&&(C0.hasAnimatedSinceResize=!1,this.nodes.forEach(f4))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||u.getDefaultTransition()||Y$,{onLayoutAnimationStart:v,onLayoutAnimationComplete:A}=u.getProps(),x=!this.targetLayout||!m6(this.targetLayout,E)||p,P=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||P||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,P);const W={...Sv(C,"layout"),onPlay:v,onComplete:A};(u.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else m||f4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ba(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(H$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&g6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(d4);return}this.isUpdating||this.nodes.forEach(W$),this.isUpdating=!1,this.nodes.forEach(V$),this.nodes.forEach(j$),this.nodes.forEach(U$),this.clearAllSnapshots();const a=zs.now();Ri.delta=Ro(0,1e3/60,a-Ri.timestamp),Ri.timestamp=a,Ri.isProcessing=!0,h2.update.process(Ri),h2.preRender.process(Ri),h2.render.process(Ri),Ri.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G$),this.sharedNodes.forEach(K$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!p6(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(a||uc(this.latestValues)||u)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),X$(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Jn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(J$))){const{scroll:u}=this.root;u&&(Yl(l.x,u.offset.x),Yl(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Jn();if(zr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&zr(l,o),Yl(l.x,h.offset.x),Yl(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Jn();zr(l,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Xl(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),uc(u.latestValues)&&Xl(l,u.latestValues)}return uc(this.latestValues)&&Xl(l,this.latestValues),l}removeTransform(o){const a=Jn();zr(a,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!uc(d.latestValues))continue;P_(d.latestValues)&&d.updateSnapshot();const u=Jn(),h=d.measurePageBox();zr(u,h),r4(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return uc(this.latestValues)&&r4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ri.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ri.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jn(),this.relativeTargetOrigin=Jn(),gf(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Jn(),this.targetWithTransforms=Jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),n$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zr(this.target,this.layout.layoutBox),c6(this.target,this.targetDelta)):zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jn(),this.relativeTargetOrigin=Jn(),gf(this.relativeTargetOrigin,this.target,p.target),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}cf&&dc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||P_(this.parent.latestValues)||a6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ri.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;zr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;d$(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Jn());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e4(this.prevProjectionDelta.x,this.projectionDelta.x),e4(this.prevProjectionDelta.y,this.projectionDelta.y)),mf(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!l4(this.projectionDelta.x,this.prevProjectionDelta.x)||!l4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),cf&&dc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ql(),this.projectionDelta=Ql(),this.projectionDeltaWithTransform=Ql()}setAnimationOrigin(o,a=!1){const l=this.snapshot,d=l?l.latestValues:{},u={...this.latestValues},h=Ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Jn(),p=l?l.source:void 0,E=this.layout?this.layout.source:void 0,C=p!==E,v=this.getStack(),A=!v||v.members.length<=1,x=!!(C&&!A&&this.options.crossfade===!0&&!this.path.some(Q$));this.animationProgress=0;let P;this.mixTargetDelta=W=>{const K=W/1e3;h4(h.x,o.x,K),h4(h.y,o.y,K),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z$(this.relativeTarget,this.relativeTargetOrigin,m,K),P&&M$(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Jn()),zr(P,this.relativeTarget)),C&&(this.animationValues=u,A$(u,d,this.latestValues,K,x,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ba(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pn.update(()=>{C0.hasAnimatedSinceResize=!0,this.currentAnimation=v$(0,u4,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(u4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:d,latestValues:u}=o;if(!(!a||!l||!d)){if(this!==o&&this.layout&&d&&w6(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||Jn();const h=Rr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Rr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}zr(a,l),Xl(a,u),mf(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new B$),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const d={};l.z&&E2("z",o,d,this.animationValues);for(let u=0;u<x2.length;u++)E2(`rotate${x2[u]}`,o,d,this.animationValues),E2(`skew${x2[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return O$;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=S0(o?.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=S0(o?.pointerEvents)||""),this.hasProjected&&!uc(this.latestValues)&&(C.transform=u?u({},""):"none",this.hasProjected=!1),C}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=P$(this.projectionDeltaWithTransform,this.treeScale,m),u&&(d.transform=u(m,d.transform));const{x:p,y:E}=this.projectionDelta;d.transformOrigin=`${p.origin*100}% ${E.origin*100}% 0`,h.animationValues?d.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const C in nm){if(m[C]===void 0)continue;const{correct:v,applyTo:A}=nm[C],x=d.transform==="none"?m[C]:v(m[C],h);if(A){const P=A.length;for(let W=0;W<P;W++)d[A[W]]=x}else d[C]=x}return this.options.layoutId&&(d.pointerEvents=h===this?S0(o?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(d4),this.root.sharedNodes.clear()}}}function j$(n){n.updateLayout()}function U$(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?Gr(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],p=Rr(m);m.min=i[h].min,m.max=m.min+p}):w6(s,e.layoutBox,i)&&Gr(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],p=Rr(i[h]);m.max=m.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+p)});const a=Ql();mf(a,i,e.layoutBox);const l=Ql();o?mf(l,n.applyTransform(r,!0),e.measuredBox):mf(l,i,e.layoutBox);const d=!p6(a);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const E=Jn();gf(E,e.layoutBox,m.layoutBox);const C=Jn();gf(C,i,p.layoutBox),m6(E,C)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=E,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function D$(n){cf&&dc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function z$(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function G$(n){n.clearSnapshot()}function d4(n){n.clearMeasurements()}function W$(n){n.isLayoutDirty=!1}function V$(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function f4(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function q$(n){n.resolveTargetDelta()}function $$(n){n.calcProjection()}function H$(n){n.resetSkewAndRotation()}function K$(n){n.removeLeadSnapshot()}function h4(n,t,e){n.translate=Vn(t.translate,0,e),n.scale=Vn(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function p4(n,t,e,i){n.min=Vn(t.min,e.min,i),n.max=Vn(t.max,e.max,i)}function Z$(n,t,e,i){p4(n.x,t.x,e.x,i),p4(n.y,t.y,e.y,i)}function Q$(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Y$={duration:.45,ease:[.4,0,.1,1]},m4=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),g4=m4("applewebkit/")&&!m4("chrome/")?Math.round:kr;function y4(n){n.min=g4(n.min),n.max=g4(n.max)}function X$(n){y4(n.x),y4(n.y)}function w6(n,t,e){return n==="position"||n==="preserve-aspect"&&!e$(c4(t),c4(e),.2)}function J$(n){var t;return n!==n.root&&((t=n.scroll)===null||t===void 0?void 0:t.wasRoot)}const tH=y6({attachResizeListener:(n,t)=>Gf(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),S2={current:void 0},_6=y6({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!S2.current){const n=new tH({});n.mount(window),n.setOptions({layoutScroll:!0}),S2.current=n}return S2.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),eH={pan:{Feature:y$},drag:{Feature:g$,ProjectionNode:_6,MeasureLayout:d6}};function w4(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,s=i[r];s&&Pn.postRender(()=>s(t,oh(t)))}class nH extends Da{mount(){const{current:t}=this.node;t&&(this.unmount=eV(t,e=>(w4(this.node,e,"Start"),i=>w4(this.node,i,"End"))))}unmount(){}}class iH extends Da{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sh(Gf(this.node.current,"focus",()=>this.onFocus()),Gf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _4(n,t,e){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),s=i[r];s&&Pn.postRender(()=>s(t,oh(t)))}class rH extends Da{mount(){const{current:t}=this.node;t&&(this.unmount=sV(t,e=>(_4(this.node,e,"Start"),(i,{success:r})=>_4(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const F_=new WeakMap,L2=new WeakMap,sH=n=>{const t=F_.get(n.target);t&&t(n)},oH=n=>{n.forEach(sH)};function aH({root:n,...t}){const e=n||document;L2.has(e)||L2.set(e,{});const i=L2.get(e),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(oH,{root:n,...t})),i[r]}function cH(n,t,e){const i=aH(t);return F_.set(n,e),i.observe(n),()=>{F_.delete(n),i.unobserve(n)}}const lH={some:0,all:1};class uH extends Da{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:r="some",once:s}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:lH[r]},a=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(l)};return cH(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(dH(t,e))&&this.startObserver()}unmount(){}}function dH({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const fH={inView:{Feature:uH},tap:{Feature:rH},focus:{Feature:iH},hover:{Feature:nH}},hH={layout:{ProjectionNode:_6,MeasureLayout:d6}},j_={current:null},b6={current:!1};function pH(){if(b6.current=!0,!!lv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>j_.current=n.matches;n.addListener(t),t()}else j_.current=!1}const mH=[...qk,$i,Pa],gH=n=>mH.find(Vk(n)),b4=new WeakMap;function yH(n,t,e){for(const i in t){const r=t[i],s=e[i];if(Hi(r))n.addValue(i,r);else if(Hi(s))n.addValue(i,Df(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Df(o!==void 0?o:r,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const v4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wH{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ov,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=zs.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Pn.render(this.render,!1,!0))};const{latestValues:l,renderState:d,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=tg(e),this.isVariantNode=JT(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const p in m){const E=m[p];l[p]!==void 0&&Hi(E)&&E.set(l[p],!1)}}mount(t){this.current=t,b4.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),b6.current||pH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){b4.delete(this.current),this.projection&&this.projection.unmount(),Ba(this.notifyUpdate),Ba(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=tl.has(t),r=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Pn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=e.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),s(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Eu){const e=Eu[t];if(!e)continue;const{isEnabled:i,Feature:r}=e;if(!this.features[t]&&r&&i(this.props)&&(this.features[t]=new r(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<v4.length;i++){const r=v4[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=t[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=yH(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Df(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){var i;let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(i=this.getBaseTargetFromProps(this.props,t))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Gk(r)||Mk(r))?r=parseFloat(r):!gH(r)&&Pa.test(e)&&(r=Uk(t,e)),this.setBaseTarget(t,Hi(r)?r.get():r)),Hi(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=gv(this.props,i,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);o&&(r=o[t])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Hi(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new kv),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class v6 extends wH{constructor(){super(...arguments),this.KeyframeResolver=$k}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Hi(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function _H(n){return window.getComputedStyle(n)}class bH extends v6{constructor(){super(...arguments),this.type="html",this.renderInstance=ck}readValueFromInstance(t,e){if(tl.has(e)){const i=Pv(e);return i&&i.default||0}else{const i=_H(t),r=(sk(e)?i.getPropertyValue(e):i[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return l6(t,e)}build(t,e,i){_v(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return Ev(t,e,i)}}class vH extends v6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Jn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(tl.has(e)){const i=Pv(e);return i&&i.default||0}return e=lk.has(e)?e:hv(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return fk(t,e,i)}build(t,e,i){bv(t,e,this.isSVGTag,i.transformTemplate)}renderInstance(t,e,i,r){uk(t,e,i,r)}mount(t){this.isSVGTag=xv(t.tagName),super.mount(t)}}const xH=(n,t)=>mv(n)?new vH(t):new bH(t,{allowProjection:n!==rt.Fragment}),EH=KW({...$q,...fH,...eH,...hH},xH),De=lW(EH);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x6=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=rt.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>rt.createElement("svg",{ref:l,...LH,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:x6("lucide",r),...a},[...o.map(([d,u])=>rt.createElement(d,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,t)=>{const e=rt.forwardRef(({className:i,...r},s)=>rt.createElement(CH,{ref:s,iconNode:t,className:x6(`lucide-${SH(n)}`,i),...r}));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Je("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=Je("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=Je("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Je("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=Je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=Je("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Je("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=Je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=Je("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=Je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=Je("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Je("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=Je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=Je("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=Je("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=Je("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=Je("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Je("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=Je("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Je("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function I6(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(t=0;t<r;t++)n[t]&&(e=I6(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function T6(){for(var n,t,e=0,i="",r=arguments.length;e<r;e++)(n=arguments[e])&&(t=I6(n))&&(i&&(i+=" "),i+=t);return i}const Gv="-",HH=n=>{const t=ZH(n),{conflictingClassGroups:e,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(Gv);return a[0]===""&&a.length!==1&&a.shift(),k6(a,t)||KH(o)},getConflictingClassGroupIds:(o,a)=>{const l=e[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},k6=(n,t)=>{if(n.length===0)return t.classGroupId;const e=n[0],i=t.nextPart.get(e),r=i?k6(n.slice(1),i):void 0;if(r)return r;if(t.validators.length===0)return;const s=n.join(Gv);return t.validators.find(({validator:o})=>o(s))?.classGroupId},S4=/^\[(.+)\]$/,KH=n=>{if(S4.test(n)){const t=S4.exec(n)[1],e=t?.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},ZH=n=>{const{theme:t,prefix:e}=n,i={nextPart:new Map,validators:[]};return YH(Object.entries(n.classGroups),e).forEach(([s,o])=>{D_(o,i,s,t)}),i},D_=(n,t,e,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?t:L4(t,r);s.classGroupId=e;return}if(typeof r=="function"){if(QH(r)){D_(r(i),t,e,i);return}t.validators.push({validator:r,classGroupId:e});return}Object.entries(r).forEach(([s,o])=>{D_(o,L4(t,s),e,i)})})},L4=(n,t)=>{let e=n;return t.split(Gv).forEach(i=>{e.nextPart.has(i)||e.nextPart.set(i,{nextPart:new Map,validators:[]}),e=e.nextPart.get(i)}),e},QH=n=>n.isThemeGetter,YH=(n,t)=>t?n.map(([e,i])=>{const r=i.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[t+o,a])):s);return[e,r]}):n,XH=n=>{if(n<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,i=new Map;const r=(s,o)=>{e.set(s,o),t++,t>n&&(t=0,i=e,e=new Map)};return{get(s){let o=e.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){e.has(s)?e.set(s,o):r(s,o)}}},R6="!",JH=n=>{const{separator:t,experimentalParseClassName:e}=n,i=t.length===1,r=t[0],s=t.length,o=a=>{const l=[];let d=0,u=0,h;for(let v=0;v<a.length;v++){let A=a[v];if(d===0){if(A===r&&(i||a.slice(v,v+s)===t)){l.push(a.slice(u,v)),u=v+s;continue}if(A==="/"){h=v;continue}}A==="["?d++:A==="]"&&d--}const m=l.length===0?a:a.substring(u),p=m.startsWith(R6),E=p?m.substring(1):m,C=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:E,maybePostfixModifierPosition:C}};return e?a=>e({className:a,parseClassName:o}):o},tK=n=>{if(n.length<=1)return n;const t=[];let e=[];return n.forEach(i=>{i[0]==="["?(t.push(...e.sort(),i),e=[]):e.push(i)}),t.push(...e.sort()),t},eK=n=>({cache:XH(n.cacheSize),parseClassName:JH(n),...HH(n)}),nK=/\s+/,iK=(n,t)=>{const{parseClassName:e,getClassGroupId:i,getConflictingClassGroupIds:r}=t,s=[],o=n.trim().split(nK);let a="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=e(d);let E=!!p,C=i(E?m.substring(0,p):m);if(!C){if(!E){a=d+(a.length>0?" "+a:a);continue}if(C=i(m),!C){a=d+(a.length>0?" "+a:a);continue}E=!1}const v=tK(u).join(":"),A=h?v+R6:v,x=A+C;if(s.includes(x))continue;s.push(x);const P=r(C,E);for(let W=0;W<P.length;++W){const K=P[W];s.push(A+K)}a=d+(a.length>0?" "+a:a)}return a};function rK(){let n=0,t,e,i="";for(;n<arguments.length;)(t=arguments[n++])&&(e=N6(t))&&(i&&(i+=" "),i+=e);return i}const N6=n=>{if(typeof n=="string")return n;let t,e="";for(let i=0;i<n.length;i++)n[i]&&(t=N6(n[i]))&&(e&&(e+=" "),e+=t);return e};function sK(n,...t){let e,i,r,s=o;function o(l){const d=t.reduce((u,h)=>h(u),n());return e=eK(d),i=e.cache.get,r=e.cache.set,s=a,a(l)}function a(l){const d=i(l);if(d)return d;const u=iK(l,e);return r(l,u),u}return function(){return s(rK.apply(null,arguments))}}const Rn=n=>{const t=e=>e[n]||[];return t.isThemeGetter=!0,t},M6=/^\[(?:([a-z-]+):)?(.+)\]$/i,oK=/^\d+\/\d+$/,aK=new Set(["px","full","screen"]),cK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,io=n=>su(n)||aK.has(n)||oK.test(n),fa=n=>Uu(n,"length",bK),su=n=>!!n&&!Number.isNaN(Number(n)),C2=n=>Uu(n,"number",su),Ud=n=>!!n&&Number.isInteger(Number(n)),hK=n=>n.endsWith("%")&&su(n.slice(0,-1)),qe=n=>M6.test(n),ha=n=>cK.test(n),pK=new Set(["length","size","percentage"]),mK=n=>Uu(n,pK,B6),gK=n=>Uu(n,"position",B6),yK=new Set(["image","url"]),wK=n=>Uu(n,yK,xK),_K=n=>Uu(n,"",vK),Dd=()=>!0,Uu=(n,t,e)=>{const i=M6.exec(n);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):e(i[2]):!1},bK=n=>lK.test(n)&&!uK.test(n),B6=()=>!1,vK=n=>dK.test(n),xK=n=>fK.test(n),EK=()=>{const n=Rn("colors"),t=Rn("spacing"),e=Rn("blur"),i=Rn("brightness"),r=Rn("borderColor"),s=Rn("borderRadius"),o=Rn("borderSpacing"),a=Rn("borderWidth"),l=Rn("contrast"),d=Rn("grayscale"),u=Rn("hueRotate"),h=Rn("invert"),m=Rn("gap"),p=Rn("gradientColorStops"),E=Rn("gradientColorStopPositions"),C=Rn("inset"),v=Rn("margin"),A=Rn("opacity"),x=Rn("padding"),P=Rn("saturate"),W=Rn("scale"),K=Rn("sepia"),j=Rn("skew"),b=Rn("space"),B=Rn("translate"),J=()=>["auto","contain","none"],it=()=>["auto","hidden","clip","visible","scroll"],st=()=>["auto",qe,t],z=()=>[qe,t],I=()=>["",io,fa],w=()=>["auto",su,qe],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",qe],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>[su,qe];return{cacheSize:500,separator:":",theme:{colors:[Dd],spacing:[io,fa],blur:["none","",ha,qe],brightness:R(),borderColor:[n],borderRadius:["none","","full",ha,qe],borderSpacing:z(),borderWidth:I(),contrast:R(),grayscale:$(),hueRotate:R(),invert:$(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[hK,fa],inset:st(),margin:st(),opacity:R(),padding:z(),saturate:R(),scale:R(),sepia:$(),skew:R(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[ha]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),qe]}],overflow:[{overflow:it()}],"overflow-x":[{"overflow-x":it()}],"overflow-y":[{"overflow-y":it()}],overscroll:[{overscroll:J()}],"overscroll-x":[{"overscroll-x":J()}],"overscroll-y":[{"overscroll-y":J()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ud,qe]}],basis:[{basis:st()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Ud,qe]}],"grid-cols":[{"grid-cols":[Dd]}],"col-start-end":[{col:["auto",{span:["full",Ud,qe]},qe]}],"col-start":[{"col-start":w()}],"col-end":[{"col-end":w()}],"grid-rows":[{"grid-rows":[Dd]}],"row-start-end":[{row:["auto",{span:[Ud,qe]},qe]}],"row-start":[{"row-start":w()}],"row-end":[{"row-end":w()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,t]}],"min-w":[{"min-w":[qe,t,"min","max","fit"]}],"max-w":[{"max-w":[qe,t,"none","full","min","max","fit","prose",{screen:[ha]},ha]}],h:[{h:[qe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ha,fa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",C2]}],"font-family":[{font:[Dd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",su,C2]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",io,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",io,fa]}],"underline-offset":[{"underline-offset":["auto",io,qe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),gK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wK]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:V()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[io,qe]}],"outline-w":[{outline:[io,fa]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[io,fa]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ha,_K]}],"shadow-color":[{shadow:[Dd]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ha,qe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[P]}],sepia:[{sepia:[K]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[W]}],"scale-x":[{"scale-x":[W]}],"scale-y":[{"scale-y":[W]}],rotate:[{rotate:[Ud,qe]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[io,fa,C2]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SK=sK(EK);function Re(...n){return SK(T6(n))}function Cu(n){return(n/Ma).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4})}function LK(n){return(n/1e6).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function P6(n,t=4){return n.length<=t*2?n:`${n.slice(0,t)}...${n.slice(-t)}`}function yf(n){return`${(n*100).toFixed(1)}%`}function ms(n){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}function O6(n){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(n)}function F6(n){const t=Math.floor((Date.now()-n.getTime())/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function CK(n){return navigator.clipboard.writeText(n)}function z_(){return Math.random().toString(36).substring(2,15)}function A2({name:n,description:t,icon:e,color:i,glowClass:r,features:s,isActive:o=!0,delay:a=0}){return U.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a},className:Re("relative glass-card p-6 border-2 transition-all duration-500",o?`${i} ${r}`:"border-glass-border opacity-60"),children:[o&&U.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl",children:U.jsx(De.div,{className:"absolute inset-x-0 h-px bg-gradient-to-r from-transparent via-current to-transparent opacity-50",animate:{top:["0%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{color:i.replace("border-","").replace("/30","")}})}),U.jsxs("div",{className:"relative z-10",children:[U.jsxs("div",{className:"flex items-start justify-between",children:[U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:Re("p-3 rounded-lg",o?i.replace("border-","bg-").replace("/30","/20"):"bg-white/5"),children:e}),U.jsxs("div",{children:[U.jsx("h3",{className:"font-semibold text-lg",children:n}),U.jsx("p",{className:"text-sm text-white/50",children:t})]})]}),o&&U.jsx(De.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:Re("w-3 h-3 rounded-full",i.replace("border-","bg-").replace("/30",""))})]}),U.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:s.map((l,d)=>U.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[U.jsx("div",{className:Re("w-1 h-1 rounded-full",i.replace("border-","bg-").replace("/30","/50"))}),l]},d))})]})]})}function C4({delay:n=0}){return U.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:n},className:"flex justify-center py-2",children:U.jsxs(De.div,{animate:{y:[0,5,0]},transition:{duration:1.5,repeat:1/0},className:"flex flex-col items-center text-white/30",children:[U.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-neon-cyan/50 to-neon-purple/50"}),U.jsx(AH,{className:"h-4 w-4"}),U.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-neon-purple/50 to-status-success/50"})]})})}function AK(){return U.jsxs("div",{className:"relative",children:[U.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[U.jsx("div",{className:"absolute top-0 left-1/4 w-64 h-64 bg-neon-cyan/5 rounded-full blur-3xl"}),U.jsx("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-neon-purple/5 rounded-full blur-3xl"}),U.jsx("div",{className:"absolute bottom-0 left-1/3 w-64 h-64 bg-status-success/5 rounded-full blur-3xl"})]}),U.jsxs("div",{className:"relative space-y-0",children:[U.jsx(A2,{name:"Privacy Layer",description:"PrivacyCash Integration",icon:U.jsx(Kr,{className:"h-6 w-6 text-neon-cyan"}),color:"border-neon-cyan/30",glowClass:"shadow-neon-cyan",delay:0,features:["Zero-Knowledge Proofs","Shielded Deposits","Break On-Chain Link","Private Notes"]}),U.jsx(C4,{delay:.3}),U.jsx(A2,{name:"TEE Layer",description:"MagicBlock Ephemeral Rollup",icon:U.jsx(Wc,{className:"h-6 w-6 text-neon-purple"}),color:"border-neon-purple/30",glowClass:"shadow-neon-purple",delay:.2,features:["Encrypted Memory","Confidential Execution","Strategy Delegation","L1 State Sync"]}),U.jsx(C4,{delay:.5}),U.jsx(A2,{name:"Trading Layer",description:"PNP Prediction Markets",icon:U.jsx(ir,{className:"h-6 w-6 text-status-success"}),color:"border-status-success/30",glowClass:"shadow-neon-green",delay:.4,features:["Market Selection","Position Sizing","Trade Execution","P&L Tracking"]})]}),U.jsxs(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-8 p-4 glass-card",children:[U.jsx("h4",{className:"text-sm font-medium mb-3 text-white/70",children:"Privacy Sandwich Flow"}),U.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(zv,{className:"h-4 w-4 text-neon-cyan"}),U.jsx("span",{className:"text-white/60",children:"Shield funds privately"})]}),U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(S6,{className:"h-4 w-4 text-neon-purple"}),U.jsx("span",{className:"text-white/60",children:"Execute in TEE"})]}),U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(Wf,{className:"h-4 w-4 text-status-success"}),U.jsx("span",{className:"text-white/60",children:"Trade on markets"})]})]})]})]})}function A4(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function sg(...n){return t=>{let e=!1;const i=n.map(r=>{const s=A4(r,t);return!e&&typeof s=="function"&&(e=!0),s});if(e)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():A4(n[r],null)}}}}function el(...n){return rt.useCallback(sg(...n),n)}var IK=Symbol.for("react.lazy"),lm=wP[" use ".trim().toString()];function TK(n){return typeof n=="object"&&n!==null&&"then"in n}function j6(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===IK&&"_payload"in n&&TK(n._payload)}function U6(n){const t=RK(n),e=rt.forwardRef((i,r)=>{let{children:s,...o}=i;j6(s)&&typeof lm=="function"&&(s=lm(s._payload));const a=rt.Children.toArray(s),l=a.find(MK);if(l){const d=l.props.children,u=a.map(h=>h===l?rt.Children.count(d)>1?rt.Children.only(null):rt.isValidElement(d)?d.props.children:null:h);return U.jsx(t,{...o,ref:r,children:rt.isValidElement(d)?rt.cloneElement(d,void 0,u):null})}return U.jsx(t,{...o,ref:r,children:s})});return e.displayName=`${n}.Slot`,e}var kK=U6("Slot");function RK(n){const t=rt.forwardRef((e,i)=>{let{children:r,...s}=e;if(j6(r)&&typeof lm=="function"&&(r=lm(r._payload)),rt.isValidElement(r)){const o=PK(r),a=BK(s,r.props);return r.type!==rt.Fragment&&(a.ref=i?sg(i,o):o),rt.cloneElement(r,a)}return rt.Children.count(r)>1?rt.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var NK=Symbol("radix.slottable");function MK(n){return rt.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===NK}function BK(n,t){const e={...t};for(const i in t){const r=n[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?e[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(e[i]=r):i==="style"?e[i]={...r,...s}:i==="className"&&(e[i]=[r,s].filter(Boolean).join(" "))}return{...n,...e}}function PK(n){let t=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=Object.getOwnPropertyDescriptor(n,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}const I4=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,T4=T6,D6=(n,t)=>e=>{var i;if(t?.variants==null)return T4(n,e?.class,e?.className);const{variants:r,defaultVariants:s}=t,o=Object.keys(r).map(d=>{const u=e?.[d],h=s?.[d];if(u===null)return null;const m=I4(u)||I4(h);return r[d][m]}),a=e&&Object.entries(e).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),l=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((d,u)=>{let{class:h,className:m,...p}=u;return Object.entries(p).every(E=>{let[C,v]=E;return Array.isArray(v)?v.includes({...s,...a}[C]):{...s,...a}[C]===v})?[...d,h,m]:d},[]);return T4(n,o,l,e?.class,e?.className)},OK=D6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neon-cyan/50 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-neon-cyan/10 text-neon-cyan border border-neon-cyan/30 hover:bg-neon-cyan/20 hover:shadow-neon-cyan",primary:"bg-neon-cyan text-background font-semibold hover:bg-neon-cyan/90 shadow-neon-cyan",secondary:"bg-neon-purple/10 text-neon-purple border border-neon-purple/30 hover:bg-neon-purple/20 hover:shadow-neon-purple",success:"bg-status-success/10 text-status-success border border-status-success/30 hover:bg-status-success/20 hover:shadow-neon-green",danger:"bg-status-error/10 text-status-error border border-status-error/30 hover:bg-status-error/20",ghost:"hover:bg-white/5 hover:text-white",link:"text-neon-cyan underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ii=rt.forwardRef(({className:n,variant:t,size:e,asChild:i=!1,loading:r,children:s,disabled:o,...a},l)=>{const d=i?kK:"button";return U.jsxs(d,{className:Re(OK({variant:t,size:e,className:n})),ref:l,disabled:o||r,...a,children:[r&&U.jsxs("svg",{className:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[U.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),U.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})});ii.displayName="Button";const gn=rt.forwardRef(({className:n,variant:t="default",hover:e=!1,...i},r)=>U.jsx("div",{ref:r,className:Re("glass-card p-6",e&&"transition-all duration-300 hover:scale-[1.02]",t==="glow-cyan"&&"border-neon-cyan/30 border-glow-cyan",t==="glow-purple"&&"border-neon-purple/30 border-glow-purple",t==="glow-green"&&"border-status-success/30 border-glow-green",n),...i}));gn.displayName="Card";const No=rt.forwardRef(({className:n,...t},e)=>U.jsx("div",{ref:e,className:Re("flex flex-col space-y-1.5 pb-4",n),...t}));No.displayName="CardHeader";const Mo=rt.forwardRef(({className:n,...t},e)=>U.jsx("h3",{ref:e,className:Re("text-lg font-semibold leading-none tracking-tight",n),...t}));Mo.displayName="CardTitle";const Wv=rt.forwardRef(({className:n,...t},e)=>U.jsx("p",{ref:e,className:Re("text-sm text-white/60",n),...t}));Wv.displayName="CardDescription";const us=rt.forwardRef(({className:n,...t},e)=>U.jsx("div",{ref:e,className:Re("",n),...t}));us.displayName="CardContent";const FK=rt.forwardRef(({className:n,...t},e)=>U.jsx("div",{ref:e,className:Re("flex items-center pt-4",n),...t}));FK.displayName="CardFooter";const Pc=rt.forwardRef(({className:n,type:t,label:e,error:i,icon:r,...s},o)=>U.jsxs("div",{className:"space-y-2",children:[e&&U.jsx("label",{className:"text-sm font-medium text-white/80",children:e}),U.jsxs("div",{className:"relative",children:[r&&U.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",children:r}),U.jsx("input",{type:t,className:Re("flex h-10 w-full rounded-lg border border-glass-border bg-background-secondary px-3 py-2 text-sm","placeholder:text-white/40","focus:outline-none focus:ring-2 focus:ring-neon-cyan/50 focus:border-neon-cyan/50","disabled:cursor-not-allowed disabled:opacity-50","transition-all duration-200",r&&"pl-10",i&&"border-status-error focus:ring-status-error/50 focus:border-status-error/50",n),ref:o,...s})]}),i&&U.jsx("p",{className:"text-xs text-status-error",children:i})]}));Pc.displayName="Input";const jK=D6("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-neon-cyan/10 text-neon-cyan border border-neon-cyan/30",secondary:"bg-neon-purple/10 text-neon-purple border border-neon-purple/30",success:"bg-status-success/10 text-status-success border border-status-success/30",warning:"bg-status-warning/10 text-status-warning border border-status-warning/30",error:"bg-status-error/10 text-status-error border border-status-error/30",outline:"text-white/70 border border-glass-border"}},defaultVariants:{variant:"default"}});function $s({className:n,variant:t,pulse:e,...i}){return U.jsx("div",{className:Re(jK({variant:t}),e&&"animate-pulse",n),...i})}function UK(n,t=[]){let e=[];function i(s,o){const a=rt.createContext(o);a.displayName=s+"Context";const l=e.length;e=[...e,o];const d=h=>{const{scope:m,children:p,...E}=h,C=m?.[n]?.[l]||a,v=rt.useMemo(()=>E,Object.values(E));return U.jsx(C.Provider,{value:v,children:p})};d.displayName=s+"Provider";function u(h,m){const p=m?.[n]?.[l]||a,E=rt.useContext(p);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[d,u]}const r=()=>{const s=e.map(o=>rt.createContext(o));return function(a){const l=a?.[n]||s;return rt.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,DK(r,...t)]}function DK(...n){const t=n[0];if(n.length===1)return t;const e=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:d})=>{const h=l(s)[`__scope${d}`];return{...a,...h}},{});return rt.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}var zK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],z6=zK.reduce((n,t)=>{const e=U6(`Primitive.${t}`),i=rt.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),U.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{}),Vv="Progress",qv=100,[GK]=UK(Vv),[WK,VK]=GK(Vv),G6=rt.forwardRef((n,t)=>{const{__scopeProgress:e,value:i=null,max:r,getValueLabel:s=qK,...o}=n;(r||r===0)&&!k4(r)&&console.error($K(`${r}`,"Progress"));const a=k4(r)?r:qv;i!==null&&!R4(i,a)&&console.error(HK(`${i}`,"Progress"));const l=R4(i,a)?i:null,d=um(l)?s(l,a):void 0;return U.jsx(WK,{scope:e,value:l,max:a,children:U.jsx(z6.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":um(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":q6(l,a),"data-value":l??void 0,"data-max":a,...o,ref:t})})});G6.displayName=Vv;var W6="ProgressIndicator",V6=rt.forwardRef((n,t)=>{const{__scopeProgress:e,...i}=n,r=VK(W6,e);return U.jsx(z6.div,{"data-state":q6(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...i,ref:t})});V6.displayName=W6;function qK(n,t){return`${Math.round(n/t*100)}%`}function q6(n,t){return n==null?"indeterminate":n===t?"complete":"loading"}function um(n){return typeof n=="number"}function k4(n){return um(n)&&!isNaN(n)&&n>0}function R4(n,t){return um(n)&&!isNaN(n)&&n<=t&&n>=0}function $K(n,t){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qv}\`.`}function HK(n,t){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $6=G6,KK=V6;const H6=rt.forwardRef(({className:n,value:t,variant:e="cyan",showValue:i=!1,...r},s)=>{const o={cyan:"bg-neon-cyan shadow-neon-cyan",purple:"bg-neon-purple shadow-neon-purple",green:"bg-status-success shadow-neon-green",warning:"bg-status-warning",danger:"bg-status-error"};return U.jsxs("div",{className:"relative",children:[U.jsx($6,{ref:s,className:Re("relative h-2 w-full overflow-hidden rounded-full bg-white/10",n),...r,children:U.jsx(KK,{className:Re("h-full w-full flex-1 transition-all duration-500 ease-out",o[e]),style:{transform:`translateX(-${100-(t||0)}%)`}})}),i&&U.jsxs("span",{className:"absolute -top-6 right-0 text-xs text-white/60",children:[t,"%"]})]})});H6.displayName=$6.displayName;function ka(n,t,{checkForDefaultPrevented:e=!0}={}){return function(r){if(n?.(r),e===!1||!r.defaultPrevented)return t?.(r)}}function ZK(n,t){const e=rt.createContext(t),i=s=>{const{children:o,...a}=s,l=rt.useMemo(()=>a,Object.values(a));return U.jsx(e.Provider,{value:l,children:o})};i.displayName=n+"Provider";function r(s){const o=rt.useContext(e);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[i,r]}function QK(n,t=[]){let e=[];function i(s,o){const a=rt.createContext(o),l=e.length;e=[...e,o];const d=h=>{const{scope:m,children:p,...E}=h,C=m?.[n]?.[l]||a,v=rt.useMemo(()=>E,Object.values(E));return U.jsx(C.Provider,{value:v,children:p})};d.displayName=s+"Provider";function u(h,m){const p=m?.[n]?.[l]||a,E=rt.useContext(p);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[d,u]}const r=()=>{const s=e.map(o=>rt.createContext(o));return function(a){const l=a?.[n]||s;return rt.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,YK(r,...t)]}function YK(...n){const t=n[0];if(n.length===1)return t;const e=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:d})=>{const h=l(s)[`__scope${d}`];return{...a,...h}},{});return rt.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}var G_=globalThis?.document?rt.useLayoutEffect:()=>{};function XK(n){const t=JK(n),e=rt.forwardRef((i,r)=>{const{children:s,...o}=i,a=rt.Children.toArray(s),l=a.find(eZ);if(l){const d=l.props.children,u=a.map(h=>h===l?rt.Children.count(d)>1?rt.Children.only(null):rt.isValidElement(d)?d.props.children:null:h);return U.jsx(t,{...o,ref:r,children:rt.isValidElement(d)?rt.cloneElement(d,void 0,u):null})}return U.jsx(t,{...o,ref:r,children:s})});return e.displayName=`${n}.Slot`,e}function JK(n){const t=rt.forwardRef((e,i)=>{const{children:r,...s}=e;if(rt.isValidElement(r)){const o=iZ(r),a=nZ(s,r.props);return r.type!==rt.Fragment&&(a.ref=i?sg(i,o):o),rt.cloneElement(r,a)}return rt.Children.count(r)>1?rt.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var tZ=Symbol("radix.slottable");function eZ(n){return rt.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===tZ}function nZ(n,t){const e={...t};for(const i in t){const r=n[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?e[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(e[i]=r):i==="style"?e[i]={...r,...s}:i==="className"&&(e[i]=[r,s].filter(Boolean).join(" "))}return{...n,...e}}function iZ(n){let t=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=Object.getOwnPropertyDescriptor(n,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}var rZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fo=rZ.reduce((n,t)=>{const e=XK(`Primitive.${t}`),i=rt.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),U.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{});function sZ(n,t){n&&Cb.flushSync(()=>n.dispatchEvent(t))}function Vf(n){const t=rt.useRef(n);return rt.useEffect(()=>{t.current=n}),rt.useMemo(()=>(...e)=>t.current?.(...e),[])}function oZ(n,t=globalThis?.document){const e=Vf(n);rt.useEffect(()=>{const i=r=>{r.key==="Escape"&&e(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[e,t])}var aZ="DismissableLayer",W_="dismissableLayer.update",cZ="dismissableLayer.pointerDownOutside",lZ="dismissableLayer.focusOutside",N4,K6=rt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Z6=rt.forwardRef((n,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,d=rt.useContext(K6),[u,h]=rt.useState(null),m=u?.ownerDocument??globalThis?.document,[,p]=rt.useState({}),E=el(t,b=>h(b)),C=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),A=C.indexOf(v),x=u?C.indexOf(u):-1,P=d.layersWithOutsidePointerEventsDisabled.size>0,W=x>=A,K=fZ(b=>{const B=b.target,J=[...d.branches].some(it=>it.contains(B));!W||J||(r?.(b),o?.(b),b.defaultPrevented||a?.())},m),j=hZ(b=>{const B=b.target;[...d.branches].some(it=>it.contains(B))||(s?.(b),o?.(b),b.defaultPrevented||a?.())},m);return oZ(b=>{x===d.layers.size-1&&(i?.(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},m),rt.useEffect(()=>{if(u)return e&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(N4=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),M4(),()=>{e&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=N4)}},[u,m,e,d]),rt.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),M4())},[u,d]),rt.useEffect(()=>{const b=()=>p({});return document.addEventListener(W_,b),()=>document.removeEventListener(W_,b)},[]),U.jsx(Fo.div,{...l,ref:E,style:{pointerEvents:P?W?"auto":"none":void 0,...n.style},onFocusCapture:ka(n.onFocusCapture,j.onFocusCapture),onBlurCapture:ka(n.onBlurCapture,j.onBlurCapture),onPointerDownCapture:ka(n.onPointerDownCapture,K.onPointerDownCapture)})});Z6.displayName=aZ;var uZ="DismissableLayerBranch",dZ=rt.forwardRef((n,t)=>{const e=rt.useContext(K6),i=rt.useRef(null),r=el(t,i);return rt.useEffect(()=>{const s=i.current;if(s)return e.branches.add(s),()=>{e.branches.delete(s)}},[e.branches]),U.jsx(Fo.div,{...n,ref:r})});dZ.displayName=uZ;function fZ(n,t=globalThis?.document){const e=Vf(n),i=rt.useRef(!1),r=rt.useRef(()=>{});return rt.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){Q6(cZ,e,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,e]),{onPointerDownCapture:()=>i.current=!0}}function hZ(n,t=globalThis?.document){const e=Vf(n),i=rt.useRef(!1);return rt.useEffect(()=>{const r=s=>{s.target&&!i.current&&Q6(lZ,e,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,e]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function M4(){const n=new CustomEvent(W_);document.dispatchEvent(n)}function Q6(n,t,e,{discrete:i}){const r=e.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:e});t&&r.addEventListener(n,t,{once:!0}),i?sZ(r,s):r.dispatchEvent(s)}var I2="focusScope.autoFocusOnMount",T2="focusScope.autoFocusOnUnmount",B4={bubbles:!1,cancelable:!0},pZ="FocusScope",Y6=rt.forwardRef((n,t)=>{const{loop:e=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=n,[a,l]=rt.useState(null),d=Vf(r),u=Vf(s),h=rt.useRef(null),m=el(t,C=>l(C)),p=rt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;rt.useEffect(()=>{if(i){let C=function(P){if(p.paused||!a)return;const W=P.target;a.contains(W)?h.current=W:Ea(h.current,{select:!0})},v=function(P){if(p.paused||!a)return;const W=P.relatedTarget;W!==null&&(a.contains(W)||Ea(h.current,{select:!0}))},A=function(P){if(document.activeElement===document.body)for(const K of P)K.removedNodes.length>0&&Ea(a)};document.addEventListener("focusin",C),document.addEventListener("focusout",v);const x=new MutationObserver(A);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",v),x.disconnect()}}},[i,a,p.paused]),rt.useEffect(()=>{if(a){O4.add(p);const C=document.activeElement;if(!a.contains(C)){const A=new CustomEvent(I2,B4);a.addEventListener(I2,d),a.dispatchEvent(A),A.defaultPrevented||(mZ(bZ(X6(a)),{select:!0}),document.activeElement===C&&Ea(a))}return()=>{a.removeEventListener(I2,d),setTimeout(()=>{const A=new CustomEvent(T2,B4);a.addEventListener(T2,u),a.dispatchEvent(A),A.defaultPrevented||Ea(C??document.body,{select:!0}),a.removeEventListener(T2,u),O4.remove(p)},0)}}},[a,d,u,p]);const E=rt.useCallback(C=>{if(!e&&!i||p.paused)return;const v=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,A=document.activeElement;if(v&&A){const x=C.currentTarget,[P,W]=gZ(x);P&&W?!C.shiftKey&&A===W?(C.preventDefault(),e&&Ea(P,{select:!0})):C.shiftKey&&A===P&&(C.preventDefault(),e&&Ea(W,{select:!0})):A===x&&C.preventDefault()}},[e,i,p.paused]);return U.jsx(Fo.div,{tabIndex:-1,...o,ref:m,onKeyDown:E})});Y6.displayName=pZ;function mZ(n,{select:t=!1}={}){const e=document.activeElement;for(const i of n)if(Ea(i,{select:t}),document.activeElement!==e)return}function gZ(n){const t=X6(n),e=P4(t,n),i=P4(t.reverse(),n);return[e,i]}function X6(n){const t=[],e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function P4(n,t){for(const e of n)if(!yZ(e,{upTo:t}))return e}function yZ(n,{upTo:t}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(t!==void 0&&n===t)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function wZ(n){return n instanceof HTMLInputElement&&"select"in n}function Ea(n,{select:t=!1}={}){if(n&&n.focus){const e=document.activeElement;n.focus({preventScroll:!0}),n!==e&&wZ(n)&&t&&n.select()}}var O4=_Z();function _Z(){let n=[];return{add(t){const e=n[0];t!==e&&e?.pause(),n=F4(n,t),n.unshift(t)},remove(t){n=F4(n,t),n[0]?.resume()}}}function F4(n,t){const e=[...n],i=e.indexOf(t);return i!==-1&&e.splice(i,1),e}function bZ(n){return n.filter(t=>t.tagName!=="A")}var vZ="Portal",J6=rt.forwardRef((n,t)=>{const{container:e,...i}=n,[r,s]=rt.useState(!1);G_(()=>s(!0),[]);const o=e||r&&globalThis?.document?.body;return o?z8.createPortal(U.jsx(Fo.div,{...i,ref:t}),o):null});J6.displayName=vZ;function xZ(n,t){return rt.useReducer((e,i)=>t[e][i]??e,n)}var og=n=>{const{present:t,children:e}=n,i=EZ(t),r=typeof e=="function"?e({present:i.isPresent}):rt.Children.only(e),s=el(i.ref,SZ(r));return typeof e=="function"||i.isPresent?rt.cloneElement(r,{ref:s}):null};og.displayName="Presence";function EZ(n){const[t,e]=rt.useState(),i=rt.useRef(null),r=rt.useRef(n),s=rt.useRef("none"),o=n?"mounted":"unmounted",[a,l]=xZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return rt.useEffect(()=>{const d=jp(i.current);s.current=a==="mounted"?d:"none"},[a]),G_(()=>{const d=i.current,u=r.current;if(u!==n){const m=s.current,p=jp(d);n?l("MOUNT"):p==="none"||d?.display==="none"?l("UNMOUNT"):l(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),G_(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=p=>{const C=jp(i.current).includes(CSS.escape(p.animationName));if(p.target===t&&C&&(l("ANIMATION_END"),!r.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},m=p=>{p.target===t&&(s.current=jp(i.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:rt.useCallback(d=>{i.current=d?getComputedStyle(d):null,e(d)},[])}}function jp(n){return n?.animationName||"none"}function SZ(n){let t=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=Object.getOwnPropertyDescriptor(n,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}var k2=0;function LZ(){rt.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??j4()),document.body.insertAdjacentElement("beforeend",n[1]??j4()),k2++,()=>{k2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),k2--}},[])}function j4(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var js=function(){return js=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},js.apply(this,arguments)};function tR(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function CZ(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}var A0="right-scroll-bar-position",I0="width-before-scroll-bar",AZ="with-scroll-bars-hidden",IZ="--removed-body-scroll-bar-size";function R2(n,t){return typeof n=="function"?n(t):n&&(n.current=t),n}function TZ(n,t){var e=rt.useState(function(){return{value:n,callback:t,facade:{get current(){return e.value},set current(i){var r=e.value;r!==i&&(e.value=i,e.callback(i,r))}}}})[0];return e.callback=t,e.facade}var kZ=typeof window<"u"?rt.useLayoutEffect:rt.useEffect,U4=new WeakMap;function RZ(n,t){var e=TZ(null,function(i){return n.forEach(function(r){return R2(r,i)})});return kZ(function(){var i=U4.get(e);if(i){var r=new Set(i),s=new Set(n),o=e.current;r.forEach(function(a){s.has(a)||R2(a,null)}),s.forEach(function(a){r.has(a)||R2(a,o)})}U4.set(e,n)},[n]),e}function NZ(n){return n}function MZ(n,t){t===void 0&&(t=NZ);var e=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:n},useMedium:function(s){var o=t(s,i);return e.push(o),function(){e=e.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;e.length;){var o=e;e=[],o.forEach(s)}e={push:function(a){return s(a)},filter:function(){return e}}},assignMedium:function(s){i=!0;var o=[];if(e.length){var a=e;e=[],a.forEach(s),o=e}var l=function(){var u=o;o=[],u.forEach(s)},d=function(){return Promise.resolve().then(l)};d(),e={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),e}}}};return r}function BZ(n){n===void 0&&(n={});var t=MZ(null);return t.options=js({async:!0,ssr:!1},n),t}var eR=function(n){var t=n.sideCar,e=tR(n,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return rt.createElement(i,js({},e))};eR.isSideCarExport=!0;function PZ(n,t){return n.useMedium(t),eR}var nR=BZ(),N2=function(){},ag=rt.forwardRef(function(n,t){var e=rt.useRef(null),i=rt.useState({onScrollCapture:N2,onWheelCapture:N2,onTouchMoveCapture:N2}),r=i[0],s=i[1],o=n.forwardProps,a=n.children,l=n.className,d=n.removeScrollBar,u=n.enabled,h=n.shards,m=n.sideCar,p=n.noRelative,E=n.noIsolation,C=n.inert,v=n.allowPinchZoom,A=n.as,x=A===void 0?"div":A,P=n.gapMode,W=tR(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),K=m,j=RZ([e,t]),b=js(js({},W),r);return rt.createElement(rt.Fragment,null,u&&rt.createElement(K,{sideCar:nR,removeScrollBar:d,shards:h,noRelative:p,noIsolation:E,inert:C,setCallbacks:s,allowPinchZoom:!!v,lockRef:e,gapMode:P}),o?rt.cloneElement(rt.Children.only(a),js(js({},b),{ref:j})):rt.createElement(x,js({},b,{className:l,ref:j}),a))});ag.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ag.classNames={fullWidth:I0,zeroRight:A0};var OZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function FZ(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var t=OZ();return t&&n.setAttribute("nonce",t),n}function jZ(n,t){n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}function UZ(n){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(n)}var DZ=function(){var n=0,t=null;return{add:function(e){n==0&&(t=FZ())&&(jZ(t,e),UZ(t)),n++},remove:function(){n--,!n&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zZ=function(){var n=DZ();return function(t,e){rt.useEffect(function(){return n.add(t),function(){n.remove()}},[t&&e])}},iR=function(){var n=zZ(),t=function(e){var i=e.styles,r=e.dynamic;return n(i,r),null};return t},GZ={left:0,top:0,right:0,gap:0},M2=function(n){return parseInt(n||"",10)||0},WZ=function(n){var t=window.getComputedStyle(document.body),e=t[n==="padding"?"paddingLeft":"marginLeft"],i=t[n==="padding"?"paddingTop":"marginTop"],r=t[n==="padding"?"paddingRight":"marginRight"];return[M2(e),M2(i),M2(r)]},VZ=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return GZ;var t=WZ(n),e=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-e+t[2]-t[0])}},qZ=iR(),ou="data-scroll-locked",$Z=function(n,t,e,i){var r=n.left,s=n.top,o=n.right,a=n.gap;return e===void 0&&(e="margin"),`
  .`.concat(AZ,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(ou,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),e==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(A0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(I0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(A0," .").concat(A0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(I0," .").concat(I0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ou,`] {
    `).concat(IZ,": ").concat(a,`px;
  }
`)},D4=function(){var n=parseInt(document.body.getAttribute(ou)||"0",10);return isFinite(n)?n:0},HZ=function(){rt.useEffect(function(){return document.body.setAttribute(ou,(D4()+1).toString()),function(){var n=D4()-1;n<=0?document.body.removeAttribute(ou):document.body.setAttribute(ou,n.toString())}},[])},KZ=function(n){var t=n.noRelative,e=n.noImportant,i=n.gapMode,r=i===void 0?"margin":i;HZ();var s=rt.useMemo(function(){return VZ(r)},[r]);return rt.createElement(qZ,{styles:$Z(s,!t,r,e?"":"!important")})},V_=!1;if(typeof window<"u")try{var Up=Object.defineProperty({},"passive",{get:function(){return V_=!0,!0}});window.addEventListener("test",Up,Up),window.removeEventListener("test",Up,Up)}catch{V_=!1}var Bl=V_?{passive:!1}:!1,ZZ=function(n){return n.tagName==="TEXTAREA"},rR=function(n,t){if(!(n instanceof Element))return!1;var e=window.getComputedStyle(n);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!ZZ(n)&&e[t]==="visible")},QZ=function(n){return rR(n,"overflowY")},YZ=function(n){return rR(n,"overflowX")},z4=function(n,t){var e=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=sR(n,i);if(r){var s=oR(n,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==e.body);return!1},XZ=function(n){var t=n.scrollTop,e=n.scrollHeight,i=n.clientHeight;return[t,e,i]},JZ=function(n){var t=n.scrollLeft,e=n.scrollWidth,i=n.clientWidth;return[t,e,i]},sR=function(n,t){return n==="v"?QZ(t):YZ(t)},oR=function(n,t){return n==="v"?XZ(t):JZ(t)},tQ=function(n,t){return n==="h"&&t==="rtl"?-1:1},eQ=function(n,t,e,i,r){var s=tQ(n,window.getComputedStyle(t).direction),o=s*i,a=e.target,l=t.contains(a),d=!1,u=o>0,h=0,m=0;do{if(!a)break;var p=oR(n,a),E=p[0],C=p[1],v=p[2],A=C-v-s*E;(E||A)&&sR(n,a)&&(h+=A,m+=E);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(m)<1)&&(d=!0),d},Dp=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},G4=function(n){return[n.deltaX,n.deltaY]},W4=function(n){return n&&"current"in n?n.current:n},nQ=function(n,t){return n[0]===t[0]&&n[1]===t[1]},iQ=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},rQ=0,Pl=[];function sQ(n){var t=rt.useRef([]),e=rt.useRef([0,0]),i=rt.useRef(),r=rt.useState(rQ++)[0],s=rt.useState(iR)[0],o=rt.useRef(n);rt.useEffect(function(){o.current=n},[n]),rt.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var C=CZ([n.lockRef.current],(n.shards||[]).map(W4),!0).filter(Boolean);return C.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),C.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var a=rt.useCallback(function(C,v){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!o.current.allowPinchZoom;var A=Dp(C),x=e.current,P="deltaX"in C?C.deltaX:x[0]-A[0],W="deltaY"in C?C.deltaY:x[1]-A[1],K,j=C.target,b=Math.abs(P)>Math.abs(W)?"h":"v";if("touches"in C&&b==="h"&&j.type==="range")return!1;var B=window.getSelection(),J=B&&B.anchorNode,it=J?J===j||J.contains(j):!1;if(it)return!1;var st=z4(b,j);if(!st)return!0;if(st?K=b:(K=b==="v"?"h":"v",st=z4(b,j)),!st)return!1;if(!i.current&&"changedTouches"in C&&(P||W)&&(i.current=K),!K)return!0;var z=i.current||K;return eQ(z,v,C,z==="h"?P:W)},[]),l=rt.useCallback(function(C){var v=C;if(!(!Pl.length||Pl[Pl.length-1]!==s)){var A="deltaY"in v?G4(v):Dp(v),x=t.current.filter(function(K){return K.name===v.type&&(K.target===v.target||v.target===K.shadowParent)&&nQ(K.delta,A)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var P=(o.current.shards||[]).map(W4).filter(Boolean).filter(function(K){return K.contains(v.target)}),W=P.length>0?a(v,P[0]):!o.current.noIsolation;W&&v.cancelable&&v.preventDefault()}}},[]),d=rt.useCallback(function(C,v,A,x){var P={name:C,delta:v,target:A,should:x,shadowParent:oQ(A)};t.current.push(P),setTimeout(function(){t.current=t.current.filter(function(W){return W!==P})},1)},[]),u=rt.useCallback(function(C){e.current=Dp(C),i.current=void 0},[]),h=rt.useCallback(function(C){d(C.type,G4(C),C.target,a(C,n.lockRef.current))},[]),m=rt.useCallback(function(C){d(C.type,Dp(C),C.target,a(C,n.lockRef.current))},[]);rt.useEffect(function(){return Pl.push(s),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Bl),document.addEventListener("touchmove",l,Bl),document.addEventListener("touchstart",u,Bl),function(){Pl=Pl.filter(function(C){return C!==s}),document.removeEventListener("wheel",l,Bl),document.removeEventListener("touchmove",l,Bl),document.removeEventListener("touchstart",u,Bl)}},[]);var p=n.removeScrollBar,E=n.inert;return rt.createElement(rt.Fragment,null,E?rt.createElement(s,{styles:iQ(r)}):null,p?rt.createElement(KZ,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function oQ(n){for(var t=null;n!==null;)n instanceof ShadowRoot&&(t=n.host,n=n.host),n=n.parentNode;return t}const aQ=PZ(nR,sQ);var aR=rt.forwardRef(function(n,t){return rt.createElement(ag,js({},n,{ref:t,sideCar:aQ}))});aR.classNames=ag.classNames;var cQ=function(n){if(typeof document>"u")return null;var t=Array.isArray(n)?n[0]:n;return t.ownerDocument.body},Ol=new WeakMap,zp=new WeakMap,Gp={},B2=0,cR=function(n){return n&&(n.host||cR(n.parentNode))},lQ=function(n,t){return t.map(function(e){if(n.contains(e))return e;var i=cR(e);return i&&n.contains(i)?i:(console.error("aria-hidden",e,"in not contained inside",n,". Doing nothing"),null)}).filter(function(e){return!!e})},uQ=function(n,t,e,i){var r=lQ(t,Array.isArray(n)?n:[n]);Gp[e]||(Gp[e]=new WeakMap);var s=Gp[e],o=[],a=new Set,l=new Set(r),d=function(h){!h||a.has(h)||(a.add(h),d(h.parentNode))};r.forEach(d);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))u(m);else try{var p=m.getAttribute(i),E=p!==null&&p!=="false",C=(Ol.get(m)||0)+1,v=(s.get(m)||0)+1;Ol.set(m,C),s.set(m,v),o.push(m),C===1&&E&&zp.set(m,!0),v===1&&m.setAttribute(e,"true"),E||m.setAttribute(i,"true")}catch(A){console.error("aria-hidden: cannot operate on ",m,A)}})};return u(t),a.clear(),B2++,function(){o.forEach(function(h){var m=Ol.get(h)-1,p=s.get(h)-1;Ol.set(h,m),s.set(h,p),m||(zp.has(h)||h.removeAttribute(i),zp.delete(h)),p||h.removeAttribute(e)}),B2--,B2||(Ol=new WeakMap,Ol=new WeakMap,zp=new WeakMap,Gp={})}},dQ=function(n,t,e){e===void 0&&(e="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),r=cQ(n);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),uQ(i,r,e,"aria-hidden")):function(){return null}};function fQ(n){const t=hQ(n),e=rt.forwardRef((i,r)=>{const{children:s,...o}=i,a=rt.Children.toArray(s),l=a.find(mQ);if(l){const d=l.props.children,u=a.map(h=>h===l?rt.Children.count(d)>1?rt.Children.only(null):rt.isValidElement(d)?d.props.children:null:h);return U.jsx(t,{...o,ref:r,children:rt.isValidElement(d)?rt.cloneElement(d,void 0,u):null})}return U.jsx(t,{...o,ref:r,children:s})});return e.displayName=`${n}.Slot`,e}function hQ(n){const t=rt.forwardRef((e,i)=>{const{children:r,...s}=e;if(rt.isValidElement(r)){const o=yQ(r),a=gQ(s,r.props);return r.type!==rt.Fragment&&(a.ref=i?sg(i,o):o),rt.cloneElement(r,a)}return rt.Children.count(r)>1?rt.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var pQ=Symbol("radix.slottable");function mQ(n){return rt.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===pQ}function gQ(n,t){const e={...t};for(const i in t){const r=n[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?e[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(e[i]=r):i==="style"?e[i]={...r,...s}:i==="className"&&(e[i]=[r,s].filter(Boolean).join(" "))}return{...n,...e}}function yQ(n){let t=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=Object.getOwnPropertyDescriptor(n,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}var lR="Dialog",[uR]=QK(lR),[prt,ws]=uR(lR),dR="DialogTrigger",wQ=rt.forwardRef((n,t)=>{const{__scopeDialog:e,...i}=n,r=ws(dR,e),s=el(t,r.triggerRef);return U.jsx(Fo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Kv(r.open),...i,ref:s,onClick:ka(n.onClick,r.onOpenToggle)})});wQ.displayName=dR;var $v="DialogPortal",[_Q,fR]=uR($v,{forceMount:void 0}),hR=n=>{const{__scopeDialog:t,forceMount:e,children:i,container:r}=n,s=ws($v,t);return U.jsx(_Q,{scope:t,forceMount:e,children:rt.Children.map(i,o=>U.jsx(og,{present:e||s.open,children:U.jsx(J6,{asChild:!0,container:r,children:o})}))})};hR.displayName=$v;var dm="DialogOverlay",pR=rt.forwardRef((n,t)=>{const e=fR(dm,n.__scopeDialog),{forceMount:i=e.forceMount,...r}=n,s=ws(dm,n.__scopeDialog);return s.modal?U.jsx(og,{present:i||s.open,children:U.jsx(vQ,{...r,ref:t})}):null});pR.displayName=dm;var bQ=fQ("DialogOverlay.RemoveScroll"),vQ=rt.forwardRef((n,t)=>{const{__scopeDialog:e,...i}=n,r=ws(dm,e);return U.jsx(aR,{as:bQ,allowPinchZoom:!0,shards:[r.contentRef],children:U.jsx(Fo.div,{"data-state":Kv(r.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),Vc="DialogContent",mR=rt.forwardRef((n,t)=>{const e=fR(Vc,n.__scopeDialog),{forceMount:i=e.forceMount,...r}=n,s=ws(Vc,n.__scopeDialog);return U.jsx(og,{present:i||s.open,children:s.modal?U.jsx(xQ,{...r,ref:t}):U.jsx(EQ,{...r,ref:t})})});mR.displayName=Vc;var xQ=rt.forwardRef((n,t)=>{const e=ws(Vc,n.__scopeDialog),i=rt.useRef(null),r=el(t,e.contentRef,i);return rt.useEffect(()=>{const s=i.current;if(s)return dQ(s)},[]),U.jsx(gR,{...n,ref:r,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ka(n.onCloseAutoFocus,s=>{s.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:ka(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ka(n.onFocusOutside,s=>s.preventDefault())})}),EQ=rt.forwardRef((n,t)=>{const e=ws(Vc,n.__scopeDialog),i=rt.useRef(!1),r=rt.useRef(!1);return U.jsx(gR,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{n.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||e.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{n.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;e.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),gR=rt.forwardRef((n,t)=>{const{__scopeDialog:e,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=n,a=ws(Vc,e),l=rt.useRef(null),d=el(t,l);return LZ(),U.jsxs(U.Fragment,{children:[U.jsx(Y6,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:U.jsx(Z6,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Kv(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),U.jsxs(U.Fragment,{children:[U.jsx(SQ,{titleId:a.titleId}),U.jsx(CQ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Hv="DialogTitle",yR=rt.forwardRef((n,t)=>{const{__scopeDialog:e,...i}=n,r=ws(Hv,e);return U.jsx(Fo.h2,{id:r.titleId,...i,ref:t})});yR.displayName=Hv;var wR="DialogDescription",_R=rt.forwardRef((n,t)=>{const{__scopeDialog:e,...i}=n,r=ws(wR,e);return U.jsx(Fo.p,{id:r.descriptionId,...i,ref:t})});_R.displayName=wR;var bR="DialogClose",vR=rt.forwardRef((n,t)=>{const{__scopeDialog:e,...i}=n,r=ws(bR,e);return U.jsx(Fo.button,{type:"button",...i,ref:t,onClick:ka(n.onClick,()=>r.onOpenChange(!1))})});vR.displayName=bR;function Kv(n){return n?"open":"closed"}var xR="DialogTitleWarning",[mrt,ER]=ZK(xR,{contentName:Vc,titleName:Hv,docsSlug:"dialog"}),SQ=({titleId:n})=>{const t=ER(xR),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return rt.useEffect(()=>{n&&(document.getElementById(n)||console.error(e))},[e,n]),null},LQ="DialogDescriptionWarning",CQ=({contentRef:n,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ER(LQ).contentName}}.`;return rt.useEffect(()=>{const r=n.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(i))},[i,n,t]),null},AQ=hR,SR=pR,LR=mR,CR=yR,AR=_R,IQ=vR;const TQ=AQ,IR=rt.forwardRef(({className:n,...t},e)=>U.jsx(SR,{ref:e,className:Re("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...t}));IR.displayName=SR.displayName;const kQ=rt.forwardRef(({className:n,children:t,...e},i)=>U.jsxs(TQ,{children:[U.jsx(IR,{}),U.jsxs(LR,{ref:i,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%]","glass-card border border-glass-border p-6","shadow-lg duration-200","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",n),...e,children:[t,U.jsxs(IQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neon-cyan focus:ring-offset-2 disabled:pointer-events-none",children:[U.jsx(A6,{className:"h-4 w-4"}),U.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kQ.displayName=LR.displayName;const RQ=rt.forwardRef(({className:n,...t},e)=>U.jsx(CR,{ref:e,className:Re("text-lg font-semibold leading-none tracking-tight",n),...t}));RQ.displayName=CR.displayName;const NQ=rt.forwardRef(({className:n,...t},e)=>U.jsx(AR,{ref:e,className:Re("text-sm text-white/60",n),...t}));NQ.displayName=AR.displayName;function P2({name:n,status:t,description:e,icon:i,color:r}){const o={active:{icon:U.jsx(cm,{className:"h-4 w-4"}),label:"Active",color:"text-status-success",bg:"bg-status-success/10"},inactive:{icon:U.jsx(U_,{className:"h-4 w-4"}),label:"Inactive",color:"text-white/40",bg:"bg-white/5"},warning:{icon:U.jsx(IH,{className:"h-4 w-4"}),label:"Warning",color:"text-status-warning",bg:"bg-status-warning/10"},error:{icon:U.jsx(U_,{className:"h-4 w-4"}),label:"Error",color:"text-status-error",bg:"bg-status-error/10"}}[t];return U.jsxs(gn,{className:"relative overflow-hidden",children:[t==="active"&&U.jsx(De.div,{className:Re("absolute inset-0 opacity-10",r.replace("text-","bg-")),animate:{opacity:[.05,.1,.05]},transition:{duration:2,repeat:1/0}}),U.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:Re("p-2 rounded-lg",r.replace("text-","bg-")+"/20"),children:i}),U.jsxs("div",{children:[U.jsx("p",{className:"text-sm font-medium",children:n}),U.jsx("p",{className:"text-xs text-white/50",children:e})]})]}),U.jsxs("div",{className:Re("flex items-center gap-2 px-3 py-1 rounded-full",o.bg),children:[U.jsx("span",{className:o.color,children:o.icon}),U.jsx("span",{className:Re("text-xs font-medium",o.color),children:o.label})]})]})]})}function MQ({privacyStatus:n="active",teeStatus:t="inactive",tradingStatus:e="active"}){return U.jsxs("div",{className:"space-y-3",children:[U.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Status"}),U.jsx(P2,{name:"Privacy Layer",status:n,description:"PrivacyCash ZK Pool",icon:U.jsx(Kr,{className:"h-5 w-5 text-neon-cyan"}),color:"text-neon-cyan"}),U.jsx(P2,{name:"TEE Layer",status:t,description:"MagicBlock Enclave",icon:U.jsx(Wc,{className:"h-5 w-5 text-neon-purple"}),color:"text-neon-purple"}),U.jsx(P2,{name:"Trading Layer",status:e,description:"PNP Markets",icon:U.jsx(ir,{className:"h-5 w-5 text-status-success"}),color:"text-status-success"})]})}function BQ({title:n,description:t,icon:e,href:i,color:r,delay:s=0}){return U.jsx(De.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:s},children:U.jsx(Am,{to:i,children:U.jsx(gn,{hover:!0,className:Re("group cursor-pointer transition-all duration-300","hover:border-opacity-50",r.replace("text-","hover:border-")),children:U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsx("div",{className:Re("p-3 rounded-lg transition-all duration-300",r.replace("text-","bg-")+"/10","group-hover:"+r.replace("text-","bg-")+"/20","group-hover:scale-110"),children:e}),U.jsxs("div",{children:[U.jsx("h4",{className:"font-medium",children:n}),U.jsx("p",{className:"text-sm text-white/50",children:t})]})]})})})})}function PQ(){const n=[{title:"Shield Funds",description:"Deposit SOL into privacy pool",icon:U.jsx(Kr,{className:"h-6 w-6 text-neon-cyan"}),href:"/shield",color:"text-neon-cyan"},{title:"Delegate to TEE",description:"Enable confidential trading",icon:U.jsx(Wc,{className:"h-6 w-6 text-neon-purple"}),href:"/strategy",color:"text-neon-purple"},{title:"Trade Markets",description:"Browse prediction markets",icon:U.jsx(ir,{className:"h-6 w-6 text-status-success"}),href:"/trade",color:"text-status-success"},{title:"Withdraw",description:"Compliant withdrawal flow",icon:U.jsx(Dv,{className:"h-6 w-6 text-status-warning"}),href:"/withdraw",color:"text-status-warning"}];return U.jsxs("div",{children:[U.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),U.jsx("div",{className:"grid gap-3",children:n.map((t,e)=>U.jsx(BQ,{...t,delay:e*.1},t.title))})]})}function Wp({title:n,value:t,subValue:e,icon:i,color:r,change:s,delay:o=0}){return U.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},children:U.jsxs(gn,{className:"relative overflow-hidden",children:[U.jsx("div",{className:Re("absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl opacity-10",r.replace("text-","bg-"))}),U.jsxs("div",{className:"relative z-10",children:[U.jsxs("div",{className:"flex items-center justify-between mb-4",children:[U.jsx("span",{className:"text-sm text-white/60",children:n}),U.jsx("div",{className:Re("p-2 rounded-lg",r.replace("text-","bg-")+"/10"),children:i})]}),U.jsxs("div",{className:"space-y-1",children:[U.jsx("p",{className:"text-2xl font-bold",children:t}),e&&U.jsx("p",{className:"text-sm text-white/50",children:e}),s!==void 0&&U.jsxs("p",{className:Re("text-sm font-medium",s>=0?"text-status-success":"text-status-error"),children:[s>=0?"+":"",s.toFixed(2),"%"]})]})]})]})})}function OQ({walletBalance:n=525e7,shieldedBalance:t=25e8,positionsValue:e=45.5,totalPnl:i=3.25}){return U.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[U.jsx(Wp,{title:"Wallet Balance",value:`${Cu(n)} SOL`,icon:U.jsx(C6,{className:"h-5 w-5 text-neon-cyan"}),color:"text-neon-cyan",delay:0}),U.jsx(Wp,{title:"Shielded Balance",value:`${Cu(t)} SOL`,subValue:"Private pool",icon:U.jsx(Kr,{className:"h-5 w-5 text-neon-purple"}),color:"text-neon-purple",delay:.1}),U.jsx(Wp,{title:"Positions Value",value:ms(e),subValue:"2 active positions",icon:U.jsx(ir,{className:"h-5 w-5 text-status-success"}),color:"text-status-success",delay:.2}),U.jsx(Wp,{title:"Total P&L",value:ms(i),change:7.23,icon:U.jsx(ig,{className:"h-5 w-5 text-status-warning"}),color:"text-status-warning",delay:.3})]})}new Zt("B2at4oGQFPAbuH2wMMpBsFrTvJi71GUvR7jyxny7HaGf");const q_=new Zt("9fhQBbumKEFuXtMBDw8AaQyAjCorLGJQiS3skWZdQyQD");new Zt("DELeGGvXpWV2fqJUhqcF5ZSYMS4JTLjteaAMARRSaeSh");new Zt("4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU");new Zt("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");const au=30,O2=.001,F2=1e3,j2=!0,$_=!1,wf=$_,V4="/circuits",FQ="https://privacycash.github.io/circuits",jQ="/circuits",Ls={transaction2:{wasm:"transaction2.wasm",zkey:"transaction2.zkey",wasmSize:31e5,zkeySize:16e6,version:1}},UQ="spectre-circuits",DQ=1,pa="circuit-files";class zQ{db=null;opening=null;async open(){return this.db?this.db:this.opening?this.opening:(this.opening=new Promise((t,e)=>{const i=indexedDB.open(UQ,DQ);i.onerror=()=>{console.error("[CircuitDB] Failed to open:",i.error),e(i.error)},i.onsuccess=()=>{this.db=i.result,t(this.db)},i.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains(pa)||s.createObjectStore(pa)}}),this.opening)}async get(t){const e=await this.open();return new Promise((i,r)=>{const a=e.transaction(pa,"readonly").objectStore(pa).get(t);a.onerror=()=>r(a.error),a.onsuccess=()=>i(a.result||null)})}async set(t,e){const i=await this.open();return new Promise((r,s)=>{const l=i.transaction(pa,"readwrite").objectStore(pa).put(e,t);l.onerror=()=>s(l.error),l.onsuccess=()=>r()})}async getVersion(){try{const t=await this.get("version");if(t){const e=new TextDecoder;return parseInt(e.decode(t),10)||0}}catch{}return 0}async setVersion(t){const e=new TextEncoder;await this.set("version",e.encode(String(t)).buffer)}async clear(){const t=await this.open();return new Promise((e,i)=>{const o=t.transaction(pa,"readwrite").objectStore(pa).clear();o.onerror=()=>i(o.error),o.onsuccess=()=>e()})}}class GQ{circuitDb;cachedCircuits=null;loadingPromise=null;constructor(){this.circuitDb=new zQ}async isCached(){try{return await this.circuitDb.getVersion()===Ls.transaction2.version}catch{return!1}}async getCached(){if(this.cachedCircuits)return this.cachedCircuits;try{if(!await this.isCached())return null;const t=await this.circuitDb.get("transaction2.wasm"),e=await this.circuitDb.get("transaction2.zkey");if(t&&e)return this.cachedCircuits={wasm:t,zkey:e,version:Ls.transaction2.version},this.cachedCircuits}catch(t){console.warn("[CircuitLoader] Cache read error:",t)}return null}async load(t){if(this.cachedCircuits)return t?.({stage:"ready",progress:100,bytesLoaded:0,totalBytes:0,message:"Circuits loaded from memory"}),this.cachedCircuits;if(this.loadingPromise)return this.loadingPromise;this.loadingPromise=this.doLoad(t);try{return await this.loadingPromise}finally{this.loadingPromise=null}}async doLoad(t){t?.({stage:"checking",progress:0,bytesLoaded:0,totalBytes:0,message:"Checking local cache..."});const e=await this.getCached();if(e)return t?.({stage:"ready",progress:100,bytesLoaded:0,totalBytes:0,message:"Loaded from cache"}),e;const i=Ls.transaction2.wasmSize+Ls.transaction2.zkeySize;t?.({stage:"downloading",progress:0,bytesLoaded:0,totalBytes:i,message:"Downloading ZK circuits (first time only)..."});let r=0;const s=await this.downloadWithProgress(`${this.getBaseUrl()}/${Ls.transaction2.wasm}`,(l,d)=>{r=l,t?.({stage:"downloading",progress:Math.round(r/i*100),bytesLoaded:r,totalBytes:i,message:`Downloading circuit WASM... ${this.formatBytes(l)}/${this.formatBytes(d)}`})}),o=s.byteLength,a=await this.downloadWithProgress(`${this.getBaseUrl()}/${Ls.transaction2.zkey}`,(l,d)=>{r=o+l,t?.({stage:"downloading",progress:Math.round(r/i*100),bytesLoaded:r,totalBytes:i,message:`Downloading proving key... ${this.formatBytes(l)}/${this.formatBytes(d)}`})});t?.({stage:"caching",progress:95,bytesLoaded:i,totalBytes:i,message:"Caching circuits locally..."});try{await this.circuitDb.set("transaction2.wasm",s),await this.circuitDb.set("transaction2.zkey",a),await this.circuitDb.setVersion(Ls.transaction2.version)}catch(l){console.warn("[CircuitLoader] Failed to cache circuits:",l)}return this.cachedCircuits={wasm:s,zkey:a,version:Ls.transaction2.version},t?.({stage:"ready",progress:100,bytesLoaded:i,totalBytes:i,message:"Circuits ready"}),this.cachedCircuits}getBaseUrl(){return typeof window<"u"&&window.location.hostname==="localhost"?jQ:V4}async downloadWithProgress(t,e){const i=await fetch(t);if(!i.ok){console.warn("[CircuitLoader] Primary CDN failed, trying fallback...");const r=t.replace(V4,FQ),s=await fetch(r);if(!s.ok)throw new Error(`Failed to download circuit from ${t}: ${i.status}`);return this.readResponseWithProgress(s,e)}return this.readResponseWithProgress(i,e)}async readResponseWithProgress(t,e){const i=t.headers.get("Content-Length"),r=i?parseInt(i,10):0;if(!t.body){const u=await t.arrayBuffer();return e(u.byteLength,u.byteLength),u}const s=t.body.getReader(),o=[];let a=0;for(;;){const{done:u,value:h}=await s.read();if(u)break;o.push(h),a+=h.length,e(a,r||a)}const l=new Uint8Array(a);let d=0;for(const u of o)l.set(u,d),d+=u.length;return l.buffer}formatBytes(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`}async clearCache(){this.cachedCircuits=null,await this.circuitDb.clear()}getTotalSize(){return Ls.transaction2.wasmSize+Ls.transaction2.zkeySize}getFormattedTotalSize(){return this.formatBytes(this.getTotalSize())}}let U2=null;function cu(){return U2||(U2=new GQ),U2}async function WQ(n){await cu().load(n)}const VQ=`
// Import snarkjs in worker context
importScripts('https://unpkg.com/snarkjs@0.7.0/build/snarkjs.min.js');

self.onmessage = async function(e) {
  const { type, input, wasmBuffer, zkeyBuffer } = e.data;

  if (type !== 'generate') {
    self.postMessage({ type: 'error', error: 'Unknown request type' });
    return;
  }

  try {
    // Report progress
    self.postMessage({
      type: 'progress',
      progress: { stage: 'Initializing...', percent: 10 }
    });

    // Convert ArrayBuffers to Uint8Array for snarkjs
    const wasmCode = new Uint8Array(wasmBuffer);
    const zkeyCode = new Uint8Array(zkeyBuffer);

    self.postMessage({
      type: 'progress',
      progress: { stage: 'Computing witness...', percent: 30 }
    });

    // Generate the proof
    // Note: snarkjs.groth16.fullProve accepts Uint8Array for wasm and zkey
    const { proof, publicSignals } = await snarkjs.groth16.fullProve(
      input,
      wasmCode,
      zkeyCode
    );

    self.postMessage({
      type: 'progress',
      progress: { stage: 'Proof complete!', percent: 100 }
    });

    // Send result back to main thread
    self.postMessage({
      type: 'success',
      proof,
      publicSignals
    });

  } catch (error) {
    self.postMessage({
      type: 'error',
      error: error.message || 'Unknown error during proof generation'
    });
  }
};
`;class qQ{worker=null;pendingResolve=null;pendingReject=null;onProgress=null;async init(){if(this.worker)return;const t=new Blob([VQ],{type:"application/javascript"}),e=URL.createObjectURL(t);this.worker=new Worker(e),this.worker.onmessage=i=>{const r=i.data;r.type==="progress"?this.onProgress?.(r.progress):r.type==="success"?(this.pendingResolve?.(r),this.cleanup()):r.type==="error"&&(this.pendingReject?.(new Error(r.error||"Unknown worker error")),this.cleanup())},this.worker.onerror=i=>{this.pendingReject?.(new Error(`Worker error: ${i.message}`)),this.cleanup()}}async generateProof(t,e,i,r){return await this.init(),this.onProgress=r||null,new Promise((s,o)=>{this.pendingResolve=l=>{l.proof&&l.publicSignals?s({proof:l.proof,publicSignals:l.publicSignals}):o(new Error("Invalid proof response"))},this.pendingReject=o;const a={type:"generate",input:t,wasmBuffer:e,zkeyBuffer:i};this.worker.postMessage(a,[e,i])})}cleanup(){this.pendingResolve=null,this.pendingReject=null,this.onProgress=null}terminate(){this.worker&&(this.worker.terminate(),this.worker=null),this.cleanup()}}async function q4(n,t,e,i){i?.({stage:"Loading snarkjs...",percent:5});const r=await Qm(()=>Promise.resolve().then(()=>Iit),void 0);i?.({stage:"Preparing inputs...",percent:10});const s=new Uint8Array(t),o=new Uint8Array(e);i?.({stage:"Computing witness...",percent:30});const{proof:a,publicSignals:l}=await r.groth16.fullProve(n,s,o);return i?.({stage:"Proof complete!",percent:100}),{proof:a,publicSignals:l}}let D2=null;function $4(){return D2||(D2=new qQ),D2}function H4(n){const t=new Uint8Array(256);let e=0;const i=n.pi_a,r=ma(i[0]),s=ma(i[1]);t.set(r,e),e+=32,t.set(s,e),e+=32;const o=n.pi_b,a=ma(o[0][0]),l=ma(o[0][1]),d=ma(o[1][0]),u=ma(o[1][1]);t.set(l,e),e+=32,t.set(a,e),e+=32,t.set(u,e),e+=32,t.set(d,e),e+=32;const h=n.pi_c,m=ma(h[0]),p=ma(h[1]);return t.set(m,e),e+=32,t.set(p,e),t}function ma(n){const e=(n.startsWith("0x")?n.slice(2):n).padStart(64,"0"),i=new Uint8Array(32);for(let r=0;r<32;r++)i[r]=parseInt(e.substr(r*2,2),16);return i}async function qc(n){const t=typeof n=="string"?new TextEncoder().encode(n):n,e=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(e)}const $Q=256,lu=12,TR=128;async function HQ(n,t){const e=fm(lu),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:TR},t,n),r=new Uint8Array(lu+i.byteLength);return r.set(e,0),r.set(new Uint8Array(i),lu),r}async function KQ(n,t){if(n.length<lu+16)throw new Error("Encrypted data too short");const e=n.slice(0,lu),i=n.slice(lu),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:TR},t,i);return new Uint8Array(r)}async function ZQ(n,t){const e=new TextEncoder().encode(n),i=await HQ(e,t);return pm(i)}async function QQ(n,t){const e=RR(n),i=await KQ(e,t);return new TextDecoder().decode(i)}const YQ=1e5,XQ=16;async function kR(n,t,e=YQ){const i=await crypto.subtle.importKey("raw",new TextEncoder().encode(n),"PBKDF2",!1,["deriveBits","deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:e,hash:"SHA-256"},i,{name:"AES-GCM",length:$Q},!1,["encrypt","decrypt"])}function fm(n){const t=new Uint8Array(n);return crypto.getRandomValues(t),t}function JQ(){return fm(XQ)}function hm(n){return Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join("")}function zd(n){if(n.length%2!==0)throw new Error("Hex string must have even length");const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2)t[e/2]=parseInt(n.substr(e,2),16);return t}function pm(n){const t=String.fromCharCode(...n);return btoa(t)}function RR(n){const t=atob(n),e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}async function tY(n,t){const e=JQ(),i=await kR(t,e);return{ciphertext:await ZQ(n,i),salt:pm(e),iv:""}}async function eY(n,t){const e=RR(n.salt),i=await kR(t,e);return QQ(n.ciphertext,i)}const Vp="https://api3.privacycash.org",Fl=new Zt("9fhQBbumKEFuXtMBDw8AaQyAjCorLGJQiS3skWZdQyQD"),qp="spectre:privacy:notes";async function nY(n,t){const e=new Uint8Array(n.length+t.length);e.set(n),e.set(t,n.length);const i=await qc(e);return hm(i)}async function K4(n){const t=await qc(n);return hm(t)}class iY{connection;walletPublicKey=null;signTransaction=null;circuitsLoaded=!1;useWorker=!0;constructor(t){this.connection=t}setWallet(t,e){this.walletPublicKey=t,this.signTransaction=e}async preloadCircuits(t){await cu().load(t),this.circuitsLoaded=!0}areCircuitsLoaded(){return this.circuitsLoaded}async generateNote(t){const e=fm(32),i=fm(32);return{commitment:await nY(e,i),nullifier:hm(e),secret:hm(i),amount:t,tokenType:"SOL",createdAt:new Date,spent:!1}}async shieldSol(t,e){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};try{const i=Math.floor(t*Ma);e?.({stage:"circuits",progress:10,message:"Loading ZK circuits..."}),this.circuitsLoaded||await this.preloadCircuits(),e?.({stage:"note",progress:20,message:"Generating deposit note..."});const r=await this.generateNote(i);e?.({stage:"proof",progress:30,message:"Generating ZK proof (this may take 15-30 seconds)..."});const{proof:s,publicSignals:o}=await this.generateDepositProof(r,u=>{e?.({stage:"proof",progress:30+u.percent*.4,message:u.stage})});e?.({stage:"signing",progress:75,message:"Please sign the transaction in your wallet..."});const a=await this.buildDepositTransaction(r.commitment,i,s,o),l=await this.signTransaction(a);e?.({stage:"submitting",progress:85,message:"Submitting to privacy pool..."});const d=await this.submitDeposit(l,r.commitment);return e?.({stage:"confirming",progress:90,message:"Waiting for confirmation..."}),await this.connection.confirmTransaction(d,"confirmed"),r.txSignature=d,r.leafIndex=await this.getLeafIndex(r.commitment),await this.saveNote(r),e?.({stage:"done",progress:100,message:"Shield complete!"}),{success:!0,signature:d,note:r}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async unshieldSol(t,e,i){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};if(t.spent)return{success:!1,error:"Note has already been spent"};try{i?.({stage:"merkle",progress:20,message:"Fetching merkle proof..."});const r=await this.getMerkleProof(t.commitment);i?.({stage:"proof",progress:30,message:"Generating withdrawal proof (this may take 15-30 seconds)..."});const{proof:s,publicSignals:o}=await this.generateWithdrawalProof(t,e,r,u=>{i?.({stage:"proof",progress:30+u.percent*.4,message:u.stage})});i?.({stage:"signing",progress:75,message:"Please sign the transaction in your wallet..."});const a=await this.buildWithdrawalTransaction(t.nullifier,e,t.amount,s,o),l=await this.signTransaction(a);i?.({stage:"submitting",progress:85,message:"Submitting withdrawal..."});const d=await this.submitWithdrawal(l);return i?.({stage:"confirming",progress:90,message:"Waiting for confirmation..."}),await this.connection.confirmTransaction(d,"confirmed"),t.spent=!0,await this.updateNote(t),i?.({stage:"done",progress:100,message:"Unshield complete!"}),{success:!0,signature:d,amountReceived:t.amount}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateDepositProof(t,e){const r=await cu().load(),s={commitment:BigInt("0x"+t.commitment),nullifier:BigInt("0x"+t.nullifier),secret:BigInt("0x"+t.secret),amount:BigInt(t.amount)};if(this.useWorker)try{return await $4().generateProof(s,r.wasm,r.zkey,e)}catch(o){console.warn("[BrowserPrivacyClient] Worker failed, falling back to inline:",o),this.useWorker=!1}return await q4(s,r.wasm,r.zkey,e)}async generateWithdrawalProof(t,e,i,r){const o=await cu().load(),a=await K4(zd(t.nullifier)),l={nullifier:BigInt("0x"+t.nullifier),secret:BigInt("0x"+t.secret),pathElements:i.pathElements.map(d=>BigInt("0x"+d)),pathIndices:i.pathIndices,root:BigInt("0x"+i.root),nullifierHash:BigInt("0x"+a),recipient:BigInt(new Zt(e).toBytes().reduce((d,u)=>d*256n+BigInt(u),0n)),amount:BigInt(t.amount)};if(this.useWorker)try{return await $4().generateProof(l,o.wasm,o.zkey,r)}catch{this.useWorker=!1}return await q4(l,o.wasm,o.zkey,r)}async buildDepositTransaction(t,e,i,r){if(!this.walletPublicKey)throw new Error("Wallet not connected");const[s]=Zt.findProgramAddressSync([ke.from("pool")],Fl),[o]=Zt.findProgramAddressSync([ke.from("commitment"),zd(t)],Fl),a=H4(i),l=zd(t),d=this.encodePublicSignals(r),u=await qc("global:deposit"),h=ke.concat([u.slice(0,8),a,l,d]),m=new Ke;m.add(Un.transfer({fromPubkey:this.walletPublicKey,toPubkey:s,lamports:e})),m.add({keys:[{pubkey:this.walletPublicKey,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Un.programId,isSigner:!1,isWritable:!1}],programId:Fl,data:h});const{blockhash:p}=await this.connection.getLatestBlockhash();return m.recentBlockhash=p,m.feePayer=this.walletPublicKey,m}async buildWithdrawalTransaction(t,e,i,r,s){if(!this.walletPublicKey)throw new Error("Wallet not connected");const[o]=Zt.findProgramAddressSync([ke.from("pool")],Fl),a=await K4(zd(t)),[l]=Zt.findProgramAddressSync([ke.from("nullifier"),zd(a)],Fl),d=new Zt(e),u=H4(r),h=this.encodePublicSignals(s),m=await qc("global:withdraw"),p=ke.alloc(8);p.writeBigUInt64LE(BigInt(i));const E=ke.concat([m.slice(0,8),u,h,p]),C=new Ke;C.add({keys:[{pubkey:this.walletPublicKey,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:Un.programId,isSigner:!1,isWritable:!1}],programId:Fl,data:E});const{blockhash:v}=await this.connection.getLatestBlockhash();return C.recentBlockhash=v,C.feePayer=this.walletPublicKey,C}encodePublicSignals(t){const e=ke.alloc(t.length*32);return t.forEach((i,r)=>{const s=BigInt(i).toString(16).padStart(64,"0");for(let o=0;o<32;o++)e[r*32+o]=parseInt(s.substr(o*2,2),16)}),e}async submitDeposit(t,e){const i=t.serialize();try{return await this.connection.sendRawTransaction(i)}catch{console.log("[BrowserPrivacyClient] Direct submission failed, using relayer...")}const r=await fetch(`${Vp}/deposit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:pm(i),commitment:e})});if(!r.ok){const o=await r.text();throw new Error(`Relayer error: ${o}`)}return(await r.json()).signature}async submitWithdrawal(t){const e=t.serialize(),i=await fetch(`${Vp}/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:pm(e)})});if(!i.ok){const s=await i.text();throw new Error(`Relayer error: ${s}`)}return(await i.json()).signature}async getMerkleProof(t){const e=await fetch(`${Vp}/merkle/proof?commitment=${t}`);if(!e.ok)throw new Error("Failed to fetch merkle proof");return e.json()}async getLeafIndex(t){const e=await fetch(`${Vp}/commitment/${t}`);return e.ok&&(await e.json()).leafIndex||0}async saveNote(t){const e=await this.loadNotes();e.push(t),localStorage.setItem(qp,JSON.stringify(e))}async updateNote(t){const e=await this.loadNotes(),i=e.findIndex(r=>r.commitment===t.commitment);i>=0&&(e[i]=t,localStorage.setItem(qp,JSON.stringify(e)))}async loadNotes(){const t=localStorage.getItem(qp);if(!t)return[];try{return JSON.parse(t).map(i=>({...i,createdAt:new Date(i.createdAt)}))}catch{return[]}}async exportNotes(t){const e=await this.loadNotes(),i=JSON.stringify(e),r=await tY(i,t);return JSON.stringify(r)}async importNotes(t,e){const i=JSON.parse(t),r=await eY(i,e),s=JSON.parse(r);localStorage.setItem(qp,JSON.stringify(s))}async getShieldedBalance(){return(await this.loadNotes()).filter(e=>!e.spent).reduce((e,i)=>e+i.amount,0)}async getUnspentNotes(){return(await this.loadNotes()).filter(e=>!e.spent)}}let z2=null;function rY(n){return z2||(z2=new iY(n)),z2}var $p={exports:{}},Z4;function sY(){if(Z4)return $p.exports;Z4=1;const n=/[\p{Lu}]/u,t=/[\p{Ll}]/u,e=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,r=/[_.\- ]+/,s=new RegExp("^"+r.source),o=new RegExp(r.source+i.source,"gu"),a=new RegExp("\\d+"+i.source,"gu"),l=(m,p,E)=>{let C=!1,v=!1,A=!1;for(let x=0;x<m.length;x++){const P=m[x];C&&n.test(P)?(m=m.slice(0,x)+"-"+m.slice(x),C=!1,A=v,v=!0,x++):v&&A&&t.test(P)?(m=m.slice(0,x-1)+"-"+m.slice(x-1),A=v,v=!1,C=!0):(C=p(P)===P&&E(P)!==P,A=v,v=E(P)===P&&p(P)!==P)}return m},d=(m,p)=>(e.lastIndex=0,m.replace(e,E=>p(E))),u=(m,p)=>(o.lastIndex=0,a.lastIndex=0,m.replace(o,(E,C)=>p(C)).replace(a,E=>p(E))),h=(m,p)=>{if(!(typeof m=="string"||Array.isArray(m)))throw new TypeError("Expected the input to be `string | string[]`");if(p={pascalCase:!1,preserveConsecutiveUppercase:!1,...p},Array.isArray(m)?m=m.map(A=>A.trim()).filter(A=>A.length).join("-"):m=m.trim(),m.length===0)return"";const E=p.locale===!1?A=>A.toLowerCase():A=>A.toLocaleLowerCase(p.locale),C=p.locale===!1?A=>A.toUpperCase():A=>A.toLocaleUpperCase(p.locale);return m.length===1?p.pascalCase?C(m):E(m):(m!==E(m)&&(m=l(m,E,C)),m=m.replace(s,""),p.preserveConsecutiveUppercase?m=d(m,E):m=E(m),p.pascalCase&&(m=C(m.charAt(0))+m.slice(1)),u(m,C))};return $p.exports=h,$p.exports.default=h,$p.exports}sY();var Gd={},we={},Q4;function Y4(){if(Q4)return we;Q4=1;class n{constructor(F,R){if(!Number.isInteger(F))throw new TypeError("span must be an integer");this.span=F,this.property=R}makeDestinationObject(){return{}}decode(F,R){throw new Error("Layout is abstract")}encode(F,R,_){throw new Error("Layout is abstract")}getSpan(F,R){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(F){const R=Object.create(this.constructor.prototype);return Object.assign(R,this),R.property=F,R}fromArray(F){}}we.Layout=n;function t($,F){return F.property?$+"["+F.property+"]":$}we.nameWithProperty=t;function e($,F){if(typeof $!="function")throw new TypeError("Class must be constructor");if($.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(F&&F instanceof n))throw new TypeError("layout must be a Layout");if(F.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");$.layout_=F,F.boundConstructor_=$,F.makeDestinationObject=(()=>new $),Object.defineProperty($.prototype,"encode",{value:function(R,_){return F.encode(this,R,_)},writable:!0}),Object.defineProperty($,"decode",{value:function(R,_){return F.decode(R,_)},writable:!0})}we.bindConstructorLayout=e;class i extends n{isCount(){throw new Error("ExternalLayout is abstract")}}class r extends i{constructor(F,R){if(F===void 0&&(F=1),!Number.isInteger(F)||0>=F)throw new TypeError("elementSpan must be a (positive) integer");super(-1,R),this.elementSpan=F}isCount(){return!0}decode(F,R){R===void 0&&(R=0);const _=F.length-R;return Math.floor(_/this.elementSpan)}encode(F,R,_){return 0}}class s extends i{constructor(F,R,_){if(!(F instanceof n))throw new TypeError("layout must be a Layout");if(R===void 0)R=0;else if(!Number.isInteger(R))throw new TypeError("offset must be integer or undefined");super(F.span,_||F.property),this.layout=F,this.offset=R}isCount(){return this.layout instanceof o||this.layout instanceof a}decode(F,R){return R===void 0&&(R=0),this.layout.decode(F,R+this.offset)}encode(F,R,_){return _===void 0&&(_=0),this.layout.encode(F,R,_+this.offset)}}class o extends n{constructor(F,R){if(super(F,R),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(F,R){return R===void 0&&(R=0),F.readUIntLE(R,this.span)}encode(F,R,_){return _===void 0&&(_=0),R.writeUIntLE(F,_,this.span),this.span}}class a extends n{constructor(F,R){if(super(F,R),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(F,R){return R===void 0&&(R=0),F.readUIntBE(R,this.span)}encode(F,R,_){return _===void 0&&(_=0),R.writeUIntBE(F,_,this.span),this.span}}class l extends n{constructor(F,R){if(super(F,R),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(F,R){return R===void 0&&(R=0),F.readIntLE(R,this.span)}encode(F,R,_){return _===void 0&&(_=0),R.writeIntLE(F,_,this.span),this.span}}class d extends n{constructor(F,R){if(super(F,R),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(F,R){return R===void 0&&(R=0),F.readIntBE(R,this.span)}encode(F,R,_){return _===void 0&&(_=0),R.writeIntBE(F,_,this.span),this.span}}const u=Math.pow(2,32);function h($){const F=Math.floor($/u),R=$-F*u;return{hi32:F,lo32:R}}function m($,F){return $*u+F}class p extends n{constructor(F){super(8,F)}decode(F,R){R===void 0&&(R=0);const _=F.readUInt32LE(R),k=F.readUInt32LE(R+4);return m(k,_)}encode(F,R,_){_===void 0&&(_=0);const k=h(F);return R.writeUInt32LE(k.lo32,_),R.writeUInt32LE(k.hi32,_+4),8}}class E extends n{constructor(F){super(8,F)}decode(F,R){R===void 0&&(R=0);const _=F.readUInt32BE(R),k=F.readUInt32BE(R+4);return m(_,k)}encode(F,R,_){_===void 0&&(_=0);const k=h(F);return R.writeUInt32BE(k.hi32,_),R.writeUInt32BE(k.lo32,_+4),8}}class C extends n{constructor(F){super(8,F)}decode(F,R){R===void 0&&(R=0);const _=F.readUInt32LE(R),k=F.readInt32LE(R+4);return m(k,_)}encode(F,R,_){_===void 0&&(_=0);const k=h(F);return R.writeUInt32LE(k.lo32,_),R.writeInt32LE(k.hi32,_+4),8}}class v extends n{constructor(F){super(8,F)}decode(F,R){R===void 0&&(R=0);const _=F.readInt32BE(R),k=F.readUInt32BE(R+4);return m(_,k)}encode(F,R,_){_===void 0&&(_=0);const k=h(F);return R.writeInt32BE(k.hi32,_),R.writeUInt32BE(k.lo32,_+4),8}}class A extends n{constructor(F){super(4,F)}decode(F,R){return R===void 0&&(R=0),F.readFloatLE(R)}encode(F,R,_){return _===void 0&&(_=0),R.writeFloatLE(F,_),4}}class x extends n{constructor(F){super(4,F)}decode(F,R){return R===void 0&&(R=0),F.readFloatBE(R)}encode(F,R,_){return _===void 0&&(_=0),R.writeFloatBE(F,_),4}}class P extends n{constructor(F){super(8,F)}decode(F,R){return R===void 0&&(R=0),F.readDoubleLE(R)}encode(F,R,_){return _===void 0&&(_=0),R.writeDoubleLE(F,_),8}}class W extends n{constructor(F){super(8,F)}decode(F,R){return R===void 0&&(R=0),F.readDoubleBE(R)}encode(F,R,_){return _===void 0&&(_=0),R.writeDoubleBE(F,_),8}}class K extends n{constructor(F,R,_){if(!(F instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(R instanceof i&&R.isCount()||Number.isInteger(R)&&0<=R))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let k=-1;!(R instanceof i)&&0<F.span&&(k=R*F.span),super(k,_),this.elementLayout=F,this.count=R}getSpan(F,R){if(0<=this.span)return this.span;R===void 0&&(R=0);let _=0,k=this.count;if(k instanceof i&&(k=k.decode(F,R)),0<this.elementLayout.span)_=k*this.elementLayout.span;else{let H=0;for(;H<k;)_+=this.elementLayout.getSpan(F,R+_),++H}return _}decode(F,R){R===void 0&&(R=0);const _=[];let k=0,H=this.count;for(H instanceof i&&(H=H.decode(F,R));k<H;)_.push(this.elementLayout.decode(F,R)),R+=this.elementLayout.getSpan(F,R),k+=1;return _}encode(F,R,_){_===void 0&&(_=0);const k=this.elementLayout,H=F.reduce((L,g)=>L+k.encode(g,R,_+L),0);return this.count instanceof i&&this.count.encode(F.length,R,_),H}}class j extends n{constructor(F,R,_){if(!(Array.isArray(F)&&F.reduce((H,L)=>H&&L instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof R=="boolean"&&_===void 0&&(_=R,R=void 0);for(const H of F)if(0>H.span&&H.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let k=-1;try{k=F.reduce((H,L)=>H+L.getSpan(),0)}catch{}super(k,R),this.fields=F,this.decodePrefixes=!!_}getSpan(F,R){if(0<=this.span)return this.span;R===void 0&&(R=0);let _=0;try{_=this.fields.reduce((k,H)=>{const L=H.getSpan(F,R);return R+=L,k+L},0)}catch{throw new RangeError("indeterminate span")}return _}decode(F,R){R===void 0&&(R=0);const _=this.makeDestinationObject();for(const k of this.fields)if(k.property!==void 0&&(_[k.property]=k.decode(F,R)),R+=k.getSpan(F,R),this.decodePrefixes&&F.length===R)break;return _}encode(F,R,_){_===void 0&&(_=0);const k=_;let H=0,L=0;for(const g of this.fields){let D=g.span;if(L=0<D?D:0,g.property!==void 0){const S=F[g.property];S!==void 0&&(L=g.encode(S,R,_),0>D&&(D=g.getSpan(R,_)))}H=_,_+=D}return H+L-k}fromArray(F){const R=this.makeDestinationObject();for(const _ of this.fields)_.property!==void 0&&0<F.length&&(R[_.property]=F.shift());return R}layoutFor(F){if(typeof F!="string")throw new TypeError("property must be string");for(const R of this.fields)if(R.property===F)return R}offsetOf(F){if(typeof F!="string")throw new TypeError("property must be string");let R=0;for(const _ of this.fields){if(_.property===F)return R;0>_.span?R=-1:0<=R&&(R+=_.span)}}}class b{constructor(F){this.property=F}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class B extends b{constructor(F,R){if(!(F instanceof i&&F.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(R||F.property||"variant"),this.layout=F}decode(F,R){return this.layout.decode(F,R)}encode(F,R,_){return this.layout.encode(F,R,_)}}class J extends n{constructor(F,R,_){const k=F instanceof o||F instanceof a;if(k)F=new B(new s(F));else if(F instanceof i&&F.isCount())F=new B(F);else if(!(F instanceof b))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(R===void 0&&(R=null),!(R===null||R instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(R!==null){if(0>R.span)throw new Error("defaultLayout must have constant span");R.property===void 0&&(R=R.replicate("content"))}let H=-1;R&&(H=R.span,0<=H&&k&&(H+=F.layout.span)),super(H,_),this.discriminator=F,this.usesPrefixDiscriminator=k,this.defaultLayout=R,this.registry={};let L=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(g){return L(g)},this.configGetSourceVariant=function(g){L=g.bind(this)}}getSpan(F,R){if(0<=this.span)return this.span;R===void 0&&(R=0);const _=this.getVariant(F,R);if(!_)throw new Error("unable to determine span for unrecognized variant");return _.getSpan(F,R)}defaultGetSourceVariant(F){if(F.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&F.hasOwnProperty(this.defaultLayout.property))return;const R=this.registry[F[this.discriminator.property]];if(R&&(!R.layout||F.hasOwnProperty(R.property)))return R}else for(const R in this.registry){const _=this.registry[R];if(F.hasOwnProperty(_.property))return _}throw new Error("unable to infer src variant")}decode(F,R){R===void 0&&(R=0);let _;const k=this.discriminator,H=k.decode(F,R);let L=this.registry[H];if(L===void 0){let g=0;L=this.defaultLayout,this.usesPrefixDiscriminator&&(g=k.layout.span),_=this.makeDestinationObject(),_[k.property]=H,_[L.property]=this.defaultLayout.decode(F,R+g)}else _=L.decode(F,R);return _}encode(F,R,_){_===void 0&&(_=0);const k=this.getSourceVariant(F);if(k===void 0){const H=this.discriminator,L=this.defaultLayout;let g=0;return this.usesPrefixDiscriminator&&(g=H.layout.span),H.encode(F[H.property],R,_),g+L.encode(F[L.property],R,_+g)}return k.encode(F,R,_)}addVariant(F,R,_){const k=new it(this,F,R,_);return this.registry[F]=k,k}getVariant(F,R){let _=F;return ke.isBuffer(F)&&(R===void 0&&(R=0),_=this.discriminator.decode(F,R)),this.registry[_]}}class it extends n{constructor(F,R,_,k){if(!(F instanceof J))throw new TypeError("union must be a Union");if(!Number.isInteger(R)||0>R)throw new TypeError("variant must be a (non-negative) integer");if(typeof _=="string"&&k===void 0&&(k=_,_=null),_){if(!(_ instanceof n))throw new TypeError("layout must be a Layout");if(F.defaultLayout!==null&&0<=_.span&&_.span>F.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof k!="string")throw new TypeError("variant must have a String property")}let H=F.span;0>F.span&&(H=_?_.span:0,0<=H&&F.usesPrefixDiscriminator&&(H+=F.discriminator.layout.span)),super(H,k),this.union=F,this.variant=R,this.layout=_||null}getSpan(F,R){if(0<=this.span)return this.span;R===void 0&&(R=0);let _=0;return this.union.usesPrefixDiscriminator&&(_=this.union.discriminator.layout.span),_+this.layout.getSpan(F,R+_)}decode(F,R){const _=this.makeDestinationObject();if(R===void 0&&(R=0),this!==this.union.getVariant(F,R))throw new Error("variant mismatch");let k=0;return this.union.usesPrefixDiscriminator&&(k=this.union.discriminator.layout.span),this.layout?_[this.property]=this.layout.decode(F,R+k):this.property?_[this.property]=!0:this.union.usesPrefixDiscriminator&&(_[this.union.discriminator.property]=this.variant),_}encode(F,R,_){_===void 0&&(_=0);let k=0;if(this.union.usesPrefixDiscriminator&&(k=this.union.discriminator.layout.span),this.layout&&!F.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,R,_);let H=k;if(this.layout&&(this.layout.encode(F[this.property],R,_+k),H+=this.layout.getSpan(R,_+k),0<=this.union.span&&H>this.union.span))throw new Error("encoded variant overruns containing union");return H}fromArray(F){if(this.layout)return this.layout.fromArray(F)}}function st($){return 0>$&&($+=4294967296),$}class z extends n{constructor(F,R,_){if(!(F instanceof o||F instanceof a))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof R=="string"&&_===void 0&&(_=R,R=void 0),4<F.span)throw new RangeError("word cannot exceed 32 bits");super(F.span,_),this.word=F,this.msb=!!R,this.fields=[];let k=0;this._packedSetValue=function(H){return k=st(H),this},this._packedGetValue=function(){return k}}decode(F,R){const _=this.makeDestinationObject();R===void 0&&(R=0);const k=this.word.decode(F,R);this._packedSetValue(k);for(const H of this.fields)H.property!==void 0&&(_[H.property]=H.decode(k));return _}encode(F,R,_){_===void 0&&(_=0);const k=this.word.decode(R,_);this._packedSetValue(k);for(const H of this.fields)if(H.property!==void 0){const L=F[H.property];L!==void 0&&H.encode(L)}return this.word.encode(this._packedGetValue(),R,_)}addField(F,R){const _=new I(this,F,R);return this.fields.push(_),_}addBoolean(F){const R=new w(this,F);return this.fields.push(R),R}fieldFor(F){if(typeof F!="string")throw new TypeError("property must be string");for(const R of this.fields)if(R.property===F)return R}}class I{constructor(F,R,_){if(!(F instanceof z))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(R)||0>=R)throw new TypeError("bits must be positive integer");const k=8*F.span,H=F.fields.reduce((L,g)=>L+g.bits,0);if(R+H>k)throw new Error("bits too long for span remainder ("+(k-H)+" of "+k+" remain)");this.container=F,this.bits=R,this.valueMask=(1<<R)-1,R===32&&(this.valueMask=4294967295),this.start=H,this.container.msb&&(this.start=k-H-R),this.wordMask=st(this.valueMask<<this.start),this.property=_}decode(){const F=this.container._packedGetValue();return st(F&this.wordMask)>>>this.start}encode(F){if(!Number.isInteger(F)||F!==st(F&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const R=this.container._packedGetValue(),_=st(F<<this.start);this.container._packedSetValue(st(R&~this.wordMask)|_)}}class w extends I{constructor(F,R){super(F,1,R)}decode(F,R){return!!I.prototype.decode.call(this,F,R)}encode(F){return typeof F=="boolean"&&(F=+F),I.prototype.encode.call(this,F)}}class T extends n{constructor(F,R){if(!(F instanceof i&&F.isCount()||Number.isInteger(F)&&0<=F))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let _=-1;F instanceof i||(_=F),super(_,R),this.length=F}getSpan(F,R){let _=this.span;return 0>_&&(_=this.length.decode(F,R)),_}decode(F,R){R===void 0&&(R=0);let _=this.span;return 0>_&&(_=this.length.decode(F,R)),F.slice(R,R+_)}encode(F,R,_){let k=this.length;if(this.length instanceof i&&(k=F.length),!(ke.isBuffer(F)&&k===F.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+k+") Buffer as src");if(_+k>R.length)throw new RangeError("encoding overruns Buffer");return R.write(F.toString("hex"),_,k,"hex"),this.length instanceof i&&this.length.encode(k,R,_),k}}class V extends n{constructor(F){super(-1,F)}getSpan(F,R){if(!ke.isBuffer(F))throw new TypeError("b must be a Buffer");R===void 0&&(R=0);let _=R;for(;_<F.length&&F[_]!==0;)_+=1;return 1+_-R}decode(F,R,_){R===void 0&&(R=0);let k=this.getSpan(F,R);return F.slice(R,R+k-1).toString("utf-8")}encode(F,R,_){_===void 0&&(_=0),typeof F!="string"&&(F=F.toString());const k=new ke(F,"utf8"),H=k.length;if(_+H>R.length)throw new RangeError("encoding overruns Buffer");return k.copy(R,_),R[_+H]=0,H+1}}class Y extends n{constructor(F,R){if(typeof F=="string"&&R===void 0&&(R=F,F=void 0),F===void 0)F=-1;else if(!Number.isInteger(F))throw new TypeError("maxSpan must be an integer");super(-1,R),this.maxSpan=F}getSpan(F,R){if(!ke.isBuffer(F))throw new TypeError("b must be a Buffer");return R===void 0&&(R=0),F.length-R}decode(F,R,_){R===void 0&&(R=0);let k=this.getSpan(F,R);if(0<=this.maxSpan&&this.maxSpan<k)throw new RangeError("text length exceeds maxSpan");return F.slice(R,R+k).toString("utf-8")}encode(F,R,_){_===void 0&&(_=0),typeof F!="string"&&(F=F.toString());const k=new ke(F,"utf8"),H=k.length;if(0<=this.maxSpan&&this.maxSpan<H)throw new RangeError("text length exceeds maxSpan");if(_+H>R.length)throw new RangeError("encoding overruns Buffer");return k.copy(R,_),H}}class Q extends n{constructor(F,R){super(0,R),this.value=F}decode(F,R,_){return this.value}encode(F,R,_){return 0}}return we.ExternalLayout=i,we.GreedyCount=r,we.OffsetLayout=s,we.UInt=o,we.UIntBE=a,we.Int=l,we.IntBE=d,we.Float=A,we.FloatBE=x,we.Double=P,we.DoubleBE=W,we.Sequence=K,we.Structure=j,we.UnionDiscriminator=b,we.UnionLayoutDiscriminator=B,we.Union=J,we.VariantLayout=it,we.BitStructure=z,we.BitField=I,we.Boolean=w,we.Blob=T,we.CString=V,we.UTF8=Y,we.Constant=Q,we.greedy=(($,F)=>new r($,F)),we.offset=(($,F,R)=>new s($,F,R)),we.u8=($=>new o(1,$)),we.u16=($=>new o(2,$)),we.u24=($=>new o(3,$)),we.u32=($=>new o(4,$)),we.u40=($=>new o(5,$)),we.u48=($=>new o(6,$)),we.nu64=($=>new p($)),we.u16be=($=>new a(2,$)),we.u24be=($=>new a(3,$)),we.u32be=($=>new a(4,$)),we.u40be=($=>new a(5,$)),we.u48be=($=>new a(6,$)),we.nu64be=($=>new E($)),we.s8=($=>new l(1,$)),we.s16=($=>new l(2,$)),we.s24=($=>new l(3,$)),we.s32=($=>new l(4,$)),we.s40=($=>new l(5,$)),we.s48=($=>new l(6,$)),we.ns64=($=>new C($)),we.s16be=($=>new d(2,$)),we.s24be=($=>new d(3,$)),we.s32be=($=>new d(4,$)),we.s40be=($=>new d(5,$)),we.s48be=($=>new d(6,$)),we.ns64be=($=>new v($)),we.f32=($=>new A($)),we.f32be=($=>new x($)),we.f64=($=>new P($)),we.f64be=($=>new W($)),we.struct=(($,F,R)=>new j($,F,R)),we.bits=(($,F,R)=>new z($,F,R)),we.seq=(($,F,R)=>new K($,F,R)),we.union=(($,F,R)=>new J($,F,R)),we.unionLayoutDiscriminator=(($,F)=>new B($,F)),we.blob=(($,F)=>new T($,F)),we.cstr=($=>new V($)),we.utf8=(($,F)=>new Y($,F)),we.const=(($,F)=>new Q($,F)),we}const oY=yb(PD);var X4;function aY(){return X4||(X4=1,(function(n){var t=Gd&&Gd.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(n,"__esModule",{value:!0}),n.map=n.array=n.rustEnum=n.str=n.vecU8=n.tagged=n.vec=n.bool=n.option=n.publicKey=n.i256=n.u256=n.i128=n.u128=n.i64=n.u64=n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0;const e=Y4(),i=oY,r=t(Fb());var s=Y4();Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return s.struct}});class o extends e.Layout{constructor(I,w,T){super(I,T),this.blob=(0,e.blob)(I),this.signed=w}decode(I,w=0){const T=new r.default(this.blob.decode(I,w),10,"le");return this.signed?T.fromTwos(this.span*8).clone():T}encode(I,w,T=0){return this.signed&&(I=I.toTwos(this.span*8)),this.blob.encode(I.toArrayLike(ke,"le",this.span),w,T)}}function a(z){return new o(8,!1,z)}n.u64=a;function l(z){return new o(8,!0,z)}n.i64=l;function d(z){return new o(16,!1,z)}n.u128=d;function u(z){return new o(16,!0,z)}n.i128=u;function h(z){return new o(32,!1,z)}n.u256=h;function m(z){return new o(32,!0,z)}n.i256=m;class p extends e.Layout{constructor(I,w,T,V){super(I.span,V),this.layout=I,this.decoder=w,this.encoder=T}decode(I,w){return this.decoder(this.layout.decode(I,w))}encode(I,w,T){return this.layout.encode(this.encoder(I),w,T)}getSpan(I,w){return this.layout.getSpan(I,w)}}function E(z){return new p((0,e.blob)(32),I=>new i.PublicKey(I),I=>I.toBuffer(),z)}n.publicKey=E;class C extends e.Layout{constructor(I,w){super(-1,w),this.layout=I,this.discriminator=(0,e.u8)()}encode(I,w,T=0){return I==null?this.discriminator.encode(0,w,T):(this.discriminator.encode(1,w,T),this.layout.encode(I,w,T+1)+1)}decode(I,w=0){const T=this.discriminator.decode(I,w);if(T===0)return null;if(T===1)return this.layout.decode(I,w+1);throw new Error("Invalid option "+this.property)}getSpan(I,w=0){const T=this.discriminator.decode(I,w);if(T===0)return 1;if(T===1)return this.layout.getSpan(I,w+1)+1;throw new Error("Invalid option "+this.property)}}function v(z,I){return new C(z,I)}n.option=v;function A(z){return new p((0,e.u8)(),x,P,z)}n.bool=A;function x(z){if(z===0)return!1;if(z===1)return!0;throw new Error("Invalid bool: "+z)}function P(z){return z?1:0}function W(z,I){const w=(0,e.u32)("length"),T=(0,e.struct)([w,(0,e.seq)(z,(0,e.offset)(w,-w.span),"values")]);return new p(T,({values:V})=>V,V=>({values:V}),I)}n.vec=W;function K(z,I,w){const T=(0,e.struct)([a("tag"),I.replicate("data")]);function V({tag:Y,data:Q}){if(!Y.eq(z))throw new Error("Invalid tag, expected: "+z.toString("hex")+", got: "+Y.toString("hex"));return Q}return new p(T,V,Y=>({tag:z,data:Y}),w)}n.tagged=K;function j(z){const I=(0,e.u32)("length"),w=(0,e.struct)([I,(0,e.blob)((0,e.offset)(I,-I.span),"data")]);return new p(w,({data:T})=>T,T=>({data:T}),z)}n.vecU8=j;function b(z){return new p(j(),I=>I.toString("utf-8"),I=>ke.from(I,"utf-8"),z)}n.str=b;function B(z,I,w){const T=(0,e.union)(w??(0,e.u8)(),I);return z.forEach((V,Y)=>T.addVariant(Y,V,V.property)),T}n.rustEnum=B;function J(z,I,w){const T=(0,e.struct)([(0,e.seq)(z,I,"values")]);return new p(T,({values:V})=>V,V=>({values:V}),w)}n.array=J;class it extends e.Layout{constructor(I,w,T){super(I.span+w.span,T),this.keyLayout=I,this.valueLayout=w}decode(I,w){w=w||0;const T=this.keyLayout.decode(I,w),V=this.valueLayout.decode(I,w+this.keyLayout.getSpan(I,w));return[T,V]}encode(I,w,T){T=T||0;const V=this.keyLayout.encode(I[0],w,T),Y=this.valueLayout.encode(I[1],w,T+V);return V+Y}getSpan(I,w){return this.keyLayout.getSpan(I,w)+this.valueLayout.getSpan(I,w)}}function st(z,I,w){const T=(0,e.u32)("length"),V=(0,e.struct)([T,(0,e.seq)(new it(z,I),(0,e.offset)(T,-T.span),"values")]);return new p(V,({values:Y})=>new Map(Y),Y=>({values:Array.from(Y.entries())}),w)}n.map=st})(Gd)),Gd}var Xi=aY();function Du(n){let t=n.length;for(;--t>=0;)n[t]=0}const cY=3,lY=258,NR=29,uY=256,dY=uY+1+NR,MR=30,fY=512,hY=new Array((dY+2)*2);Du(hY);const pY=new Array(MR*2);Du(pY);const mY=new Array(fY);Du(mY);const gY=new Array(lY-cY+1);Du(gY);const yY=new Array(NR);Du(yY);const wY=new Array(MR);Du(wY);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const H_=new Uint8Array(256);for(let n=0;n<256;n++)H_[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;H_[254]=H_[254]=1;var G2={exports:{}},J4;function _Y(){return J4||(J4=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(l,d,u){this.fn=l,this.context=d,this.once=u||!1}function s(l,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,h||l,m),E=e?e+d:d;return l._events[E]?l._events[E].fn?l._events[E]=[l._events[E],p]:l._events[E].push(p):(l._events[E]=p,l._eventsCount++),l}function o(l,d){--l._eventsCount===0?l._events=new i:delete l._events[d]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},a.prototype.listeners=function(d){var u=e?e+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,E=new Array(p);m<p;m++)E[m]=h[m].fn;return E},a.prototype.listenerCount=function(d){var u=e?e+d:d,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(d,u,h,m,p,E){var C=e?e+d:d;if(!this._events[C])return!1;var v=this._events[C],A=arguments.length,x,P;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,m),!0;case 5:return v.fn.call(v.context,u,h,m,p),!0;case 6:return v.fn.call(v.context,u,h,m,p,E),!0}for(P=1,x=new Array(A-1);P<A;P++)x[P-1]=arguments[P];v.fn.apply(v.context,x)}else{var W=v.length,K;for(P=0;P<W;P++)switch(v[P].once&&this.removeListener(d,v[P].fn,void 0,!0),A){case 1:v[P].fn.call(v[P].context);break;case 2:v[P].fn.call(v[P].context,u);break;case 3:v[P].fn.call(v[P].context,u,h);break;case 4:v[P].fn.call(v[P].context,u,h,m);break;default:if(!x)for(K=1,x=new Array(A-1);K<A;K++)x[K-1]=arguments[K];v[P].fn.apply(v[P].context,x)}}return!0},a.prototype.on=function(d,u,h){return s(this,d,u,h,!1)},a.prototype.once=function(d,u,h){return s(this,d,u,h,!0)},a.prototype.removeListener=function(d,u,h,m){var p=e?e+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var E=this._events[p];if(E.fn)E.fn===u&&(!m||E.once)&&(!h||E.context===h)&&o(this,p);else{for(var C=0,v=[],A=E.length;C<A;C++)(E[C].fn!==u||m&&!E[C].once||h&&E[C].context!==h)&&v.push(E[C]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},a.prototype.removeAllListeners=function(d){var u;return d?(u=e?e+d:d,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(G2)),G2.exports}_Y();Xi.struct([Xi.publicKey("authority"),Xi.vecU8("data")]);class bY extends TypeError{constructor(t,e){let i;const{message:r,...s}=t,{path:o}=t,a=o.length===0?r:"At path: "+o.join(".")+" -- "+r;super(a),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var l;return(l=i)!=null?l:i=[t,...e()]}}}function vY(n){return uu(n)&&typeof n[Symbol.iterator]=="function"}function uu(n){return typeof n=="object"&&n!=null}function Oa(n){return typeof n=="string"?JSON.stringify(n):""+n}function xY(n){const{done:t,value:e}=n.next();return t?void 0:e}function EY(n,t,e,i){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:r,branch:s}=t,{type:o}=e,{refinement:a,message:l="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Oa(i)+"`"}=n;return{value:i,type:o,refinement:a,key:r[r.length-1],path:r,branch:s,...n,message:l}}function*tA(n,t,e,i){vY(n)||(n=[n]);for(const r of n){const s=EY(r,t,e,i);s&&(yield s)}}function*Zv(n,t,e){e===void 0&&(e={});const{path:i=[],branch:r=[n],coerce:s=!1,mask:o=!1}=e,a={path:i,branch:r};if(s&&(n=t.coercer(n,a),o&&t.type!=="type"&&uu(t.schema)&&uu(n)&&!Array.isArray(n)))for(const d in n)t.schema[d]===void 0&&delete n[d];let l=!0;for(const d of t.validator(n,a))l=!1,yield[d,void 0];for(let[d,u,h]of t.entries(n,a)){const m=Zv(u,h,{path:d===void 0?i:[...i,d],branch:d===void 0?r:[...r,u],coerce:s,mask:o});for(const p of m)p[0]?(l=!1,yield[p[0],void 0]):s&&(u=p[1],d===void 0?n=u:n instanceof Map?n.set(d,u):n instanceof Set?n.add(u):uu(n)&&(n[d]=u))}if(l)for(const d of t.refiner(n,a))l=!1,yield[d,void 0];l&&(yield[void 0,n])}class za{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:i,validator:r,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=t;this.type=e,this.schema=i,this.entries=a,this.coercer=o,r?this.validator=(l,d)=>{const u=r(l,d);return tA(u,d,this,l)}:this.validator=()=>[],s?this.refiner=(l,d)=>{const u=s(l,d);return tA(u,d,this,l)}:this.refiner=()=>[]}assert(t){return SY(t,this)}create(t){return BR(t,this)}is(t){return PR(t,this)}mask(t){return LY(t,this)}validate(t,e){return e===void 0&&(e={}),ah(t,this,e)}}function SY(n,t){const e=ah(n,t);if(e[0])throw e[0]}function BR(n,t){const e=ah(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function LY(n,t){const e=ah(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function PR(n,t){return!ah(n,t)[0]}function ah(n,t,e){e===void 0&&(e={});const i=Zv(n,t,e),r=xY(i);return r[0]?[new bY(r[0],function*(){for(const o of i)o[0]&&(yield o[0])}),void 0]:[void 0,r[1]]}function ch(n,t){return new za({type:n,schema:null,validator:t})}function CY(){return ch("any",()=>!0)}function W2(n){return new za({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,i]of t.entries())yield[e,i,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Oa(t)}})}function AY(){return ch("boolean",n=>typeof n=="boolean")}function eA(n){const t=Oa(n);return new za({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+Oa(e)}})}function Hp(n){return new za({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function T0(){return ch("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Oa(n))}function k0(n){return new za({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ic(){return ch("string",n=>typeof n=="string"||"Expected a string, but received: "+Oa(n))}function Ra(n){const t=Object.keys(n);return new za({type:"type",schema:n,*entries(e){if(uu(e))for(const i of t)yield[i,e[i],n[i]]},validator(e){return uu(e)||"Expected an object, but received: "+Oa(e)}})}function OR(n){const t=n.map(e=>e.type).join(" | ");return new za({type:"union",schema:null,coercer(e,i){return(n.find(s=>{const[o]=s.validate(e,{coerce:!0});return!o})||Qv()).coercer(e,i)},validator(e,i){const r=[];for(const s of n){const[...o]=Zv(e,s,i),[a]=o;if(a[0])for(const[l]of o)l&&r.push(l);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Oa(e),...r]}})}function Qv(){return ch("unknown",()=>!0)}function IY(n,t,e){return new za({...n,coercer:(i,r)=>PR(i,t)?n.coercer(e(i,r),r):n.coercer(i,r)})}function TY(n){return IY(FR(n),kY,t=>"error"in t?t:{...t,result:BR(t.result,n)})}const kY=FR(Qv());function FR(n){return OR([Ra({jsonrpc:eA("2.0"),id:Ic(),result:n}),Ra({jsonrpc:eA("2.0"),id:Ic(),error:Ra({code:Qv(),message:Ic(),data:k0(CY())})})])}function RY(n){return TY(Ra({context:Ra({slot:T0()}),value:n}))}RY(Ra({err:Hp(OR([Ra({}),Ic()])),logs:Hp(W2(Ic())),accounts:k0(Hp(W2(Hp(Ra({executable:AY(),owner:Ic(),lamports:T0(),data:W2(Ic()),rentEpoch:k0(T0())}))))),unitsConsumed:k0(T0())}));var NY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof tS<"u"?tS:typeof self<"u"?self:{},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=zt.ANCHOR_ERROR__REQUIRE_VIOLATED=zt.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=zt.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=zt.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=zt.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=zt.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=zt.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=zt.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=zt.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=zt.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=zt.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=zt.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=zt.ANCHOR_ERROR__CONSTRAINT_SPACE=zt.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=zt.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=zt.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=zt.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=zt.ANCHOR_ERROR__CONSTRAINT_ZERO=zt.ANCHOR_ERROR__CONSTRAINT_ADDRESS=zt.ANCHOR_ERROR__CONSTRAINT_CLOSE=zt.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=zt.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=zt.ANCHOR_ERROR__CONSTRAINT_STATE=zt.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=zt.ANCHOR_ERROR__CONSTRAINT_SEEDS=zt.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=zt.ANCHOR_ERROR__CONSTRAINT_OWNER=zt.ANCHOR_ERROR__CONSTRAINT_RAW=zt.ANCHOR_ERROR__CONSTRAINT_SIGNER=zt.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=zt.ANCHOR_ERROR__CONSTRAINT_MUT=zt.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=zt.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=zt.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=zt.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=zt.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=zt.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=zt.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=zt.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;zt.ANCHOR_ERROR__DEPRECATED=zt.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=zt.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=zt.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=zt.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=zt.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=zt.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=zt.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=zt.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=zt.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=zt.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=zt.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=zt.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=zt.ANCHOR_ERROR__INVALID_PROGRAM_ID=zt.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=zt.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=zt.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=zt.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=zt.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=zt.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=zt.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=zt.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=zt.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=zt.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=zt.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=zt.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=zt.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;zt.ANCHOR_ERROR__INSTRUCTION_MISSING=100;zt.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;zt.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;zt.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;zt.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;zt.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;zt.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;zt.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;zt.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;zt.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;zt.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;zt.ANCHOR_ERROR__CONSTRAINT_RAW=2003;zt.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;zt.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;zt.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;zt.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;zt.ANCHOR_ERROR__CONSTRAINT_STATE=2008;zt.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;zt.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;zt.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;zt.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;zt.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;zt.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;zt.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;zt.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;zt.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;zt.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;zt.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;zt.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;zt.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;zt.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;zt.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;zt.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;zt.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;zt.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;zt.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;zt.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;zt.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;zt.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;zt.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;zt.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;zt.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;zt.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;zt.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;zt.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;zt.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;zt.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;zt.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;zt.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;zt.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;zt.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;zt.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;zt.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;zt.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;zt.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;zt.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;zt.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;zt.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;zt.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;zt.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;zt.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;zt.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;zt.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;zt.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;zt.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;zt.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;zt.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;zt.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;zt.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;zt.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;zt.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;zt.ANCHOR_ERROR__DEPRECATED=5e3;class vr{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,i){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var cg=vr;function MY(n,t){return t.property?n+"["+t.property+"]":n}class Tc extends vr{isCount(){throw new Error("ExternalLayout is abstract")}}class jR extends Tc{constructor(t,e,i){if(!(t instanceof vr))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,i||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof lg||this.layout instanceof UR}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,i){return i===void 0&&(i=0),this.layout.encode(t,e,i+this.offset)}}class lg extends vr{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,i){return i===void 0&&(i=0),e.writeUIntLE(t,i,this.span),this.span}}class UR extends vr{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,i){return i===void 0&&(i=0),e.writeUIntBE(t,i,this.span),this.span}}const K_=Math.pow(2,32);function DR(n){const t=Math.floor(n/K_),e=n-t*K_;return{hi32:t,lo32:e}}function zR(n,t){return n*K_+t}class BY extends vr{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const i=t.readUInt32LE(e),r=t.readUInt32LE(e+4);return zR(r,i)}encode(t,e,i){i===void 0&&(i=0);const r=DR(t);return e.writeUInt32LE(r.lo32,i),e.writeUInt32LE(r.hi32,i+4),8}}class PY extends vr{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const i=t.readUInt32LE(e),r=t.readInt32LE(e+4);return zR(r,i)}encode(t,e,i){i===void 0&&(i=0);const r=DR(t);return e.writeUInt32LE(r.lo32,i),e.writeInt32LE(r.hi32,i+4),8}}class OY extends vr{constructor(t,e,i){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof vr,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&i===void 0&&(i=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(r,e),this.fields=t,this.decodePrefixes=!!i}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let i=0;try{i=this.fields.reduce((r,s)=>{const o=s.getSpan(t,e);return e+=o,r+o},0)}catch{throw new RangeError("indeterminate span")}return i}decode(t,e){e===void 0&&(e=0);const i=this.makeDestinationObject();for(const r of this.fields)if(r.property!==void 0&&(i[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return i}encode(t,e,i){i===void 0&&(i=0);const r=i;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const d=t[a.property];d!==void 0&&(o=a.encode(d,e,i),0>l&&(l=a.getSpan(e,i)))}s=i,i+=l}return s+o-r}fromArray(t){const e=this.makeDestinationObject();for(const i of this.fields)i.property!==void 0&&0<t.length&&(e[i.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const i of this.fields){if(i.property===t)return e;0>i.span?e=-1:0<=e&&(e+=i.span)}}}class GR{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class nA extends GR{constructor(t,e){if(!(t instanceof Tc&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,i){return this.layout.encode(t,e,i)}}class WR extends vr{constructor(t,e,i){const r=t instanceof lg||t instanceof UR;if(r)t=new nA(new jR(t));else if(t instanceof Tc&&t.isCount())t=new nA(t);else if(!(t instanceof GR))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof vr))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&r&&(s+=t.layout.span)),super(s,i),this.discriminator=t,this.usesPrefixDiscriminator=r,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const i=this.getVariant(t,e);if(!i)throw new Error("unable to determine span for unrecognized variant");return i.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const i=this.registry[e];if(t.hasOwnProperty(i.property))return i}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let i;const r=this.discriminator,s=r.decode(t,e);let o=this.registry[s];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=r.layout.span),i=this.makeDestinationObject(),i[r.property]=s,i[o.property]=this.defaultLayout.decode(t,e+a)}else i=o.decode(t,e);return i}encode(t,e,i){i===void 0&&(i=0);const r=this.getSourceVariant(t);if(r===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(t[s.property],e,i),a+o.encode(t[o.property],e,i+a)}return r.encode(t,e,i)}addVariant(t,e,i){const r=new FY(this,t,e,i);return this.registry[t]=r,r}getVariant(t,e){let i=t;return ke.isBuffer(t)&&(e===void 0&&(e=0),i=this.discriminator.decode(t,e)),this.registry[i]}}class FY extends vr{constructor(t,e,i,r){if(!(t instanceof WR))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof i=="string"&&r===void 0&&(r=i,i=null),i){if(!(i instanceof vr))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=i.span&&i.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof r!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=i?i.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,r),this.union=t,this.variant=e,this.layout=i||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),i+this.layout.getSpan(t,e+i)}decode(t,e){const i=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?i[this.property]=this.layout.decode(t,e+r):this.property?i[this.property]=!0:this.union.usesPrefixDiscriminator&&(i[this.union.discriminator.property]=this.variant),i}encode(t,e,i){i===void 0&&(i=0);let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,i);let s=r;if(this.layout&&(this.layout.encode(t[this.property],e,i+r),s+=this.layout.getSpan(e,i+r),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class jY extends vr{constructor(t,e){if(!(t instanceof Tc&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let i=-1;t instanceof Tc||(i=t),super(i,e),this.length=t}getSpan(t,e){let i=this.span;return 0>i&&(i=this.length.decode(t,e)),i}decode(t,e){e===void 0&&(e=0);let i=this.span;return 0>i&&(i=this.length.decode(t,e)),t.slice(e,e+i)}encode(t,e,i){let r=this.length;if(this.length instanceof Tc&&(r=t.length),!(ke.isBuffer(t)&&r===t.length))throw new TypeError(MY("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(i+r>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),i,r,"hex"),this.length instanceof Tc&&this.length.encode(r,e,i),r}}var UY=((n,t,e)=>new jR(n,t,e)),DY=(n=>new lg(1,n)),wo=(n=>new lg(4,n)),zY=(n=>new BY(n)),Bo=(n=>new PY(n)),yi=((n,t,e)=>new OY(n,t,e)),VR=((n,t,e)=>new WR(n,t,e)),lh=((n,t)=>new jY(n,t));class GY extends cg{constructor(t){super(-1,t),this.property=t,this.layout=yi([wo("length"),wo("lengthPadding"),lh(UY(wo(),-8),"chars")],this.property)}encode(t,e,i=0){if(t==null)return this.layout.span;const r={chars:ke.from(t,"utf8")};return this.layout.encode(r,e,i)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return wo().span+wo().span+new Bs(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function ug(n){return new GY(n)}function $r(n){return lh(32,n)}const Mr=VR(wo("instruction"));Mr.addVariant(0,yi([Bo("lamports"),Bo("space"),$r("owner")]),"createAccount");Mr.addVariant(1,yi([$r("owner")]),"assign");Mr.addVariant(2,yi([Bo("lamports")]),"transfer");Mr.addVariant(3,yi([$r("base"),ug("seed"),Bo("lamports"),Bo("space"),$r("owner")]),"createAccountWithSeed");Mr.addVariant(4,yi([$r("authorized")]),"advanceNonceAccount");Mr.addVariant(5,yi([Bo("lamports")]),"withdrawNonceAccount");Mr.addVariant(6,yi([$r("authorized")]),"initializeNonceAccount");Mr.addVariant(7,yi([$r("authorized")]),"authorizeNonceAccount");Mr.addVariant(8,yi([Bo("space")]),"allocate");Mr.addVariant(9,yi([$r("base"),ug("seed"),Bo("space"),$r("owner")]),"allocateWithSeed");Mr.addVariant(10,yi([$r("base"),ug("seed"),$r("owner")]),"assignWithSeed");Mr.addVariant(11,yi([Bo("lamports"),ug("seed"),$r("owner")]),"transferWithSeed");Math.max(...Object.values(Mr.registry).map(n=>n.span));class WY extends cg{constructor(t,e,i,r){super(t.span,r),this.layout=t,this.decoder=e,this.encoder=i}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,i){return this.layout.encode(this.encoder(t),e,i)}getSpan(t,e){return this.layout.getSpan(t,e)}}function iA(n){return new WY(lh(32),t=>new Zt(t),t=>t.toBuffer(),n)}yi([wo("version"),wo("state"),iA("authorizedPubkey"),iA("nonce"),yi([zY("lamportsPerSignature")],"feeCalculator")]);new Zt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Zt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var rA={exports:{}};(function(n,t){var e=typeof self<"u"?self:NY,i=(function(){function s(){this.fetch=!1,this.DOMException=e.DOMException}return s.prototype=e,new s})();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(w){return w&&DataView.prototype.isPrototypeOf(w)}if(a.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(w){return w&&d.indexOf(Object.prototype.toString.call(w))>-1};function h(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function m(w){return typeof w!="string"&&(w=String(w)),w}function p(w){var T={next:function(){var V=w.shift();return{done:V===void 0,value:V}}};return a.iterable&&(T[Symbol.iterator]=function(){return T}),T}function E(w){this.map={},w instanceof E?w.forEach(function(T,V){this.append(V,T)},this):Array.isArray(w)?w.forEach(function(T){this.append(T[0],T[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(T){this.append(T,w[T])},this)}E.prototype.append=function(w,T){w=h(w),T=m(T);var V=this.map[w];this.map[w]=V?V+", "+T:T},E.prototype.delete=function(w){delete this.map[h(w)]},E.prototype.get=function(w){return w=h(w),this.has(w)?this.map[w]:null},E.prototype.has=function(w){return this.map.hasOwnProperty(h(w))},E.prototype.set=function(w,T){this.map[h(w)]=m(T)},E.prototype.forEach=function(w,T){for(var V in this.map)this.map.hasOwnProperty(V)&&w.call(T,this.map[V],V,this)},E.prototype.keys=function(){var w=[];return this.forEach(function(T,V){w.push(V)}),p(w)},E.prototype.values=function(){var w=[];return this.forEach(function(T){w.push(T)}),p(w)},E.prototype.entries=function(){var w=[];return this.forEach(function(T,V){w.push([V,T])}),p(w)},a.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function C(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function v(w){return new Promise(function(T,V){w.onload=function(){T(w.result)},w.onerror=function(){V(w.error)}})}function A(w){var T=new FileReader,V=v(T);return T.readAsArrayBuffer(w),V}function x(w){var T=new FileReader,V=v(T);return T.readAsText(w),V}function P(w){for(var T=new Uint8Array(w),V=new Array(T.length),Y=0;Y<T.length;Y++)V[Y]=String.fromCharCode(T[Y]);return V.join("")}function W(w){if(w.slice)return w.slice(0);var T=new Uint8Array(w.byteLength);return T.set(new Uint8Array(w)),T.buffer}function K(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:a.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:a.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():a.arrayBuffer&&a.blob&&l(w)?(this._bodyArrayBuffer=W(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||u(w))?this._bodyArrayBuffer=W(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var w=C(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?C(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var w=C(this);if(w)return w;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(P(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(w){var T=w.toUpperCase();return j.indexOf(T)>-1?T:w}function B(w,T){T=T||{};var V=T.body;if(w instanceof B){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,T.headers||(this.headers=new E(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!V&&w._bodyInit!=null&&(V=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new E(T.headers)),this.method=b(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function J(w){var T=new FormData;return w.trim().split("&").forEach(function(V){if(V){var Y=V.split("="),Q=Y.shift().replace(/\+/g," "),$=Y.join("=").replace(/\+/g," ");T.append(decodeURIComponent(Q),decodeURIComponent($))}}),T}function it(w){var T=new E,V=w.replace(/\r?\n[\t ]+/g," ");return V.split(/\r?\n/).forEach(function(Y){var Q=Y.split(":"),$=Q.shift().trim();if($){var F=Q.join(":").trim();T.append($,F)}}),T}K.call(B.prototype);function st(w,T){T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in T?T.statusText:"OK",this.headers=new E(T.headers),this.url=T.url||"",this._initBody(w)}K.call(st.prototype),st.prototype.clone=function(){return new st(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},st.error=function(){var w=new st(null,{status:0,statusText:""});return w.type="error",w};var z=[301,302,303,307,308];st.redirect=function(w,T){if(z.indexOf(T)===-1)throw new RangeError("Invalid status code");return new st(null,{status:T,headers:{location:w}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,V){this.message=T,this.name=V;var Y=Error(T);this.stack=Y.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function I(w,T){return new Promise(function(V,Y){var Q=new B(w,T);if(Q.signal&&Q.signal.aborted)return Y(new o.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function F(){$.abort()}$.onload=function(){var R={status:$.status,statusText:$.statusText,headers:it($.getAllResponseHeaders()||"")};R.url="responseURL"in $?$.responseURL:R.headers.get("X-Request-URL");var _="response"in $?$.response:$.responseText;V(new st(_,R))},$.onerror=function(){Y(new TypeError("Network request failed"))},$.ontimeout=function(){Y(new TypeError("Network request failed"))},$.onabort=function(){Y(new o.DOMException("Aborted","AbortError"))},$.open(Q.method,Q.url,!0),Q.credentials==="include"?$.withCredentials=!0:Q.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&a.blob&&($.responseType="blob"),Q.headers.forEach(function(R,_){$.setRequestHeader(_,R)}),Q.signal&&(Q.signal.addEventListener("abort",F),$.onreadystatechange=function(){$.readyState===4&&Q.signal.removeEventListener("abort",F)}),$.send(typeof Q._bodyInit>"u"?null:Q._bodyInit)})}return I.polyfill=!0,s.fetch||(s.fetch=I,s.Headers=E,s.Request=B,s.Response=st),o.Headers=E,o.Request=B,o.Response=st,o.fetch=I,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var r=i;t=r.fetch,t.default=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,n.exports=t})(rA,rA.exports);Xi.rustEnum([Xi.struct([],"uninitialized"),Xi.struct([Xi.option(Xi.publicKey(),"authorityAddress")],"buffer"),Xi.struct([Xi.publicKey("programdataAddress")],"program"),Xi.struct([Xi.u64("slot"),Xi.option(Xi.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Xi.u32());function V2(n){return new qR(lh(8),t=>qY.fromBuffer(t),t=>t.toBuffer(),n)}function Kp(n){return new qR(lh(32),t=>new Zt(t),t=>t.toBuffer(),n)}function q2(n,t){return new VY(n,t)}class qR extends cg{constructor(t,e,i,r){super(t.span,r),this.layout=t,this.decoder=e,this.encoder=i}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,i){return this.layout.encode(this.encoder(t),e,i)}getSpan(t,e){return this.layout.getSpan(t,e)}}class VY extends cg{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=wo()}encode(t,e,i=0){return t==null?this.layout.span+this.discriminator.encode(0,e,i):(this.discriminator.encode(1,e,i),this.layout.encode(t,e,i+4)+4)}decode(t,e=0){const i=this.discriminator.decode(t,e);if(i===0)return null;if(i===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}let qY=class $R extends Bs{toBuffer(){const t=super.toArray().reverse(),e=ke.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const i=ke.alloc(8);return e.copy(i),i}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new $R([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}};yi([Kp("mint"),Kp("owner"),V2("amount"),q2(Kp(),"delegate"),(n=>{const t=VR(DY("discriminator"),null,n);return t.addVariant(0,yi([]),"uninitialized"),t.addVariant(1,yi([]),"initialized"),t.addVariant(2,yi([]),"frozen"),t})("state"),q2(V2(),"isNative"),V2("delegatedAmount"),q2(Kp(),"closeAuthority")]);new Zt("11111111111111111111111111111111");const ga=new Zt("pnpxFxDMcMfA1TxJNKqJC3MVZV7AkVDMSoeY9bVg9D2"),Zp=new Zt("4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU");async function HR(n){const t=`account:${n}`;return(await qc(t)).slice(0,8)}let $2=null;async function $Y(){return $2||($2=await HR("Market")),$2}class HY{connection;walletPublicKey=null;signTransaction=null;cachedMarkets=new Map;lastFetch=0;cacheTimeout=3e4;constructor(t){this.connection=t}setWallet(t,e){this.walletPublicKey=t,this.signTransaction=e}async fetchActiveMarkets(){if(this.cachedMarkets.size>0&&Date.now()-this.lastFetch<this.cacheTimeout)return Array.from(this.cachedMarkets.values());try{const t=await $Y(),e=await this.connection.getProgramAccounts(ga,{filters:[{memcmp:{offset:0,bytes:gi.encode(t)}}]}),i=[];for(const{pubkey:r,account:s}of e)try{const o=this.parseMarketAccount(r,s.data);o&&!o.isResolved&&i.push(o)}catch(o){console.warn(`[BrowserPnpClient] Failed to parse market ${r.toBase58()}:`,o)}return this.cachedMarkets.clear(),i.forEach(r=>this.cachedMarkets.set(r.address,r)),this.lastFetch=Date.now(),i}catch(t){return console.error("[BrowserPnpClient] Failed to fetch markets:",t),Array.from(this.cachedMarkets.values())}}async fetchMarket(t){const e=this.cachedMarkets.get(t);if(e&&Date.now()-this.lastFetch<this.cacheTimeout)return e;try{const i=new Zt(t),r=await this.connection.getAccountInfo(i);if(!r)return null;const s=this.parseMarketAccount(i,r.data);return s&&this.cachedMarkets.set(t,s),s}catch(i){return console.error(`[BrowserPnpClient] Failed to fetch market ${t}:`,i),null}}async executeTrade(t,e,i){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};try{const r=await this.fetchMarket(t);if(!r)return{success:!1,error:"Market not found"};if(r.isResolved)return{success:!1,error:"Market is already resolved"};const s=Math.floor(i*1e6),o=await this.buildTradeTransaction(new Zt(t),e,s),a=await this.signTransaction(o),l=await this.connection.sendRawTransaction(a.serialize());await this.connection.confirmTransaction(l,"confirmed");const d=e==="yes"?r.yesPrice:r.noPrice,u=i/d;return{success:!0,signature:l,sharesReceived:u,executionPrice:d}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async getPositions(){if(!this.walletPublicKey)return[];try{const t=await HR("Position"),e=await this.connection.getProgramAccounts(ga,{filters:[{memcmp:{offset:0,bytes:gi.encode(t)}},{memcmp:{offset:8,bytes:this.walletPublicKey.toBase58()}}]}),i=[];for(const{account:r}of e)try{const s=this.parsePositionAccount(r.data);s&&i.push(s)}catch{}return i}catch(t){return console.error("[BrowserPnpClient] Failed to fetch positions:",t),[]}}async claimWinnings(t){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};try{const e=await this.fetchMarket(t);if(!e)return{success:!1,error:"Market not found"};if(!e.isResolved)return{success:!1,error:"Market is not resolved yet"};const i=await this.buildClaimTransaction(new Zt(t)),r=await this.signTransaction(i),s=await this.connection.sendRawTransaction(r.serialize());return await this.connection.confirmTransaction(s,"confirmed"),{success:!0,signature:s}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}parseMarketAccount(t,e){try{let i=8;const r=new Zt(e.slice(i,i+32));i+=32;const s=e.readUInt32LE(i);i+=4;const o=e.slice(i,i+s).toString("utf-8");i+=s;const a=new Bs(e.slice(i,i+8),"le");i+=8;const l=new Bs(e.slice(i,i+8),"le");i+=8;const d=new Bs(e.slice(i,i+8),"le");i+=8;const u=e[i]===1;i+=1;const h=e[i],m=h===0?null:h===1?"yes":"no",p=a.toNumber()/1e6,E=l.toNumber()/1e6,C=p+E,v=C>0?E/C:.5,A=C>0?p/C:.5;return{address:t.toBase58(),question:o,yesPrice:v,noPrice:A,yesShares:p,noShares:E,endTime:new Date(d.toNumber()*1e3),isResolved:u,resolution:m,liquidity:C,volume24h:0,creator:r.toBase58()}}catch(i){return console.warn("[BrowserPnpClient] Failed to parse market:",i),null}}parsePositionAccount(t){try{let e=8;e+=32;const i=new Zt(t.slice(e,e+32));e+=32;const s=t[e]===0?"yes":"no";e+=1;const o=new Bs(t.slice(e,e+8),"le").toNumber()/1e6;e+=8;const l=new Bs(t.slice(e,e+8),"le").toNumber()/1e6,d=this.cachedMarkets.get(i.toBase58()),u=d?s==="yes"?d.yesPrice:d.noPrice:l,h=o*u,m=o*l,p=h-m;return{market:i.toBase58(),question:d?.question||"Unknown market",side:s,shares:o,averagePrice:l,currentValue:h,unrealizedPnL:p}}catch{return null}}async buildTradeTransaction(t,e,i){if(!this.walletPublicKey)throw new Error("Wallet not connected");const[r]=Zt.findProgramAddressSync([ke.from("position"),t.toBuffer(),this.walletPublicKey.toBuffer()],ga),[s]=Zt.findProgramAddressSync([this.walletPublicKey.toBuffer(),new Zt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA").toBuffer(),Zp.toBuffer()],new Zt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),[o]=Zt.findProgramAddressSync([ke.from("vault"),t.toBuffer()],ga),a=await qc("global:buy_outcome"),l=e==="yes"?0:1,d=ke.alloc(8);d.writeBigUInt64LE(BigInt(i));const u=ke.concat([a.slice(0,8),ke.from([l]),d]),h=new pn({keys:[{pubkey:this.walletPublicKey,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Zp,isSigner:!1,isWritable:!1},{pubkey:new Zt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),isSigner:!1,isWritable:!1},{pubkey:Un.programId,isSigner:!1,isWritable:!1}],programId:ga,data:u}),m=new Ke().add(h),{blockhash:p}=await this.connection.getLatestBlockhash();return m.recentBlockhash=p,m.feePayer=this.walletPublicKey,m}async buildClaimTransaction(t){if(!this.walletPublicKey)throw new Error("Wallet not connected");const[e]=Zt.findProgramAddressSync([ke.from("position"),t.toBuffer(),this.walletPublicKey.toBuffer()],ga),[i]=Zt.findProgramAddressSync([this.walletPublicKey.toBuffer(),new Zt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA").toBuffer(),Zp.toBuffer()],new Zt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),[r]=Zt.findProgramAddressSync([ke.from("vault"),t.toBuffer()],ga),s=await qc("global:claim_winnings"),o=new pn({keys:[{pubkey:this.walletPublicKey,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Zp,isSigner:!1,isWritable:!1},{pubkey:new Zt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),isSigner:!1,isWritable:!1}],programId:ga,data:ke.from(s.slice(0,8))}),a=new Ke().add(o),{blockhash:l}=await this.connection.getLatestBlockhash();return a.recentBlockhash=l,a.feePayer=this.walletPublicKey,a}clearCache(){this.cachedMarkets.clear(),this.lastFetch=0}}let H2=null;function KY(n){return H2||(H2=new HY(n)),H2}const K2=new Zt("DELeGGvXpWV2fqJUhqcF5ZSYMS4JTLjteaAMARRSaeSh"),sA=new Zt("Magic11111111111111111111111111111111111111"),ZY=new Zt("MagicContext1111111111111111111111111111111"),QY="https://api.devnet.solana.com",YY="https://devnet.magicblock.app",oA=new Zt("6ypxTTHK4q9VC7bABp8U3Sptdt6qNQ7uJHoMqNWKmTuW"),aA=2e3,cA=30;class XY{l1Connection;teeConnection;walletPublicKey=null;signTransaction=null;constructor(t,e){this.l1Connection=new Z0(t||QY,"confirmed"),this.teeConnection=new Z0(e||YY,"confirmed")}setWallet(t,e,i){this.walletPublicKey=t,this.signTransaction=e}getVaultPda(t){const[e]=Zt.findProgramAddressSync([ke.from("spectre_vault"),t.toBuffer()],oA);return e}getDelegationRecordPda(t){const[e]=Zt.findProgramAddressSync([ke.from("delegation"),t.toBuffer()],K2);return e}async checkDelegationStatus(t){try{const e=this.getVaultPda(t),i=this.getDelegationRecordPda(e),r=await this.l1Connection.getAccountInfo(i);if(!r)return{isDelegated:!1,vaultPda:e.toBase58(),owner:t.toBase58()};const s=r.data;if(s.length<49)return{isDelegated:!1,vaultPda:e.toBase58(),owner:t.toBase58()};const o=new Bs(s.slice(40,48),"le").toNumber();return{isDelegated:s[48]===1,vaultPda:e.toBase58(),owner:t.toBase58(),delegatedAt:new Date,teeSlot:o}}catch(e){return console.error("[BrowserTeeClient] Failed to check delegation status:",e),{isDelegated:!1,vaultPda:null,owner:t.toBase58()}}}async delegateVault(t){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};if(!t.equals(this.walletPublicKey))return{success:!1,error:"Authority must match connected wallet"};try{const e=this.getVaultPda(t),i=this.getDelegationRecordPda(e),r=await this.l1Connection.getAccountInfo(e),s=new Ke;if(!r){const u=await this.buildInitVaultInstruction(t,e);s.add(u)}const o=await this.buildDelegateInstruction(t,e,i);s.add(o);const{blockhash:a}=await this.l1Connection.getLatestBlockhash();s.recentBlockhash=a,s.feePayer=t;const l=await this.signTransaction(s),d=await this.l1Connection.sendRawTransaction(l.serialize());return await this.l1Connection.confirmTransaction(d,"confirmed"),await this.waitForTeeDelegation(e),{success:!0,signature:d,vaultPda:e.toBase58()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async undelegateVault(t){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};if(!t.equals(this.walletPublicKey))return{success:!1,error:"Authority must match connected wallet"};try{const e=this.getVaultPda(t),i=await this.buildUndelegateInstruction(t,e),r=new Ke().add(i),{blockhash:s}=await this.teeConnection.getLatestBlockhash();r.recentBlockhash=s,r.feePayer=t;const o=await this.signTransaction(r),a=await this.teeConnection.sendRawTransaction(o.serialize());await this.teeConnection.confirmTransaction(a,"confirmed");const l=await this.waitForL1Sync(e);return{success:!0,signature:a,l1Signature:l?"synced":void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async executeOnTee(t){if(!this.walletPublicKey||!this.signTransaction)return{success:!1,error:"Wallet not connected"};try{const e=Date.now(),{blockhash:i}=await this.teeConnection.getLatestBlockhash();t.recentBlockhash=i,t.feePayer=this.walletPublicKey;const r=await this.signTransaction(t),s=await this.teeConnection.sendRawTransaction(r.serialize(),{skipPreflight:!0}),o=await this.teeConnection.confirmTransaction(s,"confirmed"),a=Date.now()-e;return{success:!0,signature:s,l2Slot:o.context.slot,executionTimeMs:a}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getTeeHealth(){try{const t=Date.now(),e=await this.teeConnection.getSlot();return{healthy:!0,latencyMs:Date.now()-t,slot:e}}catch{return{healthy:!1,latencyMs:-1,slot:0}}}async buildInitVaultInstruction(t,e){const i=ke.from([76,136,20,93,18,184,113,243]);return new pn({keys:[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Un.programId,isSigner:!1,isWritable:!1}],programId:oA,data:i})}async buildDelegateInstruction(t,e,i){const r=ke.from([144,193,184,146,62,95,58,210]),s=ke.alloc(8);s.writeBigInt64LE(BigInt(Date.now()+864e5));const o=ke.alloc(4);o.writeUInt32LE(1e4);const a=ke.concat([r,s,o]);return new pn({keys:[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:sA,isSigner:!1,isWritable:!1},{pubkey:ZY,isSigner:!1,isWritable:!1},{pubkey:Un.programId,isSigner:!1,isWritable:!1}],programId:K2,data:a})}async buildUndelegateInstruction(t,e){const i=ke.from([26,43,60,77,94,111,112,129]);return new pn({keys:[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:sA,isSigner:!1,isWritable:!1}],programId:K2,data:i})}async waitForTeeDelegation(t){for(let e=0;e<cA;e++){try{if(await this.teeConnection.getAccountInfo(t)){console.log("[BrowserTeeClient] TEE has picked up delegation");return}}catch{}await this.sleep(aA)}console.warn("[BrowserTeeClient] TEE delegation pickup timed out")}async waitForL1Sync(t){for(let e=0;e<cA;e++){try{if(!(await this.checkDelegationStatus(this.walletPublicKey)).isDelegated)return console.log("[BrowserTeeClient] Undelegation synced to L1"),!0}catch{}await this.sleep(aA)}return console.warn("[BrowserTeeClient] L1 sync timed out"),!1}sleep(t){return new Promise(e=>setTimeout(e,t))}getL1Connection(){return this.l1Connection}getTeeConnection(){return this.teeConnection}async estimateDelegationCost(){return .003*Ma}}let Z2=null;function JY(n,t){return Z2||(Z2=new XY(n,t)),Z2}const tX="https://api.range.org",lA="cmkmprr1d002cns0190metogx.yj3hFQk2jW2zCZtGlg1RdF89hrFJ6lSV";function Yv(){const{connection:n}=Hm(),{publicKey:t,connected:e,signTransaction:i,signAllTransactions:r}=Nr(),[s,o]=rt.useState(!1),[a,l]=rt.useState(null),d=rt.useMemo(()=>{const m=rY(n),p=KY(n),E=JY();return t&&i&&(m.setWallet(t,i),p.setWallet(t,i),E.setWallet(t,i,r)),{privacyClient:m,pnpClient:p,teeClient:E}},[n,t,i,r]);rt.useEffect(()=>{cu().isCached().then(p=>{p&&o(!0)})},[]);const u=rt.useCallback(async m=>{if(s)return;await WQ(E=>{l(E),m?.(E)}),o(!0)},[s]);return rt.useMemo(()=>{const m=t?.toBase58()||null;return{isReady:e&&t!==null,isConnected:e,walletAddress:m,circuitsLoaded:s,circuitProgress:a,privacyClient:eX(d.privacyClient),teeClient:nX(d.teeClient),pnpClient:iX(d.pnpClient),rangeClient:KR(),preloadCircuits:u}},[n,t,e,s,a,d,u])}function eX(n){return{shieldSol:async(t,e)=>n.shieldSol(t,e),unshieldSol:async(t,e,i)=>n.unshieldSol(t,e,i),getShieldedSolBalance:async()=>n.getShieldedBalance(),getUnspentNotes:async()=>n.getUnspentNotes(),exportNotes:async t=>n.exportNotes(t),importNotes:async(t,e)=>n.importNotes(t,e)}}function nX(n){return{delegateVault:async t=>n.delegateVault(t),undelegateVault:async t=>{const e=await n.undelegateVault(t);return{success:e.success,signature:e.signature,error:e.error}},checkDelegationStatus:async t=>n.checkDelegationStatus(t),getTeeHealth:async()=>n.getTeeHealth(),executeOnTee:async t=>n.executeOnTee(t)}}function iX(n){return{fetchActiveMarkets:async()=>n.fetchActiveMarkets(),fetchMarketAddresses:async()=>(await n.fetchActiveMarkets()).map(e=>e.address),executeTrade:async(t,e,i)=>n.executeTrade(t,e,i),getPositions:async()=>n.getPositions(),claimWinnings:async t=>n.claimWinnings(t)}}function KR(){return{getAddressRisk:async n=>{const t=typeof n=="string"?n:n.toBase58();try{const e=await fetch(`${tX}/v1/risk/address?address=${t}&network=solana`,{headers:{Authorization:`Bearer ${lA}`,"X-API-KEY":lA,"Content-Type":"application/json"}});if(!e.ok){if(e.status===429)return console.warn("[Range] Rate limited, returning default low risk"),{riskScore:5,riskLevel:"low",isSanctioned:!1,isBlacklisted:!1,hasMaliciousConnections:!1,numHops:0};throw new Error(`Range API error: ${e.status}`)}const i=await e.json();let r="low";return i.riskScore>80?r="critical":i.riskScore>50?r="high":i.riskScore>20&&(r="medium"),{riskScore:i.riskScore||0,riskLevel:r,isSanctioned:i.is_ofac_sanctioned||!1,isBlacklisted:i.is_token_blacklisted||!1,hasMaliciousConnections:(i.riskScore||0)>50,numHops:0}}catch(e){const i=e instanceof Error?e.message:"Unknown error";return console.error("[Range] API error:",i),{riskScore:5,riskLevel:"low",isSanctioned:!1,isBlacklisted:!1,hasMaliciousConnections:!1,numHops:0}}},checkCompliance:async n=>{const t=await KR().getAddressRisk(n);return{passed:t.riskScore<=30&&!t.isSanctioned&&!t.hasMaliciousConnections,riskScore:t.riskScore,riskLevel:t.riskLevel,isSanctioned:t.isSanctioned,hasMaliciousConnections:t.hasMaliciousConnections}}}}const rX={riskLevel:"moderate",maxPositionSize:100,stopLoss:10,takeProfit:25,allowedMarkets:[]};function Xv(){const{connected:n,publicKey:t}=Nr(),{teeClient:e}=Yv(),[i,r]=rt.useState({isDelegated:!1}),[s,o]=rt.useState(rX),[a,l]=rt.useState(!1),[d,u]=rt.useState(!1),[h,m]=rt.useState(!1),p=rt.useCallback(async()=>{if(!n||!t)return{isDelegated:!1};m(!0);try{if(!e)throw new Error("TEE client not initialized");const A=await e.checkDelegationStatus(t),x={isDelegated:A.isDelegated,vaultPda:A.vaultPda??void 0};return r(x),x}catch(A){return console.error("Failed to check delegation status:",A),{isDelegated:!1}}finally{m(!1)}},[n,t,e,i]),E=rt.useCallback(async()=>{if(!n||!t)return en.error("Wallet not connected"),!1;if(i.isDelegated)return en.error("Already delegated"),!1;l(!0);try{if(!e)return en.error("TEE client not initialized"),!1;const A=await e.delegateVault(t);return A.success?(r({isDelegated:!0,delegatedAt:new Date,vaultPda:`vault_${t.toBase58().slice(0,8)}`}),en.success("Successfully delegated to TEE"),!0):(en.error(A.error||"Delegation failed"),!1)}catch(A){return en.error(A.message||"Delegation failed"),!1}finally{l(!1)}},[n,t,i.isDelegated,e]),C=rt.useCallback(async()=>{if(!n||!t)return en.error("Wallet not connected"),!1;if(!i.isDelegated)return en.error("Not delegated"),!1;u(!0);try{if(!e)return en.error("TEE client not initialized"),!1;const A=await e.undelegateVault(t);return A.success?(r({isDelegated:!1}),en.success("Successfully undelegated from TEE"),!0):(en.error(A.error||"Undelegation failed"),!1)}catch(A){return en.error(A.message||"Undelegation failed"),!1}finally{u(!1)}},[n,t,i.isDelegated,e]),v=rt.useCallback(A=>{o(x=>({...x,...A})),en.success("Strategy configuration updated")},[]);return{delegationStatus:i,strategyConfig:s,isDelegating:a,isUndelegating:d,isCheckingStatus:h,isLoading:a||d||h,checkDelegationStatus:p,delegate:E,undelegate:C,updateStrategyConfig:v}}const uA=n=>{let t;const e=new Set,i=(d,u)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=u??(typeof h!="object"||h===null)?h:Object.assign({},t,h),e.forEach(p=>p(t,m))}},r=()=>t,a={setState:i,getState:r,getInitialState:()=>l,subscribe:d=>(e.add(d),()=>e.delete(d))},l=t=n(i,r,a);return a},sX=(n=>n?uA(n):uA),oX=n=>n;function aX(n,t=oX){const e=Mt.useSyncExternalStore(n.subscribe,Mt.useCallback(()=>t(n.getState()),[n,t]),Mt.useCallback(()=>t(n.getInitialState()),[n,t]));return Mt.useDebugValue(e),e}const dA=n=>{const t=sX(n),e=i=>aX(t,i);return Object.assign(e,t),e},ZR=(n=>n?dA(n):dA);function cX(n,t){let e;try{e=n()}catch{return}return{getItem:r=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=e.getItem(r))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(r,s)=>e.setItem(r,JSON.stringify(s,void 0)),removeItem:r=>e.removeItem(r)}}const Z_=n=>t=>{try{const e=n(t);return e instanceof Promise?e:{then(i){return Z_(i)(e)},catch(i){return this}}}catch(e){return{then(i){return this},catch(i){return Z_(i)(e)}}}},lX=(n,t)=>(e,i,r)=>{let s={storage:cX(()=>localStorage),partialize:v=>v,version:0,merge:(v,A)=>({...A,...v}),...t},o=!1,a=0;const l=new Set,d=new Set;let u=s.storage;if(!u)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...v)},i,r);const h=()=>{const v=s.partialize({...i()});return u.setItem(s.name,{state:v,version:s.version})},m=r.setState;r.setState=(v,A)=>(m(v,A),h());const p=n((...v)=>(e(...v),h()),i,r);r.getInitialState=()=>p;let E;const C=()=>{var v,A;if(!u)return;const x=++a;o=!1,l.forEach(W=>{var K;return W((K=i())!=null?K:p)});const P=((A=s.onRehydrateStorage)==null?void 0:A.call(s,(v=i())!=null?v:p))||void 0;return Z_(u.getItem.bind(u))(s.name).then(W=>{if(W)if(typeof W.version=="number"&&W.version!==s.version){if(s.migrate){const K=s.migrate(W.state,W.version);return K instanceof Promise?K.then(j=>[!0,j]):[!0,K]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,W.state];return[!1,void 0]}).then(W=>{var K;if(x!==a)return;const[j,b]=W;if(E=s.merge(b,(K=i())!=null?K:p),e(E,!0),j)return h()}).then(()=>{x===a&&(P?.(E,void 0),E=i(),o=!0,d.forEach(W=>W(E)))}).catch(W=>{x===a&&P?.(void 0,W)})};return r.persist={setOptions:v=>{s={...s,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>C(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},s.skipHydration||C(),E||p},uX=lX,dX=ZR()(uX(n=>({notes:[],shieldedBalanceSol:0,shieldedBalanceUsdc:0,isLoading:!1,error:null,addNote:t=>n(e=>({notes:[...e.notes,t]})),removeNote:t=>n(e=>({notes:e.notes.filter(i=>i.id!==t)})),markNoteSpent:t=>n(e=>({notes:e.notes.map(i=>i.id===t?{...i,spent:!0}:i)})),setNotes:t=>n({notes:t}),setShieldedBalance:(t,e)=>n({shieldedBalanceSol:t,shieldedBalanceUsdc:e}),setLoading:t=>n({isLoading:t}),setError:t=>n({error:t}),clearNotes:()=>n({notes:[]})}),{name:"spectre-privacy-store",partialize:n=>({notes:n.notes})}));var Q2={exports:{}},fA;function fX(){return fA||(fA=1,(function(n){(function(){var t="input is invalid type",e="finalize already called",i=typeof window=="object",r=i?window:{};r.JS_SHA3_NO_WINDOW&&(i=!1);var s=!i&&typeof self=="object",o=!r.JS_SHA3_NO_NODE_JS&&typeof i1=="object"&&i1.versions&&i1.versions.node;o?r=oP:s&&(r=self);var a=!r.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,l=!r.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],m=[1,256,65536,16777216],p=[6,1536,393216,100663296],E=[0,8,16,24],C=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],v=[224,256,384,512],A=[128,256],x=["hex","buffer","arrayBuffer","array","digest"],P={128:168,256:136};(r.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(L){return Object.prototype.toString.call(L)==="[object Array]"}),l&&(r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(L){return typeof L=="object"&&L.buffer&&L.buffer.constructor===ArrayBuffer});for(var W=function(L,g,D){return function(S){return new _(L,g,L).update(S)[D]()}},K=function(L,g,D){return function(S,lt){return new _(L,g,lt).update(S)[D]()}},j=function(L,g,D){return function(S,lt,ct,G){return w["cshake"+L].update(S,lt,ct,G)[D]()}},b=function(L,g,D){return function(S,lt,ct,G){return w["kmac"+L].update(S,lt,ct,G)[D]()}},B=function(L,g,D,S){for(var lt=0;lt<x.length;++lt){var ct=x[lt];L[ct]=g(D,S,ct)}return L},J=function(L,g){var D=W(L,g,"hex");return D.create=function(){return new _(L,g,L)},D.update=function(S){return D.create().update(S)},B(D,W,L,g)},it=function(L,g){var D=K(L,g,"hex");return D.create=function(S){return new _(L,g,S)},D.update=function(S,lt){return D.create(lt).update(S)},B(D,K,L,g)},st=function(L,g){var D=P[L],S=j(L,g,"hex");return S.create=function(lt,ct,G){return!ct&&!G?w["shake"+L].create(lt):new _(L,g,lt).bytepad([ct,G],D)},S.update=function(lt,ct,G,ft){return S.create(ct,G,ft).update(lt)},B(S,j,L,g)},z=function(L,g){var D=P[L],S=b(L,g,"hex");return S.create=function(lt,ct,G){return new k(L,g,ct).bytepad(["KMAC",G],D).bytepad([lt],D)},S.update=function(lt,ct,G,ft){return S.create(lt,G,ft).update(ct)},B(S,b,L,g)},I=[{name:"keccak",padding:m,bits:v,createMethod:J},{name:"sha3",padding:p,bits:v,createMethod:J},{name:"shake",padding:u,bits:A,createMethod:it},{name:"cshake",padding:h,bits:A,createMethod:st},{name:"kmac",padding:h,bits:A,createMethod:z}],w={},T=[],V=0;V<I.length;++V)for(var Y=I[V],Q=Y.bits,$=0;$<Q.length;++$){var F=Y.name+"_"+Q[$];if(T.push(F),w[F]=Y.createMethod(Q[$],Y.padding),Y.name!=="sha3"){var R=Y.name+Q[$];T.push(R),w[R]=w[F]}}function _(L,g,D){this.blocks=[],this.s=[],this.padding=g,this.outputBits=D,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(L<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=D>>5,this.extraBytes=(D&31)>>3;for(var S=0;S<50;++S)this.s[S]=0}_.prototype.update=function(L){if(this.finalized)throw new Error(e);var g,D=typeof L;if(D!=="string"){if(D==="object"){if(L===null)throw new Error(t);if(l&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!l||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);g=!0}for(var S=this.blocks,lt=this.byteCount,ct=L.length,G=this.blockCount,ft=0,vt=this.s,wt,bt;ft<ct;){if(this.reset)for(this.reset=!1,S[0]=this.block,wt=1;wt<G+1;++wt)S[wt]=0;if(g)for(wt=this.start;ft<ct&&wt<lt;++ft)S[wt>>2]|=L[ft]<<E[wt++&3];else for(wt=this.start;ft<ct&&wt<lt;++ft)bt=L.charCodeAt(ft),bt<128?S[wt>>2]|=bt<<E[wt++&3]:bt<2048?(S[wt>>2]|=(192|bt>>6)<<E[wt++&3],S[wt>>2]|=(128|bt&63)<<E[wt++&3]):bt<55296||bt>=57344?(S[wt>>2]|=(224|bt>>12)<<E[wt++&3],S[wt>>2]|=(128|bt>>6&63)<<E[wt++&3],S[wt>>2]|=(128|bt&63)<<E[wt++&3]):(bt=65536+((bt&1023)<<10|L.charCodeAt(++ft)&1023),S[wt>>2]|=(240|bt>>18)<<E[wt++&3],S[wt>>2]|=(128|bt>>12&63)<<E[wt++&3],S[wt>>2]|=(128|bt>>6&63)<<E[wt++&3],S[wt>>2]|=(128|bt&63)<<E[wt++&3]);if(this.lastByteIndex=wt,wt>=lt){for(this.start=wt-lt,this.block=S[G],wt=0;wt<G;++wt)vt[wt]^=S[wt];H(vt),this.reset=!0}else this.start=wt}return this},_.prototype.encode=function(L,g){var D=L&255,S=1,lt=[D];for(L=L>>8,D=L&255;D>0;)lt.unshift(D),L=L>>8,D=L&255,++S;return g?lt.push(S):lt.unshift(S),this.update(lt),lt.length},_.prototype.encodeString=function(L){var g,D=typeof L;if(D!=="string"){if(D==="object"){if(L===null)throw new Error(t);if(l&&L.constructor===ArrayBuffer)L=new Uint8Array(L);else if(!Array.isArray(L)&&(!l||!ArrayBuffer.isView(L)))throw new Error(t)}else throw new Error(t);g=!0}var S=0,lt=L.length;if(g)S=lt;else for(var ct=0;ct<L.length;++ct){var G=L.charCodeAt(ct);G<128?S+=1:G<2048?S+=2:G<55296||G>=57344?S+=3:(G=65536+((G&1023)<<10|L.charCodeAt(++ct)&1023),S+=4)}return S+=this.encode(S*8),this.update(L),S},_.prototype.bytepad=function(L,g){for(var D=this.encode(g),S=0;S<L.length;++S)D+=this.encodeString(L[S]);var lt=g-D%g,ct=[];return ct.length=lt,this.update(ct),this},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var L=this.blocks,g=this.lastByteIndex,D=this.blockCount,S=this.s;if(L[g>>2]|=this.padding[g&3],this.lastByteIndex===this.byteCount)for(L[0]=L[D],g=1;g<D+1;++g)L[g]=0;for(L[D-1]|=2147483648,g=0;g<D;++g)S[g]^=L[g];H(S)}},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var L=this.blockCount,g=this.s,D=this.outputBlocks,S=this.extraBytes,lt=0,ct=0,G="",ft;ct<D;){for(lt=0;lt<L&&ct<D;++lt,++ct)ft=g[lt],G+=d[ft>>4&15]+d[ft&15]+d[ft>>12&15]+d[ft>>8&15]+d[ft>>20&15]+d[ft>>16&15]+d[ft>>28&15]+d[ft>>24&15];ct%L===0&&(H(g),lt=0)}return S&&(ft=g[lt],G+=d[ft>>4&15]+d[ft&15],S>1&&(G+=d[ft>>12&15]+d[ft>>8&15]),S>2&&(G+=d[ft>>20&15]+d[ft>>16&15])),G},_.prototype.arrayBuffer=function(){this.finalize();var L=this.blockCount,g=this.s,D=this.outputBlocks,S=this.extraBytes,lt=0,ct=0,G=this.outputBits>>3,ft;S?ft=new ArrayBuffer(D+1<<2):ft=new ArrayBuffer(G);for(var vt=new Uint32Array(ft);ct<D;){for(lt=0;lt<L&&ct<D;++lt,++ct)vt[ct]=g[lt];ct%L===0&&H(g)}return S&&(vt[lt]=g[lt],ft=ft.slice(0,G)),ft},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var L=this.blockCount,g=this.s,D=this.outputBlocks,S=this.extraBytes,lt=0,ct=0,G=[],ft,vt;ct<D;){for(lt=0;lt<L&&ct<D;++lt,++ct)ft=ct<<2,vt=g[lt],G[ft]=vt&255,G[ft+1]=vt>>8&255,G[ft+2]=vt>>16&255,G[ft+3]=vt>>24&255;ct%L===0&&H(g)}return S&&(ft=ct<<2,vt=g[lt],G[ft]=vt&255,S>1&&(G[ft+1]=vt>>8&255),S>2&&(G[ft+2]=vt>>16&255)),G};function k(L,g,D){_.call(this,L,g,D)}k.prototype=new _,k.prototype.finalize=function(){return this.encode(this.outputBits,!0),_.prototype.finalize.call(this)};var H=function(L){var g,D,S,lt,ct,G,ft,vt,wt,bt,Ft,Pt,Gt,$t,kt,Rt,Ht,Kt,se,_e,ae,de,fe,Yt,ut,X,nt,at,M,O,ht,Et,mt,xt,Lt,At,jt,Wt,Bt,Nt,Jt,Xt,ot,Z,tt,pt,gt,St,It,le,xe,Se,nn,Ie,mn,Li,ln,un,Br,Bi,Ci,ar,Qr;for(S=0;S<48;S+=2)lt=L[0]^L[10]^L[20]^L[30]^L[40],ct=L[1]^L[11]^L[21]^L[31]^L[41],G=L[2]^L[12]^L[22]^L[32]^L[42],ft=L[3]^L[13]^L[23]^L[33]^L[43],vt=L[4]^L[14]^L[24]^L[34]^L[44],wt=L[5]^L[15]^L[25]^L[35]^L[45],bt=L[6]^L[16]^L[26]^L[36]^L[46],Ft=L[7]^L[17]^L[27]^L[37]^L[47],Pt=L[8]^L[18]^L[28]^L[38]^L[48],Gt=L[9]^L[19]^L[29]^L[39]^L[49],g=Pt^(G<<1|ft>>>31),D=Gt^(ft<<1|G>>>31),L[0]^=g,L[1]^=D,L[10]^=g,L[11]^=D,L[20]^=g,L[21]^=D,L[30]^=g,L[31]^=D,L[40]^=g,L[41]^=D,g=lt^(vt<<1|wt>>>31),D=ct^(wt<<1|vt>>>31),L[2]^=g,L[3]^=D,L[12]^=g,L[13]^=D,L[22]^=g,L[23]^=D,L[32]^=g,L[33]^=D,L[42]^=g,L[43]^=D,g=G^(bt<<1|Ft>>>31),D=ft^(Ft<<1|bt>>>31),L[4]^=g,L[5]^=D,L[14]^=g,L[15]^=D,L[24]^=g,L[25]^=D,L[34]^=g,L[35]^=D,L[44]^=g,L[45]^=D,g=vt^(Pt<<1|Gt>>>31),D=wt^(Gt<<1|Pt>>>31),L[6]^=g,L[7]^=D,L[16]^=g,L[17]^=D,L[26]^=g,L[27]^=D,L[36]^=g,L[37]^=D,L[46]^=g,L[47]^=D,g=bt^(lt<<1|ct>>>31),D=Ft^(ct<<1|lt>>>31),L[8]^=g,L[9]^=D,L[18]^=g,L[19]^=D,L[28]^=g,L[29]^=D,L[38]^=g,L[39]^=D,L[48]^=g,L[49]^=D,$t=L[0],kt=L[1],pt=L[11]<<4|L[10]>>>28,gt=L[10]<<4|L[11]>>>28,at=L[20]<<3|L[21]>>>29,M=L[21]<<3|L[20]>>>29,Bi=L[31]<<9|L[30]>>>23,Ci=L[30]<<9|L[31]>>>23,Xt=L[40]<<18|L[41]>>>14,ot=L[41]<<18|L[40]>>>14,xt=L[2]<<1|L[3]>>>31,Lt=L[3]<<1|L[2]>>>31,Rt=L[13]<<12|L[12]>>>20,Ht=L[12]<<12|L[13]>>>20,St=L[22]<<10|L[23]>>>22,It=L[23]<<10|L[22]>>>22,O=L[33]<<13|L[32]>>>19,ht=L[32]<<13|L[33]>>>19,ar=L[42]<<2|L[43]>>>30,Qr=L[43]<<2|L[42]>>>30,Ie=L[5]<<30|L[4]>>>2,mn=L[4]<<30|L[5]>>>2,At=L[14]<<6|L[15]>>>26,jt=L[15]<<6|L[14]>>>26,Kt=L[25]<<11|L[24]>>>21,se=L[24]<<11|L[25]>>>21,le=L[34]<<15|L[35]>>>17,xe=L[35]<<15|L[34]>>>17,Et=L[45]<<29|L[44]>>>3,mt=L[44]<<29|L[45]>>>3,Yt=L[6]<<28|L[7]>>>4,ut=L[7]<<28|L[6]>>>4,Li=L[17]<<23|L[16]>>>9,ln=L[16]<<23|L[17]>>>9,Wt=L[26]<<25|L[27]>>>7,Bt=L[27]<<25|L[26]>>>7,_e=L[36]<<21|L[37]>>>11,ae=L[37]<<21|L[36]>>>11,Se=L[47]<<24|L[46]>>>8,nn=L[46]<<24|L[47]>>>8,Z=L[8]<<27|L[9]>>>5,tt=L[9]<<27|L[8]>>>5,X=L[18]<<20|L[19]>>>12,nt=L[19]<<20|L[18]>>>12,un=L[29]<<7|L[28]>>>25,Br=L[28]<<7|L[29]>>>25,Nt=L[38]<<8|L[39]>>>24,Jt=L[39]<<8|L[38]>>>24,de=L[48]<<14|L[49]>>>18,fe=L[49]<<14|L[48]>>>18,L[0]=$t^~Rt&Kt,L[1]=kt^~Ht&se,L[10]=Yt^~X&at,L[11]=ut^~nt&M,L[20]=xt^~At&Wt,L[21]=Lt^~jt&Bt,L[30]=Z^~pt&St,L[31]=tt^~gt&It,L[40]=Ie^~Li&un,L[41]=mn^~ln&Br,L[2]=Rt^~Kt&_e,L[3]=Ht^~se&ae,L[12]=X^~at&O,L[13]=nt^~M&ht,L[22]=At^~Wt&Nt,L[23]=jt^~Bt&Jt,L[32]=pt^~St&le,L[33]=gt^~It&xe,L[42]=Li^~un&Bi,L[43]=ln^~Br&Ci,L[4]=Kt^~_e&de,L[5]=se^~ae&fe,L[14]=at^~O&Et,L[15]=M^~ht&mt,L[24]=Wt^~Nt&Xt,L[25]=Bt^~Jt&ot,L[34]=St^~le&Se,L[35]=It^~xe&nn,L[44]=un^~Bi&ar,L[45]=Br^~Ci&Qr,L[6]=_e^~de&$t,L[7]=ae^~fe&kt,L[16]=O^~Et&Yt,L[17]=ht^~mt&ut,L[26]=Nt^~Xt&xt,L[27]=Jt^~ot&Lt,L[36]=le^~Se&Z,L[37]=xe^~nn&tt,L[46]=Bi^~ar&Ie,L[47]=Ci^~Qr&mn,L[8]=de^~$t&Rt,L[9]=fe^~kt&Ht,L[18]=Et^~Yt&X,L[19]=mt^~ut&nt,L[28]=Xt^~xt&At,L[29]=ot^~Lt&jt,L[38]=Se^~Z&pt,L[39]=nn^~tt&gt,L[48]=ar^~Ie&Li,L[49]=Qr^~mn&ln,L[0]^=C[S],L[1]^=C[S+1]};if(a)n.exports=w;else for(V=0;V<T.length;++V)r[T[V]]=w[T[V]]})()})(Q2)),Q2.exports}var hX=fX();const pX=Po(hX),mX="logger/5.8.0";let hA=!1,pA=!1;const R0={debug:1,default:2,info:2,warning:3,error:4,off:5};let mA=R0.default,Y2=null;function gX(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{n.push(t)}}),n.length)throw new Error("missing "+n.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(n){return n.message}return null}const gA=gX();var Q_;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(Q_||(Q_={}));var as;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(as||(as={}));const yA="0123456789abcdef";class Kn{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const i=t.toLowerCase();R0[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(mA>R0[i])&&console.log.apply(console,e)}debug(...t){this._log(Kn.levels.DEBUG,t)}info(...t){this._log(Kn.levels.INFO,t)}warn(...t){this._log(Kn.levels.WARNING,t)}makeError(t,e,i){if(pA)return this.makeError("censored error",e,{});e||(e=Kn.errors.UNKNOWN_ERROR),i||(i={});const r=[];Object.keys(i).forEach(l=>{const d=i[l];try{if(d instanceof Uint8Array){let u="";for(let h=0;h<d.length;h++)u+=yA[d[h]>>4],u+=yA[d[h]&15];r.push(l+"=Uint8Array(0x"+u+")")}else r.push(l+"="+JSON.stringify(d))}catch{r.push(l+"="+JSON.stringify(i[l].toString()))}}),r.push(`code=${e}`),r.push(`version=${this.version}`);const s=t;let o="";switch(e){case as.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=t;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case as.CALL_EXCEPTION:case as.INSUFFICIENT_FUNDS:case as.MISSING_NEW:case as.NONCE_EXPIRED:case as.REPLACEMENT_UNDERPRICED:case as.TRANSACTION_REPLACED:case as.UNPREDICTABLE_GAS_LIMIT:o=e;break}o&&(t+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),r.length&&(t+=" ("+r.join(", ")+")");const a=new Error(t);return a.reason=s,a.code=e,Object.keys(i).forEach(function(l){a[l]=i[l]}),a}throwError(t,e,i){throw this.makeError(t,e,i)}throwArgumentError(t,e,i){return this.throwError(t,Kn.errors.INVALID_ARGUMENT,{argument:e,value:i})}assert(t,e,i,r){t||this.throwError(e,i,r)}assertArgument(t,e,i,r){t||this.throwArgumentError(e,i,r)}checkNormalize(t){gA&&this.throwError("platform missing String.prototype.normalize",Kn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:gA})}checkSafeUint53(t,e){typeof t=="number"&&(e==null&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,Kn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,Kn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,i){i?i=": "+i:i="",t<e&&this.throwError("missing argument"+i,Kn.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+i,Kn.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){(t===Object||t==null)&&this.throwError("missing new",Kn.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",Kn.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Kn.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return Y2||(Y2=new Kn(mX)),Y2}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",Kn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),hA){if(!t)return;this.globalLogger().throwError("error censorship permanent",Kn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}pA=!!t,hA=!!e}static setLogLevel(t){const e=R0[t.toLowerCase()];if(e==null){Kn.globalLogger().warn("invalid log level - "+t);return}mA=e}static from(t){return new Kn(t)}}Kn.errors=as;Kn.levels=Q_;const yX="bytes/5.8.0",X2=new Kn(yX);function wX(n){return!!n.toHexString}function N0(n){return n.slice||(n.slice=function(){const t=Array.prototype.slice.call(arguments);return N0(new Uint8Array(Array.prototype.slice.apply(n,t)))}),n}function wA(n){return typeof n=="number"&&n==n&&n%1===0}function _X(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!wA(n.length)||n.length<0)return!1;for(let t=0;t<n.length;t++){const e=n[t];if(!wA(e)||e<0||e>=256)return!1}return!0}function bX(n,t){if(t||(t={}),typeof n=="number"){X2.checkSafeUint53(n,"invalid arrayify value");const e=[];for(;n;)e.unshift(n&255),n=parseInt(String(n/256));return e.length===0&&e.push(0),N0(new Uint8Array(e))}if(t.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),wX(n)&&(n=n.toHexString()),vX(n)){let e=n.substring(2);e.length%2&&(t.hexPad==="left"?e="0"+e:t.hexPad==="right"?e+="0":X2.throwArgumentError("hex data is odd-length","value",n));const i=[];for(let r=0;r<e.length;r+=2)i.push(parseInt(e.substring(r,r+2),16));return N0(new Uint8Array(i))}return _X(n)?N0(new Uint8Array(n)):X2.throwArgumentError("invalid arrayify value","value",n)}function vX(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/))}function M0(n){return"0x"+pX.keccak_256(bX(n))}const J2=new Uint8Array([0,0,0,0,0,0,0,2]);function tw(n,t){if(n.length!==t.length)return!1;let e=0;for(let i=0;i<n.length;i++)e|=n[i]^t[i];return e===0}function fc(n){const t=n.startsWith("0x")?n.slice(2):n,e=new Uint8Array(t.length/2);for(let i=0;i<e.length;i++)e[i]=parseInt(t.substr(i*2,2),16);return e}function kc(n){return Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join("")}function ew(...n){const t=n.reduce((r,s)=>r+s.length,0),e=new Uint8Array(t);let i=0;for(const r of n)e.set(r,i),i+=r.length;return e}const nw="spectre_encryption_keys_";class xX{encryptionKeyV1=null;encryptionKeyV2=null;utxoPrivateKeyV1=null;utxoPrivateKeyV2=null;hasKeys(){return this.encryptionKeyV2!==null}restoreKeysFromStorage(t){try{const e=nw+t,i=localStorage.getItem(e);if(!i)return!1;const r=JSON.parse(i);return!r.v1||!r.v2||!r.utxoV1||!r.utxoV2?!1:(this.encryptionKeyV1=fc(r.v1),this.encryptionKeyV2=fc(r.v2),this.utxoPrivateKeyV1=r.utxoV1,this.utxoPrivateKeyV2=r.utxoV2,console.log("[BrowserEncryptionService] Restored keys from storage"),!0)}catch(e){return console.warn("[BrowserEncryptionService] Failed to restore keys:",e),!1}}persistKeysToStorage(t){try{const e=nw+t,i={v1:this.encryptionKeyV1?kc(this.encryptionKeyV1):null,v2:this.encryptionKeyV2?kc(this.encryptionKeyV2):null,utxoV1:this.utxoPrivateKeyV1,utxoV2:this.utxoPrivateKeyV2};localStorage.setItem(e,JSON.stringify(i)),console.log("[BrowserEncryptionService] Persisted keys to storage")}catch(e){console.warn("[BrowserEncryptionService] Failed to persist keys:",e)}}clearPersistedKeys(t){try{const e=nw+t;localStorage.removeItem(e)}catch{}}deriveEncryptionKeyFromSignature(t,e){const i=t.slice(0,31);this.encryptionKeyV1=i;const r=this.sha256Sync(i);this.utxoPrivateKeyV1="0x"+kc(r);const s=M0(t),o=fc(s);this.encryptionKeyV2=o;const a=fc(M0(o));return this.utxoPrivateKeyV2="0x"+kc(a),e&&this.persistKeysToStorage(e),{v1:this.encryptionKeyV1,v2:this.encryptionKeyV2}}async deriveEncryptionKeyFromWallet(t,e){if(e&&this.restoreKeysFromStorage(e))return{v1:this.encryptionKeyV1,v2:this.encryptionKeyV2};const i=new TextEncoder().encode("Privacy Money account sign in"),r=await t(i);return this.deriveEncryptionKeyFromSignature(r,e)}sha256Sync(t){return fc(M0(t))}async encrypt(t){if(!this.encryptionKeyV2)throw new Error("Encryption key not set. Call deriveEncryptionKeyFromWallet first.");const e=typeof t=="string"?new TextEncoder().encode(t):t,i=crypto.getRandomValues(new Uint8Array(12)),r=new Uint8Array(this.encryptionKeyV2).buffer,s=await crypto.subtle.importKey("raw",r,{name:"AES-GCM"},!1,["encrypt"]),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(i).buffer},s,new Uint8Array(e).buffer),a=new Uint8Array(o),l=a.slice(-16),d=a.slice(0,-16);return ew(J2,i,l,d)}async decrypt(t){return t.length>=8&&tw(t.slice(0,8),J2)?this.decryptV2(t):this.decryptV1(t)}async decryptV2(t){if(!this.encryptionKeyV2)throw new Error("Encryption key not set.");const e=t.slice(8,20),i=t.slice(20,36),r=t.slice(36),s=ew(r,i),o=new Uint8Array(this.encryptionKeyV2).buffer,a=await crypto.subtle.importKey("raw",o,{name:"AES-GCM"},!1,["decrypt"]);try{const l=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(e).buffer},a,new Uint8Array(s).buffer);return new Uint8Array(l)}catch{throw new Error("Failed to decrypt data. Invalid key or corrupted data.")}}async decryptV1(t){if(!this.encryptionKeyV1)throw new Error("V1 Encryption key not set.");const e=t.slice(0,16),i=t.slice(16,32),r=t.slice(32),s=this.encryptionKeyV1.slice(16,31),o=await this.computeHmac(s,ew(e,r));if(!tw(i,o.slice(0,16)))throw new Error("Failed to decrypt data. Invalid key or corrupted data.");const a=this.encryptionKeyV1.slice(0,16),l=new Uint8Array(a).buffer,d=await crypto.subtle.importKey("raw",l,{name:"AES-CTR"},!1,["decrypt"]),u=await crypto.subtle.decrypt({name:"AES-CTR",counter:new Uint8Array(e).buffer,length:64},d,new Uint8Array(r).buffer);return new Uint8Array(u)}async computeHmac(t,e){const i=new Uint8Array(t).buffer,r=await crypto.subtle.importKey("raw",i,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),s=await crypto.subtle.sign("HMAC",r,new Uint8Array(e).buffer);return new Uint8Array(s)}getEncryptionKeyVersion(t){const e=typeof t=="string"?fc(t):t;return e.length>=8&&tw(e.slice(0,8),J2)?"v2":"v1"}getUtxoPrivateKey(t="v2"){if(t==="v1"){if(!this.utxoPrivateKeyV1)throw new Error("V1 key not set");return this.utxoPrivateKeyV1}if(!this.utxoPrivateKeyV2)throw new Error("V2 key not set");return this.utxoPrivateKeyV2}reset(){this.encryptionKeyV1=null,this.encryptionKeyV2=null,this.utxoPrivateKeyV1=null,this.utxoPrivateKeyV2=null}isInitialized(){return this.encryptionKeyV2!==null}}const Y_="privacycash_encrypted_outputs_",B0="privacycash_fetch_offset_";function _A(n){return q_.toString().substring(0,6)+n}const EX={getItem(n){try{return localStorage.getItem(n)}catch{return console.warn("[BrowserStorage] localStorage not available"),null}},setItem(n,t){try{localStorage.setItem(n,t)}catch(e){console.warn("[BrowserStorage] Failed to save to localStorage:",e)}},removeItem(n){try{localStorage.removeItem(n)}catch{console.warn("[BrowserStorage] Failed to remove from localStorage")}},clear(){try{const n=[];for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t);e&&(e.startsWith("privacycash_")||e.startsWith(Y_)||e.startsWith(B0))&&n.push(e)}n.forEach(t=>localStorage.removeItem(t))}catch{console.warn("[BrowserStorage] Failed to clear localStorage")}},key(n){try{return localStorage.key(n)}catch{return null}},get length(){try{return localStorage.length}catch{return 0}}};class SX{data=new Map;getItem(t){return this.data.get(t)??null}setItem(t,e){this.data.set(t,e)}removeItem(t){this.data.delete(t)}clear(){this.data.clear()}key(t){return Array.from(this.data.keys())[t]??null}get length(){return this.data.size}}function LX(){try{const n="__privacycash_test__";return localStorage.setItem(n,"test"),localStorage.removeItem(n),EX}catch{return console.warn("[BrowserStorage] localStorage not available, using memory storage"),new SX}}const CX=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function dg(n,t){if(!t||t==10)return BigInt(n);if(t==16)return n.slice(0,2)=="0x"?BigInt(n):BigInt("0x"+n)}const ni=dg;function AX(n,t){let e=BigInt(0);t=BigInt(t);for(let i=0;i<n.length;i++)e=e*t+BigInt(n[i]);return e}function uh(n){const t=n.toString(16);return(t.length-1)*4+CX[parseInt(t[0],16)]}function QR(n){return BigInt(n)<BigInt(0)}function YR(n){return!n}function mm(n,t){return BigInt(n)<<BigInt(t)}function du(n,t){return BigInt(n)>>BigInt(t)}const IX=mm,TX=du;function Jv(n){return(BigInt(n)&BigInt(1))==BigInt(1)}function kX(n){let t=BigInt(n);const e=[];for(;t;){if(t&BigInt(1)){const i=2-Number(t%BigInt(4));e.push(i),t=t-BigInt(i)}else e.push(0);t=t>>BigInt(1)}return e}function XR(n){let t=BigInt(n);const e=[];for(;t;)t&BigInt(1)?e.push(1):e.push(0),t=t>>BigInt(1);return e}function JR(n){if(n>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(n)}function RX(n,t){const e=[];let i=BigInt(n);for(t=BigInt(t);i;)e.unshift(Number(i%t)),i=i/t;return e}function t3(n,t){return BigInt(n)+BigInt(t)}function Co(n,t){return BigInt(n)-BigInt(t)}function tN(n){return-BigInt(n)}function eN(n,t){return BigInt(n)*BigInt(t)}function NX(n){return BigInt(n)*BigInt(n)}function dh(n,t){return BigInt(n)**BigInt(t)}function MX(n,t){return BigInt(n)**BigInt(t)}function BX(n){return BigInt(n)>=0?BigInt(n):-BigInt(n)}function Au(n,t){return BigInt(n)/BigInt(t)}function ks(n,t){return BigInt(n)%BigInt(t)}function fo(n,t){return BigInt(n)==BigInt(t)}function PX(n,t){return BigInt(n)!=BigInt(t)}function OX(n,t){return BigInt(n)<BigInt(t)}function X_(n,t){return BigInt(n)>BigInt(t)}function FX(n,t){return BigInt(n)<=BigInt(t)}function nN(n,t){return BigInt(n)>=BigInt(t)}function e3(n,t){return BigInt(n)&BigInt(t)}function jX(n,t){return BigInt(n)|BigInt(t)}function UX(n,t){return BigInt(n)^BigInt(t)}function DX(n,t){return BigInt(n)&&BigInt(t)}function zX(n,t){return BigInt(n)||BigInt(t)}function GX(n){return!BigInt(n)}function qf(n,t,e,i){const r="0000000"+e.toString(16),s=new Uint32Array(n.buffer,n.byteOffset+t,i/4),o=((r.length-7)*4-1>>5)+1;for(let a=0;a<o;a++)s[a]=parseInt(r.substring(r.length-8*a-8,r.length-8*a),16);for(let a=o;a<s.length;a++)s[a]=0;for(let a=s.length*4;a<i;a++)n[a]=JR(e3(du(e,a*8),255))}function iN(n,t,e,i){const r="0000000"+e.toString(16),s=new DataView(n.buffer,n.byteOffset+t,i),o=((r.length-7)*4-1>>5)+1;for(let a=0;a<o;a++)s.setUint32(i-a*4-4,parseInt(r.substring(r.length-8*a-8,r.length-8*a),16),!1);for(let a=0;a<i/4-o;a++)s[a]=0}function $f(n,t,e){e=e||n.byteLength,t=t||0;const i=new Uint32Array(n.buffer,n.byteOffset+t,e/4),r=new Array(e/4);return i.forEach((s,o)=>r[r.length-o-1]=s.toString(16).padStart(8,"0")),dg(r.join(""),16)}function rN(n,t,e){e=e||n.byteLength,t=t||0;const i=new DataView(n.buffer,n.byteOffset+t,e),r=new Array(e/4);for(let s=0;s<e/4;s++)r[s]=i.getUint32(s*4,!1).toString(16).padStart(8,"0");return dg(r.join(""),16)}function n3(n,t){return n.toString(t)}function Iu(n){const t=new Uint8Array(Math.floor((uh(n)-1)/8)+1);return qf(t,0,n,t.byteLength),t}const sN=ni(0),hc=ni(1);var WX=Object.freeze({__proto__:null,abs:BX,add:t3,band:e3,bitLength:uh,bits:XR,bor:jX,bxor:UX,div:Au,e:ni,eq:fo,exp:MX,fromArray:AX,fromRprBE:rN,fromRprLE:$f,fromString:dg,geq:nN,gt:X_,isNegative:QR,isOdd:Jv,isZero:YR,land:DX,leq:FX,lnot:GX,lor:zX,lt:OX,mod:ks,mul:eN,naf:kX,neg:tN,neq:PX,one:hc,pow:dh,shiftLeft:mm,shiftRight:du,shl:IX,shr:TX,square:NX,sub:Co,toArray:RX,toLEBuff:Iu,toNumber:JR,toRprBE:iN,toRprLE:qf,toString:n3,zero:sN});function bA(n,t,e){if(YR(e))return n.one;const i=XR(e);if(i.length==0)return n.one;let r=t;for(let s=i.length-2;s>=0;s--)r=n.square(r),i[s]&&(r=n.mul(r,t));return r}function VX(n){if(n.m%2==1)if(fo(ks(n.p,4),1))if(fo(ks(n.p,8),1))if(fo(ks(n.p,16),1))qX(n);else if(fo(ks(n.p,16),9))$X(n);else throw new Error("Field withot sqrt");else if(fo(ks(n.p,8),5))HX(n);else throw new Error("Field withot sqrt");else fo(ks(n.p,4),3)&&KX(n);else{const t=ks(dh(n.p,n.m/2),4);t==1?ZX(n):t==3?QX(n):YX(n)}}function qX(n){for(n.sqrt_q=dh(n.p,n.m),n.sqrt_s=0,n.sqrt_t=Co(n.sqrt_q,1);!Jv(n.sqrt_t);)n.sqrt_s=n.sqrt_s+1,n.sqrt_t=Au(n.sqrt_t,2);let t=n.one;for(;n.eq(t,n.one);){const e=n.random();n.sqrt_z=n.pow(e,n.sqrt_t),t=n.pow(n.sqrt_z,2**(n.sqrt_s-1))}n.sqrt_tm1d2=Au(Co(n.sqrt_t,1),2),n.sqrt=function(e){const i=this;if(i.isZero(e))return i.zero;let r=i.pow(e,i.sqrt_tm1d2);const s=i.pow(i.mul(i.square(r),e),2**(i.sqrt_s-1));if(i.eq(s,i.negone))return null;let o=i.sqrt_s,a=i.mul(e,r),l=i.mul(a,r),d=i.sqrt_z;for(;!i.eq(l,i.one);){let u=i.square(l),h=1;for(;!i.eq(u,i.one);)u=i.square(u),h++;r=d;for(let m=0;m<o-h-1;m++)r=i.square(r);d=i.square(r),l=i.mul(l,d),a=i.mul(a,r),o=h}return i.geq(a,i.zero)?a:i.neg(a)}}function $X(n){n.sqrt=function(){throw new Error("Sqrt alg 4 not implemented")}}function HX(n){n.sqrt=function(){throw new Error("Sqrt alg 3 not implemented")}}function KX(n){n.sqrt_q=dh(n.p,n.m),n.sqrt_e1=Au(Co(n.sqrt_q,3),4),n.sqrt=function(t){if(this.isZero(t))return this.zero;const e=this.pow(t,this.sqrt_e1),i=this.mul(this.square(e),t);if(this.eq(i,this.negone))return null;const r=this.mul(e,t);return n.geq(r,n.zero)?r:n.neg(r)}}function ZX(n){n.sqrt=function(){throw new Error("Sqrt alg 10 not implemented")}}function QX(n){n.sqrt_q=dh(n.p,n.m/2),n.sqrt_e34=Au(Co(n.sqrt_q,3),4),n.sqrt_e12=Au(Co(n.sqrt_q,1),2),n.frobenius=function(t,e){return t%2==1?n.conjugate(e):e},n.sqrt=function(t){const e=this,i=e.pow(t,e.sqrt_e34),r=e.mul(e.square(i),t),s=e.mul(e.frobenius(1,r),r);if(e.eq(s,e.negone))return null;const o=e.mul(i,t);let a;if(e.eq(r,e.negone))a=e.mul(o,[e.F.zero,e.F.one]);else{const l=e.pow(e.add(e.one,r),e.sqrt_e12);a=e.mul(l,o)}return e.geq(a,e.zero)?a:e.neg(a)}}function YX(n){n.sqrt=function(){throw new Error("Sqrt alg 8 not implemented")}}function ya(n,t,e,i,r){n[t]=n[t]+n[e]>>>0,n[r]=(n[r]^n[t])>>>0,n[r]=(n[r]<<16|n[r]>>>16&65535)>>>0,n[i]=n[i]+n[r]>>>0,n[e]=(n[e]^n[i])>>>0,n[e]=(n[e]<<12|n[e]>>>20&4095)>>>0,n[t]=n[t]+n[e]>>>0,n[r]=(n[r]^n[t])>>>0,n[r]=(n[r]<<8|n[r]>>>24&255)>>>0,n[i]=n[i]+n[r]>>>0,n[e]=(n[e]^n[i])>>>0,n[e]=(n[e]<<7|n[e]>>>25&127)>>>0}function XX(n){ya(n,0,4,8,12),ya(n,1,5,9,13),ya(n,2,6,10,14),ya(n,3,7,11,15),ya(n,0,5,10,15),ya(n,1,6,11,12),ya(n,2,7,8,13),ya(n,3,4,9,14)}class $c{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return this.idx==16&&this.update(),this.buff[this.idx++]}nextU64(){return t3(eN(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(this.nextU32()&1)==1}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let t=0;t<10;t++)XX(this.buff);for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,this.state[12]==0&&(this.state[13]=this.state[13]+1>>>0,this.state[13]==0&&(this.state[14]=this.state[14]+1>>>0,this.state[14]==0&&(this.state[15]=this.state[15]+1>>>0)))}}function oN(n){let t=new Uint8Array(n);if(typeof globalThis.crypto<"u")globalThis.crypto.getRandomValues(t);else for(let e=0;e<n;e++)t[e]=Math.random()*4294967296>>>0;return t}function JX(){const n=oN(32),t=new Uint32Array(n.buffer),e=[];for(let i=0;i<8;i++)e.push(t[i]);return e}let Qp=null;function i3(){return Qp||(Qp=new $c(JX()),Qp)}class tJ{constructor(t,e,i){this.F=e,this.G=t,this.opMulGF=i;let r=e.sqrt_t||e.t,s=e.sqrt_s||e.s,o=e.one;for(;e.eq(e.pow(o,e.half),e.one);)o=e.add(o,e.one);this.w=new Array(s+1),this.wi=new Array(s+1),this.w[s]=this.F.pow(o,r),this.wi[s]=this.F.inv(this.w[s]);let a=s-1;for(;a>=0;)this.w[a]=this.F.square(this.w[a+1]),this.wi[a]=this.F.square(this.wi[a+1]),a--;this.roots=[],this._setRoots(Math.min(s,15))}_setRoots(t){for(let e=t;e>=0&&!this.roots[e];e--){let i=this.F.one;const r=1<<e,s=new Array(r);for(let o=0;o<r;o++)s[o]=i,i=this.F.mul(i,this.w[e]);this.roots[e]=s}}fft(t){if(t.length<=1)return t;const e=vA(t.length-1)+1;this._setRoots(e);const i=1<<e;if(t.length!=i)throw new Error("Size must be multiple of 2");return gm(this,t,e,0,1)}ifft(t){if(t.length<=1)return t;const e=vA(t.length-1)+1;this._setRoots(e);const i=1<<e;if(t.length!=i)throw new Error("Size must be multiple of 2");const r=gm(this,t,e,0,1),s=this.F.inv(this.F.mulScalar(this.F.one,i)),o=new Array(i);for(let a=0;a<i;a++)o[a]=this.opMulGF(r[(i-a)%i],s);return o}}function vA(n){return((n&4294901760)!==0?(n&=4294901760,16):0)|((n&4278255360)!==0?(n&=4278255360,8):0)|((n&4042322160)!==0?(n&=4042322160,4):0)|((n&3435973836)!==0?(n&=3435973836,2):0)|(n&2863311530)!==0}function gm(n,t,e,i,r){const s=1<<e;if(s==1)return[t[i]];if(s==2)return[n.G.add(t[i],t[i+r]),n.G.sub(t[i],t[i+r])];const o=s>>1,a=gm(n,t,e-1,i,r*2),l=gm(n,t,e-1,i+r,r*2),d=new Array(s);for(let u=0;u<o;u++)d[u]=n.G.add(a[u],n.opMulGF(l[u],n.roots[e][u])),d[u+o]=n.G.sub(a[u],n.opMulGF(l[u],n.roots[e][u]));return d}class r3{constructor(t){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(t),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=uh(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=this.n64*2,this.n8=this.n64*8,this.R=this.e(this.one<<BigInt(this.n64*64)),this.Ri=this.inv(this.R);const e=this.negone>>this.one;this.nqr=this.two;let i=this.pow(this.nqr,e);for(;!this.eq(i,this.negone);)this.nqr=this.nqr+this.one,i=this.pow(this.nqr,e);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),VX(this),this.FFT=new tJ(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){let i;if(e?e==16&&(i=BigInt("0x"+t)):i=BigInt(t),i<0){let r=-i;return r>=this.p&&(r=r%this.p),this.p-r}else return i>=this.p?i%this.p:i}add(t,e){const i=t+e;return i>=this.p?i-this.p:i}sub(t,e){return t>=e?t-e:this.p-e+t}neg(t){return t&&this.p-t}mul(t,e){return t*e%this.p}mulScalar(t,e){return t*this.e(e)%this.p}square(t){return t*t%this.p}eq(t,e){return t==e}neq(t,e){return t!=e}lt(t,e){const i=t>this.half?t-this.p:t,r=e>this.half?e-this.p:e;return i<r}gt(t,e){const i=t>this.half?t-this.p:t,r=e>this.half?e-this.p:e;return i>r}leq(t,e){const i=t>this.half?t-this.p:t,r=e>this.half?e-this.p:e;return i<=r}geq(t,e){const i=t>this.half?t-this.p:t,r=e>this.half?e-this.p:e;return i>=r}div(t,e){return this.mul(t,this.inv(e))}idiv(t,e){if(!e)throw new Error("Division by zero");return t/e}inv(t){if(!t)throw new Error("Division by zero");let e=this.zero,i=this.p,r=this.one,s=t%this.p;for(;s;){let o=i/s;[e,r]=[r,e-o*r],[i,s]=[s,i-o*s]}return e<this.zero&&(e+=this.p),e}mod(t,e){return t%e}pow(t,e){return bA(this,t,e)}exp(t,e){return bA(this,t,e)}band(t,e){const i=t&e&this.mask;return i>=this.p?i-this.p:i}bor(t,e){const i=(t|e)&this.mask;return i>=this.p?i-this.p:i}bxor(t,e){const i=(t^e)&this.mask;return i>=this.p?i-this.p:i}bnot(t){const e=t^this.mask;return e>=this.p?e-this.p:e}shl(t,e){if(Number(e)<this.bitLength){const i=t<<e&this.mask;return i>=this.p?i-this.p:i}else{const i=this.p-e;return Number(i)<this.bitLength?t>>i:this.zero}}shr(t,e){if(Number(e)<this.bitLength)return t>>e;{const i=this.p-e;if(Number(i)<this.bitLength){const r=t<<i&this.mask;return r>=this.p?r-this.p:r}else return 0}}land(t,e){return t&&e?this.one:this.zero}lor(t,e){return t||e?this.one:this.zero}lnot(t){return t?this.zero:this.one}sqrt_old(t){if(t==this.zero)return this.zero;if(this.pow(t,this.negone>>this.one)!=this.one)return null;let i=this.s,r=this.nqr_to_t,s=this.pow(t,this.t),o=this.pow(t,this.add(this.t,this.one)>>this.one);for(;s!=this.one;){let a=this.square(s),l=1;for(;a!=this.one;)l++,a=this.square(a);let d=r;for(let u=0;u<i-l-1;u++)d=this.square(d);i=l,r=this.square(d),s=this.mul(s,r),o=this.mul(o,d)}return o>this.p>>this.one&&(o=this.neg(o)),o}normalize(t,e){if(t=BigInt(t,e),t<0){let i=-t;return i>=this.p&&(i=i%this.p),this.p-i}else return t>=this.p?t%this.p:t}random(){const t=this.bitLength*2/8;let e=this.zero;for(let i=0;i<t;i++)e=(e<<BigInt(8))+BigInt(oN(1)[0]);return e%this.p}toString(t,e){e=e||10;let i;return t>this.half&&e==10?i="-"+(this.p-t).toString(e):i=t.toString(e),i}isZero(t){return t==this.zero}fromRng(t){let e;do{e=this.zero;for(let i=0;i<this.n64;i++)e+=t.nextU64()<<BigInt(64*i);e&=this.mask}while(e>=this.p);return e=e*this.Ri%this.p,e}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}toRprLE(t,e,i){qf(t,e,i,this.n64*8)}toRprBE(t,e,i){iN(t,e,i,this.n64*8)}toRprBEM(t,e,i){return this.toRprBE(t,e,this.mul(this.R,i))}toRprLEM(t,e,i){return this.toRprLE(t,e,this.mul(this.R,i))}fromRprLE(t,e){return $f(t,e,this.n8)}fromRprBE(t,e){return rN(t,e,this.n8)}fromRprLEM(t,e){return this.mul(this.fromRprLE(t,e),this.Ri)}fromRprBEM(t,e){return this.mul(this.fromRprBE(t,e),this.Ri)}toObject(t){return t}}var Ga={};Ga.bigInt2BytesLE=function(t,e){const i=Array(e);let r=BigInt(t);for(let s=0;s<e;s++)i[s]=Number(r&0xFFn),r=r>>8n;return i};Ga.bigInt2U32LE=function(t,e){const i=Array(e);let r=BigInt(t);for(let s=0;s<e;s++)i[s]=Number(r&0xFFFFFFFFn),r=r>>32n;return i};Ga.isOcamNum=function(n){return!(!Array.isArray(n)||n.length!=3||typeof n[0]!="number"||typeof n[1]!="number"||!Array.isArray(n[2]))};var eJ=function(t,e,i){const r=i||"int";if(t.modules[r])return r;t.modules[r]={};const s=e*2,o=e*8;function a(){const j=t.addFunction(r+"_copy");j.addParam("px","i32"),j.addParam("pr","i32");const b=j.getCodeBuilder();for(let B=0;B<e;B++)j.addCode(b.i64_store(b.getLocal("pr"),B*8,b.i64_load(b.getLocal("px"),B*8)))}function l(){const j=t.addFunction(r+"_zero");j.addParam("pr","i32");const b=j.getCodeBuilder();for(let B=0;B<e;B++)j.addCode(b.i64_store(b.getLocal("pr"),B*8,b.i64_const(0)))}function d(){const j=t.addFunction(r+"_one");j.addParam("pr","i32");const b=j.getCodeBuilder();j.addCode(b.i64_store(b.getLocal("pr"),0,b.i64_const(1)));for(let B=1;B<e;B++)j.addCode(b.i64_store(b.getLocal("pr"),B*8,b.i64_const(0)))}function u(){const j=t.addFunction(r+"_isZero");j.addParam("px","i32"),j.setReturnType("i32");const b=j.getCodeBuilder();function B(J){return J==0?b.ret(b.i64_eqz(b.i64_load(b.getLocal("px")))):b.if(b.i64_eqz(b.i64_load(b.getLocal("px"),J*8)),B(J-1),b.ret(b.i32_const(0)))}j.addCode(B(e-1)),j.addCode(b.ret(b.i32_const(0)))}function h(){const j=t.addFunction(r+"_eq");j.addParam("px","i32"),j.addParam("py","i32"),j.setReturnType("i32");const b=j.getCodeBuilder();function B(J){return J==0?b.ret(b.i64_eq(b.i64_load(b.getLocal("px")),b.i64_load(b.getLocal("py")))):b.if(b.i64_eq(b.i64_load(b.getLocal("px"),J*8),b.i64_load(b.getLocal("py"),J*8)),B(J-1),b.ret(b.i32_const(0)))}j.addCode(B(e-1)),j.addCode(b.ret(b.i32_const(0)))}function m(){const j=t.addFunction(r+"_gte");j.addParam("px","i32"),j.addParam("py","i32"),j.setReturnType("i32");const b=j.getCodeBuilder();function B(J){return J==0?b.ret(b.i64_ge_u(b.i64_load(b.getLocal("px")),b.i64_load(b.getLocal("py")))):b.if(b.i64_lt_u(b.i64_load(b.getLocal("px"),J*8),b.i64_load(b.getLocal("py"),J*8)),b.ret(b.i32_const(0)),b.if(b.i64_gt_u(b.i64_load(b.getLocal("px"),J*8),b.i64_load(b.getLocal("py"),J*8)),b.ret(b.i32_const(1)),B(J-1)))}j.addCode(B(e-1)),j.addCode(b.ret(b.i32_const(0)))}function p(){const j=t.addFunction(r+"_add");j.addParam("x","i32"),j.addParam("y","i32"),j.addParam("r","i32"),j.setReturnType("i32"),j.addLocal("c","i64");const b=j.getCodeBuilder();j.addCode(b.setLocal("c",b.i64_add(b.i64_load32_u(b.getLocal("x")),b.i64_load32_u(b.getLocal("y"))))),j.addCode(b.i64_store32(b.getLocal("r"),b.getLocal("c")));for(let B=1;B<s;B++)j.addCode(b.setLocal("c",b.i64_add(b.i64_add(b.i64_load32_u(b.getLocal("x"),4*B),b.i64_load32_u(b.getLocal("y"),4*B)),b.i64_shr_u(b.getLocal("c"),b.i64_const(32))))),j.addCode(b.i64_store32(b.getLocal("r"),B*4,b.getLocal("c")));j.addCode(b.i32_wrap_i64(b.i64_shr_u(b.getLocal("c"),b.i64_const(32))))}function E(){const j=t.addFunction(r+"_sub");j.addParam("x","i32"),j.addParam("y","i32"),j.addParam("r","i32"),j.setReturnType("i32"),j.addLocal("c","i64");const b=j.getCodeBuilder();j.addCode(b.setLocal("c",b.i64_sub(b.i64_load32_u(b.getLocal("x")),b.i64_load32_u(b.getLocal("y"))))),j.addCode(b.i64_store32(b.getLocal("r"),b.i64_and(b.getLocal("c"),b.i64_const("0xFFFFFFFF"))));for(let B=1;B<s;B++)j.addCode(b.setLocal("c",b.i64_add(b.i64_sub(b.i64_load32_u(b.getLocal("x"),4*B),b.i64_load32_u(b.getLocal("y"),4*B)),b.i64_shr_s(b.getLocal("c"),b.i64_const(32))))),j.addCode(b.i64_store32(b.getLocal("r"),B*4,b.i64_and(b.getLocal("c"),b.i64_const("0xFFFFFFFF"))));j.addCode(b.i32_wrap_i64(b.i64_shr_s(b.getLocal("c"),b.i64_const(32))))}function C(){const j=t.addFunction(r+"_mul");j.addParam("x","i32"),j.addParam("y","i32"),j.addParam("r","i32"),j.addLocal("c0","i64"),j.addLocal("c1","i64");for(let I=0;I<s;I++)j.addLocal("x"+I,"i64"),j.addLocal("y"+I,"i64");const b=j.getCodeBuilder(),B=[],J=[];function it(I,w){let T,V;return B[I]?T=b.getLocal("x"+I):(T=b.teeLocal("x"+I,b.i64_load32_u(b.getLocal("x"),I*4)),B[I]=!0),J[w]?V=b.getLocal("y"+w):(V=b.teeLocal("y"+w,b.i64_load32_u(b.getLocal("y"),w*4)),J[w]=!0),b.i64_mul(T,V)}let st="c0",z="c1";for(let I=0;I<s*2-1;I++){for(let w=Math.max(0,I-s+1);w<=I&&w<s;w++){const T=I-w;j.addCode(b.setLocal(st,b.i64_add(b.i64_and(b.getLocal(st),b.i64_const(4294967295)),it(w,T)))),j.addCode(b.setLocal(z,b.i64_add(b.getLocal(z),b.i64_shr_u(b.getLocal(st),b.i64_const(32)))))}j.addCode(b.i64_store32(b.getLocal("r"),I*4,b.getLocal(st))),[st,z]=[z,st],j.addCode(b.setLocal(z,b.i64_shr_u(b.getLocal(st),b.i64_const(32))))}j.addCode(b.i64_store32(b.getLocal("r"),s*4*2-4,b.getLocal(st)))}function v(){const j=t.addFunction(r+"_square");j.addParam("x","i32"),j.addParam("r","i32"),j.addLocal("c0","i64"),j.addLocal("c1","i64"),j.addLocal("c0_old","i64"),j.addLocal("c1_old","i64");for(let w=0;w<s;w++)j.addLocal("x"+w,"i64");const b=j.getCodeBuilder(),B=[];function J(w,T){let V,Y;return B[w]?V=b.getLocal("x"+w):(V=b.teeLocal("x"+w,b.i64_load32_u(b.getLocal("x"),w*4)),B[w]=!0),B[T]?Y=b.getLocal("x"+T):(Y=b.teeLocal("x"+T,b.i64_load32_u(b.getLocal("x"),T*4)),B[T]=!0),b.i64_mul(V,Y)}let it="c0",st="c1",z="c0_old",I="c1_old";for(let w=0;w<s*2-1;w++){j.addCode(b.setLocal(it,b.i64_const(0)),b.setLocal(st,b.i64_const(0)));for(let T=Math.max(0,w-s+1);T<w+1>>1&&T<s;T++){const V=w-T;j.addCode(b.setLocal(it,b.i64_add(b.i64_and(b.getLocal(it),b.i64_const(4294967295)),J(T,V)))),j.addCode(b.setLocal(st,b.i64_add(b.getLocal(st),b.i64_shr_u(b.getLocal(it),b.i64_const(32)))))}j.addCode(b.setLocal(it,b.i64_shl(b.i64_and(b.getLocal(it),b.i64_const(4294967295)),b.i64_const(1)))),j.addCode(b.setLocal(st,b.i64_add(b.i64_shl(b.getLocal(st),b.i64_const(1)),b.i64_shr_u(b.getLocal(it),b.i64_const(32))))),w%2==0&&(j.addCode(b.setLocal(it,b.i64_add(b.i64_and(b.getLocal(it),b.i64_const(4294967295)),J(w>>1,w>>1)))),j.addCode(b.setLocal(st,b.i64_add(b.getLocal(st),b.i64_shr_u(b.getLocal(it),b.i64_const(32)))))),w>0&&(j.addCode(b.setLocal(it,b.i64_add(b.i64_and(b.getLocal(it),b.i64_const(4294967295)),b.i64_and(b.getLocal(z),b.i64_const(4294967295))))),j.addCode(b.setLocal(st,b.i64_add(b.i64_add(b.getLocal(st),b.i64_shr_u(b.getLocal(it),b.i64_const(32))),b.getLocal(I))))),j.addCode(b.i64_store32(b.getLocal("r"),w*4,b.getLocal(it))),j.addCode(b.setLocal(z,b.getLocal(st)),b.setLocal(I,b.i64_shr_u(b.getLocal(z),b.i64_const(32))))}j.addCode(b.i64_store32(b.getLocal("r"),s*4*2-4,b.getLocal(z)))}function A(){const j=t.addFunction(r+"_squareOld");j.addParam("x","i32"),j.addParam("r","i32");const b=j.getCodeBuilder();j.addCode(b.call(r+"_mul",b.getLocal("x"),b.getLocal("x"),b.getLocal("r")))}function x(){const j=t.addFunction(r+"__mul1");j.addParam("px","i32"),j.addParam("y","i64"),j.addParam("pr","i32"),j.addLocal("c","i64");const b=j.getCodeBuilder();j.addCode(b.setLocal("c",b.i64_mul(b.i64_load32_u(b.getLocal("px"),0,0),b.getLocal("y")))),j.addCode(b.i64_store32(b.getLocal("pr"),0,0,b.getLocal("c")));for(let B=1;B<s;B++)j.addCode(b.setLocal("c",b.i64_add(b.i64_mul(b.i64_load32_u(b.getLocal("px"),4*B,0),b.getLocal("y")),b.i64_shr_u(b.getLocal("c"),b.i64_const(32))))),j.addCode(b.i64_store32(b.getLocal("pr"),B*4,0,b.getLocal("c")))}function P(){const j=t.addFunction(r+"__add1");j.addParam("x","i32"),j.addParam("y","i64"),j.addLocal("c","i64"),j.addLocal("px","i32");const b=j.getCodeBuilder();j.addCode(b.setLocal("px",b.getLocal("x"))),j.addCode(b.setLocal("c",b.i64_add(b.i64_load32_u(b.getLocal("px"),0,0),b.getLocal("y")))),j.addCode(b.i64_store32(b.getLocal("px"),0,0,b.getLocal("c"))),j.addCode(b.setLocal("c",b.i64_shr_u(b.getLocal("c"),b.i64_const(32)))),j.addCode(b.block(b.loop(b.br_if(1,b.i64_eqz(b.getLocal("c"))),b.setLocal("px",b.i32_add(b.getLocal("px"),b.i32_const(4))),b.setLocal("c",b.i64_add(b.i64_load32_u(b.getLocal("px"),0,0),b.getLocal("c"))),b.i64_store32(b.getLocal("px"),0,0,b.getLocal("c")),b.setLocal("c",b.i64_shr_u(b.getLocal("c"),b.i64_const(32))),b.br(0))))}function W(){x(),P();const j=t.addFunction(r+"_div");j.addParam("x","i32"),j.addParam("y","i32"),j.addParam("c","i32"),j.addParam("r","i32"),j.addLocal("rr","i32"),j.addLocal("cc","i32"),j.addLocal("eX","i32"),j.addLocal("eY","i32"),j.addLocal("sy","i64"),j.addLocal("sx","i64"),j.addLocal("ec","i32");const b=j.getCodeBuilder(),B=b.i32_const(t.alloc(o)),J=b.i32_const(t.alloc(o)),it=b.i32_const(t.alloc(o)),st=b.getLocal("cc"),z=b.getLocal("rr"),I=t.alloc(o*2),w=b.i32_const(I),T=b.i32_const(I+o);j.addCode(b.if(b.getLocal("c"),b.setLocal("cc",b.getLocal("c")),b.setLocal("cc",J))),j.addCode(b.if(b.getLocal("r"),b.setLocal("rr",b.getLocal("r")),b.setLocal("rr",it))),j.addCode(b.call(r+"_copy",b.getLocal("x"),z)),j.addCode(b.call(r+"_copy",b.getLocal("y"),B)),j.addCode(b.call(r+"_zero",st)),j.addCode(b.call(r+"_zero",w)),j.addCode(b.setLocal("eX",b.i32_const(o-1))),j.addCode(b.setLocal("eY",b.i32_const(o-1))),j.addCode(b.block(b.loop(b.br_if(1,b.i32_or(b.i32_load8_u(b.i32_add(B,b.getLocal("eY")),0,0),b.i32_eq(b.getLocal("eY"),b.i32_const(3)))),b.setLocal("eY",b.i32_sub(b.getLocal("eY"),b.i32_const(1))),b.br(0)))),j.addCode(b.setLocal("sy",b.i64_add(b.i64_load32_u(b.i32_sub(b.i32_add(B,b.getLocal("eY")),b.i32_const(3)),0,0),b.i64_const(1)))),j.addCode(b.if(b.i64_eq(b.getLocal("sy"),b.i64_const(1)),b.drop(b.i64_div_u(b.i64_const(0),b.i64_const(0))))),j.addCode(b.block(b.loop(b.block(b.loop(b.br_if(1,b.i32_or(b.i32_load8_u(b.i32_add(z,b.getLocal("eX")),0,0),b.i32_eq(b.getLocal("eX"),b.i32_const(7)))),b.setLocal("eX",b.i32_sub(b.getLocal("eX"),b.i32_const(1))),b.br(0))),b.setLocal("sx",b.i64_load(b.i32_sub(b.i32_add(z,b.getLocal("eX")),b.i32_const(7)),0,0)),b.setLocal("sx",b.i64_div_u(b.getLocal("sx"),b.getLocal("sy"))),b.setLocal("ec",b.i32_sub(b.i32_sub(b.getLocal("eX"),b.getLocal("eY")),b.i32_const(4))),b.block(b.loop(b.br_if(1,b.i32_and(b.i64_eqz(b.i64_and(b.getLocal("sx"),b.i64_const("0xFFFFFFFF00000000"))),b.i32_ge_s(b.getLocal("ec"),b.i32_const(0)))),b.setLocal("sx",b.i64_shr_u(b.getLocal("sx"),b.i64_const(8))),b.setLocal("ec",b.i32_add(b.getLocal("ec"),b.i32_const(1))),b.br(0))),b.if(b.i64_eqz(b.getLocal("sx")),[...b.br_if(2,b.i32_eqz(b.call(r+"_gte",z,B))),...b.setLocal("sx",b.i64_const(1)),...b.setLocal("ec",b.i32_const(0))]),b.call(r+"__mul1",B,b.getLocal("sx"),T),b.drop(b.call(r+"_sub",z,b.i32_sub(T,b.getLocal("ec")),z)),b.call(r+"__add1",b.i32_add(st,b.getLocal("ec")),b.getLocal("sx")),b.br(0))))}function K(){const j=t.addFunction(r+"_inverseMod");j.addParam("px","i32"),j.addParam("pm","i32"),j.addParam("pr","i32"),j.addLocal("t","i32"),j.addLocal("newt","i32"),j.addLocal("r","i32"),j.addLocal("qq","i32"),j.addLocal("qr","i32"),j.addLocal("newr","i32"),j.addLocal("swp","i32"),j.addLocal("x","i32"),j.addLocal("signt","i32"),j.addLocal("signnewt","i32"),j.addLocal("signx","i32");const b=j.getCodeBuilder(),B=b.i32_const(t.alloc(o)),J=b.i32_const(t.alloc(o)),it=b.i32_const(t.alloc(o)),st=b.i32_const(t.alloc(o)),z=b.i32_const(t.alloc(o)),I=b.i32_const(t.alloc(o)),w=b.i32_const(t.alloc(o*2)),T=b.i32_const(t.alloc(o));j.addCode(b.setLocal("t",B),b.call(r+"_zero",B),b.setLocal("signt",b.i32_const(0))),j.addCode(b.setLocal("r",J),b.call(r+"_copy",b.getLocal("pm"),J)),j.addCode(b.setLocal("newt",it),b.call(r+"_one",it),b.setLocal("signnewt",b.i32_const(0))),j.addCode(b.setLocal("newr",st),b.call(r+"_copy",b.getLocal("px"),st)),j.addCode(b.setLocal("qq",z)),j.addCode(b.setLocal("qr",I)),j.addCode(b.setLocal("x",T)),j.addCode(b.block(b.loop(b.br_if(1,b.call(r+"_isZero",b.getLocal("newr"))),b.call(r+"_div",b.getLocal("r"),b.getLocal("newr"),b.getLocal("qq"),b.getLocal("qr")),b.call(r+"_mul",b.getLocal("qq"),b.getLocal("newt"),w),b.if(b.getLocal("signt"),b.if(b.getLocal("signnewt"),b.if(b.call(r+"_gte",w,b.getLocal("t")),[...b.drop(b.call(r+"_sub",w,b.getLocal("t"),b.getLocal("x"))),...b.setLocal("signx",b.i32_const(0))],[...b.drop(b.call(r+"_sub",b.getLocal("t"),w,b.getLocal("x"))),...b.setLocal("signx",b.i32_const(1))]),[...b.drop(b.call(r+"_add",w,b.getLocal("t"),b.getLocal("x"))),...b.setLocal("signx",b.i32_const(1))]),b.if(b.getLocal("signnewt"),[...b.drop(b.call(r+"_add",w,b.getLocal("t"),b.getLocal("x"))),...b.setLocal("signx",b.i32_const(0))],b.if(b.call(r+"_gte",b.getLocal("t"),w),[...b.drop(b.call(r+"_sub",b.getLocal("t"),w,b.getLocal("x"))),...b.setLocal("signx",b.i32_const(0))],[...b.drop(b.call(r+"_sub",w,b.getLocal("t"),b.getLocal("x"))),...b.setLocal("signx",b.i32_const(1))]))),b.setLocal("swp",b.getLocal("t")),b.setLocal("t",b.getLocal("newt")),b.setLocal("newt",b.getLocal("x")),b.setLocal("x",b.getLocal("swp")),b.setLocal("signt",b.getLocal("signnewt")),b.setLocal("signnewt",b.getLocal("signx")),b.setLocal("swp",b.getLocal("r")),b.setLocal("r",b.getLocal("newr")),b.setLocal("newr",b.getLocal("qr")),b.setLocal("qr",b.getLocal("swp")),b.br(0)))),j.addCode(b.if(b.getLocal("signt"),b.drop(b.call(r+"_sub",b.getLocal("pm"),b.getLocal("t"),b.getLocal("pr"))),b.call(r+"_copy",b.getLocal("t"),b.getLocal("pr"))))}return a(),l(),u(),d(),h(),m(),p(),E(),C(),v(),A(),W(),K(),t.exportFunction(r+"_copy"),t.exportFunction(r+"_zero"),t.exportFunction(r+"_one"),t.exportFunction(r+"_isZero"),t.exportFunction(r+"_eq"),t.exportFunction(r+"_gte"),t.exportFunction(r+"_add"),t.exportFunction(r+"_sub"),t.exportFunction(r+"_mul"),t.exportFunction(r+"_square"),t.exportFunction(r+"_squareOld"),t.exportFunction(r+"_div"),t.exportFunction(r+"_inverseMod"),r},s3=function(t,e,i,r,s,o,a){const l=t.addFunction(e);l.addParam("base","i32"),l.addParam("scalar","i32"),l.addParam("scalarLength","i32"),l.addParam("r","i32"),l.addLocal("i","i32"),l.addLocal("b","i32");const d=l.getCodeBuilder(),u=d.i32_const(t.alloc(i));l.addCode(d.if(d.i32_eqz(d.getLocal("scalarLength")),[...d.call(a,d.getLocal("r")),...d.ret([])])),l.addCode(d.call(o,d.getLocal("base"),u)),l.addCode(d.call(a,d.getLocal("r"))),l.addCode(d.setLocal("i",d.getLocal("scalarLength"))),l.addCode(d.block(d.loop(d.setLocal("i",d.i32_sub(d.getLocal("i"),d.i32_const(1))),d.setLocal("b",d.i32_load8_u(d.i32_add(d.getLocal("scalar"),d.getLocal("i")))),...h(),d.br_if(1,d.i32_eqz(d.getLocal("i"))),d.br(0))));function h(){const m=[];for(let p=0;p<8;p++)m.push(...d.call(s,d.getLocal("r"),d.getLocal("r")),...d.if(d.i32_ge_u(d.getLocal("b"),d.i32_const(128>>p)),[...d.setLocal("b",d.i32_sub(d.getLocal("b"),d.i32_const(128>>p))),...d.call(r,d.getLocal("r"),u,d.getLocal("r"))]));return m}},o3=nJ;function nJ(n,t){const e=n.modules[t].n64*8,i=n.addFunction(t+"_batchInverse");i.addParam("pIn","i32"),i.addParam("inStep","i32"),i.addParam("n","i32"),i.addParam("pOut","i32"),i.addParam("outStep","i32"),i.addLocal("itAux","i32"),i.addLocal("itIn","i32"),i.addLocal("itOut","i32"),i.addLocal("i","i32");const r=i.getCodeBuilder(),s=r.i32_const(n.alloc(e));i.addCode(r.setLocal("itAux",r.i32_load(r.i32_const(0))),r.i32_store(r.i32_const(0),r.i32_add(r.getLocal("itAux"),r.i32_mul(r.i32_add(r.getLocal("n"),r.i32_const(1)),r.i32_const(e))))),i.addCode(r.call(t+"_one",r.getLocal("itAux")),r.setLocal("itIn",r.getLocal("pIn")),r.setLocal("itAux",r.i32_add(r.getLocal("itAux"),r.i32_const(e))),r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("n"))),r.if(r.call(t+"_isZero",r.getLocal("itIn")),r.call(t+"_copy",r.i32_sub(r.getLocal("itAux"),r.i32_const(e)),r.getLocal("itAux")),r.call(t+"_mul",r.getLocal("itIn"),r.i32_sub(r.getLocal("itAux"),r.i32_const(e)),r.getLocal("itAux"))),r.setLocal("itIn",r.i32_add(r.getLocal("itIn"),r.getLocal("inStep"))),r.setLocal("itAux",r.i32_add(r.getLocal("itAux"),r.i32_const(e))),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))),r.setLocal("itIn",r.i32_sub(r.getLocal("itIn"),r.getLocal("inStep"))),r.setLocal("itAux",r.i32_sub(r.getLocal("itAux"),r.i32_const(e))),r.setLocal("itOut",r.i32_add(r.getLocal("pOut"),r.i32_mul(r.i32_sub(r.getLocal("n"),r.i32_const(1)),r.getLocal("outStep")))),r.call(t+"_inverse",r.getLocal("itAux"),r.getLocal("itAux")),r.block(r.loop(r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.if(r.call(t+"_isZero",r.getLocal("itIn")),[...r.call(t+"_copy",r.getLocal("itAux"),r.i32_sub(r.getLocal("itAux"),r.i32_const(e))),...r.call(t+"_zero",r.getLocal("itOut"))],[...r.call(t+"_copy",r.i32_sub(r.getLocal("itAux"),r.i32_const(e)),s),...r.call(t+"_mul",r.getLocal("itAux"),r.getLocal("itIn"),r.i32_sub(r.getLocal("itAux"),r.i32_const(e))),...r.call(t+"_mul",r.getLocal("itAux"),s,r.getLocal("itOut"))]),r.setLocal("itIn",r.i32_sub(r.getLocal("itIn"),r.getLocal("inStep"))),r.setLocal("itOut",r.i32_sub(r.getLocal("itOut"),r.getLocal("outStep"))),r.setLocal("itAux",r.i32_sub(r.getLocal("itAux"),r.i32_const(e))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),i.addCode(r.i32_store(r.i32_const(0),r.getLocal("itAux")))}var aN=iJ;function iJ(n,t,e,i,r,s){typeof s>"u"&&(i<r?s=!0:s=!1);const o=n.addFunction(t);o.addParam("pIn","i32"),o.addParam("n","i32"),o.addParam("pOut","i32"),o.addLocal("i","i32"),o.addLocal("itIn","i32"),o.addLocal("itOut","i32");const a=o.getCodeBuilder();s?o.addCode(a.setLocal("itIn",a.i32_add(a.getLocal("pIn"),a.i32_mul(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.i32_const(i)))),a.setLocal("itOut",a.i32_add(a.getLocal("pOut"),a.i32_mul(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.i32_const(r)))),a.setLocal("i",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("i"),a.getLocal("n"))),a.call(e,a.getLocal("itIn"),a.getLocal("itOut")),a.setLocal("itIn",a.i32_sub(a.getLocal("itIn"),a.i32_const(i))),a.setLocal("itOut",a.i32_sub(a.getLocal("itOut"),a.i32_const(r))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0)))):o.addCode(a.setLocal("itIn",a.getLocal("pIn")),a.setLocal("itOut",a.getLocal("pOut")),a.setLocal("i",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("i"),a.getLocal("n"))),a.call(e,a.getLocal("itIn"),a.getLocal("itOut")),a.setLocal("itIn",a.i32_add(a.getLocal("itIn"),a.i32_const(i))),a.setLocal("itOut",a.i32_add(a.getLocal("itOut"),a.i32_const(r))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))))}var rJ=sJ;function sJ(n,t,e,i,r,s){typeof s>"u"&&(i<r?s=!0:s=!1);const o=n.addFunction(t);o.addParam("pIn1","i32"),o.addParam("pIn2","i32"),o.addParam("n","i32"),o.addParam("pOut","i32"),o.addLocal("i","i32"),o.addLocal("itIn1","i32"),o.addLocal("itIn2","i32"),o.addLocal("itOut","i32");const a=o.getCodeBuilder();s?o.addCode(a.setLocal("itIn1",a.i32_add(a.getLocal("pIn1"),a.i32_mul(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.i32_const(i)))),a.setLocal("itIn2",a.i32_add(a.getLocal("pIn2"),a.i32_mul(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.i32_const(i)))),a.setLocal("itOut",a.i32_add(a.getLocal("pOut"),a.i32_mul(a.i32_sub(a.getLocal("n"),a.i32_const(1)),a.i32_const(r)))),a.setLocal("i",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("i"),a.getLocal("n"))),a.call(e,a.getLocal("itIn1"),a.getLocal("itIn2"),a.getLocal("itOut")),a.setLocal("itIn1",a.i32_sub(a.getLocal("itIn1"),a.i32_const(i))),a.setLocal("itIn2",a.i32_sub(a.getLocal("itIn2"),a.i32_const(i))),a.setLocal("itOut",a.i32_sub(a.getLocal("itOut"),a.i32_const(r))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0)))):o.addCode(a.setLocal("itIn1",a.getLocal("pIn1")),a.setLocal("itIn2",a.getLocal("pIn2")),a.setLocal("itOut",a.getLocal("pOut")),a.setLocal("i",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("i"),a.getLocal("n"))),a.call(e,a.getLocal("itIn1"),a.getLocal("itIn2"),a.getLocal("itOut")),a.setLocal("itIn1",a.i32_add(a.getLocal("itIn1"),a.i32_const(i))),a.setLocal("itIn2",a.i32_add(a.getLocal("itIn2"),a.i32_const(i))),a.setLocal("itOut",a.i32_add(a.getLocal("itOut"),a.i32_const(r))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))))}var rr={};function cN(n,t){return n===t?0:n>t?1:-1}function a3(n){return n*n}function lN(n){return n%2n!==0n}function c3(n){return n%2n===0n}function fg(n){return n<0n}function oJ(n){return n>0n}function uN(n){return fg(n)?n.toString(2).length-1:n.toString(2).length}function fh(n){return n<0n?-n:n}function Tu(n){return fh(n)===1n}function dN(n,t){for(var e=0n,i=1n,r=t,s=fh(n),o,a,l;s!==0n;)o=r/s,a=e,l=r,e=i,r=s,i=a-o*i,s=l-o*s;if(!Tu(r))throw new Error(n.toString()+" and "+t.toString()+" are not co-prime");return cN(e,0n)===-1&&(e=e+t),fg(n)?-e:e}function fN(n,t,e){if(e===0n)throw new Error("Cannot take modPow with modulus 0");var i=1n,r=n%e;for(fg(t)&&(t=t*-1n,r=dN(r,e));oJ(t);){if(r===0n)return 0n;lN(t)&&(i=i*r%e),t=t/2n,r=a3(r)%e}return i}function aJ(n,t){return n=n>=0n?n:-n,t=t>=0n?t:-t,n===t?0:n>t?1:-1}function xA(n,t){return t===0n?!1:Tu(t)?!0:aJ(t,2n)===0?c3(n):n%t===0n}function cJ(n){var t=fh(n);if(Tu(t))return!1;if(t===2n||t===3n||t===5n)return!0;if(c3(t)||xA(t,3n)||xA(t,5n))return!1;if(t<49n)return!0}function lJ(n){return n-1n}function EA(n,t){for(var e=lJ(n),i=e,r=0,s,o,a;c3(i);)i=i/2n,r++;t:for(o=0;o<t.length;o++)if(!(n<t[o])&&(a=fN(BigInt(t[o]),i,n),!(Tu(a)||a===e))){for(s=r-1;s!=0;s--){if(a=a3(a)%n,Tu(a))return!1;if(a===e)continue t}return!1}return!0}function uJ(n){var t=cJ(n);if(t!==void 0)return t;var e=fh(n),i=uN(e);if(i<=64)return EA(e,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var r=Math.log(2)*Number(i),s=Math.ceil(r),o=[],a=0;a<s;a++)o.push(BigInt(a+2));return EA(e,o)}rr.bitLength=uN;rr.isOdd=lN;rr.isNegative=fg;rr.abs=fh;rr.isUnit=Tu;rr.compare=cN;rr.modInv=dN;rr.modPow=fN;rr.isPrime=uJ;rr.square=a3;const dJ=eJ,ro=Ga,fJ=s3,hJ=o3,iw=aN,rw=rJ,{bitLength:pJ,modInv:sw,modPow:SA,isPrime:LA,isOdd:mJ,square:gJ}=rr;var l3=function(t,e,i,r){const s=BigInt(e),o=Math.floor((pJ(s-1n)-1)/64)+1,a=o*2,l=o*8,d=i||"f1m";if(t.modules[d])return d;const u=dJ(t,o,r),h=t.alloc(l,ro.bigInt2BytesLE(s,l)),m=t.alloc(ro.bigInt2BytesLE(gJ(1n<<BigInt(o*64))%s,l)),p=t.alloc(ro.bigInt2BytesLE((1n<<BigInt(o*64))%s,l)),E=t.alloc(ro.bigInt2BytesLE(0n,l)),C=s-1n,v=C>>1n,A=t.alloc(l,ro.bigInt2BytesLE(v,l)),x=v+1n,P=t.alloc(l,ro.bigInt2BytesLE(x,l));t.modules[d]={pq:h,pR2:m,n64:o,q:s,pOne:p,pZero:E,pePlusOne:P};function W(){const ct=t.addFunction(d+"_one");ct.addParam("pr","i32");const G=ct.getCodeBuilder();ct.addCode(G.call(u+"_copy",G.i32_const(p),G.getLocal("pr")))}function K(){const ct=t.addFunction(d+"_add");ct.addParam("x","i32"),ct.addParam("y","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder();ct.addCode(G.if(G.call(u+"_add",G.getLocal("x"),G.getLocal("y"),G.getLocal("r")),G.drop(G.call(u+"_sub",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))),G.if(G.call(u+"_gte",G.getLocal("r"),G.i32_const(h)),G.drop(G.call(u+"_sub",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))))))}function j(){const ct=t.addFunction(d+"_sub");ct.addParam("x","i32"),ct.addParam("y","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder();ct.addCode(G.if(G.call(u+"_sub",G.getLocal("x"),G.getLocal("y"),G.getLocal("r")),G.drop(G.call(u+"_add",G.getLocal("r"),G.i32_const(h),G.getLocal("r")))))}function b(){const ct=t.addFunction(d+"_neg");ct.addParam("x","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder();ct.addCode(G.call(d+"_sub",G.i32_const(E),G.getLocal("x"),G.getLocal("r")))}function B(){const ct=t.addFunction(d+"_isNegative");ct.addParam("x","i32"),ct.setReturnType("i32");const G=ct.getCodeBuilder(),ft=G.i32_const(t.alloc(l));ct.addCode(G.call(d+"_fromMontgomery",G.getLocal("x"),ft),G.call(u+"_gte",ft,G.i32_const(P)))}function J(){const ct=t.addFunction(d+"_sign");ct.addParam("x","i32"),ct.setReturnType("i32");const G=ct.getCodeBuilder(),ft=G.i32_const(t.alloc(l));ct.addCode(G.if(G.call(u+"_isZero",G.getLocal("x")),G.ret(G.i32_const(0))),G.call(d+"_fromMontgomery",G.getLocal("x"),ft),G.if(G.call(u+"_gte",ft,G.i32_const(P)),G.ret(G.i32_const(-1))),G.ret(G.i32_const(1)))}function it(){const ct=t.alloc(a*a*8),G=t.addFunction(d+"_mReduct");G.addParam("t","i32"),G.addParam("r","i32"),G.addLocal("np32","i64"),G.addLocal("c","i64"),G.addLocal("m","i64");const ft=G.getCodeBuilder(),vt=Number(0x100000000n-sw(s,0x100000000n));G.addCode(ft.setLocal("np32",ft.i64_const(vt)));for(let wt=0;wt<a;wt++){G.addCode(ft.setLocal("c",ft.i64_const(0))),G.addCode(ft.setLocal("m",ft.i64_and(ft.i64_mul(ft.i64_load32_u(ft.getLocal("t"),wt*4),ft.getLocal("np32")),ft.i64_const("0xFFFFFFFF"))));for(let bt=0;bt<a;bt++)G.addCode(ft.setLocal("c",ft.i64_add(ft.i64_add(ft.i64_load32_u(ft.getLocal("t"),(wt+bt)*4),ft.i64_shr_u(ft.getLocal("c"),ft.i64_const(32))),ft.i64_mul(ft.i64_load32_u(ft.i32_const(h),bt*4),ft.getLocal("m"))))),G.addCode(ft.i64_store32(ft.getLocal("t"),(wt+bt)*4,ft.getLocal("c")));G.addCode(ft.i64_store32(ft.i32_const(ct),wt*4,ft.i64_shr_u(ft.getLocal("c"),ft.i64_const(32))))}G.addCode(ft.call(d+"_add",ft.i32_const(ct),ft.i32_add(ft.getLocal("t"),ft.i32_const(a*4)),ft.getLocal("r")))}function st(){const ct=t.addFunction(d+"_mul");ct.addParam("x","i32"),ct.addParam("y","i32"),ct.addParam("r","i32"),ct.addLocal("c0","i64"),ct.addLocal("c1","i64"),ct.addLocal("np32","i64");for(let kt=0;kt<a;kt++)ct.addLocal("x"+kt,"i64"),ct.addLocal("y"+kt,"i64"),ct.addLocal("m"+kt,"i64"),ct.addLocal("q"+kt,"i64");const G=ct.getCodeBuilder(),ft=Number(0x100000000n-sw(s,0x100000000n));ct.addCode(G.setLocal("np32",G.i64_const(ft)));const vt=[],wt=[],bt=[];function Ft(kt,Rt){let Ht,Kt;return vt[kt]?Ht=G.getLocal("x"+kt):(Ht=G.teeLocal("x"+kt,G.i64_load32_u(G.getLocal("x"),kt*4)),vt[kt]=!0),wt[Rt]?Kt=G.getLocal("y"+Rt):(Kt=G.teeLocal("y"+Rt,G.i64_load32_u(G.getLocal("y"),Rt*4)),wt[Rt]=!0),G.i64_mul(Ht,Kt)}function Pt(kt,Rt){let Ht,Kt;return bt[kt]?Ht=G.getLocal("q"+kt):(Ht=G.teeLocal("q"+kt,G.i64_load32_u(G.i32_const(0),h+kt*4)),bt[kt]=!0),Kt=G.getLocal("m"+Rt),G.i64_mul(Ht,Kt)}let Gt="c0",$t="c1";for(let kt=0;kt<a*2-1;kt++){for(let Rt=Math.max(0,kt-a+1);Rt<=kt&&Rt<a;Rt++){const Ht=kt-Rt;ct.addCode(G.setLocal(Gt,G.i64_add(G.i64_and(G.getLocal(Gt),G.i64_const(4294967295)),Ft(Rt,Ht)))),ct.addCode(G.setLocal($t,G.i64_add(G.getLocal($t),G.i64_shr_u(G.getLocal(Gt),G.i64_const(32)))))}for(let Rt=Math.max(1,kt-a+1);Rt<=kt&&Rt<a;Rt++){const Ht=kt-Rt;ct.addCode(G.setLocal(Gt,G.i64_add(G.i64_and(G.getLocal(Gt),G.i64_const(4294967295)),Pt(Rt,Ht)))),ct.addCode(G.setLocal($t,G.i64_add(G.getLocal($t),G.i64_shr_u(G.getLocal(Gt),G.i64_const(32)))))}kt<a&&(ct.addCode(G.setLocal("m"+kt,G.i64_and(G.i64_mul(G.i64_and(G.getLocal(Gt),G.i64_const(4294967295)),G.getLocal("np32")),G.i64_const("0xFFFFFFFF")))),ct.addCode(G.setLocal(Gt,G.i64_add(G.i64_and(G.getLocal(Gt),G.i64_const(4294967295)),Pt(0,kt)))),ct.addCode(G.setLocal($t,G.i64_add(G.getLocal($t),G.i64_shr_u(G.getLocal(Gt),G.i64_const(32)))))),kt>=a&&ct.addCode(G.i64_store32(G.getLocal("r"),(kt-a)*4,G.getLocal(Gt))),[Gt,$t]=[$t,Gt],ct.addCode(G.setLocal($t,G.i64_shr_u(G.getLocal(Gt),G.i64_const(32))))}ct.addCode(G.i64_store32(G.getLocal("r"),a*4-4,G.getLocal(Gt))),ct.addCode(G.if(G.i32_wrap_i64(G.getLocal($t)),G.drop(G.call(u+"_sub",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))),G.if(G.call(u+"_gte",G.getLocal("r"),G.i32_const(h)),G.drop(G.call(u+"_sub",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))))))}function z(){const ct=t.addFunction(d+"_square");ct.addParam("x","i32"),ct.addParam("r","i32"),ct.addLocal("c0","i64"),ct.addLocal("c1","i64"),ct.addLocal("c0_old","i64"),ct.addLocal("c1_old","i64"),ct.addLocal("np32","i64");for(let Rt=0;Rt<a;Rt++)ct.addLocal("x"+Rt,"i64"),ct.addLocal("m"+Rt,"i64"),ct.addLocal("q"+Rt,"i64");const G=ct.getCodeBuilder(),ft=Number(0x100000000n-sw(s,0x100000000n));ct.addCode(G.setLocal("np32",G.i64_const(ft)));const vt=[],wt=[];function bt(Rt,Ht){let Kt,se;return vt[Rt]?Kt=G.getLocal("x"+Rt):(Kt=G.teeLocal("x"+Rt,G.i64_load32_u(G.getLocal("x"),Rt*4)),vt[Rt]=!0),vt[Ht]?se=G.getLocal("x"+Ht):(se=G.teeLocal("x"+Ht,G.i64_load32_u(G.getLocal("x"),Ht*4)),vt[Ht]=!0),G.i64_mul(Kt,se)}function Ft(Rt,Ht){let Kt,se;return wt[Rt]?Kt=G.getLocal("q"+Rt):(Kt=G.teeLocal("q"+Rt,G.i64_load32_u(G.i32_const(0),h+Rt*4)),wt[Rt]=!0),se=G.getLocal("m"+Ht),G.i64_mul(Kt,se)}let Pt="c0",Gt="c1",$t="c0_old",kt="c1_old";for(let Rt=0;Rt<a*2-1;Rt++){ct.addCode(G.setLocal(Pt,G.i64_const(0)),G.setLocal(Gt,G.i64_const(0)));for(let Ht=Math.max(0,Rt-a+1);Ht<Rt+1>>1&&Ht<a;Ht++){const Kt=Rt-Ht;ct.addCode(G.setLocal(Pt,G.i64_add(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),bt(Ht,Kt)))),ct.addCode(G.setLocal(Gt,G.i64_add(G.getLocal(Gt),G.i64_shr_u(G.getLocal(Pt),G.i64_const(32)))))}ct.addCode(G.setLocal(Pt,G.i64_shl(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),G.i64_const(1)))),ct.addCode(G.setLocal(Gt,G.i64_add(G.i64_shl(G.getLocal(Gt),G.i64_const(1)),G.i64_shr_u(G.getLocal(Pt),G.i64_const(32))))),Rt%2==0&&(ct.addCode(G.setLocal(Pt,G.i64_add(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),bt(Rt>>1,Rt>>1)))),ct.addCode(G.setLocal(Gt,G.i64_add(G.getLocal(Gt),G.i64_shr_u(G.getLocal(Pt),G.i64_const(32)))))),Rt>0&&(ct.addCode(G.setLocal(Pt,G.i64_add(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),G.i64_and(G.getLocal($t),G.i64_const(4294967295))))),ct.addCode(G.setLocal(Gt,G.i64_add(G.i64_add(G.getLocal(Gt),G.i64_shr_u(G.getLocal(Pt),G.i64_const(32))),G.getLocal(kt)))));for(let Ht=Math.max(1,Rt-a+1);Ht<=Rt&&Ht<a;Ht++){const Kt=Rt-Ht;ct.addCode(G.setLocal(Pt,G.i64_add(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),Ft(Ht,Kt)))),ct.addCode(G.setLocal(Gt,G.i64_add(G.getLocal(Gt),G.i64_shr_u(G.getLocal(Pt),G.i64_const(32)))))}Rt<a&&(ct.addCode(G.setLocal("m"+Rt,G.i64_and(G.i64_mul(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),G.getLocal("np32")),G.i64_const("0xFFFFFFFF")))),ct.addCode(G.setLocal(Pt,G.i64_add(G.i64_and(G.getLocal(Pt),G.i64_const(4294967295)),Ft(0,Rt)))),ct.addCode(G.setLocal(Gt,G.i64_add(G.getLocal(Gt),G.i64_shr_u(G.getLocal(Pt),G.i64_const(32)))))),Rt>=a&&ct.addCode(G.i64_store32(G.getLocal("r"),(Rt-a)*4,G.getLocal(Pt))),ct.addCode(G.setLocal($t,G.getLocal(Gt)),G.setLocal(kt,G.i64_shr_u(G.getLocal($t),G.i64_const(32))))}ct.addCode(G.i64_store32(G.getLocal("r"),a*4-4,G.getLocal($t))),ct.addCode(G.if(G.i32_wrap_i64(G.getLocal(kt)),G.drop(G.call(u+"_sub",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))),G.if(G.call(u+"_gte",G.getLocal("r"),G.i32_const(h)),G.drop(G.call(u+"_sub",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))))))}function I(){const ct=t.addFunction(d+"_squareOld");ct.addParam("x","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder();ct.addCode(G.call(d+"_mul",G.getLocal("x"),G.getLocal("x"),G.getLocal("r")))}function w(){const ct=t.addFunction(d+"_toMontgomery");ct.addParam("x","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder();ct.addCode(G.call(d+"_mul",G.getLocal("x"),G.i32_const(m),G.getLocal("r")))}function T(){const ct=t.alloc(l*2),G=t.addFunction(d+"_fromMontgomery");G.addParam("x","i32"),G.addParam("r","i32");const ft=G.getCodeBuilder();G.addCode(ft.call(u+"_copy",ft.getLocal("x"),ft.i32_const(ct))),G.addCode(ft.call(u+"_zero",ft.i32_const(ct+l))),G.addCode(ft.call(d+"_mReduct",ft.i32_const(ct),ft.getLocal("r")))}function V(){const ct=t.addFunction(d+"_inverse");ct.addParam("x","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder();ct.addCode(G.call(d+"_fromMontgomery",G.getLocal("x"),G.getLocal("r"))),ct.addCode(G.call(u+"_inverseMod",G.getLocal("r"),G.i32_const(h),G.getLocal("r"))),ct.addCode(G.call(d+"_toMontgomery",G.getLocal("r"),G.getLocal("r")))}let Y=2n;if(LA(s))for(;SA(Y,v,s)!==C;)Y=Y+1n;let Q=0,$=C;for(;!mJ($)&&$!==0n;)Q++,$=$>>1n;const F=t.alloc(l,ro.bigInt2BytesLE($,l)),R=SA(Y,$,s),_=t.alloc(ro.bigInt2BytesLE((R<<BigInt(o*64))%s,l)),k=$+1n>>1n,H=t.alloc(l,ro.bigInt2BytesLE(k,l));function L(){const ct=t.addFunction(d+"_sqrt");ct.addParam("n","i32"),ct.addParam("r","i32"),ct.addLocal("m","i32"),ct.addLocal("i","i32"),ct.addLocal("j","i32");const G=ct.getCodeBuilder(),ft=G.i32_const(p),vt=G.i32_const(t.alloc(l)),wt=G.i32_const(t.alloc(l)),bt=G.i32_const(t.alloc(l)),Ft=G.i32_const(t.alloc(l)),Pt=G.i32_const(t.alloc(l));ct.addCode(G.if(G.call(d+"_isZero",G.getLocal("n")),G.ret(G.call(d+"_zero",G.getLocal("r")))),G.setLocal("m",G.i32_const(Q)),G.call(d+"_copy",G.i32_const(_),vt),G.call(d+"_exp",G.getLocal("n"),G.i32_const(F),G.i32_const(l),wt),G.call(d+"_exp",G.getLocal("n"),G.i32_const(H),G.i32_const(l),bt),G.block(G.loop(G.br_if(1,G.call(d+"_eq",wt,ft)),G.call(d+"_square",wt,Ft),G.setLocal("i",G.i32_const(1)),G.block(G.loop(G.br_if(1,G.call(d+"_eq",Ft,ft)),G.call(d+"_square",Ft,Ft),G.setLocal("i",G.i32_add(G.getLocal("i"),G.i32_const(1))),G.br(0))),G.call(d+"_copy",vt,Pt),G.setLocal("j",G.i32_sub(G.i32_sub(G.getLocal("m"),G.getLocal("i")),G.i32_const(1))),G.block(G.loop(G.br_if(1,G.i32_eqz(G.getLocal("j"))),G.call(d+"_square",Pt,Pt),G.setLocal("j",G.i32_sub(G.getLocal("j"),G.i32_const(1))),G.br(0))),G.setLocal("m",G.getLocal("i")),G.call(d+"_square",Pt,vt),G.call(d+"_mul",wt,vt,wt),G.call(d+"_mul",bt,Pt,bt),G.br(0))),G.if(G.call(d+"_isNegative",bt),G.call(d+"_neg",bt,G.getLocal("r")),G.call(d+"_copy",bt,G.getLocal("r"))))}function g(){const ct=t.addFunction(d+"_isSquare");ct.addParam("n","i32"),ct.setReturnType("i32");const G=ct.getCodeBuilder(),ft=G.i32_const(p),vt=G.i32_const(t.alloc(l));ct.addCode(G.if(G.call(d+"_isZero",G.getLocal("n")),G.ret(G.i32_const(1))),G.call(d+"_exp",G.getLocal("n"),G.i32_const(A),G.i32_const(l),vt),G.call(d+"_eq",vt,ft))}function D(){const ct=t.addFunction(d+"_load");ct.addParam("scalar","i32"),ct.addParam("scalarLen","i32"),ct.addParam("r","i32"),ct.addLocal("p","i32"),ct.addLocal("l","i32"),ct.addLocal("i","i32"),ct.addLocal("j","i32");const G=ct.getCodeBuilder(),ft=G.i32_const(t.alloc(l)),vt=t.alloc(l),wt=G.i32_const(vt);ct.addCode(G.call(u+"_zero",G.getLocal("r")),G.setLocal("i",G.i32_const(l)),G.setLocal("p",G.getLocal("scalar")),G.block(G.loop(G.br_if(1,G.i32_gt_u(G.getLocal("i"),G.getLocal("scalarLen"))),G.if(G.i32_eq(G.getLocal("i"),G.i32_const(l)),G.call(d+"_one",ft),G.call(d+"_mul",ft,G.i32_const(m),ft)),G.call(d+"_mul",G.getLocal("p"),ft,wt),G.call(d+"_add",G.getLocal("r"),wt,G.getLocal("r")),G.setLocal("p",G.i32_add(G.getLocal("p"),G.i32_const(l))),G.setLocal("i",G.i32_add(G.getLocal("i"),G.i32_const(l))),G.br(0))),G.setLocal("l",G.i32_rem_u(G.getLocal("scalarLen"),G.i32_const(l))),G.if(G.i32_eqz(G.getLocal("l")),G.ret([])),G.call(u+"_zero",wt),G.setLocal("j",G.i32_const(0)),G.block(G.loop(G.br_if(1,G.i32_eq(G.getLocal("j"),G.getLocal("l"))),G.i32_store8(G.getLocal("j"),vt,G.i32_load8_u(G.getLocal("p"))),G.setLocal("p",G.i32_add(G.getLocal("p"),G.i32_const(1))),G.setLocal("j",G.i32_add(G.getLocal("j"),G.i32_const(1))),G.br(0))),G.if(G.i32_eq(G.getLocal("i"),G.i32_const(l)),G.call(d+"_one",ft),G.call(d+"_mul",ft,G.i32_const(m),ft)),G.call(d+"_mul",wt,ft,wt),G.call(d+"_add",G.getLocal("r"),wt,G.getLocal("r")))}function S(){const ct=t.addFunction(d+"_timesScalar");ct.addParam("x","i32"),ct.addParam("scalar","i32"),ct.addParam("scalarLen","i32"),ct.addParam("r","i32");const G=ct.getCodeBuilder(),ft=G.i32_const(t.alloc(l));ct.addCode(G.call(d+"_load",G.getLocal("scalar"),G.getLocal("scalarLen"),ft),G.call(d+"_toMontgomery",ft,ft),G.call(d+"_mul",G.getLocal("x"),ft,G.getLocal("r")))}function lt(){const ct=t.addFunction(d+"_isOne");ct.addParam("x","i32"),ct.setReturnType("i32");const G=ct.getCodeBuilder();ct.addCode(G.ret(G.call(u+"_eq",G.getLocal("x"),G.i32_const(p))))}return t.exportFunction(u+"_copy",d+"_copy"),t.exportFunction(u+"_zero",d+"_zero"),t.exportFunction(u+"_isZero",d+"_isZero"),t.exportFunction(u+"_eq",d+"_eq"),lt(),K(),j(),b(),it(),st(),z(),I(),w(),T(),B(),J(),V(),W(),D(),S(),hJ(t,d),iw(t,d+"_batchToMontgomery",d+"_toMontgomery",l,l),iw(t,d+"_batchFromMontgomery",d+"_fromMontgomery",l,l),iw(t,d+"_batchNeg",d+"_neg",l,l),rw(t,d+"_batchAdd",d+"_add",l,l),rw(t,d+"_batchSub",d+"_sub",l,l),rw(t,d+"_batchMul",d+"_mul",l,l),t.exportFunction(d+"_add"),t.exportFunction(d+"_sub"),t.exportFunction(d+"_neg"),t.exportFunction(d+"_isNegative"),t.exportFunction(d+"_isOne"),t.exportFunction(d+"_sign"),t.exportFunction(d+"_mReduct"),t.exportFunction(d+"_mul"),t.exportFunction(d+"_square"),t.exportFunction(d+"_squareOld"),t.exportFunction(d+"_fromMontgomery"),t.exportFunction(d+"_toMontgomery"),t.exportFunction(d+"_inverse"),t.exportFunction(d+"_one"),t.exportFunction(d+"_load"),t.exportFunction(d+"_timesScalar"),fJ(t,d+"_exp",l,d+"_mul",d+"_square",u+"_copy",d+"_one"),t.exportFunction(d+"_exp"),t.exportFunction(d+"_batchInverse"),LA(s)&&(L(),g(),t.exportFunction(d+"_sqrt"),t.exportFunction(d+"_isSquare")),t.exportFunction(d+"_batchToMontgomery"),t.exportFunction(d+"_batchFromMontgomery"),d};const yJ=l3,{bitLength:wJ}=rr;var hN=function(t,e,i,r,s){const o=BigInt(e),a=Math.floor((wJ(o-1n)-1)/64)+1,l=a*8,d=i||"f1";if(t.modules[d])return d;t.modules[d]={n64:a};const u=s||"int",h=yJ(t,o,r,u),m=t.modules[h].pR2,p=t.modules[h].pq,E=t.modules[h].pePlusOne;function C(){const P=t.alloc(l),W=t.addFunction(d+"_mul");W.addParam("x","i32"),W.addParam("y","i32"),W.addParam("r","i32");const K=W.getCodeBuilder();W.addCode(K.call(h+"_mul",K.getLocal("x"),K.getLocal("y"),K.i32_const(P))),W.addCode(K.call(h+"_mul",K.i32_const(P),K.i32_const(m),K.getLocal("r")))}function v(){const P=t.addFunction(d+"_square");P.addParam("x","i32"),P.addParam("r","i32");const W=P.getCodeBuilder();P.addCode(W.call(d+"_mul",W.getLocal("x"),W.getLocal("x"),W.getLocal("r")))}function A(){const P=t.addFunction(d+"_inverse");P.addParam("x","i32"),P.addParam("r","i32");const W=P.getCodeBuilder();P.addCode(W.call(u+"_inverseMod",W.getLocal("x"),W.i32_const(p),W.getLocal("r")))}function x(){const P=t.addFunction(d+"_isNegative");P.addParam("x","i32"),P.setReturnType("i32");const W=P.getCodeBuilder();P.addCode(W.call(u+"_gte",W.getLocal("x"),W.i32_const(E)))}return C(),v(),A(),x(),t.exportFunction(h+"_add",d+"_add"),t.exportFunction(h+"_sub",d+"_sub"),t.exportFunction(h+"_neg",d+"_neg"),t.exportFunction(d+"_mul"),t.exportFunction(d+"_square"),t.exportFunction(d+"_inverse"),t.exportFunction(d+"_isNegative"),t.exportFunction(h+"_copy",d+"_copy"),t.exportFunction(h+"_zero",d+"_zero"),t.exportFunction(h+"_one",d+"_one"),t.exportFunction(h+"_isZero",d+"_isZero"),t.exportFunction(h+"_eq",d+"_eq"),d};const _J=s3,bJ=o3,ow=Ga;var pN=function(t,e,i,r){if(t.modules[i])return i;const s=t.modules[r].n64*8,o=t.modules[r].q;t.modules[i]={n64:t.modules[r].n64*2};function a(){const z=t.addFunction(i+"_add");z.addParam("x","i32"),z.addParam("y","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("y"),Y=I.i32_add(I.getLocal("y"),I.i32_const(s)),Q=I.getLocal("r"),$=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_add",w,V,Q),I.call(r+"_add",T,Y,$))}function l(){const z=t.addFunction(i+"_timesScalar");z.addParam("x","i32"),z.addParam("scalar","i32"),z.addParam("scalarLen","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_timesScalar",w,I.getLocal("scalar"),I.getLocal("scalarLen"),V),I.call(r+"_timesScalar",T,I.getLocal("scalar"),I.getLocal("scalarLen"),Y))}function d(){const z=t.addFunction(i+"_sub");z.addParam("x","i32"),z.addParam("y","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("y"),Y=I.i32_add(I.getLocal("y"),I.i32_const(s)),Q=I.getLocal("r"),$=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_sub",w,V,Q),I.call(r+"_sub",T,Y,$))}function u(){const z=t.addFunction(i+"_neg");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_neg",w,V),I.call(r+"_neg",T,Y))}function h(){const z=t.addFunction(i+"_conjugate");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_copy",w,V),I.call(r+"_neg",T,Y))}function m(){const z=t.addFunction(i+"_isNegative");z.addParam("x","i32"),z.setReturnType("i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s));z.addCode(I.if(I.call(r+"_isZero",T),I.ret(I.call(r+"_isNegative",w))),I.ret(I.call(r+"_isNegative",T)))}function p(){const z=t.addFunction(i+"_mul");z.addParam("x","i32"),z.addParam("y","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("y"),Y=I.i32_add(I.getLocal("y"),I.i32_const(s)),Q=I.getLocal("r"),$=I.i32_add(I.getLocal("r"),I.i32_const(s)),F=I.i32_const(t.alloc(s)),R=I.i32_const(t.alloc(s)),_=I.i32_const(t.alloc(s)),k=I.i32_const(t.alloc(s));z.addCode(I.call(r+"_mul",w,V,F),I.call(r+"_mul",T,Y,R),I.call(r+"_add",w,T,_),I.call(r+"_add",V,Y,k),I.call(r+"_mul",_,k,_),I.call(e,R,Q),I.call(r+"_add",F,Q,Q),I.call(r+"_add",F,R,$),I.call(r+"_sub",_,$,$))}function E(){const z=t.addFunction(i+"_mul1");z.addParam("x","i32"),z.addParam("y","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("y"),Y=I.getLocal("r"),Q=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_mul",w,V,Y),I.call(r+"_mul",T,V,Q))}function C(){const z=t.addFunction(i+"_square");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s)),Q=I.i32_const(t.alloc(s)),$=I.i32_const(t.alloc(s)),F=I.i32_const(t.alloc(s)),R=I.i32_const(t.alloc(s));z.addCode(I.call(r+"_mul",w,T,Q),I.call(r+"_add",w,T,$),I.call(e,T,F),I.call(r+"_add",w,F,F),I.call(e,Q,R),I.call(r+"_add",R,Q,R),I.call(r+"_mul",$,F,V),I.call(r+"_sub",V,R,V),I.call(r+"_add",Q,Q,Y))}function v(){const z=t.addFunction(i+"_toMontgomery");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_toMontgomery",w,V),I.call(r+"_toMontgomery",T,Y))}function A(){const z=t.addFunction(i+"_fromMontgomery");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_fromMontgomery",w,V),I.call(r+"_fromMontgomery",T,Y))}function x(){const z=t.addFunction(i+"_copy");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s));z.addCode(I.call(r+"_copy",w,V),I.call(r+"_copy",T,Y))}function P(){const z=t.addFunction(i+"_zero");z.addParam("x","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s));z.addCode(I.call(r+"_zero",w),I.call(r+"_zero",T))}function W(){const z=t.addFunction(i+"_one");z.addParam("x","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s));z.addCode(I.call(r+"_one",w),I.call(r+"_zero",T))}function K(){const z=t.addFunction(i+"_eq");z.addParam("x","i32"),z.addParam("y","i32"),z.setReturnType("i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("y"),Y=I.i32_add(I.getLocal("y"),I.i32_const(s));z.addCode(I.i32_and(I.call(r+"_eq",w,V),I.call(r+"_eq",T,Y)))}function j(){const z=t.addFunction(i+"_isZero");z.addParam("x","i32"),z.setReturnType("i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s));z.addCode(I.i32_and(I.call(r+"_isZero",w),I.call(r+"_isZero",T)))}function b(){const z=t.addFunction(i+"_inverse");z.addParam("x","i32"),z.addParam("r","i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s)),V=I.getLocal("r"),Y=I.i32_add(I.getLocal("r"),I.i32_const(s)),Q=I.i32_const(t.alloc(s)),$=I.i32_const(t.alloc(s)),F=I.i32_const(t.alloc(s)),R=I.i32_const(t.alloc(s));z.addCode(I.call(r+"_square",w,Q),I.call(r+"_square",T,$),I.call(e,$,F),I.call(r+"_sub",Q,F,F),I.call(r+"_inverse",F,R),I.call(r+"_mul",w,R,V),I.call(r+"_mul",T,R,Y),I.call(r+"_neg",Y,Y))}function B(){const z=t.addFunction(i+"_sign");z.addParam("x","i32"),z.addLocal("s","i32"),z.setReturnType("i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s));z.addCode(I.setLocal("s",I.call(r+"_sign",T)),I.if(I.getLocal("s"),I.ret(I.getLocal("s"))),I.ret(I.call(r+"_sign",w)))}function J(){const z=t.addFunction(i+"_isOne");z.addParam("x","i32"),z.setReturnType("i32");const I=z.getCodeBuilder(),w=I.getLocal("x"),T=I.i32_add(I.getLocal("x"),I.i32_const(s));z.addCode(I.ret(I.i32_and(I.call(r+"_isOne",w),I.call(r+"_isZero",T))))}function it(){const z=t.addFunction(i+"_sqrt");z.addParam("a","i32"),z.addParam("pr","i32");const I=z.getCodeBuilder(),w=I.i32_const(t.alloc(ow.bigInt2BytesLE((BigInt(o||0)-3n)/4n,s))),T=I.i32_const(t.alloc(ow.bigInt2BytesLE((BigInt(o||0)-1n)/2n,s))),V=I.getLocal("a"),Y=I.i32_const(t.alloc(s*2)),Q=I.i32_const(t.alloc(s*2)),$=I.i32_const(t.alloc(s*2)),F=t.alloc(s*2),R=I.i32_const(F),_=I.i32_const(F),k=I.i32_const(F+s),H=I.i32_const(t.alloc(s*2)),L=I.i32_const(t.alloc(s*2));z.addCode(I.call(i+"_one",R),I.call(i+"_neg",R,R),I.call(i+"_exp",V,w,I.i32_const(s),Y),I.call(i+"_square",Y,Q),I.call(i+"_mul",V,Q,Q),I.call(i+"_conjugate",Q,$),I.call(i+"_mul",$,Q,$),I.if(I.call(i+"_eq",$,R),I.unreachable()),I.call(i+"_mul",Y,V,H),I.if(I.call(i+"_eq",Q,R),[...I.call(r+"_zero",_),...I.call(r+"_one",k),...I.call(i+"_mul",R,H,I.getLocal("pr"))],[...I.call(i+"_one",L),...I.call(i+"_add",L,Q,L),...I.call(i+"_exp",L,T,I.i32_const(s),L),...I.call(i+"_mul",L,H,I.getLocal("pr"))]))}function st(){const z=t.addFunction(i+"_isSquare");z.addParam("a","i32"),z.setReturnType("i32");const I=z.getCodeBuilder(),w=I.i32_const(t.alloc(ow.bigInt2BytesLE((BigInt(o||0)-3n)/4n,s))),T=I.getLocal("a"),V=I.i32_const(t.alloc(s*2)),Y=I.i32_const(t.alloc(s*2)),Q=I.i32_const(t.alloc(s*2)),$=t.alloc(s*2),F=I.i32_const($);z.addCode(I.call(i+"_one",F),I.call(i+"_neg",F,F),I.call(i+"_exp",T,w,I.i32_const(s),V),I.call(i+"_square",V,Y),I.call(i+"_mul",T,Y,Y),I.call(i+"_conjugate",Y,Q),I.call(i+"_mul",Q,Y,Q),I.if(I.call(i+"_eq",Q,F),I.ret(I.i32_const(0))),I.ret(I.i32_const(1)))}return j(),J(),P(),W(),x(),p(),E(),C(),a(),d(),u(),h(),v(),A(),K(),b(),l(),B(),m(),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_isOne"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_copy"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_mul1"),t.exportFunction(i+"_square"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_neg"),t.exportFunction(i+"_sign"),t.exportFunction(i+"_conjugate"),t.exportFunction(i+"_fromMontgomery"),t.exportFunction(i+"_toMontgomery"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_inverse"),bJ(t,i),_J(t,i+"_exp",s*2,i+"_mul",i+"_square",i+"_copy",i+"_one"),it(),st(),t.exportFunction(i+"_exp"),t.exportFunction(i+"_timesScalar"),t.exportFunction(i+"_batchInverse"),t.exportFunction(i+"_sqrt"),t.exportFunction(i+"_isSquare"),t.exportFunction(i+"_isNegative"),i};const vJ=s3,xJ=o3;var mN=function(t,e,i,r){if(t.modules[i])return i;const s=t.modules[r].n64*8;t.modules[i]={n64:t.modules[r].n64*3};function o(){const b=t.addFunction(i+"_add");b.addParam("x","i32"),b.addParam("y","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("y"),I=B.i32_add(B.getLocal("y"),B.i32_const(s)),w=B.i32_add(B.getLocal("y"),B.i32_const(2*s)),T=B.getLocal("r"),V=B.i32_add(B.getLocal("r"),B.i32_const(s)),Y=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_add",J,z,T),B.call(r+"_add",it,I,V),B.call(r+"_add",st,w,Y))}function a(){const b=t.addFunction(i+"_timesScalar");b.addParam("x","i32"),b.addParam("scalar","i32"),b.addParam("scalarLen","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_timesScalar",J,B.getLocal("scalar"),B.getLocal("scalarLen"),z),B.call(r+"_timesScalar",it,B.getLocal("scalar"),B.getLocal("scalarLen"),I),B.call(r+"_timesScalar",st,B.getLocal("scalar"),B.getLocal("scalarLen"),w))}function l(){const b=t.addFunction(i+"_sub");b.addParam("x","i32"),b.addParam("y","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("y"),I=B.i32_add(B.getLocal("y"),B.i32_const(s)),w=B.i32_add(B.getLocal("y"),B.i32_const(2*s)),T=B.getLocal("r"),V=B.i32_add(B.getLocal("r"),B.i32_const(s)),Y=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_sub",J,z,T),B.call(r+"_sub",it,I,V),B.call(r+"_sub",st,w,Y))}function d(){const b=t.addFunction(i+"_neg");b.addParam("x","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_neg",J,z),B.call(r+"_neg",it,I),B.call(r+"_neg",st,w))}function u(){const b=t.addFunction(i+"_isNegative");b.addParam("x","i32"),b.setReturnType("i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s));b.addCode(B.if(B.call(r+"_isZero",st),B.if(B.call(r+"_isZero",it),B.ret(B.call(r+"_isNegative",J)),B.ret(B.call(r+"_isNegative",it)))),B.ret(B.call(r+"_isNegative",st)))}function h(){const b=t.addFunction(i+"_mul");b.addParam("x","i32"),b.addParam("y","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("y"),I=B.i32_add(B.getLocal("y"),B.i32_const(s)),w=B.i32_add(B.getLocal("y"),B.i32_const(2*s)),T=B.getLocal("r"),V=B.i32_add(B.getLocal("r"),B.i32_const(s)),Y=B.i32_add(B.getLocal("r"),B.i32_const(2*s)),Q=B.i32_const(t.alloc(s)),$=B.i32_const(t.alloc(s)),F=B.i32_const(t.alloc(s)),R=B.i32_const(t.alloc(s)),_=B.i32_const(t.alloc(s)),k=B.i32_const(t.alloc(s)),H=B.i32_const(t.alloc(s)),L=B.i32_const(t.alloc(s)),g=B.i32_const(t.alloc(s)),D=B.i32_const(t.alloc(s)),S=B.i32_const(t.alloc(s)),lt=B.i32_const(t.alloc(s)),ct=B.i32_const(t.alloc(s));b.addCode(B.call(r+"_mul",J,z,Q),B.call(r+"_mul",it,I,$),B.call(r+"_mul",st,w,F),B.call(r+"_add",J,it,R),B.call(r+"_add",z,I,_),B.call(r+"_add",J,st,k),B.call(r+"_add",z,w,H),B.call(r+"_add",it,st,L),B.call(r+"_add",I,w,g),B.call(r+"_add",Q,$,D),B.call(r+"_add",Q,F,S),B.call(r+"_add",$,F,lt),B.call(r+"_mul",L,g,T),B.call(r+"_sub",T,lt,T),B.call(e,T,T),B.call(r+"_add",Q,T,T),B.call(r+"_mul",R,_,V),B.call(r+"_sub",V,D,V),B.call(e,F,ct),B.call(r+"_add",V,ct,V),B.call(r+"_mul",k,H,Y),B.call(r+"_sub",Y,S,Y),B.call(r+"_add",Y,$,Y))}function m(){const b=t.addFunction(i+"_square");b.addParam("x","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s)),T=B.i32_const(t.alloc(s)),V=B.i32_const(t.alloc(s)),Y=B.i32_const(t.alloc(s)),Q=B.i32_const(t.alloc(s)),$=B.i32_const(t.alloc(s)),F=B.i32_const(t.alloc(s)),R=B.i32_const(t.alloc(s));b.addCode(B.call(r+"_square",J,T),B.call(r+"_mul",J,it,V),B.call(r+"_add",V,V,Y),B.call(r+"_sub",J,it,Q),B.call(r+"_add",Q,st,Q),B.call(r+"_square",Q,Q),B.call(r+"_mul",it,st,$),B.call(r+"_add",$,$,F),B.call(r+"_square",st,R),B.call(e,F,z),B.call(r+"_add",T,z,z),B.call(e,R,I),B.call(r+"_add",Y,I,I),B.call(r+"_add",T,R,w),B.call(r+"_sub",F,w,w),B.call(r+"_add",Q,w,w),B.call(r+"_add",Y,w,w))}function p(){const b=t.addFunction(i+"_toMontgomery");b.addParam("x","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_toMontgomery",J,z),B.call(r+"_toMontgomery",it,I),B.call(r+"_toMontgomery",st,w))}function E(){const b=t.addFunction(i+"_fromMontgomery");b.addParam("x","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_fromMontgomery",J,z),B.call(r+"_fromMontgomery",it,I),B.call(r+"_fromMontgomery",st,w))}function C(){const b=t.addFunction(i+"_copy");b.addParam("x","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s));b.addCode(B.call(r+"_copy",J,z),B.call(r+"_copy",it,I),B.call(r+"_copy",st,w))}function v(){const b=t.addFunction(i+"_zero");b.addParam("x","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s));b.addCode(B.call(r+"_zero",J),B.call(r+"_zero",it),B.call(r+"_zero",st))}function A(){const b=t.addFunction(i+"_one");b.addParam("x","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s));b.addCode(B.call(r+"_one",J),B.call(r+"_zero",it),B.call(r+"_zero",st))}function x(){const b=t.addFunction(i+"_eq");b.addParam("x","i32"),b.addParam("y","i32"),b.setReturnType("i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("y"),I=B.i32_add(B.getLocal("y"),B.i32_const(s)),w=B.i32_add(B.getLocal("y"),B.i32_const(2*s));b.addCode(B.i32_and(B.i32_and(B.call(r+"_eq",J,z),B.call(r+"_eq",it,I)),B.call(r+"_eq",st,w)))}function P(){const b=t.addFunction(i+"_isZero");b.addParam("x","i32"),b.setReturnType("i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s));b.addCode(B.i32_and(B.i32_and(B.call(r+"_isZero",J),B.call(r+"_isZero",it)),B.call(r+"_isZero",st)))}function W(){const b=t.addFunction(i+"_inverse");b.addParam("x","i32"),b.addParam("r","i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s)),z=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(s)),w=B.i32_add(B.getLocal("r"),B.i32_const(2*s)),T=B.i32_const(t.alloc(s)),V=B.i32_const(t.alloc(s)),Y=B.i32_const(t.alloc(s)),Q=B.i32_const(t.alloc(s)),$=B.i32_const(t.alloc(s)),F=B.i32_const(t.alloc(s)),R=B.i32_const(t.alloc(s)),_=B.i32_const(t.alloc(s)),k=B.i32_const(t.alloc(s)),H=B.i32_const(t.alloc(s)),L=B.i32_const(t.alloc(s));b.addCode(B.call(r+"_square",J,T),B.call(r+"_square",it,V),B.call(r+"_square",st,Y),B.call(r+"_mul",J,it,Q),B.call(r+"_mul",J,st,$),B.call(r+"_mul",it,st,F),B.call(e,F,R),B.call(r+"_sub",T,R,R),B.call(e,Y,_),B.call(r+"_sub",_,Q,_),B.call(r+"_sub",V,$,k),B.call(r+"_mul",st,_,H),B.call(r+"_mul",it,k,L),B.call(r+"_add",H,L,H),B.call(e,H,H),B.call(r+"_mul",J,R,L),B.call(r+"_add",L,H,H),B.call(r+"_inverse",H,H),B.call(r+"_mul",H,R,z),B.call(r+"_mul",H,_,I),B.call(r+"_mul",H,k,w))}function K(){const b=t.addFunction(i+"_sign");b.addParam("x","i32"),b.addLocal("s","i32"),b.setReturnType("i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(2*s));b.addCode(B.setLocal("s",B.call(r+"_sign",st)),B.if(B.getLocal("s"),B.ret(B.getLocal("s"))),B.setLocal("s",B.call(r+"_sign",it)),B.if(B.getLocal("s"),B.ret(B.getLocal("s"))),B.ret(B.call(r+"_sign",J)))}function j(){const b=t.addFunction(i+"_isOne");b.addParam("x","i32"),b.setReturnType("i32");const B=b.getCodeBuilder(),J=B.getLocal("x"),it=B.i32_add(B.getLocal("x"),B.i32_const(s)),st=B.i32_add(B.getLocal("x"),B.i32_const(s*2));b.addCode(B.ret(B.i32_and(B.i32_and(B.call(r+"_isOne",J),B.call(r+"_isZero",it)),B.call(r+"_isZero",st))))}return P(),j(),v(),A(),C(),h(),m(),o(),l(),d(),K(),p(),E(),x(),W(),a(),u(),t.exportFunction(i+"_isZero"),t.exportFunction(i+"_isOne"),t.exportFunction(i+"_zero"),t.exportFunction(i+"_one"),t.exportFunction(i+"_copy"),t.exportFunction(i+"_mul"),t.exportFunction(i+"_square"),t.exportFunction(i+"_add"),t.exportFunction(i+"_sub"),t.exportFunction(i+"_neg"),t.exportFunction(i+"_sign"),t.exportFunction(i+"_fromMontgomery"),t.exportFunction(i+"_toMontgomery"),t.exportFunction(i+"_eq"),t.exportFunction(i+"_inverse"),xJ(t,i),vJ(t,i+"_exp",s*3,i+"_mul",i+"_square",i+"_copy",i+"_one"),t.exportFunction(i+"_exp"),t.exportFunction(i+"_timesScalar"),t.exportFunction(i+"_batchInverse"),t.exportFunction(i+"_isNegative"),i},EJ=function(t,e,i,r,s,o,a,l){const d=t.addFunction(e);d.addParam("base","i32"),d.addParam("scalar","i32"),d.addParam("scalarLength","i32"),d.addParam("r","i32"),d.addLocal("old0","i32"),d.addLocal("nbits","i32"),d.addLocal("i","i32"),d.addLocal("last","i32"),d.addLocal("cur","i32"),d.addLocal("carry","i32"),d.addLocal("p","i32");const u=d.getCodeBuilder(),h=u.i32_const(t.alloc(i));function m(E){return u.i32_and(u.i32_shr_u(u.i32_load(u.i32_add(u.getLocal("scalar"),u.i32_and(u.i32_shr_u(E,u.i32_const(3)),u.i32_const(4294967292)))),u.i32_and(E,u.i32_const(31))),u.i32_const(1))}function p(E){return[...u.i32_store8(u.getLocal("p"),u.i32_const(E)),...u.setLocal("p",u.i32_add(u.getLocal("p"),u.i32_const(1)))]}d.addCode(u.if(u.i32_eqz(u.getLocal("scalarLength")),[...u.call(l,u.getLocal("r")),...u.ret([])]),u.setLocal("nbits",u.i32_shl(u.getLocal("scalarLength"),u.i32_const(3))),u.setLocal("old0",u.i32_load(u.i32_const(0))),u.setLocal("p",u.getLocal("old0")),u.i32_store(u.i32_const(0),u.i32_and(u.i32_add(u.i32_add(u.getLocal("old0"),u.i32_const(32)),u.getLocal("nbits")),u.i32_const(4294967288))),u.setLocal("i",u.i32_const(1)),u.setLocal("last",m(u.i32_const(0))),u.setLocal("carry",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("nbits"))),u.setLocal("cur",m(u.getLocal("i"))),u.if(u.getLocal("last"),u.if(u.getLocal("cur"),u.if(u.getLocal("carry"),[...u.setLocal("last",u.i32_const(0)),...u.setLocal("carry",u.i32_const(1)),...p(1)],[...u.setLocal("last",u.i32_const(0)),...u.setLocal("carry",u.i32_const(1)),...p(255)]),u.if(u.getLocal("carry"),[...u.setLocal("last",u.i32_const(0)),...u.setLocal("carry",u.i32_const(1)),...p(255)],[...u.setLocal("last",u.i32_const(0)),...u.setLocal("carry",u.i32_const(0)),...p(1)])),u.if(u.getLocal("cur"),u.if(u.getLocal("carry"),[...u.setLocal("last",u.i32_const(0)),...u.setLocal("carry",u.i32_const(1)),...p(0)],[...u.setLocal("last",u.i32_const(1)),...u.setLocal("carry",u.i32_const(0)),...p(0)]),u.if(u.getLocal("carry"),[...u.setLocal("last",u.i32_const(1)),...u.setLocal("carry",u.i32_const(0)),...p(0)],[...u.setLocal("last",u.i32_const(0)),...u.setLocal("carry",u.i32_const(0)),...p(0)]))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))),u.if(u.getLocal("last"),u.if(u.getLocal("carry"),[...p(255),...p(0),...p(1)],[...p(1)]),u.if(u.getLocal("carry"),[...p(0),...p(1)])),u.setLocal("p",u.i32_sub(u.getLocal("p"),u.i32_const(1))),u.call(a,u.getLocal("base"),h),u.call(l,u.getLocal("r")),u.block(u.loop(u.call(s,u.getLocal("r"),u.getLocal("r")),u.setLocal("cur",u.i32_load8_u(u.getLocal("p"))),u.if(u.getLocal("cur"),u.if(u.i32_eq(u.getLocal("cur"),u.i32_const(1)),u.call(r,u.getLocal("r"),h,u.getLocal("r")),u.call(o,u.getLocal("r"),h,u.getLocal("r")))),u.br_if(1,u.i32_eq(u.getLocal("old0"),u.getLocal("p"))),u.setLocal("p",u.i32_sub(u.getLocal("p"),u.i32_const(1))),u.br(0))),u.i32_store(u.i32_const(0),u.getLocal("old0")))},SJ=function(t,e,i,r,s){const a=t.modules[e].n64*8;function l(){const m=t.addFunction(i+"_getChunk");m.addParam("pScalar","i32"),m.addParam("scalarSize","i32"),m.addParam("startBit","i32"),m.addParam("chunkSize","i32"),m.addLocal("bitsToEnd","i32"),m.addLocal("mask","i32"),m.setReturnType("i32");const p=m.getCodeBuilder();m.addCode(p.setLocal("bitsToEnd",p.i32_sub(p.i32_mul(p.getLocal("scalarSize"),p.i32_const(8)),p.getLocal("startBit"))),p.if(p.i32_gt_s(p.getLocal("chunkSize"),p.getLocal("bitsToEnd")),p.setLocal("mask",p.i32_sub(p.i32_shl(p.i32_const(1),p.getLocal("bitsToEnd")),p.i32_const(1))),p.setLocal("mask",p.i32_sub(p.i32_shl(p.i32_const(1),p.getLocal("chunkSize")),p.i32_const(1)))),p.i32_and(p.i32_shr_u(p.i32_load(p.i32_add(p.getLocal("pScalar"),p.i32_shr_u(p.getLocal("startBit"),p.i32_const(3))),0,0),p.i32_and(p.getLocal("startBit"),p.i32_const(7))),p.getLocal("mask")))}function d(){const m=t.addFunction(i+"_chunk");m.addParam("pBases","i32"),m.addParam("pScalars","i32"),m.addParam("scalarSize","i32"),m.addParam("n","i32"),m.addParam("startBit","i32"),m.addParam("chunkSize","i32"),m.addParam("pr","i32"),m.addLocal("nChunks","i32"),m.addLocal("itScalar","i32"),m.addLocal("endScalar","i32"),m.addLocal("itBase","i32"),m.addLocal("i","i32"),m.addLocal("j","i32"),m.addLocal("nTable","i32"),m.addLocal("pTable","i32"),m.addLocal("idx","i32"),m.addLocal("pIdxTable","i32");const p=m.getCodeBuilder();m.addCode(p.if(p.i32_eqz(p.getLocal("n")),[...p.call(e+"_zero",p.getLocal("pr")),...p.ret([])]),p.setLocal("nTable",p.i32_shl(p.i32_const(1),p.getLocal("chunkSize"))),p.setLocal("pTable",p.i32_load(p.i32_const(0))),p.i32_store(p.i32_const(0),p.i32_add(p.getLocal("pTable"),p.i32_mul(p.getLocal("nTable"),p.i32_const(a)))),p.setLocal("j",p.i32_const(0)),p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("j"),p.getLocal("nTable"))),p.call(e+"_zero",p.i32_add(p.getLocal("pTable"),p.i32_mul(p.getLocal("j"),p.i32_const(a)))),p.setLocal("j",p.i32_add(p.getLocal("j"),p.i32_const(1))),p.br(0))),p.setLocal("itBase",p.getLocal("pBases")),p.setLocal("itScalar",p.getLocal("pScalars")),p.setLocal("endScalar",p.i32_add(p.getLocal("pScalars"),p.i32_mul(p.getLocal("n"),p.getLocal("scalarSize")))),p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("itScalar"),p.getLocal("endScalar"))),p.setLocal("idx",p.call(i+"_getChunk",p.getLocal("itScalar"),p.getLocal("scalarSize"),p.getLocal("startBit"),p.getLocal("chunkSize"))),p.if(p.getLocal("idx"),[...p.setLocal("pIdxTable",p.i32_add(p.getLocal("pTable"),p.i32_mul(p.i32_sub(p.getLocal("idx"),p.i32_const(1)),p.i32_const(a)))),...p.call(r,p.getLocal("pIdxTable"),p.getLocal("itBase"),p.getLocal("pIdxTable"))]),p.setLocal("itScalar",p.i32_add(p.getLocal("itScalar"),p.getLocal("scalarSize"))),p.setLocal("itBase",p.i32_add(p.getLocal("itBase"),p.i32_const(s))),p.br(0))),p.call(i+"_reduceTable",p.getLocal("pTable"),p.getLocal("chunkSize")),p.call(e+"_copy",p.getLocal("pTable"),p.getLocal("pr")),p.i32_store(p.i32_const(0),p.getLocal("pTable")))}function u(){const m=t.addFunction(i);m.addParam("pBases","i32"),m.addParam("pScalars","i32"),m.addParam("scalarSize","i32"),m.addParam("n","i32"),m.addParam("pr","i32"),m.addLocal("chunkSize","i32"),m.addLocal("nChunks","i32"),m.addLocal("itScalar","i32"),m.addLocal("endScalar","i32"),m.addLocal("itBase","i32"),m.addLocal("itBit","i32"),m.addLocal("i","i32"),m.addLocal("j","i32"),m.addLocal("nTable","i32"),m.addLocal("pTable","i32"),m.addLocal("idx","i32"),m.addLocal("pIdxTable","i32");const p=m.getCodeBuilder(),E=p.i32_const(t.alloc(a)),C=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);m.addCode(p.call(e+"_zero",p.getLocal("pr")),p.if(p.i32_eqz(p.getLocal("n")),p.ret([])),p.setLocal("chunkSize",p.i32_load8_u(p.i32_clz(p.getLocal("n")),C)),p.setLocal("nChunks",p.i32_add(p.i32_div_u(p.i32_sub(p.i32_shl(p.getLocal("scalarSize"),p.i32_const(3)),p.i32_const(1)),p.getLocal("chunkSize")),p.i32_const(1))),p.setLocal("itBit",p.i32_mul(p.i32_sub(p.getLocal("nChunks"),p.i32_const(1)),p.getLocal("chunkSize"))),p.block(p.loop(p.br_if(1,p.i32_lt_s(p.getLocal("itBit"),p.i32_const(0))),p.if(p.i32_eqz(p.call(e+"_isZero",p.getLocal("pr"))),[...p.setLocal("j",p.i32_const(0)),...p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("j"),p.getLocal("chunkSize"))),p.call(e+"_double",p.getLocal("pr"),p.getLocal("pr")),p.setLocal("j",p.i32_add(p.getLocal("j"),p.i32_const(1))),p.br(0)))]),p.call(i+"_chunk",p.getLocal("pBases"),p.getLocal("pScalars"),p.getLocal("scalarSize"),p.getLocal("n"),p.getLocal("itBit"),p.getLocal("chunkSize"),E),p.call(e+"_add",p.getLocal("pr"),E,p.getLocal("pr")),p.setLocal("itBit",p.i32_sub(p.getLocal("itBit"),p.getLocal("chunkSize"))),p.br(0))))}function h(){const m=t.addFunction(i+"_reduceTable");m.addParam("pTable","i32"),m.addParam("p","i32"),m.addLocal("half","i32"),m.addLocal("it1","i32"),m.addLocal("it2","i32"),m.addLocal("pAcc","i32");const p=m.getCodeBuilder();m.addCode(p.if(p.i32_eq(p.getLocal("p"),p.i32_const(1)),p.ret([])),p.setLocal("half",p.i32_shl(p.i32_const(1),p.i32_sub(p.getLocal("p"),p.i32_const(1)))),p.setLocal("it1",p.getLocal("pTable")),p.setLocal("it2",p.i32_add(p.getLocal("pTable"),p.i32_mul(p.getLocal("half"),p.i32_const(a)))),p.setLocal("pAcc",p.i32_sub(p.getLocal("it2"),p.i32_const(a))),p.block(p.loop(p.br_if(1,p.i32_eq(p.getLocal("it1"),p.getLocal("pAcc"))),p.call(e+"_add",p.getLocal("it1"),p.getLocal("it2"),p.getLocal("it1")),p.call(e+"_add",p.getLocal("pAcc"),p.getLocal("it2"),p.getLocal("pAcc")),p.setLocal("it1",p.i32_add(p.getLocal("it1"),p.i32_const(a))),p.setLocal("it2",p.i32_add(p.getLocal("it2"),p.i32_const(a))),p.br(0))),p.call(i+"_reduceTable",p.getLocal("pTable"),p.i32_sub(p.getLocal("p"),p.i32_const(1))),p.setLocal("p",p.i32_sub(p.getLocal("p"),p.i32_const(1))),p.block(p.loop(p.br_if(1,p.i32_eqz(p.getLocal("p"))),p.call(e+"_double",p.getLocal("pAcc"),p.getLocal("pAcc")),p.setLocal("p",p.i32_sub(p.getLocal("p"),p.i32_const(1))),p.br(0))),p.call(e+"_add",p.getLocal("pTable"),p.getLocal("pAcc"),p.getLocal("pTable")))}l(),h(),d(),u(),t.exportFunction(i),t.exportFunction(i+"_chunk")};const CA=EJ,Wd=aN,AA=SJ;var gN=function(t,e,i,r){const s=t.modules[i].n64,o=s*8;if(t.modules[e])return e;t.modules[e]={n64:s*3};function a(){const L=t.addFunction(e+"_isZero");L.addParam("p1","i32"),L.setReturnType("i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_isZero",g.i32_add(g.getLocal("p1"),g.i32_const(o*2))))}function l(){const L=t.addFunction(e+"_isZeroAffine");L.addParam("p1","i32"),L.setReturnType("i32");const g=L.getCodeBuilder();L.addCode(g.i32_and(g.call(i+"_isZero",g.getLocal("p1")),g.call(i+"_isZero",g.i32_add(g.getLocal("p1"),g.i32_const(o)))))}function d(){const L=t.addFunction(e+"_copy");L.addParam("ps","i32"),L.addParam("pd","i32");const g=L.getCodeBuilder();for(let D=0;D<s*3;D++)L.addCode(g.i64_store(g.getLocal("pd"),D*8,g.i64_load(g.getLocal("ps"),D*8)))}function u(){const L=t.addFunction(e+"_copyAffine");L.addParam("ps","i32"),L.addParam("pd","i32");const g=L.getCodeBuilder();for(let D=0;D<s*2;D++)L.addCode(g.i64_store(g.getLocal("pd"),D*8,g.i64_load(g.getLocal("ps"),D*8)))}function h(){const L=t.addFunction(e+"_zero");L.addParam("pr","i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_zero",g.getLocal("pr"))),L.addCode(g.call(i+"_one",g.i32_add(g.getLocal("pr"),g.i32_const(o)))),L.addCode(g.call(i+"_zero",g.i32_add(g.getLocal("pr"),g.i32_const(o*2))))}function m(){const L=t.addFunction(e+"_zeroAffine");L.addParam("pr","i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_zero",g.getLocal("pr"))),L.addCode(g.call(i+"_zero",g.i32_add(g.getLocal("pr"),g.i32_const(o))))}function p(){const L=t.addFunction(e+"_eq");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o));L.addCode(g.setLocal("z1",g.i32_add(g.getLocal("p1"),g.i32_const(o*2))));const lt=g.getLocal("z1"),ct=g.getLocal("p2"),G=g.i32_add(g.getLocal("p2"),g.i32_const(o));L.addCode(g.setLocal("z2",g.i32_add(g.getLocal("p2"),g.i32_const(o*2))));const ft=g.getLocal("z2"),vt=g.i32_const(t.alloc(o)),wt=g.i32_const(t.alloc(o)),bt=g.i32_const(t.alloc(o)),Ft=g.i32_const(t.alloc(o)),Pt=g.i32_const(t.alloc(o)),Gt=g.i32_const(t.alloc(o)),$t=g.i32_const(t.alloc(o)),kt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),g.ret(g.call(e+"_isZero",g.getLocal("p2")))),g.if(g.call(e+"_isZero",g.getLocal("p2")),g.ret(g.i32_const(0))),g.if(g.call(i+"_isOne",lt),g.ret(g.call(e+"_eqMixed",g.getLocal("p2"),g.getLocal("p1")))),g.if(g.call(i+"_isOne",ft),g.ret(g.call(e+"_eqMixed",g.getLocal("p1"),g.getLocal("p2")))),g.call(i+"_square",lt,vt),g.call(i+"_square",ft,wt),g.call(i+"_mul",D,wt,bt),g.call(i+"_mul",ct,vt,Ft),g.call(i+"_mul",lt,vt,Pt),g.call(i+"_mul",ft,wt,Gt),g.call(i+"_mul",S,Gt,$t),g.call(i+"_mul",G,Pt,kt),g.if(g.call(i+"_eq",bt,Ft),g.if(g.call(i+"_eq",$t,kt),g.ret(g.i32_const(1)))),g.ret(g.i32_const(0)))}function E(){const L=t.addFunction(e+"_eqMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o));L.addCode(g.setLocal("z1",g.i32_add(g.getLocal("p1"),g.i32_const(o*2))));const lt=g.getLocal("z1"),ct=g.getLocal("p2"),G=g.i32_add(g.getLocal("p2"),g.i32_const(o)),ft=g.i32_const(t.alloc(o)),vt=g.i32_const(t.alloc(o)),wt=g.i32_const(t.alloc(o)),bt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),g.ret(g.call(e+"_isZeroAffine",g.getLocal("p2")))),g.if(g.call(e+"_isZeroAffine",g.getLocal("p2")),g.ret(g.i32_const(0))),g.if(g.call(i+"_isOne",lt),g.ret(g.call(e+"_eqAffine",g.getLocal("p1"),g.getLocal("p2")))),g.call(i+"_square",lt,ft),g.call(i+"_mul",ct,ft,vt),g.call(i+"_mul",lt,ft,wt),g.call(i+"_mul",G,wt,bt),g.if(g.call(i+"_eq",D,vt),g.if(g.call(i+"_eq",S,bt),g.ret(g.i32_const(1)))),g.ret(g.i32_const(0)))}function C(){const L=t.addFunction(e+"_double");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.i32_add(g.getLocal("p1"),g.i32_const(o*2)),ct=g.getLocal("pr"),G=g.i32_add(g.getLocal("pr"),g.i32_const(o)),ft=g.i32_add(g.getLocal("pr"),g.i32_const(o*2)),vt=g.i32_const(t.alloc(o)),wt=g.i32_const(t.alloc(o)),bt=g.i32_const(t.alloc(o)),Ft=g.i32_const(t.alloc(o)),Pt=g.i32_const(t.alloc(o)),Gt=g.i32_const(t.alloc(o)),$t=g.i32_const(t.alloc(o)),kt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),[...g.call(e+"_copy",g.getLocal("p1"),g.getLocal("pr")),...g.ret([])]),g.if(g.call(i+"_isOne",lt),[...g.ret(g.call(e+"_doubleAffine",g.getLocal("p1"),g.getLocal("pr"))),...g.ret([])]),g.call(i+"_square",D,vt),g.call(i+"_square",S,wt),g.call(i+"_square",wt,bt),g.call(i+"_add",D,wt,Ft),g.call(i+"_square",Ft,Ft),g.call(i+"_sub",Ft,vt,Ft),g.call(i+"_sub",Ft,bt,Ft),g.call(i+"_add",Ft,Ft,Ft),g.call(i+"_add",vt,vt,Pt),g.call(i+"_add",Pt,vt,Pt),g.call(i+"_square",Pt,Gt),g.call(i+"_mul",S,lt,$t),g.call(i+"_add",Ft,Ft,ct),g.call(i+"_sub",Gt,ct,ct),g.call(i+"_add",bt,bt,kt),g.call(i+"_add",kt,kt,kt),g.call(i+"_add",kt,kt,kt),g.call(i+"_sub",Ft,ct,G),g.call(i+"_mul",G,Pt,G),g.call(i+"_sub",G,kt,G),g.call(i+"_add",$t,$t,ft))}function v(){const L=t.addFunction(e+"_doubleAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.getLocal("pr"),ct=g.i32_add(g.getLocal("pr"),g.i32_const(o)),G=g.i32_add(g.getLocal("pr"),g.i32_const(o*2)),ft=g.i32_const(t.alloc(o)),vt=g.i32_const(t.alloc(o)),wt=g.i32_const(t.alloc(o)),bt=g.i32_const(t.alloc(o)),Ft=g.i32_const(t.alloc(o)),Pt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZeroAffine",g.getLocal("p1")),[...g.call(e+"_toJacobian",g.getLocal("p1"),g.getLocal("pr")),...g.ret([])]),g.call(i+"_square",D,ft),g.call(i+"_square",S,vt),g.call(i+"_square",vt,wt),g.call(i+"_add",D,vt,bt),g.call(i+"_square",bt,bt),g.call(i+"_sub",bt,ft,bt),g.call(i+"_sub",bt,wt,bt),g.call(i+"_add",bt,bt,bt),g.call(i+"_add",ft,ft,Ft),g.call(i+"_add",Ft,ft,Ft),g.call(i+"_add",S,S,G),g.call(i+"_square",Ft,lt),g.call(i+"_sub",lt,bt,lt),g.call(i+"_sub",lt,bt,lt),g.call(i+"_add",wt,wt,Pt),g.call(i+"_add",Pt,Pt,Pt),g.call(i+"_add",Pt,Pt,Pt),g.call(i+"_sub",bt,lt,ct),g.call(i+"_mul",ct,Ft,ct),g.call(i+"_sub",ct,Pt,ct))}function A(){const L=t.addFunction(e+"_eqAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.setReturnType("i32"),L.addLocal("z1","i32");const g=L.getCodeBuilder();L.addCode(g.ret(g.i32_and(g.call(i+"_eq",g.getLocal("p1"),g.getLocal("p2")),g.call(i+"_eq",g.i32_add(g.getLocal("p1"),g.i32_const(o)),g.i32_add(g.getLocal("p2"),g.i32_const(o))))))}function x(){const L=t.addFunction(e+"_toMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_toMontgomery",g.getLocal("p1"),g.getLocal("pr")));for(let D=1;D<3;D++)L.addCode(g.call(i+"_toMontgomery",g.i32_add(g.getLocal("p1"),g.i32_const(D*o)),g.i32_add(g.getLocal("pr"),g.i32_const(D*o))))}function P(){const L=t.addFunction(e+"_toMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_toMontgomery",g.getLocal("p1"),g.getLocal("pr")));for(let D=1;D<2;D++)L.addCode(g.call(i+"_toMontgomery",g.i32_add(g.getLocal("p1"),g.i32_const(D*o)),g.i32_add(g.getLocal("pr"),g.i32_const(D*o))))}function W(){const L=t.addFunction(e+"_fromMontgomery");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_fromMontgomery",g.getLocal("p1"),g.getLocal("pr")));for(let D=1;D<3;D++)L.addCode(g.call(i+"_fromMontgomery",g.i32_add(g.getLocal("p1"),g.i32_const(D*o)),g.i32_add(g.getLocal("pr"),g.i32_const(D*o))))}function K(){const L=t.addFunction(e+"_fromMontgomeryAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder();L.addCode(g.call(i+"_fromMontgomery",g.getLocal("p1"),g.getLocal("pr")));for(let D=1;D<2;D++)L.addCode(g.call(i+"_fromMontgomery",g.i32_add(g.getLocal("p1"),g.i32_const(D*o)),g.i32_add(g.getLocal("pr"),g.i32_const(D*o))))}function j(){const L=t.addFunction(e+"_add");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32"),L.addLocal("z2","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o));L.addCode(g.setLocal("z1",g.i32_add(g.getLocal("p1"),g.i32_const(o*2))));const lt=g.getLocal("z1"),ct=g.getLocal("p2"),G=g.i32_add(g.getLocal("p2"),g.i32_const(o));L.addCode(g.setLocal("z2",g.i32_add(g.getLocal("p2"),g.i32_const(o*2))));const ft=g.getLocal("z2"),vt=g.getLocal("pr"),wt=g.i32_add(g.getLocal("pr"),g.i32_const(o)),bt=g.i32_add(g.getLocal("pr"),g.i32_const(o*2)),Ft=g.i32_const(t.alloc(o)),Pt=g.i32_const(t.alloc(o)),Gt=g.i32_const(t.alloc(o)),$t=g.i32_const(t.alloc(o)),kt=g.i32_const(t.alloc(o)),Rt=g.i32_const(t.alloc(o)),Ht=g.i32_const(t.alloc(o)),Kt=g.i32_const(t.alloc(o)),se=g.i32_const(t.alloc(o)),_e=g.i32_const(t.alloc(o)),ae=g.i32_const(t.alloc(o)),de=g.i32_const(t.alloc(o)),fe=g.i32_const(t.alloc(o)),Yt=g.i32_const(t.alloc(o)),ut=g.i32_const(t.alloc(o)),X=g.i32_const(t.alloc(o)),nt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),[...g.call(e+"_copy",g.getLocal("p2"),g.getLocal("pr")),...g.ret([])]),g.if(g.call(e+"_isZero",g.getLocal("p2")),[...g.call(e+"_copy",g.getLocal("p1"),g.getLocal("pr")),...g.ret([])]),g.if(g.call(i+"_isOne",lt),[...g.call(e+"_addMixed",ct,D,vt),...g.ret([])]),g.if(g.call(i+"_isOne",ft),[...g.call(e+"_addMixed",D,ct,vt),...g.ret([])]),g.call(i+"_square",lt,Ft),g.call(i+"_square",ft,Pt),g.call(i+"_mul",D,Pt,Gt),g.call(i+"_mul",ct,Ft,$t),g.call(i+"_mul",lt,Ft,kt),g.call(i+"_mul",ft,Pt,Rt),g.call(i+"_mul",S,Rt,Ht),g.call(i+"_mul",G,kt,Kt),g.if(g.call(i+"_eq",Gt,$t),g.if(g.call(i+"_eq",Ht,Kt),[...g.call(e+"_double",g.getLocal("p1"),g.getLocal("pr")),...g.ret([])])),g.call(i+"_sub",$t,Gt,se),g.call(i+"_sub",Kt,Ht,_e),g.call(i+"_add",se,se,ae),g.call(i+"_square",ae,ae),g.call(i+"_mul",se,ae,de),g.call(i+"_add",_e,_e,fe),g.call(i+"_mul",Gt,ae,ut),g.call(i+"_square",fe,Yt),g.call(i+"_add",ut,ut,X),g.call(i+"_sub",Yt,de,vt),g.call(i+"_sub",vt,X,vt),g.call(i+"_mul",Ht,de,nt),g.call(i+"_add",nt,nt,nt),g.call(i+"_sub",ut,vt,wt),g.call(i+"_mul",wt,fe,wt),g.call(i+"_sub",wt,nt,wt),g.call(i+"_add",lt,ft,bt),g.call(i+"_square",bt,bt),g.call(i+"_sub",bt,Ft,bt),g.call(i+"_sub",bt,Pt,bt),g.call(i+"_mul",bt,se,bt))}function b(){const L=t.addFunction(e+"_addMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o));L.addCode(g.setLocal("z1",g.i32_add(g.getLocal("p1"),g.i32_const(o*2))));const lt=g.getLocal("z1"),ct=g.getLocal("p2"),G=g.i32_add(g.getLocal("p2"),g.i32_const(o)),ft=g.getLocal("pr"),vt=g.i32_add(g.getLocal("pr"),g.i32_const(o)),wt=g.i32_add(g.getLocal("pr"),g.i32_const(o*2)),bt=g.i32_const(t.alloc(o)),Ft=g.i32_const(t.alloc(o)),Pt=g.i32_const(t.alloc(o)),Gt=g.i32_const(t.alloc(o)),$t=g.i32_const(t.alloc(o)),kt=g.i32_const(t.alloc(o)),Rt=g.i32_const(t.alloc(o)),Ht=g.i32_const(t.alloc(o)),Kt=g.i32_const(t.alloc(o)),se=g.i32_const(t.alloc(o)),_e=g.i32_const(t.alloc(o)),ae=g.i32_const(t.alloc(o)),de=g.i32_const(t.alloc(o)),fe=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),[...g.call(e+"_copyAffine",g.getLocal("p2"),g.getLocal("pr")),...g.call(i+"_one",g.i32_add(g.getLocal("pr"),g.i32_const(o*2))),...g.ret([])]),g.if(g.call(e+"_isZeroAffine",g.getLocal("p2")),[...g.call(e+"_copy",g.getLocal("p1"),g.getLocal("pr")),...g.ret([])]),g.if(g.call(i+"_isOne",lt),[...g.call(e+"_addAffine",D,ct,ft),...g.ret([])]),g.call(i+"_square",lt,bt),g.call(i+"_mul",ct,bt,Ft),g.call(i+"_mul",lt,bt,Pt),g.call(i+"_mul",G,Pt,Gt),g.if(g.call(i+"_eq",D,Ft),g.if(g.call(i+"_eq",S,Gt),[...g.call(e+"_doubleAffine",g.getLocal("p2"),g.getLocal("pr")),...g.ret([])])),g.call(i+"_sub",Ft,D,$t),g.call(i+"_sub",Gt,S,Rt),g.call(i+"_square",$t,kt),g.call(i+"_add",kt,kt,Ht),g.call(i+"_add",Ht,Ht,Ht),g.call(i+"_mul",$t,Ht,Kt),g.call(i+"_add",Rt,Rt,se),g.call(i+"_mul",D,Ht,ae),g.call(i+"_square",se,_e),g.call(i+"_add",ae,ae,de),g.call(i+"_sub",_e,Kt,ft),g.call(i+"_sub",ft,de,ft),g.call(i+"_mul",S,Kt,fe),g.call(i+"_add",fe,fe,fe),g.call(i+"_sub",ae,ft,vt),g.call(i+"_mul",vt,se,vt),g.call(i+"_sub",vt,fe,vt),g.call(i+"_add",lt,$t,wt),g.call(i+"_square",wt,wt),g.call(i+"_sub",wt,bt,wt),g.call(i+"_sub",wt,kt,wt))}function B(){const L=t.addFunction(e+"_addAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32"),L.addLocal("z1","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o));L.addCode(g.setLocal("z1",g.i32_add(g.getLocal("p1"),g.i32_const(o*2))));const lt=g.getLocal("p2"),ct=g.i32_add(g.getLocal("p2"),g.i32_const(o)),G=g.getLocal("pr"),ft=g.i32_add(g.getLocal("pr"),g.i32_const(o)),vt=g.i32_add(g.getLocal("pr"),g.i32_const(o*2)),wt=g.i32_const(t.alloc(o)),bt=g.i32_const(t.alloc(o)),Ft=g.i32_const(t.alloc(o)),Pt=g.i32_const(t.alloc(o)),Gt=g.i32_const(t.alloc(o)),$t=g.i32_const(t.alloc(o)),kt=g.i32_const(t.alloc(o)),Rt=g.i32_const(t.alloc(o)),Ht=g.i32_const(t.alloc(o)),Kt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZeroAffine",g.getLocal("p1")),[...g.call(e+"_copyAffine",g.getLocal("p2"),g.getLocal("pr")),...g.call(i+"_one",g.i32_add(g.getLocal("pr"),g.i32_const(o*2))),...g.ret([])]),g.if(g.call(e+"_isZeroAffine",g.getLocal("p2")),[...g.call(e+"_copyAffine",g.getLocal("p1"),g.getLocal("pr")),...g.call(i+"_one",g.i32_add(g.getLocal("pr"),g.i32_const(o*2))),...g.ret([])]),g.if(g.call(i+"_eq",D,lt),g.if(g.call(i+"_eq",S,ct),[...g.call(e+"_doubleAffine",g.getLocal("p2"),g.getLocal("pr")),...g.ret([])])),g.call(i+"_sub",lt,D,wt),g.call(i+"_sub",ct,S,Ft),g.call(i+"_square",wt,bt),g.call(i+"_add",bt,bt,Pt),g.call(i+"_add",Pt,Pt,Pt),g.call(i+"_mul",wt,Pt,Gt),g.call(i+"_add",Ft,Ft,$t),g.call(i+"_mul",D,Pt,Rt),g.call(i+"_square",$t,kt),g.call(i+"_add",Rt,Rt,Ht),g.call(i+"_sub",kt,Gt,G),g.call(i+"_sub",G,Ht,G),g.call(i+"_mul",S,Gt,Kt),g.call(i+"_add",Kt,Kt,Kt),g.call(i+"_sub",Rt,G,ft),g.call(i+"_mul",ft,$t,ft),g.call(i+"_sub",ft,Kt,ft),g.call(i+"_add",wt,wt,vt))}function J(){const L=t.addFunction(e+"_neg");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.i32_add(g.getLocal("p1"),g.i32_const(o*2)),ct=g.getLocal("pr"),G=g.i32_add(g.getLocal("pr"),g.i32_const(o)),ft=g.i32_add(g.getLocal("pr"),g.i32_const(o*2));L.addCode(g.call(i+"_copy",D,ct),g.call(i+"_neg",S,G),g.call(i+"_copy",lt,ft))}function it(){const L=t.addFunction(e+"_negAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.getLocal("pr"),ct=g.i32_add(g.getLocal("pr"),g.i32_const(o));L.addCode(g.call(i+"_copy",D,lt),g.call(i+"_neg",S,ct))}function st(){const L=t.addFunction(e+"_sub");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.i32_const(t.alloc(o*3));L.addCode(g.call(e+"_neg",g.getLocal("p2"),D),g.call(e+"_add",g.getLocal("p1"),D,g.getLocal("pr")))}function z(){const L=t.addFunction(e+"_subMixed");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.i32_const(t.alloc(o*3));L.addCode(g.call(e+"_negAffine",g.getLocal("p2"),D),g.call(e+"_addMixed",g.getLocal("p1"),D,g.getLocal("pr")))}function I(){const L=t.addFunction(e+"_subAffine");L.addParam("p1","i32"),L.addParam("p2","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.i32_const(t.alloc(o*3));L.addCode(g.call(e+"_negAffine",g.getLocal("p2"),D),g.call(e+"_addAffine",g.getLocal("p1"),D,g.getLocal("pr")))}function w(){const L=t.addFunction(e+"_normalize");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.i32_add(g.getLocal("p1"),g.i32_const(o*2)),ct=g.getLocal("pr"),G=g.i32_add(g.getLocal("pr"),g.i32_const(o)),ft=g.i32_add(g.getLocal("pr"),g.i32_const(o*2)),vt=g.i32_const(t.alloc(o)),wt=g.i32_const(t.alloc(o)),bt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),g.call(e+"_zero",g.getLocal("pr")),[...g.call(i+"_inverse",lt,vt),...g.call(i+"_square",vt,wt),...g.call(i+"_mul",vt,wt,bt),...g.call(i+"_mul",D,wt,ct),...g.call(i+"_mul",S,bt,G),...g.call(i+"_one",ft)]))}function T(){const L=t.addFunction(e+"_toAffine");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.i32_add(g.getLocal("p1"),g.i32_const(o*2)),ct=g.getLocal("pr"),G=g.i32_add(g.getLocal("pr"),g.i32_const(o)),ft=g.i32_const(t.alloc(o)),vt=g.i32_const(t.alloc(o)),wt=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZero",g.getLocal("p1")),[...g.call(i+"_zero",ct),...g.call(i+"_zero",G)],[...g.call(i+"_inverse",lt,ft),...g.call(i+"_square",ft,vt),...g.call(i+"_mul",ft,vt,wt),...g.call(i+"_mul",D,vt,ct),...g.call(i+"_mul",S,wt,G)]))}function V(){const L=t.addFunction(e+"_toJacobian");L.addParam("p1","i32"),L.addParam("pr","i32");const g=L.getCodeBuilder(),D=g.getLocal("p1"),S=g.i32_add(g.getLocal("p1"),g.i32_const(o)),lt=g.getLocal("pr"),ct=g.i32_add(g.getLocal("pr"),g.i32_const(o)),G=g.i32_add(g.getLocal("pr"),g.i32_const(o*2));L.addCode(g.if(g.call(e+"_isZeroAffine",g.getLocal("p1")),g.call(e+"_zero",g.getLocal("pr")),[...g.call(i+"_one",G),...g.call(i+"_copy",S,ct),...g.call(i+"_copy",D,lt)]))}function Y(){const L=t.addFunction(e+"_batchToAffine");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("pAux","i32"),L.addLocal("itIn","i32"),L.addLocal("itAux","i32"),L.addLocal("itOut","i32"),L.addLocal("i","i32");const g=L.getCodeBuilder(),D=g.i32_const(t.alloc(o));L.addCode(g.setLocal("pAux",g.i32_load(g.i32_const(0))),g.i32_store(g.i32_const(0),g.i32_add(g.getLocal("pAux"),g.i32_mul(g.getLocal("n"),g.i32_const(o)))),g.call(i+"_batchInverse",g.i32_add(g.getLocal("pIn"),g.i32_const(o*2)),g.i32_const(o*3),g.getLocal("n"),g.getLocal("pAux"),g.i32_const(o)),g.setLocal("itIn",g.getLocal("pIn")),g.setLocal("itAux",g.getLocal("pAux")),g.setLocal("itOut",g.getLocal("pOut")),g.setLocal("i",g.i32_const(0)),g.block(g.loop(g.br_if(1,g.i32_eq(g.getLocal("i"),g.getLocal("n"))),g.if(g.call(i+"_isZero",g.getLocal("itAux")),[...g.call(i+"_zero",g.getLocal("itOut")),...g.call(i+"_zero",g.i32_add(g.getLocal("itOut"),g.i32_const(o)))],[...g.call(i+"_mul",g.getLocal("itAux"),g.i32_add(g.getLocal("itIn"),g.i32_const(o)),D),...g.call(i+"_square",g.getLocal("itAux"),g.getLocal("itAux")),...g.call(i+"_mul",g.getLocal("itAux"),g.getLocal("itIn"),g.getLocal("itOut")),...g.call(i+"_mul",g.getLocal("itAux"),D,g.i32_add(g.getLocal("itOut"),g.i32_const(o)))]),g.setLocal("itIn",g.i32_add(g.getLocal("itIn"),g.i32_const(o*3))),g.setLocal("itOut",g.i32_add(g.getLocal("itOut"),g.i32_const(o*2))),g.setLocal("itAux",g.i32_add(g.getLocal("itAux"),g.i32_const(o))),g.setLocal("i",g.i32_add(g.getLocal("i"),g.i32_const(1))),g.br(0))),g.i32_store(g.i32_const(0),g.getLocal("pAux")))}function Q(){const L=t.addFunction(e+"__reverseBytes");L.addParam("pIn","i32"),L.addParam("n","i32"),L.addParam("pOut","i32"),L.addLocal("itOut","i32"),L.addLocal("itIn","i32");const g=L.getCodeBuilder();L.addCode(g.setLocal("itOut",g.i32_sub(g.i32_add(g.getLocal("pOut"),g.getLocal("n")),g.i32_const(1))),g.setLocal("itIn",g.getLocal("pIn")),g.block(g.loop(g.br_if(1,g.i32_lt_s(g.getLocal("itOut"),g.getLocal("pOut"))),g.i32_store8(g.getLocal("itOut"),g.i32_load8_u(g.getLocal("itIn"))),g.setLocal("itOut",g.i32_sub(g.getLocal("itOut"),g.i32_const(1))),g.setLocal("itIn",g.i32_add(g.getLocal("itIn"),g.i32_const(1))),g.br(0))))}function $(){const L=t.addFunction(e+"_LEMtoC");L.addParam("pIn","i32"),L.addParam("pOut","i32");const g=L.getCodeBuilder(),D=g.i32_const(t.alloc(o));L.addCode(g.if(g.call(e+"_isZeroAffine",g.getLocal("pIn")),[...g.call(i+"_zero",g.getLocal("pOut")),...g.i32_store8(g.getLocal("pOut"),g.i32_const(64)),...g.ret([])]),g.call(i+"_fromMontgomery",g.getLocal("pIn"),D),g.call(e+"__reverseBytes",D,g.i32_const(o),g.getLocal("pOut")),g.if(g.i32_eq(g.call(i+"_sign",g.i32_add(g.getLocal("pIn"),g.i32_const(o))),g.i32_const(-1)),g.i32_store8(g.getLocal("pOut"),g.i32_or(g.i32_load8_u(g.getLocal("pOut")),g.i32_const(128)))))}function F(){const L=t.addFunction(e+"_LEMtoU");L.addParam("pIn","i32"),L.addParam("pOut","i32");const g=L.getCodeBuilder(),D=t.alloc(o*2),S=g.i32_const(D),lt=g.i32_const(D),ct=g.i32_const(D+o);L.addCode(g.if(g.call(e+"_isZeroAffine",g.getLocal("pIn")),[...g.call(e+"_zeroAffine",g.getLocal("pOut")),...g.ret([])]),g.call(e+"_fromMontgomeryAffine",g.getLocal("pIn"),S),g.call(e+"__reverseBytes",lt,g.i32_const(o),g.getLocal("pOut")),g.call(e+"__reverseBytes",ct,g.i32_const(o),g.i32_add(g.getLocal("pOut"),g.i32_const(o))))}function R(){const L=t.addFunction(e+"_UtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32");const g=L.getCodeBuilder(),D=t.alloc(o*2),S=g.i32_const(D),lt=g.i32_const(D),ct=g.i32_const(D+o);L.addCode(g.if(g.i32_and(g.i32_load8_u(g.getLocal("pIn")),g.i32_const(64)),[...g.call(e+"_zeroAffine",g.getLocal("pOut")),...g.ret([])]),g.call(e+"__reverseBytes",g.getLocal("pIn"),g.i32_const(o),lt),g.call(e+"__reverseBytes",g.i32_add(g.getLocal("pIn"),g.i32_const(o)),g.i32_const(o),ct),g.call(e+"_toMontgomeryAffine",S,g.getLocal("pOut")))}function _(){const L=t.addFunction(e+"_CtoLEM");L.addParam("pIn","i32"),L.addParam("pOut","i32"),L.addLocal("firstByte","i32"),L.addLocal("greatest","i32");const g=L.getCodeBuilder(),D=t.alloc(o*2),S=g.i32_const(D),lt=g.i32_const(D+o);L.addCode(g.setLocal("firstByte",g.i32_load8_u(g.getLocal("pIn"))),g.if(g.i32_and(g.getLocal("firstByte"),g.i32_const(64)),[...g.call(e+"_zeroAffine",g.getLocal("pOut")),...g.ret([])]),g.setLocal("greatest",g.i32_and(g.getLocal("firstByte"),g.i32_const(128))),g.call(i+"_copy",g.getLocal("pIn"),lt),g.i32_store8(lt,g.i32_and(g.getLocal("firstByte"),g.i32_const(63))),g.call(e+"__reverseBytes",lt,g.i32_const(o),S),g.call(i+"_toMontgomery",S,g.getLocal("pOut")),g.call(i+"_square",g.getLocal("pOut"),lt),g.call(i+"_mul",g.getLocal("pOut"),lt,lt),g.call(i+"_add",lt,g.i32_const(r),lt),g.call(i+"_sqrt",lt,lt),g.call(i+"_neg",lt,S),g.if(g.i32_eq(g.call(i+"_sign",lt),g.i32_const(-1)),g.if(g.getLocal("greatest"),g.call(i+"_copy",lt,g.i32_add(g.getLocal("pOut"),g.i32_const(o))),g.call(i+"_neg",lt,g.i32_add(g.getLocal("pOut"),g.i32_const(o)))),g.if(g.getLocal("greatest"),g.call(i+"_neg",lt,g.i32_add(g.getLocal("pOut"),g.i32_const(o))),g.call(i+"_copy",lt,g.i32_add(g.getLocal("pOut"),g.i32_const(o))))))}function k(){const L=t.addFunction(e+"_inCurveAffine");L.addParam("pIn","i32"),L.setReturnType("i32");const g=L.getCodeBuilder(),D=g.getLocal("pIn"),S=g.i32_add(g.getLocal("pIn"),g.i32_const(o)),lt=g.i32_const(t.alloc(o)),ct=g.i32_const(t.alloc(o));L.addCode(g.call(i+"_square",S,lt),g.call(i+"_square",D,ct),g.call(i+"_mul",D,ct,ct),g.call(i+"_add",ct,g.i32_const(r),ct),g.ret(g.call(i+"_eq",lt,ct)))}function H(){const L=t.addFunction(e+"_inCurve");L.addParam("pIn","i32"),L.setReturnType("i32");const g=L.getCodeBuilder(),D=g.i32_const(t.alloc(o*2));L.addCode(g.call(e+"_toAffine",g.getLocal("pIn"),D),g.ret(g.call(e+"_inCurveAffine",D)))}return l(),a(),m(),h(),u(),d(),V(),A(),E(),p(),v(),C(),B(),b(),j(),it(),J(),I(),z(),st(),K(),W(),P(),x(),T(),k(),H(),Y(),w(),Q(),F(),$(),R(),_(),Wd(t,e+"_batchLEMtoU",e+"_LEMtoU",o*2,o*2),Wd(t,e+"_batchLEMtoC",e+"_LEMtoC",o*2,o),Wd(t,e+"_batchUtoLEM",e+"_UtoLEM",o*2,o*2),Wd(t,e+"_batchCtoLEM",e+"_CtoLEM",o,o*2,!0),Wd(t,e+"_batchToJacobian",e+"_toJacobian",o*2,o*3,!0),AA(t,e,e+"_multiexp",e+"_add",o*3),AA(t,e,e+"_multiexpAffine",e+"_addMixed",o*2),CA(t,e+"_timesScalar",o*3,e+"_add",e+"_double",e+"_sub",e+"_copy",e+"_zero"),CA(t,e+"_timesScalarAffine",o*2,e+"_addMixed",e+"_double",e+"_subMixed",e+"_copyAffine",e+"_zero"),t.exportFunction(e+"_isZero"),t.exportFunction(e+"_isZeroAffine"),t.exportFunction(e+"_eq"),t.exportFunction(e+"_eqMixed"),t.exportFunction(e+"_eqAffine"),t.exportFunction(e+"_copy"),t.exportFunction(e+"_copyAffine"),t.exportFunction(e+"_zero"),t.exportFunction(e+"_zeroAffine"),t.exportFunction(e+"_double"),t.exportFunction(e+"_doubleAffine"),t.exportFunction(e+"_add"),t.exportFunction(e+"_addMixed"),t.exportFunction(e+"_addAffine"),t.exportFunction(e+"_neg"),t.exportFunction(e+"_negAffine"),t.exportFunction(e+"_sub"),t.exportFunction(e+"_subMixed"),t.exportFunction(e+"_subAffine"),t.exportFunction(e+"_fromMontgomery"),t.exportFunction(e+"_fromMontgomeryAffine"),t.exportFunction(e+"_toMontgomery"),t.exportFunction(e+"_toMontgomeryAffine"),t.exportFunction(e+"_timesScalar"),t.exportFunction(e+"_timesScalarAffine"),t.exportFunction(e+"_normalize"),t.exportFunction(e+"_LEMtoU"),t.exportFunction(e+"_LEMtoC"),t.exportFunction(e+"_UtoLEM"),t.exportFunction(e+"_CtoLEM"),t.exportFunction(e+"_batchLEMtoU"),t.exportFunction(e+"_batchLEMtoC"),t.exportFunction(e+"_batchUtoLEM"),t.exportFunction(e+"_batchCtoLEM"),t.exportFunction(e+"_toAffine"),t.exportFunction(e+"_toJacobian"),t.exportFunction(e+"_batchToAffine"),t.exportFunction(e+"_batchToJacobian"),t.exportFunction(e+"_inCurve"),t.exportFunction(e+"_inCurveAffine"),e};const{isOdd:LJ,modInv:IA,modPow:Vd}=rr,Yp=Ga;var yN=function(t,e,i,r,s){const a=t.modules[r].n64*8,d=t.modules[i].n64*8,u=t.modules[r].q;let h=u-1n,m=0;for(;!LJ(h);)m++,h=h>>1n;let p=2n;for(;Vd(p,u>>1n,u)===1n;)p=p+1n;const E=new Array(m+1);E[m]=Vd(p,h,u);let C=m-1;for(;C>=0;)E[C]=Vd(E[C+1],2n,u),C--;const v=[],A=(1n<<BigInt(a*8))%u;for(let D=0;D<E.length;D++){const S=E[D]*A%u;v.push(...Yp.bigInt2BytesLE(S,a))}const x=t.alloc(v),P=new Array(m+1);P[0]=1n;for(let D=1;D<=m;D++)P[D]=P[D-1]*2n;const W=[];for(let D=0;D<=m;D++){const S=IA(P[D],u)*A%u;W.push(...Yp.bigInt2BytesLE(S,a))}const K=t.alloc(W),j=Vd(p,2n,u),b=[],B=[];for(let D=0;D<=m;D++){const S=Vd(j,2n**BigInt(D),u),lt=IA(u+1n-S,u);b.push(...Yp.bigInt2BytesLE(S*A%u,a)),B.push(...Yp.bigInt2BytesLE(lt*A%u,a))}const J=t.alloc(b),it=t.alloc(B);function st(D){let S=0;for(let lt=0;lt<8;lt++)D&1<<lt&&(S=S|128>>lt);return S}const z=Array(256);for(let D=0;D<256;D++)z[D]=st(D);const I=t.alloc(z);function w(){const D=t.addFunction(e+"__log2");D.addParam("n","i32"),D.setReturnType("i32"),D.addLocal("bits","i32"),D.addLocal("aux","i32");const S=D.getCodeBuilder();D.addCode(S.setLocal("aux",S.i32_shr_u(S.getLocal("n"),S.i32_const(1)))),D.addCode(S.setLocal("bits",S.i32_const(0))),D.addCode(S.block(S.loop(S.br_if(1,S.i32_eqz(S.getLocal("aux"))),S.setLocal("aux",S.i32_shr_u(S.getLocal("aux"),S.i32_const(1))),S.setLocal("bits",S.i32_add(S.getLocal("bits"),S.i32_const(1))),S.br(0)))),D.addCode(S.if(S.i32_ne(S.getLocal("n"),S.i32_shl(S.i32_const(1),S.getLocal("bits"))),S.unreachable())),D.addCode(S.if(S.i32_gt_u(S.getLocal("bits"),S.i32_const(m)),S.unreachable())),D.addCode(S.getLocal("bits"))}function T(){const D=t.addFunction(e+"_fft");D.addParam("px","i32"),D.addParam("n","i32"),D.addLocal("bits","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a));D.addCode(S.setLocal("bits",S.call(e+"__log2",S.getLocal("n"))),S.call(r+"_one",lt),S.call(e+"_rawfft",S.getLocal("px"),S.getLocal("bits"),S.i32_const(0),lt))}function V(){const D=t.addFunction(e+"_ifft");D.addParam("px","i32"),D.addParam("n","i32"),D.addLocal("bits","i32"),D.addLocal("pInv2","i32");const S=D.getCodeBuilder();D.addCode(S.setLocal("bits",S.call(e+"__log2",S.getLocal("n"))),S.setLocal("pInv2",S.i32_add(S.i32_const(K),S.i32_mul(S.getLocal("bits"),S.i32_const(a)))),S.call(e+"_rawfft",S.getLocal("px"),S.getLocal("bits"),S.i32_const(1),S.getLocal("pInv2")))}function Y(){const D=t.addFunction(e+"_rawfft");D.addParam("px","i32"),D.addParam("bits","i32"),D.addParam("reverse","i32"),D.addParam("mulFactor","i32"),D.addLocal("s","i32"),D.addLocal("k","i32"),D.addLocal("j","i32"),D.addLocal("m","i32"),D.addLocal("mdiv2","i32"),D.addLocal("n","i32"),D.addLocal("pwm","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a)),ct=S.i32_const(t.alloc(d)),G=S.i32_const(t.alloc(d));D.addCode(S.call(e+"__reversePermutation",S.getLocal("px"),S.getLocal("bits")),S.setLocal("n",S.i32_shl(S.i32_const(1),S.getLocal("bits"))),S.setLocal("s",S.i32_const(1)),S.block(S.loop(S.br_if(1,S.i32_gt_u(S.getLocal("s"),S.getLocal("bits"))),S.setLocal("m",S.i32_shl(S.i32_const(1),S.getLocal("s"))),S.setLocal("pwm",S.i32_add(S.i32_const(x),S.i32_mul(S.getLocal("s"),S.i32_const(a)))),S.setLocal("k",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_ge_u(S.getLocal("k"),S.getLocal("n"))),S.call(r+"_one",lt),S.setLocal("mdiv2",S.i32_shr_u(S.getLocal("m"),S.i32_const(1))),S.setLocal("j",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_ge_u(S.getLocal("j"),S.getLocal("mdiv2"))),S.setLocal("idx1",S.i32_add(S.getLocal("px"),S.i32_mul(S.i32_add(S.getLocal("k"),S.getLocal("j")),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("idx1"),S.i32_mul(S.getLocal("mdiv2"),S.i32_const(d)))),S.call(s,S.getLocal("idx2"),lt,ct),S.call(i+"_copy",S.getLocal("idx1"),G),S.call(i+"_add",G,ct,S.getLocal("idx1")),S.call(i+"_sub",G,ct,S.getLocal("idx2")),S.call(r+"_mul",lt,S.getLocal("pwm"),lt),S.setLocal("j",S.i32_add(S.getLocal("j"),S.i32_const(1))),S.br(0))),S.setLocal("k",S.i32_add(S.getLocal("k"),S.getLocal("m"))),S.br(0))),S.setLocal("s",S.i32_add(S.getLocal("s"),S.i32_const(1))),S.br(0))),S.call(e+"__fftFinal",S.getLocal("px"),S.getLocal("bits"),S.getLocal("reverse"),S.getLocal("mulFactor")))}function Q(){const D=t.addFunction(e+"__fftFinal");D.addParam("px","i32"),D.addParam("bits","i32"),D.addParam("reverse","i32"),D.addParam("mulFactor","i32"),D.addLocal("n","i32"),D.addLocal("ndiv2","i32"),D.addLocal("pInv2","i32"),D.addLocal("i","i32"),D.addLocal("mask","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(d));D.addCode(S.if(S.i32_and(S.i32_eqz(S.getLocal("reverse")),S.call(r+"_isOne",S.getLocal("mulFactor"))),S.ret([])),S.setLocal("n",S.i32_shl(S.i32_const(1),S.getLocal("bits"))),S.setLocal("mask",S.i32_sub(S.getLocal("n"),S.i32_const(1))),S.setLocal("i",S.i32_const(1)),S.setLocal("ndiv2",S.i32_shr_u(S.getLocal("n"),S.i32_const(1))),S.block(S.loop(S.br_if(1,S.i32_ge_u(S.getLocal("i"),S.getLocal("ndiv2"))),S.setLocal("idx1",S.i32_add(S.getLocal("px"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("px"),S.i32_mul(S.i32_sub(S.getLocal("n"),S.getLocal("i")),S.i32_const(d)))),S.if(S.getLocal("reverse"),S.if(S.call(r+"_isOne",S.getLocal("mulFactor")),[...S.call(i+"_copy",S.getLocal("idx1"),lt),...S.call(i+"_copy",S.getLocal("idx2"),S.getLocal("idx1")),...S.call(i+"_copy",lt,S.getLocal("idx2"))],[...S.call(i+"_copy",S.getLocal("idx1"),lt),...S.call(s,S.getLocal("idx2"),S.getLocal("mulFactor"),S.getLocal("idx1")),...S.call(s,lt,S.getLocal("mulFactor"),S.getLocal("idx2"))]),S.if(S.call(r+"_isOne",S.getLocal("mulFactor")),[],[...S.call(s,S.getLocal("idx1"),S.getLocal("mulFactor"),S.getLocal("idx1")),...S.call(s,S.getLocal("idx2"),S.getLocal("mulFactor"),S.getLocal("idx2"))])),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))),S.if(S.call(r+"_isOne",S.getLocal("mulFactor")),[],[...S.call(s,S.getLocal("px"),S.getLocal("mulFactor"),S.getLocal("px")),...S.setLocal("idx2",S.i32_add(S.getLocal("px"),S.i32_mul(S.getLocal("ndiv2"),S.i32_const(d)))),...S.call(s,S.getLocal("idx2"),S.getLocal("mulFactor"),S.getLocal("idx2"))]))}function $(){const D=t.addFunction(e+"__reversePermutation");D.addParam("px","i32"),D.addParam("bits","i32"),D.addLocal("n","i32"),D.addLocal("i","i32"),D.addLocal("ri","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(d));D.addCode(S.setLocal("n",S.i32_shl(S.i32_const(1),S.getLocal("bits"))),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("i"),S.getLocal("n"))),S.setLocal("idx1",S.i32_add(S.getLocal("px"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("ri",S.call(e+"__rev",S.getLocal("i"),S.getLocal("bits"))),S.setLocal("idx2",S.i32_add(S.getLocal("px"),S.i32_mul(S.getLocal("ri"),S.i32_const(d)))),S.if(S.i32_lt_u(S.getLocal("i"),S.getLocal("ri")),[...S.call(i+"_copy",S.getLocal("idx1"),lt),...S.call(i+"_copy",S.getLocal("idx2"),S.getLocal("idx1")),...S.call(i+"_copy",lt,S.getLocal("idx2"))]),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}function F(){const D=t.addFunction(e+"__rev");D.addParam("x","i32"),D.addParam("bits","i32"),D.setReturnType("i32");const S=D.getCodeBuilder();D.addCode(S.i32_rotl(S.i32_add(S.i32_add(S.i32_shl(S.i32_load8_u(S.i32_and(S.getLocal("x"),S.i32_const(255)),I,0),S.i32_const(24)),S.i32_shl(S.i32_load8_u(S.i32_and(S.i32_shr_u(S.getLocal("x"),S.i32_const(8)),S.i32_const(255)),I,0),S.i32_const(16))),S.i32_add(S.i32_shl(S.i32_load8_u(S.i32_and(S.i32_shr_u(S.getLocal("x"),S.i32_const(16)),S.i32_const(255)),I,0),S.i32_const(8)),S.i32_load8_u(S.i32_and(S.i32_shr_u(S.getLocal("x"),S.i32_const(24)),S.i32_const(255)),I,0))),S.getLocal("bits")))}function R(){const D=t.addFunction(e+"_fftJoin");D.addParam("pBuff1","i32"),D.addParam("pBuff2","i32"),D.addParam("n","i32"),D.addParam("first","i32"),D.addParam("inc","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a)),ct=S.i32_const(t.alloc(d)),G=S.i32_const(t.alloc(d));D.addCode(S.call(r+"_copy",S.getLocal("first"),lt),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("i"),S.getLocal("n"))),S.setLocal("idx1",S.i32_add(S.getLocal("pBuff1"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("pBuff2"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.call(s,S.getLocal("idx2"),lt,ct),S.call(i+"_copy",S.getLocal("idx1"),G),S.call(i+"_add",G,ct,S.getLocal("idx1")),S.call(i+"_sub",G,ct,S.getLocal("idx2")),S.call(r+"_mul",lt,S.getLocal("inc"),lt),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}function _(){const D=t.addFunction(e+"_fftJoinExt");D.addParam("pBuff1","i32"),D.addParam("pBuff2","i32"),D.addParam("n","i32"),D.addParam("first","i32"),D.addParam("inc","i32"),D.addParam("totalBits","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32"),D.addLocal("pShiftToM","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a)),ct=S.i32_const(t.alloc(d));D.addCode(S.setLocal("pShiftToM",S.i32_add(S.i32_const(J),S.i32_mul(S.getLocal("totalBits"),S.i32_const(a)))),S.call(r+"_copy",S.getLocal("first"),lt),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("i"),S.getLocal("n"))),S.setLocal("idx1",S.i32_add(S.getLocal("pBuff1"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("pBuff2"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.call(i+"_add",S.getLocal("idx1"),S.getLocal("idx2"),ct),S.call(s,S.getLocal("idx2"),S.getLocal("pShiftToM"),S.getLocal("idx2")),S.call(i+"_add",S.getLocal("idx1"),S.getLocal("idx2"),S.getLocal("idx2")),S.call(s,S.getLocal("idx2"),lt,S.getLocal("idx2")),S.call(i+"_copy",ct,S.getLocal("idx1")),S.call(r+"_mul",lt,S.getLocal("inc"),lt),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}function k(){const D=t.addFunction(e+"_fftJoinExtInv");D.addParam("pBuff1","i32"),D.addParam("pBuff2","i32"),D.addParam("n","i32"),D.addParam("first","i32"),D.addParam("inc","i32"),D.addParam("totalBits","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32"),D.addLocal("pShiftToM","i32"),D.addLocal("pSConst","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a)),ct=S.i32_const(t.alloc(d));D.addCode(S.setLocal("pShiftToM",S.i32_add(S.i32_const(J),S.i32_mul(S.getLocal("totalBits"),S.i32_const(a)))),S.setLocal("pSConst",S.i32_add(S.i32_const(it),S.i32_mul(S.getLocal("totalBits"),S.i32_const(a)))),S.call(r+"_copy",S.getLocal("first"),lt),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("i"),S.getLocal("n"))),S.setLocal("idx1",S.i32_add(S.getLocal("pBuff1"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("pBuff2"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.call(s,S.getLocal("idx2"),lt,ct),S.call(i+"_sub",S.getLocal("idx1"),ct,S.getLocal("idx2")),S.call(s,S.getLocal("idx2"),S.getLocal("pSConst"),S.getLocal("idx2")),S.call(s,S.getLocal("idx1"),S.getLocal("pShiftToM"),S.getLocal("idx1")),S.call(i+"_sub",ct,S.getLocal("idx1"),S.getLocal("idx1")),S.call(s,S.getLocal("idx1"),S.getLocal("pSConst"),S.getLocal("idx1")),S.call(r+"_mul",lt,S.getLocal("inc"),lt),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}function H(){const D=t.addFunction(e+"_prepareLagrangeEvaluation");D.addParam("pBuff1","i32"),D.addParam("pBuff2","i32"),D.addParam("n","i32"),D.addParam("first","i32"),D.addParam("inc","i32"),D.addParam("totalBits","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32"),D.addLocal("pShiftToM","i32"),D.addLocal("pSConst","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a)),ct=S.i32_const(t.alloc(d));D.addCode(S.setLocal("pShiftToM",S.i32_add(S.i32_const(J),S.i32_mul(S.getLocal("totalBits"),S.i32_const(a)))),S.setLocal("pSConst",S.i32_add(S.i32_const(it),S.i32_mul(S.getLocal("totalBits"),S.i32_const(a)))),S.call(r+"_copy",S.getLocal("first"),lt),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("i"),S.getLocal("n"))),S.setLocal("idx1",S.i32_add(S.getLocal("pBuff1"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("pBuff2"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.call(s,S.getLocal("idx1"),S.getLocal("pShiftToM"),ct),S.call(i+"_sub",S.getLocal("idx2"),ct,ct),S.call(i+"_sub",S.getLocal("idx1"),S.getLocal("idx2"),S.getLocal("idx2")),S.call(s,ct,S.getLocal("pSConst"),S.getLocal("idx1")),S.call(s,S.getLocal("idx2"),lt,S.getLocal("idx2")),S.call(r+"_mul",lt,S.getLocal("inc"),lt),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}function L(){const D=t.addFunction(e+"_fftMix");D.addParam("pBuff","i32"),D.addParam("n","i32"),D.addParam("exp","i32"),D.addLocal("nGroups","i32"),D.addLocal("nPerGroup","i32"),D.addLocal("nPerGroupDiv2","i32"),D.addLocal("pairOffset","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32"),D.addLocal("j","i32"),D.addLocal("pwm","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(a)),ct=S.i32_const(t.alloc(d)),G=S.i32_const(t.alloc(d));D.addCode(S.setLocal("nPerGroup",S.i32_shl(S.i32_const(1),S.getLocal("exp"))),S.setLocal("nPerGroupDiv2",S.i32_shr_u(S.getLocal("nPerGroup"),S.i32_const(1))),S.setLocal("nGroups",S.i32_shr_u(S.getLocal("n"),S.getLocal("exp"))),S.setLocal("pairOffset",S.i32_mul(S.getLocal("nPerGroupDiv2"),S.i32_const(d))),S.setLocal("pwm",S.i32_add(S.i32_const(x),S.i32_mul(S.getLocal("exp"),S.i32_const(a)))),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("i"),S.getLocal("nGroups"))),S.call(r+"_one",lt),S.setLocal("j",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_eq(S.getLocal("j"),S.getLocal("nPerGroupDiv2"))),S.setLocal("idx1",S.i32_add(S.getLocal("pBuff"),S.i32_mul(S.i32_add(S.i32_mul(S.getLocal("i"),S.getLocal("nPerGroup")),S.getLocal("j")),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("idx1"),S.getLocal("pairOffset"))),S.call(s,S.getLocal("idx2"),lt,ct),S.call(i+"_copy",S.getLocal("idx1"),G),S.call(i+"_add",G,ct,S.getLocal("idx1")),S.call(i+"_sub",G,ct,S.getLocal("idx2")),S.call(r+"_mul",lt,S.getLocal("pwm"),lt),S.setLocal("j",S.i32_add(S.getLocal("j"),S.i32_const(1))),S.br(0))),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}function g(){const D=t.addFunction(e+"_fftFinal");D.addParam("pBuff","i32"),D.addParam("n","i32"),D.addParam("factor","i32"),D.addLocal("idx1","i32"),D.addLocal("idx2","i32"),D.addLocal("i","i32"),D.addLocal("ndiv2","i32");const S=D.getCodeBuilder(),lt=S.i32_const(t.alloc(d));D.addCode(S.setLocal("ndiv2",S.i32_shr_u(S.getLocal("n"),S.i32_const(1))),S.if(S.i32_and(S.getLocal("n"),S.i32_const(1)),S.call(s,S.i32_add(S.getLocal("pBuff"),S.i32_mul(S.getLocal("ndiv2"),S.i32_const(d))),S.getLocal("factor"),S.i32_add(S.getLocal("pBuff"),S.i32_mul(S.getLocal("ndiv2"),S.i32_const(d))))),S.setLocal("i",S.i32_const(0)),S.block(S.loop(S.br_if(1,S.i32_ge_u(S.getLocal("i"),S.getLocal("ndiv2"))),S.setLocal("idx1",S.i32_add(S.getLocal("pBuff"),S.i32_mul(S.getLocal("i"),S.i32_const(d)))),S.setLocal("idx2",S.i32_add(S.getLocal("pBuff"),S.i32_mul(S.i32_sub(S.i32_sub(S.getLocal("n"),S.i32_const(1)),S.getLocal("i")),S.i32_const(d)))),S.call(s,S.getLocal("idx2"),S.getLocal("factor"),lt),S.call(s,S.getLocal("idx1"),S.getLocal("factor"),S.getLocal("idx2")),S.call(i+"_copy",lt,S.getLocal("idx1")),S.setLocal("i",S.i32_add(S.getLocal("i"),S.i32_const(1))),S.br(0))))}F(),$(),Q(),Y(),w(),T(),V(),R(),_(),k(),L(),g(),H(),t.exportFunction(e+"_fft"),t.exportFunction(e+"_ifft"),t.exportFunction(e+"_rawfft"),t.exportFunction(e+"_fftJoin"),t.exportFunction(e+"_fftJoinExt"),t.exportFunction(e+"_fftJoinExtInv"),t.exportFunction(e+"_fftMix"),t.exportFunction(e+"_fftFinal"),t.exportFunction(e+"_prepareLagrangeEvaluation")},wN=function(t,e,i){const s=t.modules[i].n64*8;function o(){const l=t.addFunction(e+"_zero");l.addParam("px","i32"),l.addParam("n","i32"),l.addLocal("lastp","i32"),l.addLocal("p","i32");const d=l.getCodeBuilder();l.addCode(d.setLocal("p",d.getLocal("px")),d.setLocal("lastp",d.i32_add(d.getLocal("px"),d.i32_mul(d.getLocal("n"),d.i32_const(s)))),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("p"),d.getLocal("lastp"))),d.call(i+"_zero",d.getLocal("p")),d.setLocal("p",d.i32_add(d.getLocal("p"),d.i32_const(s))),d.br(0))))}function a(){const l=t.addFunction(e+"_constructLC");l.addParam("ppolynomials","i32"),l.addParam("psignals","i32"),l.addParam("nSignals","i32"),l.addParam("pres","i32"),l.addLocal("i","i32"),l.addLocal("j","i32"),l.addLocal("pp","i32"),l.addLocal("ps","i32"),l.addLocal("pd","i32"),l.addLocal("ncoefs","i32");const d=l.getCodeBuilder(),u=d.i32_const(t.alloc(s));l.addCode(d.setLocal("i",d.i32_const(0)),d.setLocal("pp",d.getLocal("ppolynomials")),d.setLocal("ps",d.getLocal("psignals")),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("i"),d.getLocal("nSignals"))),d.setLocal("ncoefs",d.i32_load(d.getLocal("pp"))),d.setLocal("pp",d.i32_add(d.getLocal("pp"),d.i32_const(4))),d.setLocal("j",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("j"),d.getLocal("ncoefs"))),d.setLocal("pd",d.i32_add(d.getLocal("pres"),d.i32_mul(d.i32_load(d.getLocal("pp")),d.i32_const(s)))),d.setLocal("pp",d.i32_add(d.getLocal("pp"),d.i32_const(4))),d.call(i+"_mul",d.getLocal("ps"),d.getLocal("pp"),u),d.call(i+"_add",u,d.getLocal("pd"),d.getLocal("pd")),d.setLocal("pp",d.i32_add(d.getLocal("pp"),d.i32_const(s))),d.setLocal("j",d.i32_add(d.getLocal("j"),d.i32_const(1))),d.br(0))),d.setLocal("ps",d.i32_add(d.getLocal("ps"),d.i32_const(s))),d.setLocal("i",d.i32_add(d.getLocal("i"),d.i32_const(1))),d.br(0))))}return o(),a(),t.exportFunction(e+"_zero"),t.exportFunction(e+"_constructLC"),e},_N=function(t,e,i){const s=t.modules[i].n64*8;function o(){const d=t.addFunction(e+"_buildABC");d.addParam("pCoefs","i32"),d.addParam("nCoefs","i32"),d.addParam("pWitness","i32"),d.addParam("pA","i32"),d.addParam("pB","i32"),d.addParam("pC","i32"),d.addParam("offsetOut","i32"),d.addParam("nOut","i32"),d.addParam("offsetWitness","i32"),d.addParam("nWitness","i32"),d.addLocal("it","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("last","i32"),d.addLocal("m","i32"),d.addLocal("c","i32"),d.addLocal("s","i32"),d.addLocal("pOut","i32");const u=d.getCodeBuilder(),h=u.i32_const(t.alloc(s));d.addCode(u.setLocal("ita",u.getLocal("pA")),u.setLocal("itb",u.getLocal("pB")),u.setLocal("last",u.i32_add(u.getLocal("pA"),u.i32_mul(u.getLocal("nOut"),u.i32_const(s)))),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("ita"),u.getLocal("last"))),u.call(i+"_zero",u.getLocal("ita")),u.call(i+"_zero",u.getLocal("itb")),u.setLocal("ita",u.i32_add(u.getLocal("ita"),u.i32_const(s))),u.setLocal("itb",u.i32_add(u.getLocal("itb"),u.i32_const(s))),u.br(0))),u.setLocal("it",u.getLocal("pCoefs")),u.setLocal("last",u.i32_add(u.getLocal("pCoefs"),u.i32_mul(u.getLocal("nCoefs"),u.i32_const(s+12)))),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("it"),u.getLocal("last"))),u.setLocal("s",u.i32_load(u.getLocal("it"),8)),u.if(u.i32_or(u.i32_lt_u(u.getLocal("s"),u.getLocal("offsetWitness")),u.i32_ge_u(u.getLocal("s"),u.i32_add(u.getLocal("offsetWitness"),u.getLocal("nWitness")))),[...u.setLocal("it",u.i32_add(u.getLocal("it"),u.i32_const(s+12))),...u.br(1)]),u.setLocal("m",u.i32_load(u.getLocal("it"))),u.if(u.i32_eq(u.getLocal("m"),u.i32_const(0)),u.setLocal("pOut",u.getLocal("pA")),u.if(u.i32_eq(u.getLocal("m"),u.i32_const(1)),u.setLocal("pOut",u.getLocal("pB")),[...u.setLocal("it",u.i32_add(u.getLocal("it"),u.i32_const(s+12))),...u.br(1)])),u.setLocal("c",u.i32_load(u.getLocal("it"),4)),u.if(u.i32_or(u.i32_lt_u(u.getLocal("c"),u.getLocal("offsetOut")),u.i32_ge_u(u.getLocal("c"),u.i32_add(u.getLocal("offsetOut"),u.getLocal("nOut")))),[...u.setLocal("it",u.i32_add(u.getLocal("it"),u.i32_const(s+12))),...u.br(1)]),u.setLocal("pOut",u.i32_add(u.getLocal("pOut"),u.i32_mul(u.i32_sub(u.getLocal("c"),u.getLocal("offsetOut")),u.i32_const(s)))),u.call(i+"_mul",u.i32_add(u.getLocal("pWitness"),u.i32_mul(u.i32_sub(u.getLocal("s"),u.getLocal("offsetWitness")),u.i32_const(s))),u.i32_add(u.getLocal("it"),u.i32_const(12)),h),u.call(i+"_add",u.getLocal("pOut"),h,u.getLocal("pOut")),u.setLocal("it",u.i32_add(u.getLocal("it"),u.i32_const(s+12))),u.br(0))),u.setLocal("ita",u.getLocal("pA")),u.setLocal("itb",u.getLocal("pB")),u.setLocal("it",u.getLocal("pC")),u.setLocal("last",u.i32_add(u.getLocal("pA"),u.i32_mul(u.getLocal("nOut"),u.i32_const(s)))),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("ita"),u.getLocal("last"))),u.call(i+"_mul",u.getLocal("ita"),u.getLocal("itb"),u.getLocal("it")),u.setLocal("ita",u.i32_add(u.getLocal("ita"),u.i32_const(s))),u.setLocal("itb",u.i32_add(u.getLocal("itb"),u.i32_const(s))),u.setLocal("it",u.i32_add(u.getLocal("it"),u.i32_const(s))),u.br(0))))}function a(){const d=t.addFunction(e+"_joinABC");d.addParam("pA","i32"),d.addParam("pB","i32"),d.addParam("pC","i32"),d.addParam("n","i32"),d.addParam("pP","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("itc","i32"),d.addLocal("itp","i32"),d.addLocal("last","i32");const u=d.getCodeBuilder(),h=u.i32_const(t.alloc(s));d.addCode(u.setLocal("ita",u.getLocal("pA")),u.setLocal("itb",u.getLocal("pB")),u.setLocal("itc",u.getLocal("pC")),u.setLocal("itp",u.getLocal("pP")),u.setLocal("last",u.i32_add(u.getLocal("pA"),u.i32_mul(u.getLocal("n"),u.i32_const(s)))),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("ita"),u.getLocal("last"))),u.call(i+"_mul",u.getLocal("ita"),u.getLocal("itb"),h),u.call(i+"_sub",h,u.getLocal("itc"),u.getLocal("itp")),u.setLocal("ita",u.i32_add(u.getLocal("ita"),u.i32_const(s))),u.setLocal("itb",u.i32_add(u.getLocal("itb"),u.i32_const(s))),u.setLocal("itc",u.i32_add(u.getLocal("itc"),u.i32_const(s))),u.setLocal("itp",u.i32_add(u.getLocal("itp"),u.i32_const(s))),u.br(0))))}function l(){const d=t.addFunction(e+"_batchAdd");d.addParam("pa","i32"),d.addParam("pb","i32"),d.addParam("n","i32"),d.addParam("pr","i32"),d.addLocal("ita","i32"),d.addLocal("itb","i32"),d.addLocal("itr","i32"),d.addLocal("last","i32");const u=d.getCodeBuilder();d.addCode(u.setLocal("ita",u.getLocal("pa")),u.setLocal("itb",u.getLocal("pb")),u.setLocal("itr",u.getLocal("pr")),u.setLocal("last",u.i32_add(u.getLocal("pa"),u.i32_mul(u.getLocal("n"),u.i32_const(s)))),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("ita"),u.getLocal("last"))),u.call(i+"_add",u.getLocal("ita"),u.getLocal("itb"),u.getLocal("itr")),u.setLocal("ita",u.i32_add(u.getLocal("ita"),u.i32_const(s))),u.setLocal("itb",u.i32_add(u.getLocal("itb"),u.i32_const(s))),u.setLocal("itr",u.i32_add(u.getLocal("itr"),u.i32_const(s))),u.br(0))))}return o(),a(),l(),t.exportFunction(e+"_buildABC"),t.exportFunction(e+"_joinABC"),t.exportFunction(e+"_batchAdd"),e},bN=function(t,e,i,r,s,o,a,l){const d=t.addFunction(e);d.addParam("pIn","i32"),d.addParam("n","i32"),d.addParam("pFirst","i32"),d.addParam("pInc","i32"),d.addParam("pOut","i32"),d.addLocal("pOldFree","i32"),d.addLocal("i","i32"),d.addLocal("pFrom","i32"),d.addLocal("pTo","i32");const u=d.getCodeBuilder(),h=u.i32_const(t.alloc(a));d.addCode(u.setLocal("pFrom",u.getLocal("pIn")),u.setLocal("pTo",u.getLocal("pOut"))),d.addCode(u.call(r+"_copy",u.getLocal("pFirst"),h)),d.addCode(u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.call(l,u.getLocal("pFrom"),h,u.getLocal("pTo")),u.setLocal("pFrom",u.i32_add(u.getLocal("pFrom"),u.i32_const(s))),u.setLocal("pTo",u.i32_add(u.getLocal("pTo"),u.i32_const(o))),u.call(r+"_mul",h,u.getLocal("pInc"),h),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0)))),t.exportFunction(e)};const Ge=Ga,CJ=l3,AJ=hN,TA=pN,IJ=mN,kA=gN,aw=yN,TJ=wN,kJ=_N,qd=bN,{bitLength:RJ,modInv:NJ,isOdd:RA,isNegative:MJ}=rr;var BJ=function(t,e){const i=e||"bn128";if(t.modules[i])return i;const r=21888242871839275222246405745257275088696311157297823662689037894645226208583n,s=21888242871839275222246405745257275088548364400416034343698204186575808495617n,o=Math.floor((RJ(r-1n)-1)/64)+1,a=o*8,l=a,d=a,u=d*2,h=d*12,m=t.alloc(Ge.bigInt2BytesLE(s,l)),p=CJ(t,r,"f1m");AJ(t,s,"fr","frm");const E=t.alloc(Ge.bigInt2BytesLE(W(3n),d)),C=kA(t,"g1m","f1m",E);aw(t,"frm","frm","frm","frm_mul"),TJ(t,"pol","frm"),kJ(t,"qap","frm");const v=TA(t,"f1m_neg","f2m","f1m"),A=t.alloc([...Ge.bigInt2BytesLE(W(19485874751759354771024239261021720505790618469301721065564631296452457478373n),d),...Ge.bigInt2BytesLE(W(266929791119991161246907387137283842545076965332900288569378510910307636690n),d)]),x=kA(t,"g2m","f2m",A);function P(at,M){const O=t.addFunction(at);O.addParam("pG","i32"),O.addParam("pFr","i32"),O.addParam("pr","i32");const ht=O.getCodeBuilder(),Et=ht.i32_const(t.alloc(a));O.addCode(ht.call("frm_fromMontgomery",ht.getLocal("pFr"),Et),ht.call(M,ht.getLocal("pG"),Et,ht.i32_const(a),ht.getLocal("pr"))),t.exportFunction(at)}P("g1m_timesFr","g1m_timesScalar"),aw(t,"g1m","g1m","frm","g1m_timesFr"),P("g2m_timesFr","g2m_timesScalar"),aw(t,"g2m","g2m","frm","g2m_timesFr"),P("g1m_timesFrAffine","g1m_timesScalarAffine"),P("g2m_timesFrAffine","g2m_timesScalarAffine"),qd(t,"frm_batchApplyKey","fmr","frm",a,a,a,"frm_mul"),qd(t,"g1m_batchApplyKey","g1m","frm",a*3,a*3,a,"g1m_timesFr"),qd(t,"g1m_batchApplyKeyMixed","g1m","frm",a*2,a*3,a,"g1m_timesFrAffine"),qd(t,"g2m_batchApplyKey","g2m","frm",a*2*3,a*3*2,a,"g2m_timesFr"),qd(t,"g2m_batchApplyKeyMixed","g2m","frm",a*2*2,a*3*2,a,"g2m_timesFrAffine");function W(at){return BigInt(at)*(1n<<BigInt(d*8))%r}const K=[1n,2n,1n],j=t.alloc([...Ge.bigInt2BytesLE(W(K[0]),d),...Ge.bigInt2BytesLE(W(K[1]),d),...Ge.bigInt2BytesLE(W(K[2]),d)]),b=[0n,1n,0n],B=t.alloc([...Ge.bigInt2BytesLE(W(b[0]),d),...Ge.bigInt2BytesLE(W(b[1]),d),...Ge.bigInt2BytesLE(W(b[2]),d)]),J=[[10857046999023057135944570762232829481370756359578518086990519993285655852781n,11559732032986387107991004021392285783925812861821192530917403151452391805634n],[8495653923123431417604973247489272438418190587263600148770280649306958101930n,4082367875863433681332203403145435568316851327593401208105741076214120093531n],[1n,0n]],it=t.alloc([...Ge.bigInt2BytesLE(W(J[0][0]),d),...Ge.bigInt2BytesLE(W(J[0][1]),d),...Ge.bigInt2BytesLE(W(J[1][0]),d),...Ge.bigInt2BytesLE(W(J[1][1]),d),...Ge.bigInt2BytesLE(W(J[2][0]),d),...Ge.bigInt2BytesLE(W(J[2][1]),d)]),st=[[0n,0n],[1n,0n],[0n,0n]],z=t.alloc([...Ge.bigInt2BytesLE(W(st[0][0]),d),...Ge.bigInt2BytesLE(W(st[0][1]),d),...Ge.bigInt2BytesLE(W(st[1][0]),d),...Ge.bigInt2BytesLE(W(st[1][1]),d),...Ge.bigInt2BytesLE(W(st[2][0]),d),...Ge.bigInt2BytesLE(W(st[2][1]),d)]),I=t.alloc([...Ge.bigInt2BytesLE(W(1),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d),...Ge.bigInt2BytesLE(W(0),d)]),w=t.alloc([...Ge.bigInt2BytesLE(W(9),d),...Ge.bigInt2BytesLE(W(1),d)]),T=t.alloc([...Ge.bigInt2BytesLE(W(NJ(2n,r)),d),...Ge.bigInt2BytesLE(0n,d)]),V=w,Y=t.alloc([...Ge.bigInt2BytesLE(W(19485874751759354771024239261021720505790618469301721065564631296452457478373n),d),...Ge.bigInt2BytesLE(W(266929791119991161246907387137283842545076965332900288569378510910307636690n),d)]);function Q(){const at=t.addFunction(i+"_mulNR6");at.addParam("x","i32"),at.addParam("pr","i32");const M=at.getCodeBuilder();at.addCode(M.call(v+"_mul",M.i32_const(w),M.getLocal("x"),M.getLocal("pr")))}Q();const $=IJ(t,i+"_mulNR6","f6m","f2m");function F(){const at=t.addFunction(i+"_mulNR12");at.addParam("x","i32"),at.addParam("pr","i32");const M=at.getCodeBuilder();at.addCode(M.call(v+"_mul",M.i32_const(w),M.i32_add(M.getLocal("x"),M.i32_const(a*4)),M.getLocal("pr")),M.call(v+"_copy",M.getLocal("x"),M.i32_add(M.getLocal("pr"),M.i32_const(a*2))),M.call(v+"_copy",M.i32_add(M.getLocal("x"),M.i32_const(a*2)),M.i32_add(M.getLocal("pr"),M.i32_const(a*4))))}F();const R=TA(t,i+"_mulNR12","ftm",$),k=vt(29793968203157093288n),H=t.alloc(k),L=3*u,g=k.length-1,S=k.reduce((at,M)=>at+(M!=0?1:0),0)+g+1,lt=6*a,ct=3*a*2+S*L;t.modules[i]={n64:o,pG1gen:j,pG1zero:B,pG1b:E,pG2gen:it,pG2zero:z,pG2b:A,pq:t.modules.f1m.pq,pr:m,pOneT:I,prePSize:lt,preQSize:ct,r:s.toString(),q:r.toString()};const G=4965661367192848881n;function ft(at){let M=at;const O=[];for(;M>0n;){if(RA(M)){const ht=2-Number(M%4n);O.push(ht),M=M-BigInt(ht)}else O.push(0);M=M>>1n}return O}function vt(at){let M=at;const O=[];for(;M>0n;)RA(M)?O.push(1):O.push(0),M=M>>1n;return O}function wt(){const at=t.addFunction(i+"_prepareG1");at.addParam("pP","i32"),at.addParam("ppreP","i32");const M=at.getCodeBuilder();at.addCode(M.call(C+"_normalize",M.getLocal("pP"),M.getLocal("ppreP")))}function bt(){const at=t.addFunction(i+"_prepAddStep");at.addParam("pQ","i32"),at.addParam("pR","i32"),at.addParam("pCoef","i32");const M=at.getCodeBuilder(),O=M.getLocal("pQ"),ht=M.i32_add(M.getLocal("pQ"),M.i32_const(u)),Et=M.getLocal("pR"),mt=M.i32_add(M.getLocal("pR"),M.i32_const(u)),xt=M.i32_add(M.getLocal("pR"),M.i32_const(2*u)),Lt=M.getLocal("pCoef"),At=M.i32_add(M.getLocal("pCoef"),M.i32_const(u)),jt=M.i32_add(M.getLocal("pCoef"),M.i32_const(2*u)),Wt=At,Bt=M.i32_const(t.alloc(u)),Nt=M.i32_const(t.alloc(u)),Jt=M.i32_const(t.alloc(u)),Xt=M.i32_const(t.alloc(u)),ot=M.i32_const(t.alloc(u)),Z=M.i32_const(t.alloc(u)),tt=M.i32_const(t.alloc(u));at.addCode(M.call(v+"_mul",O,xt,Wt),M.call(v+"_sub",Et,Wt,Wt),M.call(v+"_mul",ht,xt,Bt),M.call(v+"_sub",mt,Bt,Bt),M.call(v+"_square",Wt,Nt),M.call(v+"_square",Bt,Jt),M.call(v+"_mul",Wt,Nt,Xt),M.call(v+"_mul",Et,Nt,ot),M.call(v+"_add",ot,ot,tt),M.call(v+"_mul",xt,Jt,Z),M.call(v+"_add",Xt,Z,Z),M.call(v+"_sub",Z,tt,Z),M.call(v+"_mul",Wt,Z,Et),M.call(v+"_mul",Xt,mt,mt),M.call(v+"_sub",ot,Z,tt),M.call(v+"_mul",Bt,tt,tt),M.call(v+"_sub",tt,mt,mt),M.call(v+"_mul",xt,Xt,xt),M.call(v+"_mul",Wt,ht,tt),M.call(v+"_mul",Bt,O,Lt),M.call(v+"_sub",Lt,tt,Lt),M.call(v+"_mul",Lt,M.i32_const(V),Lt),M.call(v+"_neg",Bt,jt))}function Ft(){const at=t.addFunction(i+"_prepDblStep");at.addParam("pR","i32"),at.addParam("pCoef","i32");const M=at.getCodeBuilder(),O=M.getLocal("pR"),ht=M.i32_add(M.getLocal("pR"),M.i32_const(u)),Et=M.i32_add(M.getLocal("pR"),M.i32_const(2*u)),mt=M.getLocal("pCoef"),xt=M.i32_add(M.getLocal("pCoef"),M.i32_const(u)),Lt=M.i32_add(M.getLocal("pCoef"),M.i32_const(2*u)),At=M.i32_const(t.alloc(u)),jt=M.i32_const(t.alloc(u)),Wt=M.i32_const(t.alloc(u)),Bt=M.i32_const(t.alloc(u)),Nt=M.i32_const(t.alloc(u)),Jt=M.i32_const(t.alloc(u)),Xt=M.i32_const(t.alloc(u)),ot=M.i32_const(t.alloc(u)),Z=M.i32_const(t.alloc(u)),tt=M.i32_const(t.alloc(u)),pt=M.i32_const(t.alloc(u)),gt=M.i32_const(t.alloc(u));at.addCode(M.call(v+"_mul",ht,M.i32_const(T),At),M.call(v+"_mul",O,At,At),M.call(v+"_square",ht,jt),M.call(v+"_square",Et,Wt),M.call(v+"_add",Wt,Wt,Bt),M.call(v+"_add",Bt,Wt,Bt),M.call(v+"_mul",M.i32_const(Y),Bt,Nt),M.call(v+"_add",Nt,Nt,Jt),M.call(v+"_add",Nt,Jt,Jt),M.call(v+"_add",jt,Jt,Xt),M.call(v+"_mul",Xt,M.i32_const(T),Xt),M.call(v+"_add",jt,Wt,gt),M.call(v+"_add",ht,Et,ot),M.call(v+"_square",ot,ot),M.call(v+"_sub",ot,gt,ot),M.call(v+"_sub",Nt,jt,Z),M.call(v+"_square",O,tt),M.call(v+"_square",Nt,pt),M.call(v+"_sub",jt,Jt,gt),M.call(v+"_mul",At,gt,O),M.call(v+"_add",pt,pt,gt),M.call(v+"_add",pt,gt,gt),M.call(v+"_square",Xt,ht),M.call(v+"_sub",ht,gt,ht),M.call(v+"_mul",jt,ot,Et),M.call(v+"_mul",M.i32_const(V),Z,mt),M.call(v+"_neg",ot,xt),M.call(v+"_add",tt,tt,Lt),M.call(v+"_add",tt,Lt,Lt))}function Pt(){const at=t.addFunction(i+"_mulByQ");at.addParam("p1","i32"),at.addParam("pr","i32");const M=at.getCodeBuilder(),O=M.getLocal("p1"),ht=M.i32_add(M.getLocal("p1"),M.i32_const(u)),Et=M.i32_add(M.getLocal("p1"),M.i32_const(u*2)),mt=M.getLocal("pr"),xt=M.i32_add(M.getLocal("pr"),M.i32_const(u)),Lt=M.i32_add(M.getLocal("pr"),M.i32_const(u*2)),At=M.i32_const(t.alloc([...Ge.bigInt2BytesLE(W("21575463638280843010398324269430826099269044274347216827212613867836435027261"),d),...Ge.bigInt2BytesLE(W("10307601595873709700152284273816112264069230130616436755625194854815875713954"),d)])),jt=M.i32_const(t.alloc([...Ge.bigInt2BytesLE(W("2821565182194536844548159561693502659359617185244120367078079554186484126554"),d),...Ge.bigInt2BytesLE(W("3505843767911556378687030309984248845540243509899259641013678093033130930403"),d)]));at.addCode(M.call(v+"_conjugate",O,mt),M.call(v+"_mul",At,mt,mt),M.call(v+"_conjugate",ht,xt),M.call(v+"_mul",jt,xt,xt),M.call(v+"_conjugate",Et,Lt))}function Gt(){Pt();const at=t.addFunction(i+"_prepareG2");at.addParam("pQ","i32"),at.addParam("ppreQ","i32"),at.addLocal("pCoef","i32"),at.addLocal("i","i32");const M=at.getCodeBuilder(),O=M.getLocal("pQ"),ht=t.alloc(u*3),Et=M.i32_const(ht),mt=M.i32_const(ht),xt=M.i32_const(ht+u),Lt=M.i32_const(ht+2*u),At=M.i32_add(M.getLocal("ppreQ"),M.i32_const(0)),jt=M.i32_add(M.getLocal("ppreQ"),M.i32_const(u)),Wt=t.alloc(u*3),Bt=M.i32_const(Wt),Nt=t.alloc(u*3),Jt=M.i32_const(Nt),Xt=M.i32_const(Nt+u);at.addCode(M.call(x+"_normalize",O,At),M.call(v+"_copy",At,mt),M.call(v+"_copy",jt,xt),M.call(v+"_one",Lt)),at.addCode(M.setLocal("pCoef",M.i32_add(M.getLocal("ppreQ"),M.i32_const(u*3))),M.setLocal("i",M.i32_const(k.length-2)),M.block(M.loop(M.call(i+"_prepDblStep",Et,M.getLocal("pCoef")),M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L))),M.if(M.i32_load8_s(M.getLocal("i"),H),[...M.call(i+"_prepAddStep",At,Et,M.getLocal("pCoef")),...M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L)))]),M.br_if(1,M.i32_eqz(M.getLocal("i"))),M.setLocal("i",M.i32_sub(M.getLocal("i"),M.i32_const(1))),M.br(0)))),at.addCode(M.call(i+"_mulByQ",At,Bt),M.call(i+"_mulByQ",Bt,Jt)),at.addCode(M.call(v+"_neg",Xt,Xt),M.call(i+"_prepAddStep",Bt,Et,M.getLocal("pCoef")),M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L))),M.call(i+"_prepAddStep",Jt,Et,M.getLocal("pCoef")),M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L))))}function $t(){const at=t.addFunction(i+"__mulBy024Old");at.addParam("pEll0","i32"),at.addParam("pEllVW","i32"),at.addParam("pEllVV","i32"),at.addParam("pR","i32");const M=at.getCodeBuilder(),O=M.getLocal("pEll0"),ht=M.getLocal("pEllVV"),Et=M.getLocal("pEllVW"),mt=M.getLocal("pR"),xt=t.alloc(h),Lt=M.i32_const(xt),At=M.i32_const(xt),jt=M.i32_const(xt+u),Wt=M.i32_const(xt+u*2),Bt=M.i32_const(xt+u*3),Nt=M.i32_const(xt+u*4),Jt=M.i32_const(xt+u*5);at.addCode(M.call(v+"_copy",O,At),M.call(v+"_zero",jt),M.call(v+"_copy",ht,Wt),M.call(v+"_zero",Bt),M.call(v+"_copy",Et,Nt),M.call(v+"_zero",Jt),M.call(R+"_mul",Lt,mt,mt))}function kt(){const at=t.addFunction(i+"__mulBy024");at.addParam("pEll0","i32"),at.addParam("pEllVW","i32"),at.addParam("pEllVV","i32"),at.addParam("pR","i32");const M=at.getCodeBuilder(),O=M.getLocal("pEll0"),ht=M.getLocal("pEllVV"),Et=M.getLocal("pEllVW"),mt=M.getLocal("pR"),xt=M.i32_add(M.getLocal("pR"),M.i32_const(2*a)),Lt=M.i32_add(M.getLocal("pR"),M.i32_const(4*a)),At=M.i32_add(M.getLocal("pR"),M.i32_const(6*a)),jt=M.i32_add(M.getLocal("pR"),M.i32_const(8*a)),Wt=M.i32_add(M.getLocal("pR"),M.i32_const(10*a)),Bt=M.i32_const(t.alloc(u)),Nt=M.i32_const(t.alloc(u)),Jt=M.i32_const(t.alloc(u)),Xt=M.i32_const(t.alloc(u)),ot=M.i32_const(t.alloc(u)),Z=M.i32_const(t.alloc(u)),tt=M.i32_const(t.alloc(u)),pt=M.i32_const(t.alloc(u)),gt=M.i32_const(t.alloc(u)),St=M.i32_const(t.alloc(u)),It=M.i32_const(t.alloc(u));at.addCode(M.call(v+"_mul",mt,O,tt),M.call(v+"_mul",Lt,ht,pt),M.call(v+"_mul",jt,Et,gt),M.call(v+"_add",mt,jt,Jt),M.call(v+"_add",mt,Lt,Nt),M.call(v+"_add",xt,At,Xt),M.call(v+"_add",Xt,Wt,Xt),M.call(v+"_mul",xt,ht,St),M.call(v+"_add",St,gt,ot),M.call(v+"_mul",M.i32_const(w),ot,Z),M.call(v+"_add",Z,tt,mt),M.call(v+"_mul",Wt,Et,ot),M.call(v+"_add",St,ot,St),M.call(v+"_add",ot,pt,ot),M.call(v+"_mul",M.i32_const(w),ot,Z),M.call(v+"_mul",xt,O,ot),M.call(v+"_add",St,ot,St),M.call(v+"_add",Z,ot,xt),M.call(v+"_add",O,ht,Bt),M.call(v+"_mul",Nt,Bt,ot),M.call(v+"_add",tt,pt,It),M.call(v+"_sub",ot,It,ot),M.call(v+"_mul",At,Et,Z),M.call(v+"_add",St,Z,St),M.call(v+"_add",Lt,jt,Bt),M.call(v+"_add",ot,Z,Lt),M.call(v+"_add",ht,Et,Nt),M.call(v+"_mul",Nt,Bt,ot),M.call(v+"_add",pt,gt,It),M.call(v+"_sub",ot,It,ot),M.call(v+"_mul",M.i32_const(w),ot,Z),M.call(v+"_mul",At,O,ot),M.call(v+"_add",St,ot,St),M.call(v+"_add",Z,ot,At),M.call(v+"_mul",Wt,ht,ot),M.call(v+"_add",St,ot,St),M.call(v+"_mul",M.i32_const(w),ot,Z),M.call(v+"_add",O,Et,Bt),M.call(v+"_mul",Jt,Bt,ot),M.call(v+"_add",tt,gt,It),M.call(v+"_sub",ot,It,ot),M.call(v+"_add",Z,ot,jt),M.call(v+"_add",O,ht,Bt),M.call(v+"_add",Bt,Et,Bt),M.call(v+"_mul",Xt,Bt,ot),M.call(v+"_sub",ot,St,Wt))}function Rt(){const at=t.addFunction(i+"_millerLoop");at.addParam("ppreP","i32"),at.addParam("ppreQ","i32"),at.addParam("r","i32"),at.addLocal("pCoef","i32"),at.addLocal("i","i32");const M=at.getCodeBuilder(),O=M.getLocal("ppreP"),ht=M.i32_add(M.getLocal("ppreP"),M.i32_const(d)),Et=M.getLocal("pCoef"),mt=M.i32_add(M.getLocal("pCoef"),M.i32_const(u)),xt=M.i32_add(M.getLocal("pCoef"),M.i32_const(2*u)),Lt=t.alloc(u),At=M.i32_const(Lt),jt=t.alloc(u),Wt=M.i32_const(jt),Bt=M.getLocal("r");at.addCode(M.call(R+"_one",Bt),M.setLocal("pCoef",M.i32_add(M.getLocal("ppreQ"),M.i32_const(u*3))),M.setLocal("i",M.i32_const(k.length-2)),M.block(M.loop(M.call(R+"_square",Bt,Bt),M.call(v+"_mul1",mt,ht,At),M.call(v+"_mul1",xt,O,Wt),M.call(i+"__mulBy024",Et,At,Wt,Bt),M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L))),M.if(M.i32_load8_s(M.getLocal("i"),H),[...M.call(v+"_mul1",mt,ht,At),...M.call(v+"_mul1",xt,O,Wt),...M.call(i+"__mulBy024",Et,At,Wt,Bt),...M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L)))]),M.br_if(1,M.i32_eqz(M.getLocal("i"))),M.setLocal("i",M.i32_sub(M.getLocal("i"),M.i32_const(1))),M.br(0)))),at.addCode(M.call(v+"_mul1",mt,ht,At),M.call(v+"_mul1",xt,O,Wt),M.call(i+"__mulBy024",Et,At,Wt,Bt),M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L))),M.call(v+"_mul1",mt,ht,At),M.call(v+"_mul1",xt,O,Wt),M.call(i+"__mulBy024",Et,At,Wt,Bt),M.setLocal("pCoef",M.i32_add(M.getLocal("pCoef"),M.i32_const(L))))}function Ht(at){const M=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[8376118865763821496583973867626364092589906065868298776909617916018768340080n,16469823323077808223889137241176536799009286646108169935659301613961712198316n],[21888242871839275220042445260109153167277707414472061641714758635765020556617n,0n],[11697423496358154304825782922584725312912383441159505038794027105778954184319n,303847389135065887422783454877609941456349188919719272345083954437860409601n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[3321304630594332808241809054958361220322477375291206261884409189760185844239n,5722266937896532885780051958958348231143373700109372999374820235121374419868n],[21888242871839275222246405745257275088696311157297823662689037894645226208582n,0n],[13512124006075453725662431877630910996106405091429524885779419978626457868503n,5418419548761466998357268504080738289687024511189653727029736280683514010267n],[2203960485148121921418603742825762020974279258880205651966n,0n],[10190819375481120917420622822672549775783927716138318623895010788866272024264n,21584395482704209334823622290379665147239961968378104390343953940207365798982n],[2203960485148121921418603742825762020974279258880205651967n,0n],[18566938241244942414004596690298913868373833782006617400804628704885040364344n,16165975933942742336466353786298926857552937457188450663314217659523851788715n]]],O=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[21575463638280843010398324269430826099269044274347216827212613867836435027261n,10307601595873709700152284273816112264069230130616436755625194854815875713954n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[3772000881919853776433695186713858239009073593817195771773381919316419345261n,2236595495967245188281701248203181795121068902605861227855261137820944008926n],[2203960485148121921418603742825762020974279258880205651966n,0n],[18429021223477853657660792034369865839114504446431234726392080002137598044644n,9344045779998320333812420223237981029506012124075525679208581902008406485703n]],[[1n,0n],[2581911344467009335267311115468803099551665605076196740867805258568234346338n,19937756971775647987995932169929341994314640652964949448313374472400716661030n],[2203960485148121921418603742825762020974279258880205651966n,0n],[5324479202449903542726783395506214481928257762400643279780343368557297135718n,16208900380737693084919495127334387981393726419856888799917914180988844123039n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[13981852324922362344252311234282257507216387789820983642040889267519694726527n,7629828391165209371577384193250820201684255241773809077146787135900891633097n]]],ht=t.addFunction(i+"__frobeniusMap"+at);ht.addParam("x","i32"),ht.addParam("r","i32");const Et=ht.getCodeBuilder();for(let xt=0;xt<6;xt++){const Lt=xt==0?Et.getLocal("x"):Et.i32_add(Et.getLocal("x"),Et.i32_const(xt*u)),At=Lt,jt=Et.i32_add(Et.getLocal("x"),Et.i32_const(xt*u+d)),Wt=xt==0?Et.getLocal("r"):Et.i32_add(Et.getLocal("r"),Et.i32_const(xt*u)),Bt=Wt,Nt=Et.i32_add(Et.getLocal("r"),Et.i32_const(xt*u+d)),Jt=mt(M[Math.floor(xt/3)][at%12],O[xt%3][at%6]),Xt=t.alloc([...Ge.bigInt2BytesLE(W(Jt[0]),32),...Ge.bigInt2BytesLE(W(Jt[1]),32)]);at%2==1?ht.addCode(Et.call(p+"_copy",At,Bt),Et.call(p+"_neg",jt,Nt),Et.call(v+"_mul",Wt,Et.i32_const(Xt),Wt)):ht.addCode(Et.call(v+"_mul",Lt,Et.i32_const(Xt),Wt))}function mt(xt,Lt){const At=BigInt(xt[0]),jt=BigInt(xt[1]),Wt=BigInt(Lt[0]),Bt=BigInt(Lt[1]),Nt=[(At*Wt-jt*Bt)%r,(At*Bt+jt*Wt)%r];return MJ(Nt[0])&&(Nt[0]=Nt[0]+r),Nt}}function Kt(){const at=t.addFunction(i+"__finalExponentiationFirstChunk");at.addParam("x","i32"),at.addParam("r","i32");const M=at.getCodeBuilder(),O=M.getLocal("x"),ht=O,Et=M.i32_add(O,M.i32_const(a*6)),mt=M.getLocal("r"),xt=t.alloc(h),Lt=M.i32_const(xt),At=Lt,jt=M.i32_const(xt+a*6),Wt=M.i32_const(t.alloc(h)),Bt=M.i32_const(t.alloc(h)),Nt=M.i32_const(t.alloc(h));at.addCode(M.call($+"_copy",ht,At),M.call($+"_neg",Et,jt),M.call(R+"_inverse",O,Wt),M.call(R+"_mul",Lt,Wt,Bt),M.call(i+"__frobeniusMap2",Bt,Nt),M.call(R+"_mul",Bt,Nt,mt))}function se(){const at=t.addFunction(i+"__cyclotomicSquare");at.addParam("x","i32"),at.addParam("r","i32");const M=at.getCodeBuilder(),O=M.getLocal("x"),ht=M.i32_add(M.getLocal("x"),M.i32_const(u)),Et=M.i32_add(M.getLocal("x"),M.i32_const(2*u)),mt=M.i32_add(M.getLocal("x"),M.i32_const(3*u)),xt=M.i32_add(M.getLocal("x"),M.i32_const(4*u)),Lt=M.i32_add(M.getLocal("x"),M.i32_const(5*u)),At=M.getLocal("r"),jt=M.i32_add(M.getLocal("r"),M.i32_const(u)),Wt=M.i32_add(M.getLocal("r"),M.i32_const(2*u)),Bt=M.i32_add(M.getLocal("r"),M.i32_const(3*u)),Nt=M.i32_add(M.getLocal("r"),M.i32_const(4*u)),Jt=M.i32_add(M.getLocal("r"),M.i32_const(5*u)),Xt=M.i32_const(t.alloc(u)),ot=M.i32_const(t.alloc(u)),Z=M.i32_const(t.alloc(u)),tt=M.i32_const(t.alloc(u)),pt=M.i32_const(t.alloc(u)),gt=M.i32_const(t.alloc(u)),St=M.i32_const(t.alloc(u)),It=M.i32_const(t.alloc(u));at.addCode(M.call(v+"_mul",O,xt,St),M.call(v+"_mul",xt,M.i32_const(w),Xt),M.call(v+"_add",O,Xt,Xt),M.call(v+"_add",O,xt,It),M.call(v+"_mul",It,Xt,Xt),M.call(v+"_mul",M.i32_const(w),St,It),M.call(v+"_add",St,It,It),M.call(v+"_sub",Xt,It,Xt),M.call(v+"_add",St,St,ot),M.call(v+"_mul",mt,Et,St),M.call(v+"_mul",Et,M.i32_const(w),Z),M.call(v+"_add",mt,Z,Z),M.call(v+"_add",mt,Et,It),M.call(v+"_mul",It,Z,Z),M.call(v+"_mul",M.i32_const(w),St,It),M.call(v+"_add",St,It,It),M.call(v+"_sub",Z,It,Z),M.call(v+"_add",St,St,tt),M.call(v+"_mul",ht,Lt,St),M.call(v+"_mul",Lt,M.i32_const(w),pt),M.call(v+"_add",ht,pt,pt),M.call(v+"_add",ht,Lt,It),M.call(v+"_mul",It,pt,pt),M.call(v+"_mul",M.i32_const(w),St,It),M.call(v+"_add",St,It,It),M.call(v+"_sub",pt,It,pt),M.call(v+"_add",St,St,gt),M.call(v+"_sub",Xt,O,At),M.call(v+"_add",At,At,At),M.call(v+"_add",Xt,At,At),M.call(v+"_add",ot,xt,Nt),M.call(v+"_add",Nt,Nt,Nt),M.call(v+"_add",ot,Nt,Nt),M.call(v+"_mul",gt,M.i32_const(V),It),M.call(v+"_add",It,mt,Bt),M.call(v+"_add",Bt,Bt,Bt),M.call(v+"_add",It,Bt,Bt),M.call(v+"_sub",pt,Et,Wt),M.call(v+"_add",Wt,Wt,Wt),M.call(v+"_add",pt,Wt,Wt),M.call(v+"_sub",Z,ht,jt),M.call(v+"_add",jt,jt,jt),M.call(v+"_add",Z,jt,jt),M.call(v+"_add",tt,Lt,Jt),M.call(v+"_add",Jt,Jt,Jt),M.call(v+"_add",tt,Jt,Jt))}function _e(at,M){const O=ft(at).map(jt=>jt==-1?255:jt),ht=t.alloc(O),Et=t.addFunction(i+"__cyclotomicExp_"+M);Et.addParam("x","i32"),Et.addParam("r","i32"),Et.addLocal("bit","i32"),Et.addLocal("i","i32");const mt=Et.getCodeBuilder(),xt=mt.getLocal("x"),Lt=mt.getLocal("r"),At=mt.i32_const(t.alloc(h));Et.addCode(mt.call(R+"_conjugate",xt,At),mt.call(R+"_one",Lt),mt.if(mt.teeLocal("bit",mt.i32_load8_s(mt.i32_const(O.length-1),ht)),mt.if(mt.i32_eq(mt.getLocal("bit"),mt.i32_const(1)),mt.call(R+"_mul",Lt,xt,Lt),mt.call(R+"_mul",Lt,At,Lt))),mt.setLocal("i",mt.i32_const(O.length-2)),mt.block(mt.loop(mt.call(i+"__cyclotomicSquare",Lt,Lt),mt.if(mt.teeLocal("bit",mt.i32_load8_s(mt.getLocal("i"),ht)),mt.if(mt.i32_eq(mt.getLocal("bit"),mt.i32_const(1)),mt.call(R+"_mul",Lt,xt,Lt),mt.call(R+"_mul",Lt,At,Lt))),mt.br_if(1,mt.i32_eqz(mt.getLocal("i"))),mt.setLocal("i",mt.i32_sub(mt.getLocal("i"),mt.i32_const(1))),mt.br(0))))}function ae(){se(),_e(G,"w0");const at=t.addFunction(i+"__finalExponentiationLastChunk");at.addParam("x","i32"),at.addParam("r","i32");const M=at.getCodeBuilder(),O=M.getLocal("x"),ht=M.getLocal("r"),Et=M.i32_const(t.alloc(h)),mt=M.i32_const(t.alloc(h)),xt=M.i32_const(t.alloc(h)),Lt=M.i32_const(t.alloc(h)),At=M.i32_const(t.alloc(h)),jt=M.i32_const(t.alloc(h)),Wt=M.i32_const(t.alloc(h)),Bt=M.i32_const(t.alloc(h)),Nt=M.i32_const(t.alloc(h)),Jt=M.i32_const(t.alloc(h)),Xt=M.i32_const(t.alloc(h)),ot=M.i32_const(t.alloc(h)),Z=M.i32_const(t.alloc(h)),tt=M.i32_const(t.alloc(h)),pt=M.i32_const(t.alloc(h)),gt=M.i32_const(t.alloc(h)),St=M.i32_const(t.alloc(h)),It=M.i32_const(t.alloc(h)),le=M.i32_const(t.alloc(h)),xe=M.i32_const(t.alloc(h)),Se=M.i32_const(t.alloc(h));at.addCode(M.call(i+"__cyclotomicExp_w0",O,Et),M.call(R+"_conjugate",Et,Et),M.call(i+"__cyclotomicSquare",Et,mt),M.call(i+"__cyclotomicSquare",mt,xt),M.call(R+"_mul",xt,mt,Lt),M.call(i+"__cyclotomicExp_w0",Lt,At),M.call(R+"_conjugate",At,At),M.call(i+"__cyclotomicSquare",At,jt),M.call(i+"__cyclotomicExp_w0",jt,Wt),M.call(R+"_conjugate",Wt,Wt),M.call(R+"_conjugate",Lt,Bt),M.call(R+"_conjugate",Wt,Nt),M.call(R+"_mul",Nt,At,Jt),M.call(R+"_mul",Jt,Bt,Xt),M.call(R+"_mul",Xt,mt,ot),M.call(R+"_mul",Xt,At,Z),M.call(R+"_mul",Z,O,tt),M.call(i+"__frobeniusMap1",ot,pt),M.call(R+"_mul",pt,tt,gt),M.call(i+"__frobeniusMap2",Xt,St),M.call(R+"_mul",St,gt,It),M.call(R+"_conjugate",O,le),M.call(R+"_mul",le,ot,xe),M.call(i+"__frobeniusMap3",xe,Se),M.call(R+"_mul",Se,It,ht))}function de(){Kt(),ae();const at=t.addFunction(i+"_finalExponentiation");at.addParam("x","i32"),at.addParam("r","i32");const M=at.getCodeBuilder(),O=M.getLocal("x"),ht=M.getLocal("r"),Et=M.i32_const(t.alloc(h));at.addCode(M.call(i+"__finalExponentiationFirstChunk",O,Et),M.call(i+"__finalExponentiationLastChunk",Et,ht))}function fe(){const at=t.addFunction(i+"_finalExponentiationOld");at.addParam("x","i32"),at.addParam("r","i32");const O=t.alloc(Ge.bigInt2BytesLE(552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480n,352)),ht=at.getCodeBuilder();at.addCode(ht.call(R+"_exp",ht.getLocal("x"),ht.i32_const(O),ht.i32_const(352),ht.getLocal("r")))}const Yt=t.alloc(lt),ut=t.alloc(ct);function X(at){const M=t.addFunction(i+"_pairingEq"+at);for(let mt=0;mt<at;mt++)M.addParam("p_"+mt,"i32"),M.addParam("q_"+mt,"i32");M.addParam("c","i32"),M.setReturnType("i32");const O=M.getCodeBuilder(),ht=O.i32_const(t.alloc(h)),Et=O.i32_const(t.alloc(h));M.addCode(O.call(R+"_one",ht));for(let mt=0;mt<at;mt++)M.addCode(O.call(i+"_prepareG1",O.getLocal("p_"+mt),O.i32_const(Yt))),M.addCode(O.call(i+"_prepareG2",O.getLocal("q_"+mt),O.i32_const(ut))),M.addCode(O.call(i+"_millerLoop",O.i32_const(Yt),O.i32_const(ut),Et)),M.addCode(O.call(R+"_mul",ht,Et,ht));M.addCode(O.call(i+"_finalExponentiation",ht,ht)),M.addCode(O.call(R+"_eq",ht,O.getLocal("c")))}function nt(){const at=t.addFunction(i+"_pairing");at.addParam("p","i32"),at.addParam("q","i32"),at.addParam("r","i32");const M=at.getCodeBuilder(),O=M.i32_const(t.alloc(h));at.addCode(M.call(i+"_prepareG1",M.getLocal("p"),M.i32_const(Yt))),at.addCode(M.call(i+"_prepareG2",M.getLocal("q"),M.i32_const(ut))),at.addCode(M.call(i+"_millerLoop",M.i32_const(Yt),M.i32_const(ut),O)),at.addCode(M.call(i+"_finalExponentiation",O,M.getLocal("r")))}bt(),Ft(),wt(),Gt(),kt(),$t(),Rt();for(let at=0;at<10;at++)Ht(at),t.exportFunction(i+"__frobeniusMap"+at);fe(),de();for(let at=1;at<=5;at++)X(at),t.exportFunction(i+"_pairingEq"+at);nt(),t.exportFunction(i+"_pairing"),t.exportFunction(i+"_prepareG1"),t.exportFunction(i+"_prepareG2"),t.exportFunction(i+"_millerLoop"),t.exportFunction(i+"_finalExponentiation"),t.exportFunction(i+"_finalExponentiationOld"),t.exportFunction(i+"__mulBy024"),t.exportFunction(i+"__mulBy024Old"),t.exportFunction(i+"__cyclotomicSquare"),t.exportFunction(i+"__cyclotomicExp_w0")};const je=Ga,PJ=l3,OJ=hN,NA=pN,FJ=mN,MA=gN,cw=yN,jJ=wN,UJ=_N,$d=bN,{bitLength:BA,isOdd:PA,isNegative:DJ}=rr;var zJ=function(t,e){const i=e||"bls12381";if(t.modules[i])return i;const r=0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,s=0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,o=Math.floor((BA(r-1n)-1)/64)+1,a=o*8,l=a,d=l*2,u=l*12,h=Math.floor((BA(s-1n)-1)/64)+1,m=h*8,p=m,E=t.alloc(je.bigInt2BytesLE(s,p)),C=PJ(t,r,"f1m","intq");OJ(t,s,"fr","frm","intr");const v=t.alloc(je.bigInt2BytesLE(j(4n),l)),A=MA(t,"g1m","f1m",v);cw(t,"frm","frm","frm","frm_mul"),jJ(t,"pol","frm"),UJ(t,"qap","frm");const x=NA(t,"f1m_neg","f2m","f1m"),P=t.alloc([...je.bigInt2BytesLE(j(4n),l),...je.bigInt2BytesLE(j(4n),l)]),W=MA(t,"g2m","f2m",P);function K(M,O){const ht=t.addFunction(M);ht.addParam("pG","i32"),ht.addParam("pFr","i32"),ht.addParam("pr","i32");const Et=ht.getCodeBuilder(),mt=Et.i32_const(t.alloc(m));ht.addCode(Et.call("frm_fromMontgomery",Et.getLocal("pFr"),mt),Et.call(O,Et.getLocal("pG"),mt,Et.i32_const(m),Et.getLocal("pr"))),t.exportFunction(M)}K("g1m_timesFr","g1m_timesScalar"),cw(t,"g1m","g1m","frm","g1m_timesFr"),K("g2m_timesFr","g2m_timesScalar"),cw(t,"g2m","g2m","frm","g2m_timesFr"),K("g1m_timesFrAffine","g1m_timesScalarAffine"),K("g2m_timesFrAffine","g2m_timesScalarAffine"),$d(t,"frm_batchApplyKey","fmr","frm",m,m,m,"frm_mul"),$d(t,"g1m_batchApplyKey","g1m","frm",a*3,a*3,m,"g1m_timesFr"),$d(t,"g1m_batchApplyKeyMixed","g1m","frm",a*2,a*3,m,"g1m_timesFrAffine"),$d(t,"g2m_batchApplyKey","g2m","frm",a*2*3,a*3*2,m,"g2m_timesFr"),$d(t,"g2m_batchApplyKeyMixed","g2m","frm",a*2*2,a*3*2,m,"g2m_timesFrAffine");function j(M){return BigInt(M)*(1n<<BigInt(l*8))%r}const b=[3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507n,1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569n,1n],B=t.alloc([...je.bigInt2BytesLE(j(b[0]),l),...je.bigInt2BytesLE(j(b[1]),l),...je.bigInt2BytesLE(j(b[2]),l)]),J=[0n,1n,0n],it=t.alloc([...je.bigInt2BytesLE(j(J[0]),l),...je.bigInt2BytesLE(j(J[1]),l),...je.bigInt2BytesLE(j(J[2]),l)]),st=[[352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160n,3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758n],[1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905n,927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582n],[1n,0n]],z=t.alloc([...je.bigInt2BytesLE(j(st[0][0]),l),...je.bigInt2BytesLE(j(st[0][1]),l),...je.bigInt2BytesLE(j(st[1][0]),l),...je.bigInt2BytesLE(j(st[1][1]),l),...je.bigInt2BytesLE(j(st[2][0]),l),...je.bigInt2BytesLE(j(st[2][1]),l)]),I=[[0n,0n],[1n,0n],[0n,0n]],w=t.alloc([...je.bigInt2BytesLE(j(I[0][0]),l),...je.bigInt2BytesLE(j(I[0][1]),l),...je.bigInt2BytesLE(j(I[1][0]),l),...je.bigInt2BytesLE(j(I[1][1]),l),...je.bigInt2BytesLE(j(I[2][0]),l),...je.bigInt2BytesLE(j(I[2][1]),l)]),T=t.alloc([...je.bigInt2BytesLE(j(1n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l),...je.bigInt2BytesLE(j(0n),l)]),V=t.alloc([...je.bigInt2BytesLE(j(1n),l),...je.bigInt2BytesLE(j(1n),l)]);function Y(){const M=t.addFunction(x+"_mulNR");M.addParam("x","i32"),M.addParam("pr","i32");const O=M.getCodeBuilder(),ht=O.i32_const(t.alloc(l)),Et=O.getLocal("x"),mt=O.i32_add(O.getLocal("x"),O.i32_const(l)),xt=O.getLocal("pr"),Lt=O.i32_add(O.getLocal("pr"),O.i32_const(l));M.addCode(O.call(C+"_copy",Et,ht),O.call(C+"_sub",Et,mt,xt),O.call(C+"_add",ht,mt,Lt))}Y();const Q=FJ(t,x+"_mulNR","f6m","f2m");function $(){const M=t.addFunction(Q+"_mulNR");M.addParam("x","i32"),M.addParam("pr","i32");const O=M.getCodeBuilder(),ht=O.i32_const(t.alloc(l*2));M.addCode(O.call(x+"_copy",O.getLocal("x"),ht),O.call(x+"_mulNR",O.i32_add(O.getLocal("x"),O.i32_const(a*4)),O.getLocal("pr")),O.call(x+"_copy",O.i32_add(O.getLocal("x"),O.i32_const(a*2)),O.i32_add(O.getLocal("pr"),O.i32_const(a*4))),O.call(x+"_copy",ht,O.i32_add(O.getLocal("pr"),O.i32_const(a*2))))}$();const F=NA(t,Q+"_mulNR","ftm",Q),_=vt(0xd201000000010000n),k=t.alloc(_),H=3*d,L=_.length-1,D=_.reduce((M,O)=>M+(O!=0?1:0),0)+L+1,S=6*a,lt=3*a*2+D*H,ct=!0,G=15132376222941642752n;t.modules[i]={n64q:o,n64r:h,n8q:a,n8r:m,pG1gen:B,pG1zero:it,pG1b:v,pG2gen:z,pG2zero:w,pG2b:P,pq:t.modules.f1m.pq,pr:E,pOneT:T,r:s,q:r,prePSize:S,preQSize:lt};function ft(M){let O=M;const ht=[];for(;O>0n;){if(PA(O)){const Et=2-Number(O%4n);ht.push(Et),O=O-BigInt(Et)}else ht.push(0);O=O>>1n}return ht}function vt(M){let O=M;const ht=[];for(;O>0n;)PA(O)?ht.push(1):ht.push(0),O=O>>1n;return ht}function wt(){const M=t.addFunction(i+"_prepareG1");M.addParam("pP","i32"),M.addParam("ppreP","i32");const O=M.getCodeBuilder();M.addCode(O.call(A+"_normalize",O.getLocal("pP"),O.getLocal("ppreP")))}function bt(){const M=t.addFunction(i+"_prepDblStep");M.addParam("R","i32"),M.addParam("r","i32");const O=M.getCodeBuilder(),ht=O.getLocal("R"),Et=O.i32_add(O.getLocal("R"),O.i32_const(2*a)),mt=O.i32_add(O.getLocal("R"),O.i32_const(4*a)),xt=O.getLocal("r"),Lt=O.i32_add(O.getLocal("r"),O.i32_const(2*a)),At=O.i32_add(O.getLocal("r"),O.i32_const(4*a)),jt=O.i32_const(t.alloc(d)),Wt=O.i32_const(t.alloc(d)),Bt=O.i32_const(t.alloc(d)),Nt=O.i32_const(t.alloc(d)),Jt=O.i32_const(t.alloc(d));M.addCode(O.call(x+"_square",ht,xt),O.call(x+"_square",Et,Wt),O.call(x+"_square",Wt,Bt),O.call(x+"_add",Wt,ht,Lt),O.call(x+"_square",Lt,Lt),O.call(x+"_sub",Lt,xt,Lt),O.call(x+"_sub",Lt,Bt,Lt),O.call(x+"_add",Lt,Lt,Lt),O.call(x+"_add",xt,xt,Nt),O.call(x+"_add",Nt,xt,Nt),O.call(x+"_add",ht,Nt,At),O.call(x+"_square",Nt,Jt),O.call(x+"_square",mt,jt),O.call(x+"_sub",Jt,Lt,ht),O.call(x+"_sub",ht,Lt,ht),O.call(x+"_add",mt,Et,mt),O.call(x+"_square",mt,mt),O.call(x+"_sub",mt,Wt,mt),O.call(x+"_sub",mt,jt,mt),O.call(x+"_sub",Lt,ht,Et),O.call(x+"_mul",Et,Nt,Et),O.call(x+"_add",Bt,Bt,Bt),O.call(x+"_add",Bt,Bt,Bt),O.call(x+"_add",Bt,Bt,Bt),O.call(x+"_sub",Et,Bt,Et),O.call(x+"_mul",Nt,jt,Lt),O.call(x+"_add",Lt,Lt,Lt),O.call(x+"_neg",Lt,Lt),O.call(x+"_square",At,At),O.call(x+"_sub",At,xt,At),O.call(x+"_sub",At,Jt,At),O.call(x+"_add",Wt,Wt,Wt),O.call(x+"_add",Wt,Wt,Wt),O.call(x+"_sub",At,Wt,At),O.call(x+"_mul",mt,jt,xt),O.call(x+"_add",xt,xt,xt))}function Ft(){const M=t.addFunction(i+"_prepAddStep");M.addParam("R","i32"),M.addParam("Q","i32"),M.addParam("r","i32");const O=M.getCodeBuilder(),ht=O.getLocal("R"),Et=O.i32_add(O.getLocal("R"),O.i32_const(2*a)),mt=O.i32_add(O.getLocal("R"),O.i32_const(4*a)),xt=O.getLocal("Q"),Lt=O.i32_add(O.getLocal("Q"),O.i32_const(2*a)),At=O.getLocal("r"),jt=O.i32_add(O.getLocal("r"),O.i32_const(2*a)),Wt=O.i32_add(O.getLocal("r"),O.i32_const(4*a)),Bt=O.i32_const(t.alloc(d)),Nt=O.i32_const(t.alloc(d)),Jt=O.i32_const(t.alloc(d)),Xt=O.i32_const(t.alloc(d)),ot=O.i32_const(t.alloc(d)),Z=O.i32_const(t.alloc(d)),tt=O.i32_const(t.alloc(d)),pt=O.i32_const(t.alloc(d)),gt=O.i32_const(t.alloc(d)),St=O.i32_const(t.alloc(d)),It=O.i32_const(t.alloc(d));M.addCode(O.call(x+"_square",mt,Bt),O.call(x+"_square",Lt,Nt),O.call(x+"_mul",Bt,xt,Xt),O.call(x+"_add",Lt,mt,jt),O.call(x+"_square",jt,jt),O.call(x+"_sub",jt,Nt,jt),O.call(x+"_sub",jt,Bt,jt),O.call(x+"_mul",jt,Bt,jt),O.call(x+"_sub",Xt,ht,ot),O.call(x+"_square",ot,Z),O.call(x+"_add",Z,Z,tt),O.call(x+"_add",tt,tt,tt),O.call(x+"_mul",tt,ot,pt),O.call(x+"_sub",jt,Et,gt),O.call(x+"_sub",gt,Et,gt),O.call(x+"_mul",gt,xt,Wt),O.call(x+"_mul",tt,ht,St),O.call(x+"_square",gt,ht),O.call(x+"_sub",ht,pt,ht),O.call(x+"_sub",ht,St,ht),O.call(x+"_sub",ht,St,ht),O.call(x+"_add",mt,ot,mt),O.call(x+"_square",mt,mt),O.call(x+"_sub",mt,Bt,mt),O.call(x+"_sub",mt,Z,mt),O.call(x+"_add",Lt,mt,At),O.call(x+"_sub",St,ht,It),O.call(x+"_mul",It,gt,It),O.call(x+"_mul",Et,pt,Xt),O.call(x+"_add",Xt,Xt,Xt),O.call(x+"_sub",It,Xt,Et),O.call(x+"_square",At,At),O.call(x+"_sub",At,Nt,At),O.call(x+"_square",mt,Jt),O.call(x+"_sub",At,Jt,At),O.call(x+"_add",Wt,Wt,Wt),O.call(x+"_sub",Wt,At,Wt),O.call(x+"_add",mt,mt,At),O.call(x+"_neg",gt,gt),O.call(x+"_add",gt,gt,jt))}function Pt(){const M=t.addFunction(i+"_prepareG2");M.addParam("pQ","i32"),M.addParam("ppreQ","i32"),M.addLocal("pCoef","i32"),M.addLocal("i","i32");const O=M.getCodeBuilder(),ht=O.getLocal("pQ"),Et=t.alloc(d*3),mt=O.i32_const(Et),xt=O.getLocal("ppreQ");M.addCode(O.call(W+"_normalize",ht,xt),O.if(O.call(W+"_isZero",xt),O.ret([])),O.call(W+"_copy",xt,mt),O.setLocal("pCoef",O.i32_add(O.getLocal("ppreQ"),O.i32_const(d*3)))),M.addCode(O.setLocal("i",O.i32_const(_.length-2)),O.block(O.loop(O.call(i+"_prepDblStep",mt,O.getLocal("pCoef")),O.setLocal("pCoef",O.i32_add(O.getLocal("pCoef"),O.i32_const(H))),O.if(O.i32_load8_s(O.getLocal("i"),k),[...O.call(i+"_prepAddStep",mt,xt,O.getLocal("pCoef")),...O.setLocal("pCoef",O.i32_add(O.getLocal("pCoef"),O.i32_const(H)))]),O.br_if(1,O.i32_eqz(O.getLocal("i"))),O.setLocal("i",O.i32_sub(O.getLocal("i"),O.i32_const(1))),O.br(0))))}function Gt(){const M=t.addFunction(Q+"_mul1");M.addParam("pA","i32"),M.addParam("pC1","i32"),M.addParam("pR","i32");const O=M.getCodeBuilder(),ht=O.getLocal("pA"),Et=O.i32_add(O.getLocal("pA"),O.i32_const(l*2)),mt=O.i32_add(O.getLocal("pA"),O.i32_const(l*4)),xt=O.getLocal("pC1"),Lt=O.getLocal("pR"),At=O.i32_add(O.getLocal("pR"),O.i32_const(l*2)),jt=O.i32_add(O.getLocal("pR"),O.i32_const(l*4)),Wt=O.i32_const(t.alloc(l*2)),Bt=O.i32_const(t.alloc(l*2));M.addCode(O.call(x+"_add",ht,Et,Wt),O.call(x+"_add",Et,mt,Bt),O.call(x+"_mul",Et,xt,jt),O.call(x+"_mul",Bt,xt,Lt),O.call(x+"_sub",Lt,jt,Lt),O.call(x+"_mulNR",Lt,Lt),O.call(x+"_mul",Wt,xt,At),O.call(x+"_sub",At,jt,At))}Gt();function $t(){const M=t.addFunction(Q+"_mul01");M.addParam("pA","i32"),M.addParam("pC0","i32"),M.addParam("pC1","i32"),M.addParam("pR","i32");const O=M.getCodeBuilder(),ht=O.getLocal("pA"),Et=O.i32_add(O.getLocal("pA"),O.i32_const(l*2)),mt=O.i32_add(O.getLocal("pA"),O.i32_const(l*4)),xt=O.getLocal("pC0"),Lt=O.getLocal("pC1"),At=O.getLocal("pR"),jt=O.i32_add(O.getLocal("pR"),O.i32_const(l*2)),Wt=O.i32_add(O.getLocal("pR"),O.i32_const(l*4)),Bt=O.i32_const(t.alloc(l*2)),Nt=O.i32_const(t.alloc(l*2)),Jt=O.i32_const(t.alloc(l*2)),Xt=O.i32_const(t.alloc(l*2));M.addCode(O.call(x+"_mul",ht,xt,Bt),O.call(x+"_mul",Et,Lt,Nt),O.call(x+"_add",ht,Et,Jt),O.call(x+"_add",ht,mt,Xt),O.call(x+"_add",Et,mt,At),O.call(x+"_mul",At,Lt,At),O.call(x+"_sub",At,Nt,At),O.call(x+"_mulNR",At,At),O.call(x+"_add",At,Bt,At),O.call(x+"_add",xt,Lt,jt),O.call(x+"_mul",jt,Jt,jt),O.call(x+"_sub",jt,Bt,jt),O.call(x+"_sub",jt,Nt,jt),O.call(x+"_mul",Xt,xt,Wt),O.call(x+"_sub",Wt,Bt,Wt),O.call(x+"_add",Wt,Nt,Wt))}$t();function kt(){const M=t.addFunction(F+"_mul014");M.addParam("pA","i32"),M.addParam("pC0","i32"),M.addParam("pC1","i32"),M.addParam("pC4","i32"),M.addParam("pR","i32");const O=M.getCodeBuilder(),ht=O.getLocal("pA"),Et=O.i32_add(O.getLocal("pA"),O.i32_const(l*6)),mt=O.getLocal("pC0"),xt=O.getLocal("pC1"),Lt=O.getLocal("pC4"),At=O.i32_const(t.alloc(l*6)),jt=O.i32_const(t.alloc(l*6)),Wt=O.i32_const(t.alloc(l*2)),Bt=O.getLocal("pR"),Nt=O.i32_add(O.getLocal("pR"),O.i32_const(l*6));M.addCode(O.call(Q+"_mul01",ht,mt,xt,At),O.call(Q+"_mul1",Et,Lt,jt),O.call(x+"_add",xt,Lt,Wt),O.call(Q+"_add",Et,ht,Nt),O.call(Q+"_mul01",Nt,mt,Wt,Nt),O.call(Q+"_sub",Nt,At,Nt),O.call(Q+"_sub",Nt,jt,Nt),O.call(Q+"_copy",jt,Bt),O.call(Q+"_mulNR",Bt,Bt),O.call(Q+"_add",Bt,At,Bt))}kt();function Rt(){const M=t.addFunction(i+"_ell");M.addParam("pP","i32"),M.addParam("pCoefs","i32"),M.addParam("pF","i32");const O=M.getCodeBuilder(),ht=O.getLocal("pP"),Et=O.i32_add(O.getLocal("pP"),O.i32_const(a)),mt=O.getLocal("pF"),xt=O.getLocal("pCoefs"),Lt=O.i32_add(O.getLocal("pCoefs"),O.i32_const(l)),At=O.i32_add(O.getLocal("pCoefs"),O.i32_const(l*2)),jt=O.i32_add(O.getLocal("pCoefs"),O.i32_const(l*3)),Wt=O.i32_add(O.getLocal("pCoefs"),O.i32_const(l*4)),Bt=t.alloc(l*2),Nt=O.i32_const(Bt),Jt=O.i32_const(Bt),Xt=O.i32_const(Bt+l),ot=t.alloc(l*2),Z=O.i32_const(ot),tt=O.i32_const(ot),pt=O.i32_const(ot+l);M.addCode(O.call(C+"_mul",xt,Et,Jt),O.call(C+"_mul",Lt,Et,Xt),O.call(C+"_mul",At,ht,tt),O.call(C+"_mul",jt,ht,pt),O.call(F+"_mul014",mt,Wt,Z,Nt,mt))}Rt();function Ht(){const M=t.addFunction(i+"_millerLoop");M.addParam("ppreP","i32"),M.addParam("ppreQ","i32"),M.addParam("r","i32"),M.addLocal("pCoef","i32"),M.addLocal("i","i32");const O=M.getCodeBuilder(),ht=O.getLocal("ppreP"),Et=O.getLocal("pCoef"),mt=O.getLocal("r");M.addCode(O.call(F+"_one",mt),O.if(O.call(A+"_isZero",ht),O.ret([])),O.if(O.call(A+"_isZero",O.getLocal("ppreQ")),O.ret([])),O.setLocal("pCoef",O.i32_add(O.getLocal("ppreQ"),O.i32_const(d*3))),O.setLocal("i",O.i32_const(_.length-2)),O.block(O.loop(O.call(i+"_ell",ht,Et,mt),O.setLocal("pCoef",O.i32_add(O.getLocal("pCoef"),O.i32_const(H))),O.if(O.i32_load8_s(O.getLocal("i"),k),[...O.call(i+"_ell",ht,Et,mt),...O.setLocal("pCoef",O.i32_add(O.getLocal("pCoef"),O.i32_const(H)))]),O.call(F+"_square",mt,mt),O.br_if(1,O.i32_eq(O.getLocal("i"),O.i32_const(1))),O.setLocal("i",O.i32_sub(O.getLocal("i"),O.i32_const(1))),O.br(0))),O.call(i+"_ell",ht,Et,mt)),M.addCode(O.call(F+"_conjugate",mt,mt))}function Kt(M){const O=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n,151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n,0n],[2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n,877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n],[4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n,0n],[151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n,3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n,2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n,0n],[877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n,3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n]]],ht=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0n,4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[0n,1n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[0n,793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n]],[[1n,0n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n,0n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n,0n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n,0n]]],Et=t.addFunction(F+"_frobeniusMap"+M);Et.addParam("x","i32"),Et.addParam("r","i32");const mt=Et.getCodeBuilder();for(let Lt=0;Lt<6;Lt++){const At=Lt==0?mt.getLocal("x"):mt.i32_add(mt.getLocal("x"),mt.i32_const(Lt*d)),jt=At,Wt=mt.i32_add(mt.getLocal("x"),mt.i32_const(Lt*d+l)),Bt=Lt==0?mt.getLocal("r"):mt.i32_add(mt.getLocal("r"),mt.i32_const(Lt*d)),Nt=Bt,Jt=mt.i32_add(mt.getLocal("r"),mt.i32_const(Lt*d+l)),Xt=xt(O[Math.floor(Lt/3)][M%12],ht[Lt%3][M%6]),ot=t.alloc([...je.bigInt2BytesLE(j(Xt[0]),a),...je.bigInt2BytesLE(j(Xt[1]),a)]);M%2==1?Et.addCode(mt.call(C+"_copy",jt,Nt),mt.call(C+"_neg",Wt,Jt),mt.call(x+"_mul",Bt,mt.i32_const(ot),Bt)):Et.addCode(mt.call(x+"_mul",At,mt.i32_const(ot),Bt))}function xt(Lt,At){const jt=Lt[0],Wt=Lt[1],Bt=At[0],Nt=At[1],Jt=[(jt*Bt-Wt*Nt)%r,(jt*Nt+Wt*Bt)%r];return DJ(Jt[0])&&(Jt[0]=Jt[0]+r),Jt}}function se(){const M=t.addFunction(i+"__cyclotomicSquare");M.addParam("x","i32"),M.addParam("r","i32");const O=M.getCodeBuilder(),ht=O.getLocal("x"),Et=O.i32_add(O.getLocal("x"),O.i32_const(d)),mt=O.i32_add(O.getLocal("x"),O.i32_const(2*d)),xt=O.i32_add(O.getLocal("x"),O.i32_const(3*d)),Lt=O.i32_add(O.getLocal("x"),O.i32_const(4*d)),At=O.i32_add(O.getLocal("x"),O.i32_const(5*d)),jt=O.getLocal("r"),Wt=O.i32_add(O.getLocal("r"),O.i32_const(d)),Bt=O.i32_add(O.getLocal("r"),O.i32_const(2*d)),Nt=O.i32_add(O.getLocal("r"),O.i32_const(3*d)),Jt=O.i32_add(O.getLocal("r"),O.i32_const(4*d)),Xt=O.i32_add(O.getLocal("r"),O.i32_const(5*d)),ot=O.i32_const(t.alloc(d)),Z=O.i32_const(t.alloc(d)),tt=O.i32_const(t.alloc(d)),pt=O.i32_const(t.alloc(d)),gt=O.i32_const(t.alloc(d)),St=O.i32_const(t.alloc(d)),It=O.i32_const(t.alloc(d)),le=O.i32_const(t.alloc(d));M.addCode(O.call(x+"_mul",ht,Lt,It),O.call(x+"_mulNR",Lt,ot),O.call(x+"_add",ht,ot,ot),O.call(x+"_add",ht,Lt,le),O.call(x+"_mul",le,ot,ot),O.call(x+"_mulNR",It,le),O.call(x+"_add",It,le,le),O.call(x+"_sub",ot,le,ot),O.call(x+"_add",It,It,Z),O.call(x+"_mul",xt,mt,It),O.call(x+"_mulNR",mt,tt),O.call(x+"_add",xt,tt,tt),O.call(x+"_add",xt,mt,le),O.call(x+"_mul",le,tt,tt),O.call(x+"_mulNR",It,le),O.call(x+"_add",It,le,le),O.call(x+"_sub",tt,le,tt),O.call(x+"_add",It,It,pt),O.call(x+"_mul",Et,At,It),O.call(x+"_mulNR",At,gt),O.call(x+"_add",Et,gt,gt),O.call(x+"_add",Et,At,le),O.call(x+"_mul",le,gt,gt),O.call(x+"_mulNR",It,le),O.call(x+"_add",It,le,le),O.call(x+"_sub",gt,le,gt),O.call(x+"_add",It,It,St),O.call(x+"_sub",ot,ht,jt),O.call(x+"_add",jt,jt,jt),O.call(x+"_add",ot,jt,jt),O.call(x+"_add",Z,Lt,Jt),O.call(x+"_add",Jt,Jt,Jt),O.call(x+"_add",Z,Jt,Jt),O.call(x+"_mul",St,O.i32_const(V),le),O.call(x+"_add",le,xt,Nt),O.call(x+"_add",Nt,Nt,Nt),O.call(x+"_add",le,Nt,Nt),O.call(x+"_sub",gt,mt,Bt),O.call(x+"_add",Bt,Bt,Bt),O.call(x+"_add",gt,Bt,Bt),O.call(x+"_sub",tt,Et,Wt),O.call(x+"_add",Wt,Wt,Wt),O.call(x+"_add",tt,Wt,Wt),O.call(x+"_add",pt,At,Xt),O.call(x+"_add",Xt,Xt,Xt),O.call(x+"_add",pt,Xt,Xt))}function _e(M,O,ht){const Et=ft(M).map(Bt=>Bt==-1?255:Bt),mt=t.alloc(Et),xt=t.addFunction(i+"__cyclotomicExp_"+ht);xt.addParam("x","i32"),xt.addParam("r","i32"),xt.addLocal("bit","i32"),xt.addLocal("i","i32");const Lt=xt.getCodeBuilder(),At=Lt.getLocal("x"),jt=Lt.getLocal("r"),Wt=Lt.i32_const(t.alloc(u));xt.addCode(Lt.call(F+"_conjugate",At,Wt),Lt.call(F+"_one",jt),Lt.if(Lt.teeLocal("bit",Lt.i32_load8_s(Lt.i32_const(Et.length-1),mt)),Lt.if(Lt.i32_eq(Lt.getLocal("bit"),Lt.i32_const(1)),Lt.call(F+"_mul",jt,At,jt),Lt.call(F+"_mul",jt,Wt,jt))),Lt.setLocal("i",Lt.i32_const(Et.length-2)),Lt.block(Lt.loop(Lt.call(i+"__cyclotomicSquare",jt,jt),Lt.if(Lt.teeLocal("bit",Lt.i32_load8_s(Lt.getLocal("i"),mt)),Lt.if(Lt.i32_eq(Lt.getLocal("bit"),Lt.i32_const(1)),Lt.call(F+"_mul",jt,At,jt),Lt.call(F+"_mul",jt,Wt,jt))),Lt.br_if(1,Lt.i32_eqz(Lt.getLocal("i"))),Lt.setLocal("i",Lt.i32_sub(Lt.getLocal("i"),Lt.i32_const(1))),Lt.br(0)))),xt.addCode(Lt.call(F+"_conjugate",jt,jt))}function ae(){se(),_e(G,ct,"w0");const M=t.addFunction(i+"_finalExponentiation");M.addParam("x","i32"),M.addParam("r","i32");const O=M.getCodeBuilder(),ht=O.getLocal("x"),Et=O.getLocal("r"),mt=O.i32_const(t.alloc(u)),xt=O.i32_const(t.alloc(u)),Lt=O.i32_const(t.alloc(u)),At=O.i32_const(t.alloc(u)),jt=O.i32_const(t.alloc(u)),Wt=O.i32_const(t.alloc(u)),Bt=O.i32_const(t.alloc(u));M.addCode(O.call(F+"_frobeniusMap6",ht,mt),O.call(F+"_inverse",ht,xt),O.call(F+"_mul",mt,xt,Lt),O.call(F+"_copy",Lt,xt),O.call(F+"_frobeniusMap2",Lt,Lt),O.call(F+"_mul",Lt,xt,Lt),O.call(i+"__cyclotomicSquare",Lt,xt),O.call(F+"_conjugate",xt,xt),O.call(i+"__cyclotomicExp_w0",Lt,At),O.call(i+"__cyclotomicSquare",At,jt),O.call(F+"_mul",xt,At,Wt),O.call(i+"__cyclotomicExp_w0",Wt,xt),O.call(i+"__cyclotomicExp_w0",xt,mt),O.call(i+"__cyclotomicExp_w0",mt,Bt),O.call(F+"_mul",Bt,jt,Bt),O.call(i+"__cyclotomicExp_w0",Bt,jt),O.call(F+"_conjugate",Wt,Wt),O.call(F+"_mul",jt,Wt,jt),O.call(F+"_mul",jt,Lt,jt),O.call(F+"_conjugate",Lt,Wt),O.call(F+"_mul",xt,Lt,xt),O.call(F+"_frobeniusMap3",xt,xt),O.call(F+"_mul",Bt,Wt,Bt),O.call(F+"_frobeniusMap1",Bt,Bt),O.call(F+"_mul",At,mt,At),O.call(F+"_frobeniusMap2",At,At),O.call(F+"_mul",At,xt,At),O.call(F+"_mul",At,Bt,At),O.call(F+"_mul",At,jt,Et))}function de(){const M=t.addFunction(i+"_finalExponentiationOld");M.addParam("x","i32"),M.addParam("r","i32");const ht=t.alloc(je.bigInt2BytesLE(322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560n,544)),Et=M.getCodeBuilder();M.addCode(Et.call(F+"_exp",Et.getLocal("x"),Et.i32_const(ht),Et.i32_const(544),Et.getLocal("r")))}const fe=t.alloc(S),Yt=t.alloc(lt);function ut(M){const O=t.addFunction(i+"_pairingEq"+M);for(let xt=0;xt<M;xt++)O.addParam("p_"+xt,"i32"),O.addParam("q_"+xt,"i32");O.addParam("c","i32"),O.setReturnType("i32");const ht=O.getCodeBuilder(),Et=ht.i32_const(t.alloc(u)),mt=ht.i32_const(t.alloc(u));O.addCode(ht.call(F+"_one",Et));for(let xt=0;xt<M;xt++)O.addCode(ht.call(i+"_prepareG1",ht.getLocal("p_"+xt),ht.i32_const(fe))),O.addCode(ht.call(i+"_prepareG2",ht.getLocal("q_"+xt),ht.i32_const(Yt))),O.addCode(ht.if(ht.i32_eqz(ht.call(A+"_inGroupAffine",ht.i32_const(fe))),ht.ret(ht.i32_const(0))),ht.if(ht.i32_eqz(ht.call(W+"_inGroupAffine",ht.i32_const(Yt))),ht.ret(ht.i32_const(0)))),O.addCode(ht.call(i+"_millerLoop",ht.i32_const(fe),ht.i32_const(Yt),mt)),O.addCode(ht.call(F+"_mul",Et,mt,Et));O.addCode(ht.call(i+"_finalExponentiation",Et,Et)),O.addCode(ht.call(F+"_eq",Et,ht.getLocal("c")))}function X(){const M=t.addFunction(i+"_pairing");M.addParam("p","i32"),M.addParam("q","i32"),M.addParam("r","i32");const O=M.getCodeBuilder(),ht=O.i32_const(t.alloc(u));M.addCode(O.call(i+"_prepareG1",O.getLocal("p"),O.i32_const(fe))),M.addCode(O.call(i+"_prepareG2",O.getLocal("q"),O.i32_const(Yt))),M.addCode(O.call(i+"_millerLoop",O.i32_const(fe),O.i32_const(Yt),ht)),M.addCode(O.call(i+"_finalExponentiation",ht,O.getLocal("r")))}function nt(){const M=t.addFunction(W+"_inGroupAffine");M.addParam("p","i32"),M.setReturnType("i32");const O=M.getCodeBuilder(),ht=[2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894n,2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893n],Et=4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,mt=[2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],xt=O.i32_const(t.alloc([...je.bigInt2BytesLE(j(ht[0]),a),...je.bigInt2BytesLE(j(ht[1]),a)])),Lt=O.i32_const(t.alloc(je.bigInt2BytesLE(j(Et),a))),At=O.i32_const(t.alloc([...je.bigInt2BytesLE(j(mt[0]),a),...je.bigInt2BytesLE(j(mt[1]),a)])),jt=O.i32_const(t.alloc(je.bigInt2BytesLE(G,8))),Wt=O.getLocal("p"),Bt=O.i32_add(O.getLocal("p"),O.i32_const(d)),Nt=O.i32_const(t.alloc(l)),Jt=O.i32_const(t.alloc(d)),Xt=O.i32_const(t.alloc(d)),ot=t.alloc(d*2),Z=O.i32_const(ot),tt=O.i32_const(ot),pt=O.i32_const(ot),gt=O.i32_const(ot+l),St=O.i32_const(ot+d),It=O.i32_const(ot+d),le=O.i32_const(ot+d+l),xe=t.alloc(d*3),Se=O.i32_const(xe),nn=O.i32_const(xe),Ie=O.i32_const(xe),mn=O.i32_const(xe+l),Li=O.i32_const(xe+d),ln=O.i32_const(xe+d),un=O.i32_const(xe+d+l),Br=O.i32_const(xe+d*2);M.addCode(O.if(O.call(W+"_isZeroAffine",O.getLocal("p")),O.ret(O.i32_const(1))),O.if(O.i32_eqz(O.call(W+"_inCurveAffine",O.getLocal("p"))),O.ret(O.i32_const(0))),O.call(x+"_mul",Wt,xt,Jt),O.call(x+"_mul",Bt,xt,Xt),O.call(x+"_mul1",Jt,Lt,tt),O.call(x+"_neg",Xt,St),O.call(x+"_neg",Jt,nn),O.call(x+"_mul",Xt,At,Li),O.call(C+"_sub",pt,gt,Nt),O.call(C+"_add",pt,gt,gt),O.call(C+"_copy",Nt,pt),O.call(C+"_sub",It,le,Nt),O.call(C+"_add",It,le,le),O.call(C+"_copy",Nt,It),O.call(C+"_add",Ie,mn,Nt),O.call(C+"_sub",Ie,mn,mn),O.call(C+"_copy",Nt,Ie),O.call(C+"_sub",un,ln,Nt),O.call(C+"_add",ln,un,un),O.call(C+"_copy",Nt,ln),O.call(x+"_one",Br),O.call(W+"_timesScalar",Se,jt,O.i32_const(8),Se),O.call(W+"_addMixed",Se,Z,Se),O.ret(O.call(W+"_eqMixed",Se,O.getLocal("p"))));const Bi=t.addFunction(W+"_inGroup");Bi.addParam("pIn","i32"),Bi.setReturnType("i32");const Ci=Bi.getCodeBuilder(),ar=Ci.i32_const(t.alloc(d*2));Bi.addCode(Ci.call(W+"_toAffine",Ci.getLocal("pIn"),ar),Ci.ret(Ci.call(W+"_inGroupAffine",ar)))}function at(){const M=t.addFunction(A+"_inGroupAffine");M.addParam("p","i32"),M.setReturnType("i32");const O=M.getCodeBuilder(),ht=4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,Et=793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,mt=(G*G-1n)/3n,xt=O.i32_const(t.alloc(je.bigInt2BytesLE(j(ht),a))),Lt=O.i32_const(t.alloc(je.bigInt2BytesLE(j(Et),a))),At=O.i32_const(t.alloc(je.bigInt2BytesLE(mt,16))),jt=O.getLocal("p"),Wt=O.i32_add(O.getLocal("p"),O.i32_const(l)),Bt=t.alloc(l*3),Nt=O.i32_const(Bt),Jt=O.i32_const(Bt),Xt=O.i32_const(Bt+l),ot=t.alloc(l*2),Z=O.i32_const(ot),tt=O.i32_const(ot),pt=O.i32_const(ot+l);M.addCode(O.if(O.call(A+"_isZeroAffine",O.getLocal("p")),O.ret(O.i32_const(1))),O.if(O.i32_eqz(O.call(A+"_inCurveAffine",O.getLocal("p"))),O.ret(O.i32_const(0))),O.call(C+"_mul",jt,xt,Jt),O.call(C+"_copy",Wt,Xt),O.call(C+"_mul",jt,Lt,tt),O.call(C+"_copy",Wt,pt),O.call(A+"_doubleAffine",Nt,Nt),O.call(A+"_subMixed",Nt,O.getLocal("p"),Nt),O.call(A+"_subMixed",Nt,Z,Nt),O.call(A+"_timesScalar",Nt,At,O.i32_const(16),Nt),O.ret(O.call(A+"_eqMixed",Nt,Z)));const gt=t.addFunction(A+"_inGroup");gt.addParam("pIn","i32"),gt.setReturnType("i32");const St=gt.getCodeBuilder(),It=St.i32_const(t.alloc(l*2));gt.addCode(St.call(A+"_toAffine",St.getLocal("pIn"),It),St.ret(St.call(A+"_inGroupAffine",It)))}for(let M=0;M<10;M++)Kt(M),t.exportFunction(F+"_frobeniusMap"+M);at(),nt(),Ft(),bt(),wt(),Pt(),Ht(),de(),ae();for(let M=1;M<=5;M++)ut(M),t.exportFunction(i+"_pairingEq"+M);X(),t.exportFunction(i+"_pairing"),t.exportFunction(i+"_prepareG1"),t.exportFunction(i+"_prepareG2"),t.exportFunction(i+"_millerLoop"),t.exportFunction(i+"_finalExponentiation"),t.exportFunction(i+"_finalExponentiationOld"),t.exportFunction(i+"__cyclotomicSquare"),t.exportFunction(i+"__cyclotomicExp_w0"),t.exportFunction(Q+"_mul1"),t.exportFunction(Q+"_mul01"),t.exportFunction(F+"_mul014"),t.exportFunction(A+"_inGroupAffine"),t.exportFunction(A+"_inGroup"),t.exportFunction(W+"_inGroupAffine"),t.exportFunction(W+"_inGroup")},GJ=BJ,WJ=zJ;function J_(n){if(typeof n=="bigint"||n.eq!==void 0)return n.toString(10);if(n instanceof Uint8Array)return $f(n,0);if(Array.isArray(n))return n.map(J_);if(typeof n=="object"){const t={};return Object.keys(n).forEach(i=>{t[i]=J_(n[i])}),t}else return n}function tb(n){if(typeof n=="string"&&/^[0-9]+$/.test(n))return BigInt(n);if(typeof n=="string"&&/^0x[0-9a-fA-F]+$/.test(n))return BigInt(n);if(Array.isArray(n))return n.map(tb);if(typeof n=="object"){if(n===null)return null;const t={};return Object.keys(n).forEach(i=>{t[i]=tb(n[i])}),t}else return n}function VJ(n){let t=BigInt(0),e=n.length,i=0;const r=new DataView(n.buffer,n.byteOffset,n.byteLength);for(;e>0;)e>=4?(e-=4,t+=BigInt(r.getUint32(e))<<BigInt(i*8),i+=4):e>=2?(e-=2,t+=BigInt(r.getUint16(e))<<BigInt(i*8),i+=2):(e-=1,t+=BigInt(r.getUint8(e))<<BigInt(i*8),i+=1);return t}function qJ(n,t){let e=n;const i=new Uint8Array(t),r=new DataView(i.buffer);let s=t;for(;s>0;)s-4>=0?(s-=4,r.setUint32(s,Number(e&BigInt(4294967295))),e=e>>BigInt(32)):s-2>=0?(s-=2,r.setUint16(s,Number(e&BigInt(65535))),e=e>>BigInt(16)):(s-=1,r.setUint8(s,Number(e&BigInt(255))),e=e>>BigInt(8));if(e)throw new Error("Number does not fit in this length");return i}function $J(n){let t=BigInt(0),e=0;const i=new DataView(n.buffer,n.byteOffset,n.byteLength);for(;e<n.length;)e+4<=n.length?(t+=BigInt(i.getUint32(e,!0))<<BigInt(e*8),e+=4):e+2<=n.length?(t+=BigInt(i.getUint16(e,!0))<<BigInt(e*8),e+=2):(t+=BigInt(i.getUint8(e,!0))<<BigInt(e*8),e+=1);return t}function vN(n,t){let e=n;typeof t>"u"&&(t=Math.floor((uh(n)-1)/8)+1,t==0&&(t=1));const i=new Uint8Array(t),r=new DataView(i.buffer);let s=0;for(;s<t;)s+4<=t?(r.setUint32(s,Number(e&BigInt(4294967295)),!0),s+=4,e=e>>BigInt(32)):s+2<=t?(r.setUint16(s,Number(e&BigInt(65535)),!0),s+=2,e=e>>BigInt(16)):(r.setUint8(s,Number(e&BigInt(255)),!0),s+=1,e=e>>BigInt(8));if(e)throw new Error("Number does not fit in this length");return i}function eb(n,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return n.toString(n.e(t));if(Array.isArray(t))return t.map(eb.bind(this,n));if(typeof t=="object"){const e={};return Object.keys(t).forEach(r=>{e[r]=eb(n,t[r])}),e}else return t}function nb(n,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return n.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return n.e(t);if(Array.isArray(t))return t.map(nb.bind(this,n));if(typeof t=="object"){if(t===null)return null;const e={};return Object.keys(t).forEach(r=>{e[r]=nb(n,t[r])}),e}else return t}const lf=[];for(let n=0;n<256;n++)lf[n]=HJ(n,8);function HJ(n,t){let e=0,i=n;for(let r=0;r<t;r++)e<<=1,e=e|i&1,i>>=1;return e}function xN(n,t){return(lf[n>>>24]|lf[n>>>16&255]<<8|lf[n>>>8&255]<<16|lf[n&255]<<24)>>>32-t}function mr(n){return((n&4294901760)!==0?(n&=4294901760,16):0)|((n&4278255360)!==0?(n&=4278255360,8):0)|((n&4042322160)!==0?(n&=4042322160,4):0)|((n&3435973836)!==0?(n&=3435973836,2):0)|(n&2863311530)!==0}function EN(n,t){const e=n.byteLength/t,i=mr(e);if(e!=1<<i)throw new Error("Invalid number of pointers");for(let r=0;r<e;r++){const s=xN(r,i);if(r>s){const o=n.slice(r*t,(r+1)*t);n.set(n.slice(s*t,(s+1)*t),r*t),n.set(o,s*t)}}}function u3(n,t){const e=new Uint8Array(t*n.length);for(let i=0;i<n.length;i++)e.set(n[i],i*t);return e}function ym(n,t){const e=n.byteLength/t,i=new Array(e);for(let r=0;r<e;r++)i[r]=n.slice(r*t,r*t+t);return i}var KJ=Object.freeze({__proto__:null,array2buffer:u3,beBuff2int:VJ,beInt2Buff:qJ,bitReverse:xN,buffReverseBits:EN,buffer2array:ym,leBuff2int:$J,leInt2Buff:vN,log2:mr,stringifyBigInts:J_,stringifyFElements:eb,unstringifyBigInts:tb,unstringifyFElements:nb});const Ti=1<<30;class Qt{constructor(t){this.buffers=[],this.byteLength=t;for(let e=0;e<t;e+=Ti){const i=Math.min(t-e,Ti);this.buffers.push(new Uint8Array(i))}}slice(t,e){e===void 0&&(e=this.byteLength),t===void 0&&(t=0);const i=e-t,r=Math.floor(t/Ti),s=Math.floor((t+i-1)/Ti);if(r==s||i==0)return this.buffers[r].slice(t%Ti,t%Ti+i);let o,a=r,l=t%Ti,d=i;for(;d>0;){const u=l+d>Ti?Ti-l:d,h=new Uint8Array(this.buffers[a].buffer,this.buffers[a].byteOffset+l,u);if(u==i)return h.slice();o||(i<=Ti?o=new Uint8Array(i):o=new Qt(i)),o.set(h,i-d),d=d-u,a++,l=0}return o}set(t,e){e===void 0&&(e=0);const i=t.byteLength;if(i==0)return;const r=Math.floor(e/Ti),s=Math.floor((e+i-1)/Ti);if(r==s)return t instanceof Qt&&t.buffers.length==1?this.buffers[r].set(t.buffers[0],e%Ti):this.buffers[r].set(t,e%Ti);let o=r,a=e%Ti,l=i;for(;l>0;){const d=a+l>Ti?Ti-a:l,u=t.slice(i-l,i-l+d);new Uint8Array(this.buffers[o].buffer,this.buffers[o].byteOffset+a,d).set(u),l=l-d,o++,a=0}}}function La(n,t,e,i){return async function(s){const o=Math.floor(s.byteLength/e);if(o*e!==s.byteLength)throw new Error("Invalid buffer size");const a=Math.floor(o/n.concurrency),l=[];for(let m=0;m<n.concurrency;m++){let p;if(m<n.concurrency-1?p=a:p=o-m*a,p==0)continue;const C=[{cmd:"ALLOCSET",var:0,buff:s.slice(m*a*e,m*a*e+p*e)},{cmd:"ALLOC",var:1,len:i*p},{cmd:"CALL",fnName:t,params:[{var:0},{val:p},{var:1}]},{cmd:"GET",out:0,var:1,len:i*p}];l.push(n.queueAction(C))}const d=await Promise.all(l);let u;s instanceof Qt?u=new Qt(o*i):u=new Uint8Array(o*i);let h=0;for(let m=0;m<d.length;m++)u.set(d[m][0],h),h+=d[m][0].byteLength;return u}}class OA{constructor(t,e,i,r){if(this.tm=t,this.prefix=e,this.p=r,this.n8=i,this.type="F1",this.m=1,this.half=du(r,hc),this.bitLength=uh(r),this.mask=Co(mm(hc,this.bitLength),hc),this.pOp1=t.alloc(i),this.pOp2=t.alloc(i),this.pOp3=t.alloc(i),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(i/8),this.n32=Math.floor(i/4),this.n64*8!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=du(this.p,hc),this.nqr=this.two;let s=this.exp(this.nqr,this.half);for(;!this.eq(s,this.negone);)this.nqr=this.add(this.nqr,this.one),s=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let o=Co(this.p,hc);for(;!Jv(o);)this.s=this.s+1,o=du(o,hc);this.w=[],this.w[this.s]=this.exp(this.nqr,o);for(let a=this.s-1;a>=0;a--)this.w[a]=this.square(this.w[a+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=La(t,e+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=La(t,e+"_batchFromMontgomery",this.n8,this.n8)}op2(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=Iu(ni(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,e){if(t instanceof Uint8Array)return t;let i=ni(t,e);QR(i)?(i=tN(i),X_(i,this.p)&&(i=ks(i,this.p)),i=Co(this.p,i)):X_(i,this.p)&&(i=ks(i,this.p));const r=vN(i,this.n8);return this.toMontgomery(r)}toString(t,e){const i=this.fromMontgomery(t),r=$f(i,0);return n3(r,e)}fromRng(t){let e;const i=new Uint8Array(this.n8);do{e=sN;for(let r=0;r<this.n64;r++)e=t3(e,mm(t.nextU64(),64*r));e=e3(e,this.mask)}while(nN(e,this.p));return qf(i,0,e,this.n8),i}random(){return this.fromRng(i3())}toObject(t){const e=this.fromMontgomery(t);return $f(e,0)}fromObject(t){const e=new Uint8Array(this.n8);return qf(e,0,t,this.n8),this.toMontgomery(e)}toRprLE(t,e,i){t.set(this.fromMontgomery(i),e)}toRprBE(t,e,i){const r=this.fromMontgomery(i);for(let s=0;s<this.n8/2;s++){const o=r[s];r[s]=r[this.n8-1-s],r[this.n8-1-s]=o}t.set(r,e)}fromRprLE(t,e){e=e||0;const i=t.slice(e,e+this.n8);return this.toMontgomery(i)}async batchInverse(t){let e=!1;const i=this.n8,r=this.n8;Array.isArray(t)?(t=u3(t,i),e=!0):t=t.slice(0,t.byteLength);const s=Math.floor(t.byteLength/i);if(s*i!==t.byteLength)throw new Error("Invalid buffer size");const o=Math.floor(s/this.tm.concurrency),a=[];for(let h=0;h<this.tm.concurrency;h++){let m;if(h<this.tm.concurrency-1?m=o:m=s-h*o,m==0)continue;const E=[{cmd:"ALLOCSET",var:0,buff:t.slice(h*o*i,h*o*i+m*i)},{cmd:"ALLOC",var:1,len:r*m},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:i},{val:m},{var:1},{val:r}]},{cmd:"GET",out:0,var:1,len:r*m}];a.push(this.tm.queueAction(E))}const l=await Promise.all(a);let d;t instanceof Qt?d=new Qt(s*r):d=new Uint8Array(s*r);let u=0;for(let h=0;h<l.length;h++)d.set(l[h][0],u),u+=l[h][0].byteLength;return e?ym(d,r):d}}class FA{constructor(t,e,i){this.tm=t,this.prefix=e,this.F=i,this.type="F2",this.m=i.m*2,this.n8=this.F.n8*2,this.n32=this.F.n32*2,this.n64=this.F.n64*2,this.pOp1=t.alloc(i.n8*2),this.pOp2=t.alloc(i.n8*2),this.pOp3=t.alloc(i.n8*2),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}mul1(t,e){return this.op2("_mul1",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=Iu(ni(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==2){const i=this.F.e(t[0],e),r=this.F.e(t[1],e),s=new Uint8Array(this.F.n8*2);return s.set(i),s.set(r,this.F.n8*2),s}else throw new Error("invalid F2")}toString(t,e){const i=this.F.toString(t.slice(0,this.F.n8),e),r=this.F.toString(t.slice(this.F.n8),e);return`[${i}, ${r}]`}fromRng(t){const e=this.F.fromRng(t),i=this.F.fromRng(t),r=new Uint8Array(this.F.n8*2);return r.set(e),r.set(i,this.F.n8),r}random(){return this.fromRng(i3())}toObject(t){const e=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));return[e,i]}fromObject(t){const e=new Uint8Array(this.F.n8*2),i=this.F.fromObject(t[0]),r=this.F.fromObject(t[1]);return e.set(i),e.set(r,this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class ZJ{constructor(t,e,i){this.tm=t,this.prefix=e,this.F=i,this.type="F3",this.m=i.m*3,this.n8=this.F.n8*3,this.n32=this.F.n32*3,this.n64=this.F.n64*3,this.pOp1=t.alloc(i.n8*3),this.pOp2=t.alloc(i.n8*3),this.pOp3=t.alloc(i.n8*3),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}add(t,e){return this.op2("_add",t,e)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=Iu(ni(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==3){const i=this.F.e(t[0],e),r=this.F.e(t[1],e),s=this.F.e(t[2],e),o=new Uint8Array(this.F.n8*3);return o.set(i),o.set(r,this.F.n8),o.set(s,this.F.n8*2),o}else throw new Error("invalid F3")}toString(t,e){const i=this.F.toString(t.slice(0,this.F.n8),e),r=this.F.toString(t.slice(this.F.n8,this.F.n8*2),e),s=this.F.toString(t.slice(this.F.n8*2),e);return`[${i}, ${r}, ${s}]`}fromRng(t){const e=this.F.fromRng(t),i=this.F.fromRng(t),r=this.F.fromRng(t),s=new Uint8Array(this.F.n8*3);return s.set(e),s.set(i,this.F.n8),s.set(r,this.F.n8*2),s}random(){return this.fromRng(i3())}toObject(t){const e=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2)),r=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3));return[e,i,r]}fromObject(t){const e=new Uint8Array(this.F.n8*3),i=this.F.fromObject(t[0]),r=this.F.fromObject(t[1]),s=this.F.fromObject(t[2]);return e.set(i),e.set(r,this.F.n8),e.set(s,this.F.n8*2),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,this.F.n8*2)}c3(t){return t.slice(this.F.n8*2)}}class jA{constructor(t,e,i,r,s,o){this.tm=t,this.prefix=e,this.F=i,this.pOp1=t.alloc(i.n8*3),this.pOp2=t.alloc(i.n8*3),this.pOp3=t.alloc(i.n8*3),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,i.n8*3),this.tm.instance.exports[e+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,i.n8*2),this.one=this.tm.getBuff(r,i.n8*3),this.g=this.one,this.oneAffine=this.tm.getBuff(r,i.n8*2),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(s,i.n8),o&&(this.cofactor=Iu(o)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=La(t,e+"_batchLEMtoC",i.n8*2,i.n8),this.batchLEMtoU=La(t,e+"_batchLEMtoU",i.n8*2,i.n8*2),this.batchCtoLEM=La(t,e+"_batchCtoLEM",i.n8,i.n8*2),this.batchUtoLEM=La(t,e+"_batchUtoLEM",i.n8*2,i.n8*2),this.batchToJacobian=La(t,e+"_batchToJacobian",i.n8*2,i.n8*3),this.batchToAffine=La(t,e+"_batchToAffine",i.n8*3,i.n8*2)}op2(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op2bool(t,e,i){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,i),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op1Affine(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*2)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){if(t.byteLength==this.F.n8*3){if(e.byteLength==this.F.n8*3)return this.op2("_add",t,e);if(e.byteLength==this.F.n8*2)return this.op2("_addMixed",t,e);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(e.byteLength==this.F.n8*3)return this.op2("_addMixed",e,t);if(e.byteLength==this.F.n8*2)return this.op2("_addAffine",t,e);throw new Error("invalid point size")}else throw new Error("invalid point size")}sub(t,e){if(t.byteLength==this.F.n8*3){if(e.byteLength==this.F.n8*3)return this.op2("_sub",t,e);if(e.byteLength==this.F.n8*2)return this.op2("_subMixed",t,e);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(e.byteLength==this.F.n8*3)return this.op2("_subMixed",e,t);if(e.byteLength==this.F.n8*2)return this.op2("_subAffine",t,e);throw new Error("invalid point size")}else throw new Error("invalid point size")}neg(t){if(t.byteLength==this.F.n8*3)return this.op1("_neg",t);if(t.byteLength==this.F.n8*2)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==this.F.n8*3)return this.op1("_double",t);if(t.byteLength==this.F.n8*2)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==this.F.n8*3)return this.op1Bool("_isZero",t);if(t.byteLength==this.F.n8*2)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,e){e instanceof Uint8Array||(e=Iu(ni(e)));let i;if(t.byteLength==this.F.n8*3)i=this.prefix+"_timesScalar";else if(t.byteLength==this.F.n8*2)i=this.prefix+"_timesScalarAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[i](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}timesFr(t,e){let i;if(t.byteLength==this.F.n8*3)i=this.prefix+"_timesFr";else if(t.byteLength==this.F.n8*2)i=this.prefix+"_timesFrAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[i](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}eq(t,e){if(t.byteLength==this.F.n8*3){if(e.byteLength==this.F.n8*3)return this.op2bool("_eq",t,e);if(e.byteLength==this.F.n8*2)return this.op2bool("_eqMixed",t,e);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(e.byteLength==this.F.n8*3)return this.op2bool("_eqMixed",e,t);if(e.byteLength==this.F.n8*2)return this.op2bool("_eqAffine",t,e);throw new Error("invalid point size")}else throw new Error("invalid point size")}toAffine(t){if(t.byteLength==this.F.n8*3)return this.op1Affine("_toAffine",t);if(t.byteLength==this.F.n8*2)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==this.F.n8*3)return t;if(t.byteLength==this.F.n8*2)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,e,i){if(this.tm.setBuff(this.pOp1,i),i.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(i.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const r=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(r,e)}fromRprUncompressed(t,e){const i=t.slice(e,e+this.F.n8*2);return this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,this.F.n8*2)}toRprCompressed(t,e,i){if(this.tm.setBuff(this.pOp1,i),i.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(i.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const r=this.tm.getBuff(this.pOp1,this.F.n8);t.set(r,e)}fromRprCompressed(t,e){const i=t.slice(e,e+this.F.n8);return this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,this.F.n8*2)}toUncompressed(t){const e=new Uint8Array(this.F.n8*2);return this.toRprUncompressed(e,0,t),e}toRprLEM(t,e,i){if(i.byteLength==this.F.n8*2){t.set(i,e);return}else if(i.byteLength==this.F.n8*3){this.tm.setBuff(this.pOp1,i),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const r=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(r,e)}else throw new Error("invalid point size")}fromRprLEM(t,e){return e=e||0,t.slice(e,e+this.F.n8*2)}toString(t,e){if(t.byteLength==this.F.n8*3){const i=this.F.toString(t.slice(0,this.F.n8),e),r=this.F.toString(t.slice(this.F.n8,this.F.n8*2),e),s=this.F.toString(t.slice(this.F.n8*2),e);return`[ ${i}, ${r}, ${s} ]`}else if(t.byteLength==this.F.n8*2){const i=this.F.toString(t.slice(0,this.F.n8),e),r=this.F.toString(t.slice(this.F.n8),e);return`[ ${i}, ${r} ]`}else throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const e=this.F,i=this.toAffine(t),r=i.slice(0,this.F.n8),s=i.slice(this.F.n8,this.F.n8*2),o=e.add(e.mul(e.square(r),r),this.b),a=e.square(s);return e.eq(o,a)}fromRng(t){const e=this.F;let i=[],r,s;do i[0]=e.fromRng(t),r=t.nextBool(),s=e.add(e.mul(e.square(i[0]),i[0]),this.b);while(!e.isSquare(s));i[1]=e.sqrt(s);const o=e.isNegative(i[1]);r^o&&(i[1]=e.neg(i[1]));let a=new Uint8Array(this.F.n8*2);return a.set(i[0]),a.set(i[1],this.F.n8),this.cofactor&&(a=this.timesScalar(a,this.cofactor)),a}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const e=this.F.toObject(t.slice(0,this.F.n8)),i=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));let r;return t.byteLength==this.F.n8*3?r=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3)):r=this.F.toObject(this.F.one),[e,i,r]}fromObject(t){const e=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]);let r;if(t.length==3?r=this.F.fromObject(t[2]):r=this.F.one,this.F.isZero(r,this.F.one))return this.zeroAffine;if(this.F.eq(r,this.F.one)){const s=new Uint8Array(this.F.n8*2);return s.set(e),s.set(i,this.F.n8),s}else{const s=new Uint8Array(this.F.n8*3);return s.set(e),s.set(i,this.F.n8),s.set(r,this.F.n8*2),s}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function QJ(n){let e,i;async function r(u){const h=new Uint8Array(u.code),m=await WebAssembly.compile(h);i=new WebAssembly.Memory({initial:u.init,maximum:32767}),e=await WebAssembly.instantiate(m,{env:{memory:i}})}function s(u){const h=new Uint32Array(i.buffer,0,1);for(;h[0]&3;)h[0]++;const m=h[0];if(h[0]+=u,h[0]+u>i.buffer.byteLength){const p=i.buffer.byteLength/65536;let E=Math.floor((h[0]+u)/65536)+1;E>32767&&(E=32767),i.grow(E-p)}return m}function o(u){const h=s(u.byteLength);return l(h,u),h}function a(u,h){const m=new Uint8Array(i.buffer);return new Uint8Array(m.buffer,m.byteOffset+u,h)}function l(u,h){new Uint8Array(i.buffer).set(new Uint8Array(h),u)}function d(u){if(u[0].cmd=="INIT")return r(u[0]);const h={vars:[],out:[]},p=new Uint32Array(i.buffer,0,1)[0];for(let C=0;C<u.length;C++)switch(u[C].cmd){case"ALLOCSET":h.vars[u[C].var]=o(u[C].buff);break;case"ALLOC":h.vars[u[C].var]=s(u[C].len);break;case"SET":l(h.vars[u[C].var],u[C].buff);break;case"CALL":{const v=[];for(let A=0;A<u[C].params.length;A++){const x=u[C].params[A];typeof x.var<"u"?v.push(h.vars[x.var]+(x.offset||0)):typeof x.val<"u"&&v.push(x.val)}e.exports[u[C].fnName](...v);break}case"GET":h.out[u[C].out]=a(h.vars[u[C].var],u[C].len).slice();break;default:throw new Error("Invalid cmd")}const E=new Uint32Array(i.buffer,0,1);return E[0]=p,h.out}return d}const lw=25;class UA{constructor(){this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}}function YJ(n){return new Promise(t=>setTimeout(t,n))}let ib;const DA=`(function thread(self) {
    const MAXMEM = 32767;
    let instance;
    let memory;

    if (self) {
        self.onmessage = function(e) {
            let data;
            if (e.data) {
                data = e.data;
            } else {
                data = e;
            }

            if (data[0].cmd == "INIT") {
                init(data[0]).then(function() {
                    self.postMessage(data.result);
                });
            } else if (data[0].cmd == "TERMINATE") {
                self.close();
            } else {
                const res = runTask(data);
                self.postMessage(res);
            }
        };
    }

    async function init(data) {
        const code = new Uint8Array(data.code);
        const wasmModule = await WebAssembly.compile(code);
        memory = new WebAssembly.Memory({initial:data.init, maximum: MAXMEM});

        instance = await WebAssembly.instantiate(wasmModule, {
            env: {
                "memory": memory
            }
        });
    }



    function alloc(length) {
        const u32 = new Uint32Array(memory.buffer, 0, 1);
        while (u32[0] & 3) u32[0]++;  // Return always aligned pointers
        const res = u32[0];
        u32[0] += length;
        if (u32[0] + length > memory.buffer.byteLength) {
            const currentPages = memory.buffer.byteLength / 0x10000;
            let requiredPages = Math.floor((u32[0] + length) / 0x10000)+1;
            if (requiredPages>MAXMEM) requiredPages=MAXMEM;
            memory.grow(requiredPages-currentPages);
        }
        return res;
    }

    function allocBuffer(buffer) {
        const p = alloc(buffer.byteLength);
        setBuffer(p, buffer);
        return p;
    }

    function getBuffer(pointer, length) {
        const u8 = new Uint8Array(memory.buffer);
        return new Uint8Array(u8.buffer, u8.byteOffset + pointer, length);
    }

    function setBuffer(pointer, buffer) {
        const u8 = new Uint8Array(memory.buffer);
        u8.set(new Uint8Array(buffer), pointer);
    }

    function runTask(task) {
        if (task[0].cmd == "INIT") {
            return init(task[0]);
        }
        const ctx = {
            vars: [],
            out: []
        };
        const u32a = new Uint32Array(memory.buffer, 0, 1);
        const oldAlloc = u32a[0];
        for (let i=0; i<task.length; i++) {
            switch (task[i].cmd) {
            case "ALLOCSET":
                ctx.vars[task[i].var] = allocBuffer(task[i].buff);
                break;
            case "ALLOC":
                ctx.vars[task[i].var] = alloc(task[i].len);
                break;
            case "SET":
                setBuffer(ctx.vars[task[i].var], task[i].buff);
                break;
            case "CALL": {
                const params = [];
                for (let j=0; j<task[i].params.length; j++) {
                    const p = task[i].params[j];
                    if (typeof p.var !== "undefined") {
                        params.push(ctx.vars[p.var] + (p.offset || 0));
                    } else if (typeof p.val != "undefined") {
                        params.push(p.val);
                    }
                }
                instance.exports[task[i].fnName](...params);
                break;
            }
            case "GET":
                ctx.out[task[i].out] = getBuffer(ctx.vars[task[i].var], task[i].len).slice();
                break;
            default:
                throw new Error("Invalid cmd");
            }
        }
        const u32b = new Uint32Array(memory.buffer, 0, 1);
        u32b[0] = oldAlloc;
        return ctx.out;
    }


    return runTask;
})(self)`;if(globalThis?.Blob){const n=new TextEncoder().encode(DA),t=new Blob([n],{type:"application/javascript"});ib=URL.createObjectURL(t)}else ib="data:application/javascript;base64,"+globalThis.btoa(DA);async function XJ(n,t){const e=new JJ;e.memory=new WebAssembly.Memory({initial:lw}),e.u8=new Uint8Array(e.memory.buffer),e.u32=new Uint32Array(e.memory.buffer);const i=await WebAssembly.compile(n.code);if(e.instance=await WebAssembly.instantiate(i,{env:{memory:e.memory}}),globalThis?.Worker||(t=!0),e.singleThread=t,e.initalPFree=e.u32[0],e.pq=n.pq,e.pr=n.pr,e.pG1gen=n.pG1gen,e.pG1zero=n.pG1zero,e.pG2gen=n.pG2gen,e.pG2zero=n.pG2zero,e.pOneT=n.pOneT,t)e.code=n.code,e.taskManager=QJ(),await e.taskManager([{cmd:"INIT",init:lw,code:e.code.slice()}]),e.concurrency=1;else{e.workers=[],e.pendingDeferreds=[],e.working=[];let s=2;typeof navigator=="object"&&navigator.hardwareConcurrency&&(s=navigator.hardwareConcurrency),s==0&&(s=2),s>64&&(s=64),e.concurrency=s;for(let a=0;a<s;a++)e.workers[a]=new Worker(ib),e.workers[a].addEventListener("message",r(a)),e.working[a]=!1;const o=[];for(let a=0;a<e.workers.length;a++){const l=n.code.slice();o.push(e.postAction(a,[{cmd:"INIT",init:lw,code:l}],[l.buffer]))}await Promise.all(o)}return e;function r(s){return function(o){let a;o&&o.data?a=o.data:a=o,e.working[s]=!1,e.pendingDeferreds[s].resolve(a),e.processWorks()}}}class JJ{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(this.oldPFree!=0)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(this.oldPFree==0)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,e,i,r){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=r||new UA,this.workers[t].postMessage(e,i),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(this.working[t]==!1){const e=this.actionQueue.shift();this.postAction(t,e.data,e.transfers,e.deferred)}}queueAction(t,e){const i=new UA;if(this.singleThread){const r=this.taskManager(t);i.resolve(r)}else this.actionQueue.push({data:t,transfers:e,deferred:i}),this.processWorks();return i.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const e=this.alloc(t.byteLength);return this.setBuff(e,t),e}getBuff(t,e){return this.u8.slice(t,t+e)}setBuff(t,e){this.u8.set(new Uint8Array(e),t)}alloc(t){for(;this.u32[0]&3;)this.u32[0]++;const e=this.u32[0];return this.u32[0]+=t,e}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await YJ(200)}}function uw(n,t){const e=n[t],i=n.Fr,r=n.tm;n[t].batchApplyKey=async function(s,o,a,l,d){l=l||"affine",d=d||"affine";let u,h,m,p,E;if(t=="G1")l=="jacobian"?(m=e.F.n8*3,u="g1m_batchApplyKey"):(m=e.F.n8*2,u="g1m_batchApplyKeyMixed"),p=e.F.n8*3,d=="jacobian"?E=e.F.n8*3:(h="g1m_batchToAffine",E=e.F.n8*2);else if(t=="G2")l=="jacobian"?(m=e.F.n8*3,u="g2m_batchApplyKey"):(m=e.F.n8*2,u="g2m_batchApplyKeyMixed"),p=e.F.n8*3,d=="jacobian"?E=e.F.n8*3:(h="g2m_batchToAffine",E=e.F.n8*2);else if(t=="Fr")u="frm_batchApplyKey",m=e.n8,p=e.n8,E=e.n8;else throw new Error("Invalid group: "+t);const C=Math.floor(s.byteLength/m),v=Math.floor(C/r.concurrency),A=[];a=i.e(a);let x=i.e(o);for(let j=0;j<r.concurrency;j++){let b;if(j<r.concurrency-1?b=v:b=C-j*v,b==0)continue;const B=[];B.push({cmd:"ALLOCSET",var:0,buff:s.slice(j*v*m,j*v*m+b*m)}),B.push({cmd:"ALLOCSET",var:1,buff:x}),B.push({cmd:"ALLOCSET",var:2,buff:a}),B.push({cmd:"ALLOC",var:3,len:b*Math.max(p,E)}),B.push({cmd:"CALL",fnName:u,params:[{var:0},{val:b},{var:1},{var:2},{var:3}]}),h&&B.push({cmd:"CALL",fnName:h,params:[{var:3},{val:b},{var:3}]}),B.push({cmd:"GET",out:0,var:3,len:b*E}),A.push(r.queueAction(B)),x=i.mul(x,i.exp(a,b))}const P=await Promise.all(A);let W;s instanceof Qt?W=new Qt(C*E):W=new Uint8Array(C*E);let K=0;for(let j=0;j<P.length;j++)W.set(P[j][0],K),K+=P[j][0].byteLength;return W}}function ttt(n){const t=n.tm;n.pairing=function(i,r){t.startSyncOp();const s=t.allocBuff(n.G1.toJacobian(i)),o=t.allocBuff(n.G2.toJacobian(r)),a=t.alloc(n.Gt.n8);t.instance.exports[n.name+"_pairing"](s,o,a);const l=t.getBuff(a,n.Gt.n8);return t.endSyncOp(),l},n.pairingEq=async function(){let i,r;arguments.length%2==1?(i=arguments[arguments.length-1],r=(arguments.length-1)/2):(i=n.Gt.one,r=arguments.length/2);const s=[];for(let u=0;u<r;u++){const h=[],m=n.G1.toJacobian(arguments[u*2]);h.push({cmd:"ALLOCSET",var:0,buff:m}),h.push({cmd:"ALLOC",var:1,len:n.prePSize});const p=n.G2.toJacobian(arguments[u*2+1]);h.push({cmd:"ALLOCSET",var:2,buff:p}),h.push({cmd:"ALLOC",var:3,len:n.preQSize}),h.push({cmd:"ALLOC",var:4,len:n.Gt.n8}),h.push({cmd:"CALL",fnName:n.name+"_prepareG1",params:[{var:0},{var:1}]}),h.push({cmd:"CALL",fnName:n.name+"_prepareG2",params:[{var:2},{var:3}]}),h.push({cmd:"CALL",fnName:n.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),h.push({cmd:"GET",out:0,var:4,len:n.Gt.n8}),s.push(t.queueAction(h))}const o=await Promise.all(s);t.startSyncOp();const a=t.alloc(n.Gt.n8);t.instance.exports.ftm_one(a);for(let u=0;u<o.length;u++){const h=t.allocBuff(o[u][0]);t.instance.exports.ftm_mul(a,h,a)}t.instance.exports[n.name+"_finalExponentiation"](a,a);const l=t.allocBuff(i),d=!!t.instance.exports.ftm_eq(a,l);return t.endSyncOp(),d},n.prepareG1=function(e){this.tm.startSyncOp();const i=this.tm.allocBuff(e),r=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](i,r);const s=this.tm.getBuff(r,this.prePSize);return this.tm.endSyncOp(),s},n.prepareG2=function(e){this.tm.startSyncOp();const i=this.tm.allocBuff(e),r=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](i,r);const s=this.tm.getBuff(r,this.preQSize);return this.tm.endSyncOp(),s},n.millerLoop=function(e,i){this.tm.startSyncOp();const r=this.tm.allocBuff(e),s=this.tm.allocBuff(i),o=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](r,s,o);const a=this.tm.getBuff(o,this.Gt.n8);return this.tm.endSyncOp(),a},n.finalExponentiation=function(e){this.tm.startSyncOp();const i=this.tm.allocBuff(e),r=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](i,r);const s=this.tm.getBuff(r,this.Gt.n8);return this.tm.endSyncOp(),s}}const zA=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function GA(n,t){const e=n[t],i=e.tm;async function r(o,a,l,d,u){if(!(o instanceof Uint8Array))throw d&&d.error(`${u} _multiExpChunk buffBases is not Uint8Array`),new Error(`${u} _multiExpChunk buffBases is not Uint8Array`);if(!(a instanceof Uint8Array))throw d&&d.error(`${u} _multiExpChunk buffScalars is not Uint8Array`),new Error(`${u} _multiExpChunk buffScalars is not Uint8Array`);l=l||"affine";let h,m;if(t=="G1")l=="affine"?(m="g1m_multiexpAffine_chunk",h=e.F.n8*2):(m="g1m_multiexp_chunk",h=e.F.n8*3);else if(t=="G2")l=="affine"?(m="g2m_multiexpAffine_chunk",h=e.F.n8*2):(m="g2m_multiexp_chunk",h=e.F.n8*3);else throw new Error("Invalid group");const p=Math.floor(o.byteLength/h);if(p==0)return e.zero;const E=Math.floor(a.byteLength/p);if(E*p!=a.byteLength)throw new Error("Scalar size does not match");const C=zA[mr(p)],v=Math.floor((E*8-1)/C)+1,A=[];for(let W=0;W<v;W++){const K=[{cmd:"ALLOCSET",var:0,buff:o},{cmd:"ALLOCSET",var:1,buff:a},{cmd:"ALLOC",var:2,len:e.F.n8*3},{cmd:"CALL",fnName:m,params:[{var:0},{var:1},{val:E},{val:p},{val:W*C},{val:Math.min(E*8-W*C,C)},{var:2}]},{cmd:"GET",out:0,var:2,len:e.F.n8*3}];A.push(e.tm.queueAction(K))}const x=await Promise.all(A);let P=e.zero;for(let W=x.length-1;W>=0;W--){if(!e.isZero(P))for(let K=0;K<C;K++)P=e.double(P);P=e.add(P,x[W][0])}return P}async function s(o,a,l,d,u){let p;if(t=="G1")l=="affine"?p=e.F.n8*2:p=e.F.n8*3;else if(t=="G2")l=="affine"?p=e.F.n8*2:p=e.F.n8*3;else throw new Error("Invalid group");const E=Math.floor(o.byteLength/p);if(E==0)return e.zero;const C=Math.floor(a.byteLength/E);if(C*E!=a.byteLength)throw new Error("Scalar size does not match");const v=zA[mr(E)],A=Math.floor((C*8-1)/v)+1;let x;x=Math.floor(E/(i.concurrency/A)),x>4194304&&(x=4194304),x<1024&&(x=1024);const P=[];for(let j=0;j<E;j+=x){d&&d.debug(`Multiexp start: ${u}: ${j}/${E}`);const b=Math.min(E-j,x),B=o.slice(j*p,(j+b)*p),J=a.slice(j*C,(j+b)*C);P.push(r(B,J,l,d,u).then(it=>(d&&d.debug(`Multiexp end: ${u}: ${j}/${E}`),it)))}const W=await Promise.all(P);let K=e.zero;for(let j=W.length-1;j>=0;j--)K=e.add(K,W[j]);return K}e.multiExp=async function(a,l,d,u){return await s(a,l,"jacobian",d,u)},e.multiExpAffine=async function(a,l,d,u){return await s(a,l,"affine",d,u)}}function dw(n,t){const e=n[t],i=n.Fr,r=e.tm;async function s(d,u,h,m,p,E){h=h||"affine",m=m||"affine";const C=14;let v,A,x,P,W,K,j,b;t=="G1"?(h=="affine"?(v=e.F.n8*2,P="g1m_batchToJacobian"):v=e.F.n8*3,A=e.F.n8*3,u&&(b="g1m_fftFinal"),j="g1m_fftJoin",K="g1m_fftMix",m=="affine"?(x=e.F.n8*2,W="g1m_batchToAffine"):x=e.F.n8*3):t=="G2"?(h=="affine"?(v=e.F.n8*2,P="g2m_batchToJacobian"):v=e.F.n8*3,A=e.F.n8*3,u&&(b="g2m_fftFinal"),j="g2m_fftJoin",K="g2m_fftMix",m=="affine"?(x=e.F.n8*2,W="g2m_batchToAffine"):x=e.F.n8*3):t=="Fr"&&(v=e.n8,A=e.n8,x=e.n8,u&&(b="frm_fftFinal"),K="frm_fftMix",j="frm_fftJoin");let B=!1;Array.isArray(d)?(d=u3(d,v),B=!0):d=d.slice(0,d.byteLength);const J=d.byteLength/v,it=mr(J);if(1<<it!=J)throw new Error("fft must be multiple of 2");if(it==i.s+1){let Q;return u?Q=await a(d,h,m,p,E):Q=await o(d,h,m,p,E),B?ym(Q,x):Q}let st;u&&(st=i.inv(i.e(J)));let z;EN(d,v);let I,w=Math.min(1<<C,J),T=J/w;for(;T<r.concurrency&&w>=16;)T*=2,w/=2;const V=mr(w),Y=[];for(let Q=0;Q<T;Q++){p&&p.debug(`${E}: fft ${it} mix start: ${Q}/${T}`);const $=[];$.push({cmd:"ALLOC",var:0,len:A*w});const F=d.slice(w*Q*v,w*(Q+1)*v);$.push({cmd:"SET",var:0,buff:F}),P&&$.push({cmd:"CALL",fnName:P,params:[{var:0},{val:w},{var:0}]});for(let R=1;R<=V;R++)$.push({cmd:"CALL",fnName:K,params:[{var:0},{val:w},{val:R}]});V==it?(b&&($.push({cmd:"ALLOCSET",var:1,buff:st}),$.push({cmd:"CALL",fnName:b,params:[{var:0},{val:w},{var:1}]})),W&&$.push({cmd:"CALL",fnName:W,params:[{var:0},{val:w},{var:0}]}),$.push({cmd:"GET",out:0,var:0,len:w*x})):$.push({cmd:"GET",out:0,var:0,len:A*w}),Y.push(r.queueAction($).then(R=>(p&&p.debug(`${E}: fft ${it} mix end: ${Q}/${T}`),R)))}I=await Promise.all(Y);for(let Q=0;Q<T;Q++)I[Q]=I[Q][0];for(let Q=V+1;Q<=it;Q++){p&&p.debug(`${E}: fft  ${it}  join: ${Q}/${it}`);const $=1<<it-Q,F=T/$,R=[];for(let k=0;k<$;k++)for(let H=0;H<F/2;H++){const L=i.exp(i.w[Q],H*w),g=i.w[Q],D=k*F+H,S=k*F+H+F/2,lt=[];lt.push({cmd:"ALLOCSET",var:0,buff:I[D]}),lt.push({cmd:"ALLOCSET",var:1,buff:I[S]}),lt.push({cmd:"ALLOCSET",var:2,buff:L}),lt.push({cmd:"ALLOCSET",var:3,buff:g}),lt.push({cmd:"CALL",fnName:j,params:[{var:0},{var:1},{val:w},{var:2},{var:3}]}),Q==it?(b&&(lt.push({cmd:"ALLOCSET",var:4,buff:st}),lt.push({cmd:"CALL",fnName:b,params:[{var:0},{val:w},{var:4}]}),lt.push({cmd:"CALL",fnName:b,params:[{var:1},{val:w},{var:4}]})),W&&(lt.push({cmd:"CALL",fnName:W,params:[{var:0},{val:w},{var:0}]}),lt.push({cmd:"CALL",fnName:W,params:[{var:1},{val:w},{var:1}]})),lt.push({cmd:"GET",out:0,var:0,len:w*x}),lt.push({cmd:"GET",out:1,var:1,len:w*x})):(lt.push({cmd:"GET",out:0,var:0,len:w*A}),lt.push({cmd:"GET",out:1,var:1,len:w*A})),R.push(r.queueAction(lt).then(ct=>(p&&p.debug(`${E}: fft ${it} join  ${Q}/${it}  ${k+1}/${$} ${H}/${F/2}`),ct)))}const _=await Promise.all(R);for(let k=0;k<$;k++)for(let H=0;H<F/2;H++){const L=k*F+H,g=k*F+H+F/2,D=_.shift();I[L]=D[0],I[g]=D[1]}}if(d instanceof Qt?z=new Qt(J*x):z=new Uint8Array(J*x),u){z.set(I[0].slice((w-1)*x));let Q=x;for(let $=T-1;$>0;$--)z.set(I[$],Q),Q+=w*x,delete I[$];z.set(I[0].slice(0,(w-1)*x),Q),delete I[0]}else for(let Q=0;Q<T;Q++)z.set(I[Q],w*x*Q),delete I[Q];return B?ym(z,x):z}async function o(d,u,h,m,p){let E,C;E=d.slice(0,d.byteLength/2),C=d.slice(d.byteLength/2,d.byteLength);const v=[];[E,C]=await l(E,C,"fftJoinExt",i.one,i.shift,u,"jacobian",m,p),v.push(s(E,!1,"jacobian",h,m,p)),v.push(s(C,!1,"jacobian",h,m,p));const A=await Promise.all(v);let x;return A[0].byteLength>1<<28?x=new Qt(A[0].byteLength*2):x=new Uint8Array(A[0].byteLength*2),x.set(A[0]),x.set(A[1],A[0].byteLength),x}async function a(d,u,h,m,p){let E,C;E=d.slice(0,d.byteLength/2),C=d.slice(d.byteLength/2,d.byteLength);const v=[];v.push(s(E,!0,u,"jacobian",m,p)),v.push(s(C,!0,u,"jacobian",m,p)),[E,C]=await Promise.all(v);const A=await l(E,C,"fftJoinExtInv",i.one,i.shiftInv,"jacobian",h,m,p);let x;return A[0].byteLength>1<<28?x=new Qt(A[0].byteLength*2):x=new Uint8Array(A[0].byteLength*2),x.set(A[0]),x.set(A[1],A[0].byteLength),x}async function l(d,u,h,m,p,E,C,v,A){let W,K,j,b,B,J;if(t=="G1")E=="affine"?(B=e.F.n8*2,K="g1m_batchToJacobian"):B=e.F.n8*3,J=e.F.n8*3,W="g1m_"+h,C=="affine"?(j="g1m_batchToAffine",b=e.F.n8*2):b=e.F.n8*3;else if(t=="G2")E=="affine"?(B=e.F.n8*2,K="g2m_batchToJacobian"):B=e.F.n8*3,W="g2m_"+h,J=e.F.n8*3,C=="affine"?(j="g2m_batchToAffine",b=e.F.n8*2):b=e.F.n8*3;else if(t=="Fr")B=i.n8,b=i.n8,J=i.n8,W="frm_"+h;else throw new Error("Invalid group");if(d.byteLength!=u.byteLength)throw new Error("Invalid buffer size");const it=Math.floor(d.byteLength/B);if(it!=1<<mr(it))throw new Error("Invalid number of points");let st=Math.floor(it/r.concurrency);st<16&&(st=16),st>65536&&(st=65536);const z=[];for(let Y=0;Y<it;Y+=st){v&&v.debug(`${A}: fftJoinExt Start: ${Y}/${it}`);const Q=Math.min(it-Y,st),$=i.mul(m,i.exp(p,Y)),F=[],R=d.slice(Y*B,(Y+Q)*B),_=u.slice(Y*B,(Y+Q)*B);F.push({cmd:"ALLOC",var:0,len:J*Q}),F.push({cmd:"SET",var:0,buff:R}),F.push({cmd:"ALLOC",var:1,len:J*Q}),F.push({cmd:"SET",var:1,buff:_}),F.push({cmd:"ALLOCSET",var:2,buff:$}),F.push({cmd:"ALLOCSET",var:3,buff:p}),K&&(F.push({cmd:"CALL",fnName:K,params:[{var:0},{val:Q},{var:0}]}),F.push({cmd:"CALL",fnName:K,params:[{var:1},{val:Q},{var:1}]})),F.push({cmd:"CALL",fnName:W,params:[{var:0},{var:1},{val:Q},{var:2},{var:3},{val:i.s}]}),j&&(F.push({cmd:"CALL",fnName:j,params:[{var:0},{val:Q},{var:0}]}),F.push({cmd:"CALL",fnName:j,params:[{var:1},{val:Q},{var:1}]})),F.push({cmd:"GET",out:0,var:0,len:Q*b}),F.push({cmd:"GET",out:1,var:1,len:Q*b}),z.push(r.queueAction(F).then(k=>(v&&v.debug(`${A}: fftJoinExt End: ${Y}/${it}`),k)))}const I=await Promise.all(z);let w,T;it*b>1<<28?(w=new Qt(it*b),T=new Qt(it*b)):(w=new Uint8Array(it*b),T=new Uint8Array(it*b));let V=0;for(let Y=0;Y<I.length;Y++)w.set(I[Y][0],V),T.set(I[Y][1],V),V+=I[Y][0].byteLength;return[w,T]}e.fft=async function(d,u,h,m,p){return await s(d,!1,u,h,m,p)},e.ifft=async function(d,u,h,m,p){return await s(d,!0,u,h,m,p)},e.lagrangeEvaluations=async function(d,u,h,m,p){u=u||"affine",h=h||"affine";let E;if(t=="G1")u=="affine"?E=e.F.n8*2:E=e.F.n8*3;else if(t=="G2")u=="affine"?E=e.F.n8*2:E=e.F.n8*3;else if(t=="Fr")E=i.n8;else throw new Error("Invalid group");const C=d.byteLength/E,v=mr(C);if(2**v*E!=d.byteLength)throw m&&m.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(v<=i.s)return await e.ifft(d,u,h,m,p);if(v>i.s+1)throw m&&m.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let A=d.slice(0,d.byteLength/2),x=d.slice(d.byteLength/2,d.byteLength);const P=i.exp(i.shift,C/2),W=i.inv(i.sub(i.one,P));[A,x]=await l(A,x,"prepareLagrangeEvaluation",W,i.shiftInv,u,"jacobian",m,p+" prep");const K=[];K.push(s(A,!0,"jacobian",h,m,p+" t0")),K.push(s(x,!0,"jacobian",h,m,p+" t1")),[A,x]=await Promise.all(K);let j;return A.byteLength>1<<28?j=new Qt(A.byteLength*2):j=new Uint8Array(A.byteLength*2),j.set(A),j.set(x,A.byteLength),j},e.fftMix=async function(u){const h=e.F.n8*3;let m,p;if(t=="G1")m="g1m_fftMix",p="g1m_fftJoin";else if(t=="G2")m="g2m_fftMix",p="g2m_fftJoin";else if(t=="Fr")m="frm_fftMix",p="frm_fftJoin";else throw new Error("Invalid group");const E=Math.floor(u.byteLength/h),C=mr(E);let v=1<<mr(r.concurrency);E<=v*2&&(v=1);const A=E/v,x=mr(A),P=[];for(let B=0;B<v;B++){const J=[],it=u.slice(B*A*h,(B+1)*A*h);J.push({cmd:"ALLOCSET",var:0,buff:it});for(let st=1;st<=x;st++)J.push({cmd:"CALL",fnName:m,params:[{var:0},{val:A},{val:st}]});J.push({cmd:"GET",out:0,var:0,len:A*h}),P.push(r.queueAction(J))}const W=await Promise.all(P),K=[];for(let B=0;B<W.length;B++)K[B]=W[B][0];for(let B=x+1;B<=C;B++){const J=1<<C-B,it=v/J,st=[];for(let I=0;I<J;I++)for(let w=0;w<it/2;w++){const T=i.exp(i.w[B],w*A),V=i.w[B],Y=I*it+w,Q=I*it+w+it/2,$=[];$.push({cmd:"ALLOCSET",var:0,buff:K[Y]}),$.push({cmd:"ALLOCSET",var:1,buff:K[Q]}),$.push({cmd:"ALLOCSET",var:2,buff:T}),$.push({cmd:"ALLOCSET",var:3,buff:V}),$.push({cmd:"CALL",fnName:p,params:[{var:0},{var:1},{val:A},{var:2},{var:3}]}),$.push({cmd:"GET",out:0,var:0,len:A*h}),$.push({cmd:"GET",out:1,var:1,len:A*h}),st.push(r.queueAction($))}const z=await Promise.all(st);for(let I=0;I<J;I++)for(let w=0;w<it/2;w++){const T=I*it+w,V=I*it+w+it/2,Y=z.shift();K[T]=Y[0],K[V]=Y[1]}}let j;u instanceof Qt?j=new Qt(E*h):j=new Uint8Array(E*h);let b=0;for(let B=0;B<v;B++)j.set(K[B],b),b+=K[B].byteLength;return j},e.fftJoin=async function(u,h,m,p){const E=e.F.n8*3;let C;if(t=="G1")C="g1m_fftJoin";else if(t=="G2")C="g2m_fftJoin";else if(t=="Fr")C="frm_fftJoin";else throw new Error("Invalid group");if(u.byteLength!=h.byteLength)throw new Error("Invalid buffer size");const v=Math.floor(u.byteLength/E);if(v!=1<<mr(v))throw new Error("Invalid number of points");let A=1<<mr(r.concurrency);v<=A*2&&(A=1);const x=v/A,P=[];for(let B=0;B<A;B++){const J=[],it=i.mul(m,i.exp(p,B*x)),st=u.slice(B*x*E,(B+1)*x*E),z=h.slice(B*x*E,(B+1)*x*E);J.push({cmd:"ALLOCSET",var:0,buff:st}),J.push({cmd:"ALLOCSET",var:1,buff:z}),J.push({cmd:"ALLOCSET",var:2,buff:it}),J.push({cmd:"ALLOCSET",var:3,buff:p}),J.push({cmd:"CALL",fnName:C,params:[{var:0},{var:1},{val:x},{var:2},{var:3}]}),J.push({cmd:"GET",out:0,var:0,len:x*E}),J.push({cmd:"GET",out:1,var:1,len:x*E}),P.push(r.queueAction(J))}const W=await Promise.all(P);let K,j;u instanceof Qt?(K=new Qt(v*E),j=new Qt(v*E)):(K=new Uint8Array(v*E),j=new Uint8Array(v*E));let b=0;for(let B=0;B<W.length;B++)K.set(W[B][0],b),j.set(W[B][1],b),b+=W[B][0].byteLength;return[K,j]},e.fftFinal=async function(u,h){const m=e.F.n8*3,p=e.F.n8*2;let E,C;if(t=="G1")E="g1m_fftFinal",C="g1m_batchToAffine";else if(t=="G2")E="g2m_fftFinal",C="g2m_batchToAffine";else throw new Error("Invalid group");const v=Math.floor(u.byteLength/m);if(v!=1<<mr(v))throw new Error("Invalid number of points");const A=Math.floor(v/r.concurrency),x=[];for(let j=0;j<r.concurrency;j++){let b;if(j<r.concurrency-1?b=A:b=v-j*A,b==0)continue;const B=[],J=u.slice(j*A*m,(j*A+b)*m);B.push({cmd:"ALLOCSET",var:0,buff:J}),B.push({cmd:"ALLOCSET",var:1,buff:h}),B.push({cmd:"CALL",fnName:E,params:[{var:0},{val:b},{var:1}]}),B.push({cmd:"CALL",fnName:C,params:[{var:0},{val:b},{var:0}]}),B.push({cmd:"GET",out:0,var:0,len:b*p}),x.push(r.queueAction(B))}const P=await Promise.all(x);let W;u instanceof Qt?W=new Qt(v*p):W=new Uint8Array(v*p);let K=0;for(let j=P.length-1;j>=0;j--)W.set(P[j][0],K),K+=P[j][0].byteLength;return W}}async function SN(n){const t=await XJ(n.wasm,n.singleThread),e={};return e.q=ni(n.wasm.q.toString()),e.r=ni(n.wasm.r.toString()),e.name=n.name,e.tm=t,e.prePSize=n.wasm.prePSize,e.preQSize=n.wasm.preQSize,e.Fr=new OA(t,"frm",n.n8r,n.r),e.F1=new OA(t,"f1m",n.n8q,n.q),e.F2=new FA(t,"f2m",e.F1),e.G1=new jA(t,"g1m",e.F1,n.wasm.pG1gen,n.wasm.pG1b,n.cofactorG1),e.G2=new jA(t,"g2m",e.F2,n.wasm.pG2gen,n.wasm.pG2b,n.cofactorG2),e.F6=new ZJ(t,"f6m",e.F2),e.F12=new FA(t,"ftm",e.F6),e.Gt=e.F12,uw(e,"G1"),uw(e,"G2"),uw(e,"Fr"),GA(e,"G1"),GA(e,"G2"),dw(e,"G1"),dw(e,"G2"),dw(e,"Fr"),ttt(e),e.array2buffer=function(i,r){const s=new Uint8Array(r*i.length);for(let o=0;o<i.length;o++)s.set(i[o],o*r);return s},e.buffer2array=function(i,r){const s=i.byteLength/r,o=new Array(s);for(let a=0;a<s;a++)o[a]=i.slice(a*r,a*r+r);return o},e}function zu(n){return BigInt(n)}function LN(n){return n<0n}function ett(n){return n===0n}function ntt(n){return LN(n)?n.toString(2).length-1:n.toString(2).length}function fw(n){const t=[],e=zu(n);return t.push(Number(e&0xFFn)),t.push(Number(e>>8n&0xFFn)),t.push(Number(e>>16n&0xFFn)),t.push(Number(e>>24n&0xFFn)),t}function itt(n){for(var t=[],e=0;e<n.length;e++){var i=n.charCodeAt(e);i<128?t.push(i):i<2048?t.push(192|i>>6,128|i&63):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|i&63):(e++,i=65536+((i&1023)<<10|n.charCodeAt(e)&1023),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return t}function Hd(n){const t=itt(n);return[...Ue(t.length),...t]}function CN(n){const t=[];let e=zu(n);if(LN(e))throw new Error("Number cannot be negative");for(;!ett(e);)t.push(Number(e&0x7Fn)),e=e>>7n;t.length==0&&t.push(0);for(let i=0;i<t.length-1;i++)t[i]=t[i]|128;return t}function AN(n){let t,e;const i=ntt(n);n<0?(e=!0,t=(1n<<BigInt(i))+n):(e=!1,t=zu(n));const r=7-i%7,s=(1n<<BigInt(r))-1n<<BigInt(i),o=(1<<7-r)-1|128,a=CN(t+s);return e||(a[a.length-1]=a[a.length-1]&o),a}function rb(n){let t=zu(n);if(t>0xFFFFFFFFn)throw new Error("Number too big");if(t>0x7FFFFFFFn&&(t=t-0x100000000n),t<-2147483648n)throw new Error("Number too small");return AN(t)}function rtt(n){let t=zu(n);if(t>0xFFFFFFFFFFFFFFFFn)throw new Error("Number too big");if(t>0x7FFFFFFFFFFFFFFFn&&(t=t-0x10000000000000000n),t<-9223372036854775808n)throw new Error("Number too small");return AN(t)}function Ue(n){let t=zu(n);if(t>0xFFFFFFFFn)throw new Error("Number too big");return CN(t)}function WA(n){return Array.from(n,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}class stt{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,e){const i=this.func.localIdxByName[t];if(i===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,33,...Ue(i)]}teeLocal(t,e){const i=this.func.localIdxByName[t];if(i===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,34,...Ue(i)]}getLocal(t){const e=this.func.localIdxByName[t];if(e===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...Ue(e)]}i64_load8_s(t,e,i){const r=e||0,s=i===void 0?0:i;return[...t,48,s,...Ue(r)]}i64_load8_u(t,e,i){const r=e||0,s=i===void 0?0:i;return[...t,49,s,...Ue(r)]}i64_load16_s(t,e,i){const r=e||0,s=i===void 0?1:i;return[...t,50,s,...Ue(r)]}i64_load16_u(t,e,i){const r=e||0,s=i===void 0?1:i;return[...t,51,s,...Ue(r)]}i64_load32_s(t,e,i){const r=e||0,s=i===void 0?2:i;return[...t,52,s,...Ue(r)]}i64_load32_u(t,e,i){const r=e||0,s=i===void 0?2:i;return[...t,53,s,...Ue(r)]}i64_load(t,e,i){const r=e||0,s=i===void 0?3:i;return[...t,41,s,...Ue(r)]}i64_store(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=3,a=e):Array.isArray(i)?(s=e,o=3,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,55,o,...Ue(s)]}i64_store32(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=2,a=e):Array.isArray(i)?(s=e,o=2,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,62,o,...Ue(s)]}i64_store16(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=1,a=e):Array.isArray(i)?(s=e,o=1,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,61,o,...Ue(s)]}i64_store8(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=0,a=e):Array.isArray(i)?(s=e,o=0,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,60,o,...Ue(s)]}i32_load8_s(t,e,i){const r=e||0,s=i===void 0?0:i;return[...t,44,s,...Ue(r)]}i32_load8_u(t,e,i){const r=e||0,s=i===void 0?0:i;return[...t,45,s,...Ue(r)]}i32_load16_s(t,e,i){const r=e||0,s=i===void 0?1:i;return[...t,46,s,...Ue(r)]}i32_load16_u(t,e,i){const r=e||0,s=i===void 0?1:i;return[...t,47,s,...Ue(r)]}i32_load(t,e,i){const r=e||0,s=i===void 0?2:i;return[...t,40,s,...Ue(r)]}i32_store(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=2,a=e):Array.isArray(i)?(s=e,o=2,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,54,o,...Ue(s)]}i32_store16(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=1,a=e):Array.isArray(i)?(s=e,o=1,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,59,o,...Ue(s)]}i32_store8(t,e,i,r){let s,o,a;return Array.isArray(e)?(s=0,o=0,a=e):Array.isArray(i)?(s=e,o=0,a=i):Array.isArray(r)&&(s=e,o=i,a=r),[...t,...a,58,o,...Ue(s)]}call(t,...e){const i=this.module.functionIdxByName[t];if(i===void 0)throw new Error(`Function not defined: Function: ${t}`);return[...[].concat(...e),16,...Ue(i)]}call_indirect(t,...e){return[...[].concat(...e),...t,17,0,0]}if(t,e,i){return i?[...t,4,64,...e,5,...i,11]:[...t,4,64,...e,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,e){return[...e,13,...Ue(t)]}br(t){return[12,...Ue(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...rtt(t)]}i32_const(t){return[65,...rb(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,e){return[...t,...e,81]}i64_ne(t,e){return[...t,...e,82]}i64_lt_s(t,e){return[...t,...e,83]}i64_lt_u(t,e){return[...t,...e,84]}i64_gt_s(t,e){return[...t,...e,85]}i64_gt_u(t,e){return[...t,...e,86]}i64_le_s(t,e){return[...t,...e,87]}i64_le_u(t,e){return[...t,...e,88]}i64_ge_s(t,e){return[...t,...e,89]}i64_ge_u(t,e){return[...t,...e,90]}i64_add(t,e){return[...t,...e,124]}i64_sub(t,e){return[...t,...e,125]}i64_mul(t,e){return[...t,...e,126]}i64_div_s(t,e){return[...t,...e,127]}i64_div_u(t,e){return[...t,...e,128]}i64_rem_s(t,e){return[...t,...e,129]}i64_rem_u(t,e){return[...t,...e,130]}i64_and(t,e){return[...t,...e,131]}i64_or(t,e){return[...t,...e,132]}i64_xor(t,e){return[...t,...e,133]}i64_shl(t,e){return[...t,...e,134]}i64_shr_s(t,e){return[...t,...e,135]}i64_shr_u(t,e){return[...t,...e,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,e){return[...t,...e,70]}i32_ne(t,e){return[...t,...e,71]}i32_lt_s(t,e){return[...t,...e,72]}i32_lt_u(t,e){return[...t,...e,73]}i32_gt_s(t,e){return[...t,...e,74]}i32_gt_u(t,e){return[...t,...e,75]}i32_le_s(t,e){return[...t,...e,76]}i32_le_u(t,e){return[...t,...e,77]}i32_ge_s(t,e){return[...t,...e,78]}i32_ge_u(t,e){return[...t,...e,79]}i32_add(t,e){return[...t,...e,106]}i32_sub(t,e){return[...t,...e,107]}i32_mul(t,e){return[...t,...e,108]}i32_div_s(t,e){return[...t,...e,109]}i32_div_u(t,e){return[...t,...e,110]}i32_rem_s(t,e){return[...t,...e,111]}i32_rem_u(t,e){return[...t,...e,112]}i32_and(t,e){return[...t,...e,113]}i32_or(t,e){return[...t,...e,114]}i32_xor(t,e){return[...t,...e,115]}i32_shl(t,e){return[...t,...e,116]}i32_shr_s(t,e){return[...t,...e,117]}i32_shr_u(t,e){return[...t,...e,118]}i32_rotl(t,e){return[...t,...e,119]}i32_rotr(t,e){return[...t,...e,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}const hw={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class VA{constructor(t,e,i,r,s){if(i=="import")this.fnType="import",this.moduleName=r,this.fieldName=s;else if(i=="internal")this.fnType="internal";else throw new Error("Invalid function fnType: "+i);this.module=t,this.fnName=e,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,e){if(this.localIdxByName[t])throw new Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);const i=this.nextLocal++;this.localIdxByName[t]=i,this.params.push({type:e})}addLocal(t,e,i){const r=i||1;if(this.localIdxByName[t])throw new Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);const s=this.nextLocal++;this.localIdxByName[t]=s,this.locals.push({type:e,length:r})}setReturnType(t){if(this.returnType)throw new Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){const t=[...Ue(this.params.length),...this.params.map(i=>hw[i.type])],e=this.returnType?[1,hw[this.returnType]]:[0];return[96,...t,...e]}getBody(){const t=this.locals.map(i=>[...Ue(i.length),hw[i.type]]),e=[...Ue(this.locals.length),...[].concat(...t),...this.code,11];return[...Ue(e.length),...e]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new stt(this)}}class IN{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...fw(1836278016),...fw(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(typeof this.functionIdxByName[t]<"u")throw new Error(`Function already defined: ${t}`);const e=this.functions.length;return this.functionIdxByName[t]=e,this.functions.push(new VA(this,t,"internal")),this.nInternalFunctions++,this.functions[e]}addIimportFunction(t,e,i){if(typeof this.functionIdxByName[t]<"u")throw new Error(`Function already defined: ${t}`);if(this.functions.length>0&&this.functions[this.functions.length-1].type=="internal")throw new Error(`Import functions must be declared before internal: ${t}`);let r=i||t;const s=this.functions.length;return this.functionIdxByName[t]=s,this.functions.push(new VA(this,t,"import",e,r)),this.nImportFunctions++,this.functions[s]}setMemory(t,e,i){this.memory={pagesSize:t,moduleName:e||"env",fieldName:i||"memory"}}exportFunction(t,e){const i=e||t;if(typeof this.functionIdxByName[t]>"u")throw new Error(`Function not defined: ${t}`);const r=this.functionIdxByName[t];i!=t&&(this.functionIdxByName[i]=r),this.exports.push({exportName:i,idx:r})}addFunctionToTable(t){const e=this.functionIdxByName[t];this.functionsTable.push(e)}addData(t,e){this.datas.push({offset:t,bytes:e})}alloc(t,e){let i,r;(Array.isArray(t)||ArrayBuffer.isView(t))&&typeof e>"u"?(i=t.length,r=t):(i=t,r=e),i=(i-1>>3)+1<<3;const s=this.free;return this.free+=i,r&&this.addData(s,r),s}allocString(t){const i=new globalThis.TextEncoder().encode(t);return this.alloc([...i,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const e=this.functions[this.functionsTable[0]].getSignature(),i="s_"+WA(e);t[i]=0,this.signatures.push(e)}for(let e=0;e<this.functions.length;e++){const i=this.functions[e].getSignature(),r="s_"+WA(i);typeof t[r]>"u"&&(t[r]=this.signatures.length,this.signatures.push(i)),this.functions[e].signatureIdx=t[r]}}_buildSection(t,e){return[t,...Ue(e.length),...e]}_buildType(){return this._buildSection(1,[...Ue(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...Hd(this.memory.moduleName),...Hd(this.memory.fieldName),2,0,...Ue(this.memory.pagesSize)]);for(let e=0;e<this.nImportFunctions;e++)t.push([...Hd(this.functions[e].moduleName),...Hd(this.functions[e].fieldName),0,...Ue(this.functions[e].signatureIdx)]);return this._buildSection(2,Ue(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(...Ue(this.functions[e].signatureIdx));return this._buildSection(3,[...Ue(t.length),...t])}_buildFunctionsTable(){return this.functionsTable.length==0?[]:this._buildSection(4,[...Ue(1),112,0,...Ue(this.functionsTable.length)])}_buildElements(){if(this.functionsTable.length==0)return[];const t=[];for(let e=0;e<this.functionsTable.length;e++)t.push(...Ue(this.functionsTable[e]));return this._buildSection(9,[...Ue(1),...Ue(0),65,...rb(0),11,...Ue(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let e=0;e<this.exports.length;e++)t.push([...Hd(this.exports[e].exportName),0,...Ue(this.exports[e].idx)]);return this._buildSection(7,Ue(t.length).concat(...t))}_buildCode(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(this.functions[e].getBody());return this._buildSection(10,Ue(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...fw(this.free)]);for(let e=0;e<this.datas.length;e++)t.push([0,65,...rb(this.datas[e].offset),11,...Ue(this.datas[e].bytes.length),...this.datas[e].bytes]);return this._buildSection(11,Ue(t.length).concat(...t))}}globalThis.curve_bn128=null;async function hg(n,t){if(!n&&globalThis.curve_bn128)return globalThis.curve_bn128;const e=new IN;e.setMemory(25),GJ(e);const i={};i.code=e.build(),i.pq=e.modules.f1m.pq,i.pr=e.modules.frm.pq,i.pG1gen=e.modules.bn128.pG1gen,i.pG1zero=e.modules.bn128.pG1zero,i.pG1b=e.modules.bn128.pG1b,i.pG2gen=e.modules.bn128.pG2gen,i.pG2zero=e.modules.bn128.pG2zero,i.pG2b=e.modules.bn128.pG2b,i.pOneT=e.modules.bn128.pOneT,i.prePSize=e.modules.bn128.prePSize,i.preQSize=e.modules.bn128.preQSize,i.n8q=32,i.n8r=32,i.q=e.modules.bn128.q,i.r=e.modules.bn128.r;const r={name:"bn128",wasm:i,q:ni("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:ni("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:ni("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!n},s=await SN(r);return s.terminate=async function(){r.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},n||(globalThis.curve_bn128=s),s}globalThis.curve_bls12381=null;async function pg(n,t){if(!n&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const e=new IN;e.setMemory(25),WJ(e);const i={};i.code=e.build(),i.pq=e.modules.f1m.pq,i.pr=e.modules.frm.pq,i.pG1gen=e.modules.bls12381.pG1gen,i.pG1zero=e.modules.bls12381.pG1zero,i.pG1b=e.modules.bls12381.pG1b,i.pG2gen=e.modules.bls12381.pG2gen,i.pG2zero=e.modules.bls12381.pG2zero,i.pG2b=e.modules.bls12381.pG2b,i.pOneT=e.modules.bls12381.pOneT,i.prePSize=e.modules.bls12381.prePSize,i.preQSize=e.modules.bls12381.preQSize,i.n8q=48,i.n8r=32,i.q=e.modules.bls12381.q,i.r=e.modules.bls12381.r;const r={name:"bls12381",wasm:i,q:ni("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:ni("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:ni("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:ni("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!n},s=await SN(r);return s.terminate=async function(){r.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},n||(globalThis.curve_bls12381=s),s}const ott=ni("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),att=ni("21888242871839275222246405745257275088548364400416034343698204186575808495617");ni("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16);ni("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function ctt(n,t,e){let i;if(fo(n,att))i=await hg(t);else if(fo(n,ott))i=await pg(t);else throw new Error(`Curve not supported: ${n3(n)}`);return i}const be=WX,An=KJ;var TN={};async function kN(n,t,e,i){if(e=e||4096*64,typeof t!="number"&&["w+","wx+","r","ax+","a+"].indexOf(t)<0)throw new Error("Invalid open option");const r=await TN.promises.open(n,t),s=await r.stat();return new ltt(r,s,e,i,n)}class ltt{constructor(t,e,i,r,s){for(this.fileName=s,this.fd=t,this.pos=0,this.pageSize=r||256;this.pageSize<e.blksize;)this.pageSize*=2;this.totalSize=e.size,this.totalPages=Math.floor((e.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(i/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const e=this,i=new Promise((r,s)=>{e.pendingLoads.push({page:t,resolve:r,reject:s})});return e.__statusPage("After Load request: ",t),i}__statusPage(t,e){const i=[],r=this;if(!r.logHistory)return;i.push("=="+t+" "+e);let s="";for(let o=0;o<r.pendingLoads.length;o++)r.pendingLoads[o].page==e&&(s=s+" "+o);if(s&&i.push("Pending loads:"+s),typeof r.pages[e]<"u"){const o=r.pages[e];i.push("Loaded"),i.push("pendingOps: "+o.pendingOps),o.loading&&i.push("loading: "+o.loading),o.writing&&i.push("writing"),o.dirty&&i.push("dirty")}i.push("=="),r.history[e]||(r.history[e]=[]),r.history[e].push(i)}__printHistory(t){const e=this;e.history[t]||console.log("Empty History ",t),console.log("History "+t);for(let i=0;i<e.history[t].length;i++)for(let r=0;r<e.history[t][i].length;r++)console.log("-> "+e.history[t][i][r])}_triggerLoad(){const t=this;if(t.reading||t.pendingLoads.length==0)return;const e=Object.keys(t.pages),i=[];for(let a=0;a<e.length;a++){const l=t.pages[parseInt(e[a])];l.dirty==!1&&l.pendingOps==0&&!l.writing&&!l.loading&&i.push(parseInt(e[a]))}let r=t.maxPagesLoaded-e.length;const s=[];for(;t.pendingLoads.length>0&&(typeof t.pages[t.pendingLoads[0].page]<"u"||r>0||i.length>0);){const a=t.pendingLoads.shift();if(typeof t.pages[a.page]<"u"){t.pages[a.page].pendingOps++;const l=i.indexOf(a.page);l>=0&&i.splice(l,1),t.pages[a.page].loading?t.pages[a.page].loading.push(a):a.resolve(),t.__statusPage("After Load (cached): ",a.page)}else{if(r)r--;else{const l=i.shift();t.__statusPage("Before Unload: ",l),t.avBuffs.unshift(t.pages[l]),delete t.pages[l],t.__statusPage("After Unload: ",l)}a.page>=t.totalPages?(t.pages[a.page]=o(),a.resolve(),t.__statusPage("After Load (new): ",a.page)):(t.reading=!0,t.pages[a.page]=o(),t.pages[a.page].loading=[a],s.push(t.fd.read(t.pages[a.page].buff,0,t.pageSize,a.page*t.pageSize).then(l=>{t.pages[a.page].size=l.bytesRead;const d=t.pages[a.page].loading;delete t.pages[a.page].loading;for(let u=0;u<d.length;u++)d[u].resolve();return t.__statusPage("After Load (loaded): ",a.page),l},l=>{a.reject(l)})),t.__statusPage("After Load (loading): ",a.page))}}Promise.all(s).then(()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()});function o(){if(t.avBuffs.length>0){const a=t.avBuffs.shift();return a.dirty=!1,a.pendingOps=1,a.size=0,a}else return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}}_triggerWrite(){const t=this;if(t.writing)return;const e=Object.keys(t.pages),i=[];for(let r=0;r<e.length;r++){const s=t.pages[parseInt(e[r])];s.dirty&&(s.dirty=!1,s.writing=!0,t.writing=!0,i.push(t.fd.write(s.buff,0,s.size,parseInt(e[r])*t.pageSize).then(()=>{s.writing=!1},o=>{console.log("ERROR Writing: "+o),t.error=o,t._tryClose()})))}t.writing&&Promise.all(i).then(()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))})}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,e){if(t.byteLength==0)return;const i=this;if(typeof e>"u"&&(e=i.pos),i.pos=e+t.byteLength,i.totalSize<e+t.byteLength&&(i.totalSize=e+t.byteLength),i.pendingClose)throw new Error("Writing a closing file");const r=Math.floor(e/i.pageSize),s=Math.floor((e+t.byteLength-1)/i.pageSize),o=[];for(let u=r;u<=s;u++)o.push(i._loadPage(u));i._triggerLoad();let a=r,l=e%i.pageSize,d=t.byteLength;for(;d>0;){await o[a-r];const u=l+d>i.pageSize?i.pageSize-l:d,h=t.slice(t.byteLength-d,t.byteLength-d+u);new Uint8Array(i.pages[a].buff.buffer,l,u).set(h),i.pages[a].dirty=!0,i.pages[a].pendingOps--,i.pages[a].size=Math.max(l+u,i.pages[a].size),a>=i.totalPages&&(i.totalPages=a+1),d=d-u,a++,l=0,i.writing||setImmediate(i._triggerWrite.bind(i))}}async read(t,e){const i=this;let r=new Uint8Array(t);return await i.readToBuffer(r,0,t,e),r}async readToBuffer(t,e,i,r){if(i==0)return;const s=this;if(i>s.pageSize*s.maxPagesLoaded*.8){const m=Math.floor(i*1.1);this.maxPagesLoaded=Math.floor(m/s.pageSize)+1}if(typeof r>"u"&&(r=s.pos),s.pos=r+i,s.pendingClose)throw new Error("Reading a closing file");const o=Math.floor(r/s.pageSize),a=Math.floor((r+i-1)/s.pageSize),l=[];for(let m=o;m<=a;m++)l.push(s._loadPage(m));s._triggerLoad();let d=o,u=r%s.pageSize,h=r+i>s.totalSize?i-(r+i-s.totalSize):i;for(;h>0;){await l[d-o],s.__statusPage("After Await (read): ",d);const m=u+h>s.pageSize?s.pageSize-u:h,p=new Uint8Array(s.pages[d].buff.buffer,s.pages[d].buff.byteOffset+u,m);t.set(p,e+i-h),s.pages[d].pendingOps--,s.__statusPage("After Op done: ",d),h=h-m,d++,u=0,s.pendingLoads.length>0&&setImmediate(s._triggerLoad.bind(s))}this.pos=r+i}_tryClose(){const t=this;!t.pendingClose||(t.error&&t.pendingCloseReject(t.error),t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0)||t.pendingClose()}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise((e,i)=>{t.pendingClose=e,t.pendingCloseReject=i,t._tryClose()}).then(()=>{t.fd.close()},e=>{throw t.fd.close(),e})}async discard(){await this.close(),await TN.promises.unlink(this.fileName)}async writeULE32(t,e){const i=this,r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!0),await i.write(r,e)}async writeUBE32(t,e){const i=this,r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!1),await i.write(r,e)}async writeULE64(t,e){const i=this,r=new Uint8Array(8),s=new DataView(r.buffer);s.setUint32(0,t&4294967295,!0),s.setUint32(4,Math.floor(t/4294967296),!0),await i.write(r,e)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),r=new Uint32Array(i.buffer);return r[1]*4294967296+r[0]}async readString(t){const e=this;if(e.pendingClose)throw new Error("Reading a closing file");let i=typeof t>"u"?e.pos:t,r=Math.floor(i/e.pageSize),s=!1,o="";for(;!s;){let a=e._loadPage(r);e._triggerLoad(),await a,e.__statusPage("After Await (read): ",r);let l=i%e.pageSize;const d=new Uint8Array(e.pages[r].buff.buffer,e.pages[r].buff.byteOffset+l,e.pageSize-l);let u=d.findIndex(h=>h===0);s=u!==-1,s?(o+=new TextDecoder().decode(d.slice(0,u)),e.pos=r*this.pageSize+l+u+1):(o+=new TextDecoder().decode(d),e.pos=r*this.pageSize+l+d.length),e.pages[r].pendingOps--,e.__statusPage("After Op done: ",r),i=e.pos,r++,e.pendingLoads.length>0&&setImmediate(e._triggerLoad.bind(e))}return o}}function utt(n){const t=n.initialSize||1048576,e=new NN;return e.o=n,e.o.data=new Uint8Array(t),e.allocSize=t,e.totalSize=0,e.readOnly=!1,e.pos=0,e}function dtt(n){const t=new NN;return t.o=n,t.allocSize=n.data.byteLength,t.totalSize=n.data.byteLength,t.readOnly=!0,t.pos=0,t}const sb=new Uint8Array(4),qA=new DataView(sb.buffer),RN=new Uint8Array(8),$A=new DataView(RN.buffer);class NN{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t>this.allocSize){const e=Math.max(this.allocSize+1048576,Math.floor(this.allocSize*1.1),t),i=new Uint8Array(e);i.set(this.o.data),this.o.data=i,this.allocSize=e}}async write(t,e){if(typeof e>"u"&&(e=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength),this.o.data.set(t.slice(),e),e+t.byteLength>this.totalSize&&(this.totalSize=e+t.byteLength),this.pos=e+t.byteLength}async readToBuffer(t,e,i,r){if(typeof r>"u"&&(r=this.pos),this.readOnly&&r+i>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(r+i);const o=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+r,i);t.set(o,e),this.pos=r+i}async read(t,e){const i=this,r=new Uint8Array(t);return await i.readToBuffer(r,0,t,e),r}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,e){const i=this;qA.setUint32(0,t,!0),await i.write(sb,e)}async writeUBE32(t,e){const i=this;qA.setUint32(0,t,!1),await i.write(sb,e)}async writeULE64(t,e){const i=this;$A.setUint32(0,t&4294967295,!0),$A.setUint32(4,Math.floor(t/4294967296),!0),await i.write(RN,e)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),r=new Uint32Array(i.buffer);return r[1]*4294967296+r[0]}async readString(t){const e=this;let i=typeof t>"u"?e.pos:t;if(i>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}const r=new Uint8Array(e.o.data.buffer,i,this.totalSize-i);let s=r.findIndex(l=>l===0),o=s!==-1,a="";return o?(a=new TextDecoder().decode(r.slice(0,s)),e.pos=i+s+1):e.pos=i,a}}const pi=1<<22;function ftt(n){const t=n.initialSize||0,e=new BN;e.o=n;const i=t?Math.floor((t-1)/pi)+1:0;e.o.data=[];for(let r=0;r<i-1;r++)e.o.data.push(new Uint8Array(pi));return i&&e.o.data.push(new Uint8Array(t-pi*(i-1))),e.totalSize=0,e.readOnly=!1,e.pos=0,e}function htt(n){const t=new BN;return t.o=n,t.totalSize=(n.data.length-1)*pi+n.data[n.data.length-1].byteLength,t.readOnly=!0,t.pos=0,t}const ob=new Uint8Array(4),HA=new DataView(ob.buffer),MN=new Uint8Array(8),KA=new DataView(MN.buffer);class BN{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const e=Math.floor((t-1)/pi)+1;for(let i=Math.max(this.o.data.length-1,0);i<e;i++){const r=i<e-1?pi:t-(e-1)*pi,s=new Uint8Array(r);i==this.o.data.length-1&&s.set(this.o.data[i]),this.o.data[i]=s}this.totalSize=t}async write(t,e){const i=this;if(typeof e>"u"&&(e=i.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength);let s=Math.floor(e/pi),o=e%pi,a=t.byteLength;for(;a>0;){const l=o+a>pi?pi-o:a,d=t.slice(t.byteLength-a,t.byteLength-a+l);new Uint8Array(i.o.data[s].buffer,o,l).set(d),a=a-l,s++,o=0}this.pos=e+t.byteLength}async readToBuffer(t,e,i,r){const s=this;if(typeof r>"u"&&(r=s.pos),this.readOnly&&r+i>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(r+i);let a=Math.floor(r/pi),l=r%pi,d=i;for(;d>0;){const u=l+d>pi?pi-l:d,h=new Uint8Array(s.o.data[a].buffer,l,u);t.set(h,e+i-d),d=d-u,a++,l=0}this.pos=r+i}async read(t,e){const i=this,r=new Uint8Array(t);return await i.readToBuffer(r,0,t,e),r}close(){}async discard(){}async writeULE32(t,e){const i=this;HA.setUint32(0,t,!0),await i.write(ob,e)}async writeUBE32(t,e){const i=this;HA.setUint32(0,t,!1),await i.write(ob,e)}async writeULE64(t,e){const i=this;KA.setUint32(0,t&4294967295,!0),KA.setUint32(4,Math.floor(t/4294967296),!0),await i.write(MN,e)}async readULE32(t){const i=await this.read(4,t);return new Uint32Array(i.buffer)[0]}async readUBE32(t){const i=await this.read(4,t);return new DataView(i.buffer).getUint32(0,!1)}async readULE64(t){const i=await this.read(8,t),r=new Uint32Array(i.buffer);return r[1]*4294967296+r[0]}async readString(t){const e=this,i=2048;let r=typeof t>"u"?e.pos:t;if(r>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}let s=!1,o="";for(;!s;){let a=Math.floor(r/pi),l=r%pi;if(e.o.data[a]===void 0)throw new Error("ERROR");let d=Math.min(i,e.o.data[a].length-l);const u=new Uint8Array(e.o.data[a].buffer,l,d);let h=u.findIndex(m=>m===0);s=h!==-1,s?(o+=new TextDecoder().decode(u.slice(0,h)),e.pos=a*pi+l+h+1):(o+=new TextDecoder().decode(u),e.pos=a*pi+l+u.length),r=e.pos}return o}}const ptt=1024,mtt=512,gtt=2,ytt=0,wtt=65536,_tt=8192;async function Gu(n,t,e){if(typeof n=="string"&&(n={type:"file",fileName:n,cacheSize:t||wtt,pageSize:e||_tt}),n.type=="file")return await kN(n.fileName,ptt|mtt|gtt,n.cacheSize,n.pageSize);if(n.type=="mem")return utt(n);if(n.type=="bigMem")return ftt(n);throw new Error("Invalid FastFile type: "+n.type)}async function Wa(n,t,e){if(n instanceof Uint8Array&&(n={type:"mem",data:n}),typeof n=="string"&&(n={type:"mem",data:await fetch(n).then(function(r){return r.arrayBuffer()}).then(function(r){return new Uint8Array(r)})}),n.type=="file")return await kN(n.fileName,ytt,n.cacheSize,n.pageSize);if(n.type=="mem")return await dtt(n);if(n.type=="bigMem")return await htt(n);throw new Error("Invalid FastFile type: "+n.type)}async function sn(n,t,e,i,r){const s=await Wa(n),o=await s.read(4);let a="";for(let h=0;h<4;h++)a+=String.fromCharCode(o[h]);if(a!=t)throw new Error(n+": Invalid File format");if(await s.readULE32()>e)throw new Error("Version not supported");const d=await s.readULE32();let u=[];for(let h=0;h<d;h++){let m=await s.readULE32(),p=await s.readULE64();typeof u[m]>"u"&&(u[m]=[]),u[m].push({p:s.pos,size:p}),s.pos+=p}return{fd:s,sections:u}}async function sr(n,t,e,i,r,s){const o=await Gu(n,r,s),a=new Uint8Array(4);for(let l=0;l<4;l++)a[l]=t.charCodeAt(l);return await o.write(a,0),await o.writeULE32(e),await o.writeULE32(i),o}async function We(n,t){if(typeof n.writingSection<"u")throw new Error("Already writing a section");await n.writeULE32(t),n.writingSection={pSectionSize:n.pos},await n.writeULE64(0)}async function Ve(n){if(typeof n.writingSection>"u")throw new Error("Not writing a section");const t=n.pos-n.writingSection.pSectionSize-8,e=n.pos;n.pos=n.writingSection.pSectionSize,await n.writeULE64(t),n.pos=e,delete n.writingSection}async function an(n,t,e){if(typeof n.readingSection<"u")throw new Error("Already reading a section");if(!t[e])throw new Error(n.fileName+": Missing section "+e);if(t[e].length>1)throw new Error(n.fileName+": Section Duplicated "+e);n.pos=t[e][0].p,n.readingSection=t[e][0]}async function cn(n,t){if(typeof n.readingSection>"u")throw new Error("Not reading a section");if(!t&&n.pos-n.readingSection.p!=n.readingSection.size)throw new Error("Invalid section size reading");delete n.readingSection}async function gs(n,t,e,i){const r=new Uint8Array(e);be.toRprLE(r,0,t,e),await n.write(r,i)}async function Ws(n,t,e){const i=await n.read(t,e);return be.fromRprLE(i,0,t)}async function Ze(n,t,e,i,r){typeof r>"u"&&(r=t[i][0].size);const s=n.pageSize;await an(n,t,i),await We(e,i);for(let o=0;o<r;o+=s){const a=Math.min(r-o,s),l=await n.read(a);await e.write(l)}await Ve(e),await cn(n,r!=t[i][0].size)}async function Xe(n,t,e,i,r){if(i=typeof i>"u"?0:i,r=typeof r>"u"?t[e][0].size-i:r,i+r>t[e][0].size)throw new Error("Reading out of the range of the section");let s;return r<1<<30?s=new Uint8Array(r):s=new Qt(r),await n.readToBuffer(s,0,r,t[e][0].p+i),s}async function Kd(n,t,e,i,r){const s=n.pageSize*16;if(await an(n,t,r),await an(e,i,r),t[r][0].size!=i[r][0].size)return!1;const o=t[r][0].size;for(let a=0;a<o;a+=s){const l=Math.min(o-a,s),d=await n.read(l),u=await e.read(l);for(let h=0;h<l;h++)if(d[h]!=u[h])return!1}return await cn(n),await cn(e),!0}const btt=be.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),vtt=be.e("21888242871839275222246405745257275088548364400416034343698204186575808495617"),xtt=be.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),Ett=be.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function PN(n,t){let e,i=t&&t.singleThread;if(be.eq(n,vtt))e=await hg(i);else if(be.eq(n,btt))e=await pg(i);else throw new Error(`Curve not supported: ${be.toString(n)}`);return e}async function or(n,t){let e,i=t&&t.singleThread;if(be.eq(n,Ett))e=await hg(i);else if(be.eq(n,xtt))e=await pg(i);else throw new Error(`Curve not supported: ${be.toString(n)}`);return e}async function nl(n,t){let e,i=t&&t.singleThread;const r=s(n);if(["BN128","BN254","ALTBN128"].indexOf(r)>=0)e=await hg(i);else if(["BLS12381"].indexOf(r)>=0)e=await pg(i);else throw new Error(`Curve not supported: ${n}`);return e;function s(o){return o.toUpperCase().match(/[A-Za-z0-9]+/g).join("")}}var Stt=Object.freeze({__proto__:null,getCurveFromR:PN,getCurveFromQ:or,getCurveFromName:nl});function _f(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Ltt(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function d3(n,...t){if(!Ltt(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function wm(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function ON(n,t){d3(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hc=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),ho=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,FN=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255,co=ho?n=>n:n=>FN(n);function Ca(n){for(let t=0;t<n.length;t++)n[t]=FN(n[t])}function Ctt(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Oc(n){return typeof n=="string"&&(n=Ctt(n)),d3(n),n}class jN{clone(){return this._cloneInto()}}function Att(n){const t=i=>n().update(Oc(i)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Itt(n){const t=(i,r)=>n(r).update(Oc(i)).digest(),e=n({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=i=>n(i),t}const Ttt=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class ktt extends jN{constructor(t,e,i={},r,s,o){if(super(),this.blockLen=t,this.outputLen=e,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,_f(t),_f(e),_f(r),e<0||e>r)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>r))throw new Error(`key must be up 1..${r} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==o)throw new Error(`personalization must be ${o} byte long or undefined`);this.buffer32=Hc(this.buffer=new Uint8Array(t))}update(t){wm(this);const{blockLen:e,buffer:i,buffer32:r}=this;t=Oc(t);const s=t.length,o=t.byteOffset,a=t.buffer;for(let l=0;l<s;){this.pos===e&&(ho||Ca(r),this.compress(r,0,!1),ho||Ca(r),this.pos=0);const d=Math.min(e-this.pos,s-l),u=o+l;if(d===e&&!(u%4)&&l+d<s){const h=new Uint32Array(a,u,Math.floor((s-l)/4));ho||Ca(h);for(let m=0;l+e<s;m+=r.length,l+=e)this.length+=e,this.compress(h,m,!1);ho||Ca(h);continue}i.set(t.subarray(l,l+d),this.pos),this.pos+=d,this.length+=d,l+=d}return this}digestInto(t){wm(this),ON(t,this);const{pos:e,buffer32:i}=this;this.finished=!0,this.buffer.subarray(e).fill(0),ho||Ca(i),this.compress(i,0,!0),ho||Ca(i);const r=Hc(t);this.get().forEach((s,o)=>r[o]=co(s))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){const{buffer:e,length:i,finished:r,destroyed:s,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.length=i,t.finished=r,t.destroyed=s,t.outputLen=o,t.buffer.set(e),t.pos=a,t}}const Xp=BigInt(2**32-1),ab=BigInt(32);function UN(n,t=!1){return t?{h:Number(n&Xp),l:Number(n>>ab&Xp)}:{h:Number(n>>ab&Xp)|0,l:Number(n&Xp)|0}}function DN(n,t=!1){let e=new Uint32Array(n.length),i=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:s,l:o}=UN(n[r],t);[e[r],i[r]]=[s,o]}return[e,i]}const Rtt=(n,t)=>BigInt(n>>>0)<<ab|BigInt(t>>>0),Ntt=(n,t,e)=>n>>>e,Mtt=(n,t,e)=>n<<32-e|t>>>e,Btt=(n,t,e)=>n>>>e|t<<32-e,Ptt=(n,t,e)=>n<<32-e|t>>>e,Ott=(n,t,e)=>n<<64-e|t>>>e-32,Ftt=(n,t,e)=>n>>>e-32|t<<64-e,jtt=(n,t)=>t,Utt=(n,t)=>n,zN=(n,t,e)=>n<<e|t>>>32-e,GN=(n,t,e)=>t<<e|n>>>32-e,WN=(n,t,e)=>t<<e-32|n>>>64-e,VN=(n,t,e)=>n<<e-32|t>>>64-e;function Dtt(n,t,e,i){const r=(t>>>0)+(i>>>0);return{h:n+e+(r/2**32|0)|0,l:r|0}}const ztt=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Gtt=(n,t,e,i)=>t+e+i+(n/2**32|0)|0,Wtt=(n,t,e,i)=>(n>>>0)+(t>>>0)+(e>>>0)+(i>>>0),Vtt=(n,t,e,i,r)=>t+e+i+r+(n/2**32|0)|0,qtt=(n,t,e,i,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0),$tt=(n,t,e,i,r,s)=>t+e+i+r+s+(n/2**32|0)|0,Htt={fromBig:UN,split:DN,toBig:Rtt,shrSH:Ntt,shrSL:Mtt,rotrSH:Btt,rotrSL:Ptt,rotrBH:Ott,rotrBL:Ftt,rotr32H:jtt,rotr32L:Utt,rotlSH:zN,rotlSL:GN,rotlBH:WN,rotlBL:VN,add:Dtt,add3L:ztt,add3H:Gtt,add4L:Wtt,add4H:Vtt,add5H:$tt,add5L:qtt};var Ji=Htt;const hi=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),me=new Uint32Array(32);function wa(n,t,e,i,r,s){const o=r[s],a=r[s+1];let l=me[2*n],d=me[2*n+1],u=me[2*t],h=me[2*t+1],m=me[2*e],p=me[2*e+1],E=me[2*i],C=me[2*i+1],v=Ji.add3L(l,u,o);d=Ji.add3H(v,d,h,a),l=v|0,{Dh:C,Dl:E}={Dh:C^d,Dl:E^l},{Dh:C,Dl:E}={Dh:Ji.rotr32H(C,E),Dl:Ji.rotr32L(C,E)},{h:p,l:m}=Ji.add(p,m,C,E),{Bh:h,Bl:u}={Bh:h^p,Bl:u^m},{Bh:h,Bl:u}={Bh:Ji.rotrSH(h,u,24),Bl:Ji.rotrSL(h,u,24)},me[2*n]=l,me[2*n+1]=d,me[2*t]=u,me[2*t+1]=h,me[2*e]=m,me[2*e+1]=p,me[2*i]=E,me[2*i+1]=C}function _a(n,t,e,i,r,s){const o=r[s],a=r[s+1];let l=me[2*n],d=me[2*n+1],u=me[2*t],h=me[2*t+1],m=me[2*e],p=me[2*e+1],E=me[2*i],C=me[2*i+1],v=Ji.add3L(l,u,o);d=Ji.add3H(v,d,h,a),l=v|0,{Dh:C,Dl:E}={Dh:C^d,Dl:E^l},{Dh:C,Dl:E}={Dh:Ji.rotrSH(C,E,16),Dl:Ji.rotrSL(C,E,16)},{h:p,l:m}=Ji.add(p,m,C,E),{Bh:h,Bl:u}={Bh:h^p,Bl:u^m},{Bh:h,Bl:u}={Bh:Ji.rotrBH(h,u,63),Bl:Ji.rotrBL(h,u,63)},me[2*n]=l,me[2*n+1]=d,me[2*t]=u,me[2*t+1]=h,me[2*e]=m,me[2*e+1]=p,me[2*i]=E,me[2*i+1]=C}class Ktt extends ktt{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=hi[0]|0,this.v0h=hi[1]|0,this.v1l=hi[2]|0,this.v1h=hi[3]|0,this.v2l=hi[4]|0,this.v2h=hi[5]|0,this.v3l=hi[6]|0,this.v3h=hi[7]|0,this.v4l=hi[8]|0,this.v4h=hi[9]|0,this.v5l=hi[10]|0,this.v5h=hi[11]|0,this.v6l=hi[12]|0,this.v6h=hi[13]|0,this.v7l=hi[14]|0,this.v7h=hi[15]|0;const e=t.key?t.key.length:0;if(this.v0l^=this.outputLen|e<<8|65536|1<<24,t.salt){const i=Hc(Oc(t.salt));this.v4l^=co(i[0]),this.v4h^=co(i[1]),this.v5l^=co(i[2]),this.v5h^=co(i[3])}if(t.personalization){const i=Hc(Oc(t.personalization));this.v6l^=co(i[0]),this.v6h^=co(i[1]),this.v7l^=co(i[2]),this.v7h^=co(i[3])}if(t.key){const i=new Uint8Array(this.blockLen);i.set(Oc(t.key)),this.update(i)}}get(){let{v0l:t,v0h:e,v1l:i,v1h:r,v2l:s,v2h:o,v3l:a,v3h:l,v4l:d,v4h:u,v5l:h,v5h:m,v6l:p,v6h:E,v7l:C,v7h:v}=this;return[t,e,i,r,s,o,a,l,d,u,h,m,p,E,C,v]}set(t,e,i,r,s,o,a,l,d,u,h,m,p,E,C,v){this.v0l=t|0,this.v0h=e|0,this.v1l=i|0,this.v1h=r|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=l|0,this.v4l=d|0,this.v4h=u|0,this.v5l=h|0,this.v5h=m|0,this.v6l=p|0,this.v6h=E|0,this.v7l=C|0,this.v7h=v|0}compress(t,e,i){this.get().forEach((l,d)=>me[d]=l),me.set(hi,16);let{h:r,l:s}=Ji.fromBig(BigInt(this.length));me[24]=hi[8]^s,me[25]=hi[9]^r,i&&(me[28]=~me[28],me[29]=~me[29]);let o=0;const a=Ttt;for(let l=0;l<12;l++)wa(0,4,8,12,t,e+2*a[o++]),_a(0,4,8,12,t,e+2*a[o++]),wa(1,5,9,13,t,e+2*a[o++]),_a(1,5,9,13,t,e+2*a[o++]),wa(2,6,10,14,t,e+2*a[o++]),_a(2,6,10,14,t,e+2*a[o++]),wa(3,7,11,15,t,e+2*a[o++]),_a(3,7,11,15,t,e+2*a[o++]),wa(0,5,10,15,t,e+2*a[o++]),_a(0,5,10,15,t,e+2*a[o++]),wa(1,6,11,12,t,e+2*a[o++]),_a(1,6,11,12,t,e+2*a[o++]),wa(2,7,8,13,t,e+2*a[o++]),_a(2,7,8,13,t,e+2*a[o++]),wa(3,4,9,14,t,e+2*a[o++]),_a(3,4,9,14,t,e+2*a[o++]);this.v0l^=me[0]^me[16],this.v0h^=me[1]^me[17],this.v1l^=me[2]^me[18],this.v1h^=me[3]^me[19],this.v2l^=me[4]^me[20],this.v2h^=me[5]^me[21],this.v3l^=me[6]^me[22],this.v3h^=me[7]^me[23],this.v4l^=me[8]^me[24],this.v4h^=me[9]^me[25],this.v5l^=me[10]^me[26],this.v5h^=me[11]^me[27],this.v6l^=me[12]^me[28],this.v6h^=me[13]^me[29],this.v7l^=me[14]^me[30],this.v7h^=me[15]^me[31],me.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xn=Itt(n=>new Ktt(n));function Va(n){return((n&4294901760)!==0?(n&=4294901760,16):0)|((n&4278255360)!==0?(n&=4278255360,8):0)|((n&4042322160)!==0?(n&=4042322160,4):0)|((n&3435973836)!==0?(n&=3435973836,2):0)|(n&2863311530)!==0}function Bn(n,t){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);let i="";for(let r=0;r<4;r++){r>0&&(i+=`
`),i+="		";for(let s=0;s<4;s++)s>0&&(i+=" "),i+=e.getUint32(r*16+s*4).toString(16).padStart(8,"0")}return t&&(i=t+`
`+i),i}function Fa(n,t){if(n.byteLength!=t.byteLength)return!1;for(var e=new Int8Array(n),i=new Int8Array(t),r=0;r!=n.byteLength;r++)if(e[r]!=i[r])return!1;return!0}function Ztt(n){return n.clone()}function qN(n){const t=n.subarray(0,128),e=Hc(n.subarray(128)),i=xn.create({dkLen:64});i.buffer.set(t),i.v0l=e[0]|0,i.v0h=e[1]|0,i.v1l=e[2]|0,i.v1h=e[3]|0,i.v2l=e[4]|0,i.v2h=e[5]|0,i.v3l=e[6]|0,i.v3h=e[7]|0,i.v4l=e[8]|0,i.v4h=e[9]|0,i.v5l=e[10]|0,i.v5h=e[11]|0,i.v6l=e[12]|0,i.v6h=e[13]|0,i.v7l=e[14]|0,i.v7h=e[15]|0;const r=2**32,s=e[16]+e[17]*r,o=e[18]+e[19]*r;return i.length=s+o,i.pos=o,i}function f3(n){const t=new Uint8Array(216),e=Hc(t.subarray(128));return t.set(n.buffer),e[0]=n.v0l,e[1]=n.v0h,e[2]=n.v1l,e[3]=n.v1h,e[4]=n.v2l,e[5]=n.v2h,e[6]=n.v3l,e[7]=n.v3h,e[8]=n.v4l,e[9]=n.v4h,e[10]=n.v5l,e[11]=n.v5h,e[12]=n.v6l,e[13]=n.v6h,e[14]=n.v7l,e[15]=n.v7h,e[18]=n.pos,e[16]=n.length-n.pos,t}async function $N(n,t,e,i,r){return n.G1.isZero(t)||n.G1.isZero(e)||n.G2.isZero(i)||n.G2.isZero(r)?!1:await n.pairingEq(t,r,n.G1.neg(e),i)}function Qtt(){return window.prompt("Enter a random text. (Entropy): ","")}function fu(n){let t=new Uint8Array(n);return globalThis.crypto.getRandomValues(t),t}async function Ytt(n){{const t=await globalThis.crypto.subtle.digest("SHA-256",n.buffer);return new Uint8Array(t)}}function _m(n,t){return new DataView(n.buffer).getUint32(t,!1)}async function mg(n){for(;!n;)n=await Qtt();const t=xn.create(64);t.update(fu(64));const e=new TextEncoder;t.update(e.encode(n));const i=t.digest(),r=[];for(let o=0;o<8;o++)r[o]=_m(i,o*4);return new $c(r)}async function h3(n,t){let e,i;t<32?(e=1<<t>>>0,i=1):(e=4294967296,i=1<<t-32>>>0);let r=n;for(let l=0;l<i;l++)for(let d=0;d<e;d++)r=await Ytt(r);const s=new DataView(r.buffer,r.byteOffset,r.byteLength),o=[];for(let l=0;l<8;l++)o[l]=s.getUint32(l*4,!1);return new $c(o)}function HN(n){return n instanceof Uint8Array?n:(n.slice(0,2)=="0x"&&(n=n.slice(2)),new Uint8Array(n.match(/[\da-f]{2}/gi).map(function(t){return parseInt(t,16)})))}function KN(n){return Array.prototype.map.call(n,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}function bm(n,t){if(t instanceof Uint8Array)return n.toString(t);if(Array.isArray(t))return t.map(bm.bind(null,n));if(typeof t=="object"){const e={};return Object.keys(t).forEach(r=>{e[r]=bm(n,t[r])}),e}else return typeof t=="bigint"||t.eq!==void 0?t.toString(10):t}const ZA=1,Xtt=1,Jtt=2,hh=10,tet=3,eet=17,cb=2,vm=3,lb=4,ub=5,db=6,bf=7,vf=8,xf=9,Ef=10,Sf=11,Lf=12,Cf=13,Af=14,fb=15,xm=16,hb=17;async function p3(n,t){await We(n,1),await n.writeULE32(1),await Ve(n);const e=await or(t.q);await We(n,2);const i=e.q,r=(Math.floor((be.bitLength(i)-1)/64)+1)*8,s=e.r,o=(Math.floor((be.bitLength(s)-1)/64)+1)*8;await n.writeULE32(r),await gs(n,i,r),await n.writeULE32(o),await gs(n,s,o),await n.writeULE32(t.nVars),await n.writeULE32(t.nPublic),await n.writeULE32(t.domainSize),await hu(n,e,t.vk_alpha_1),await hu(n,e,t.vk_beta_1),await P0(n,e,t.vk_beta_2),await P0(n,e,t.vk_gamma_2),await hu(n,e,t.vk_delta_1),await P0(n,e,t.vk_delta_2),await Ve(n)}async function hu(n,t,e){const i=new Uint8Array(t.G1.F.n8*2);t.G1.toRprLEM(i,0,e),await n.write(i)}async function P0(n,t,e){const i=new Uint8Array(t.G2.F.n8*2);t.G2.toRprLEM(i,0,e),await n.write(i)}async function li(n,t,e){const i=await n.read(t.G1.F.n8*2),r=t.G1.fromRprLEM(i,0);return e?t.G1.toObject(r):r}async function Fc(n,t,e){const i=await n.read(t.G2.F.n8*2),r=t.G2.fromRprLEM(i,0);return e?t.G2.toObject(r):r}async function ys(n,t,e,i){await an(n,t,1);const r=await n.readULE32();if(await cn(n),r===Xtt)return await net(n,t,e,i);if(r===Jtt)return await iet(n,t,e,i);if(r===hh)return await ret(n,t,e,i);throw new Error("Protocol not supported: ")}async function net(n,t,e,i){const r={};r.protocol="groth16",await an(n,t,2);const s=await n.readULE32();r.n8q=s,r.q=await Ws(n,s);const o=await n.readULE32();return r.n8r=o,r.r=await Ws(n,o),r.curve=await or(r.q,i),r.nVars=await n.readULE32(),r.nPublic=await n.readULE32(),r.domainSize=await n.readULE32(),r.power=Va(r.domainSize),r.vk_alpha_1=await li(n,r.curve,e),r.vk_beta_1=await li(n,r.curve,e),r.vk_beta_2=await Fc(n,r.curve,e),r.vk_gamma_2=await Fc(n,r.curve,e),r.vk_delta_1=await li(n,r.curve,e),r.vk_delta_2=await Fc(n,r.curve,e),await cn(n),r}async function iet(n,t,e,i){const r={};r.protocol="plonk",await an(n,t,2);const s=await n.readULE32();r.n8q=s,r.q=await Ws(n,s);const o=await n.readULE32();return r.n8r=o,r.r=await Ws(n,o),r.curve=await or(r.q,i),r.nVars=await n.readULE32(),r.nPublic=await n.readULE32(),r.domainSize=await n.readULE32(),r.power=Va(r.domainSize),r.nAdditions=await n.readULE32(),r.nConstraints=await n.readULE32(),r.k1=await n.read(o),r.k2=await n.read(o),r.Qm=await li(n,r.curve,e),r.Ql=await li(n,r.curve,e),r.Qr=await li(n,r.curve,e),r.Qo=await li(n,r.curve,e),r.Qc=await li(n,r.curve,e),r.S1=await li(n,r.curve,e),r.S2=await li(n,r.curve,e),r.S3=await li(n,r.curve,e),r.X_2=await Fc(n,r.curve,e),await cn(n),r}async function ret(n,t,e,i){const r={};r.protocol="fflonk",r.protocolId=hh,await an(n,t,cb);const s=await n.readULE32();r.n8q=s,r.q=await Ws(n,s),r.curve=await or(r.q,i);const o=await n.readULE32();return r.n8r=o,r.r=await Ws(n,o),r.nVars=await n.readULE32(),r.nPublic=await n.readULE32(),r.domainSize=await n.readULE32(),r.power=Va(r.domainSize),r.nAdditions=await n.readULE32(),r.nConstraints=await n.readULE32(),r.k1=await n.read(o),r.k2=await n.read(o),r.w3=await n.read(o),r.w4=await n.read(o),r.w8=await n.read(o),r.wr=await n.read(o),r.X_2=await Fc(n,r.curve,e),r.C0=await li(n,r.curve,e),await cn(n),r}async function set(n,t){const{fd:e,sections:i}=await sn(n,"zkey",1),r=await ys(e,i,t),s=new r3(r.r),o=be.mod(be.shl(1,r.n8r*8),r.r),a=s.inv(o),l=s.mul(a,a);let d=await or(r.q);await an(e,i,3),r.IC=[];for(let m=0;m<=r.nPublic;m++){const p=await li(e,d,t);r.IC.push(p)}await cn(e),await an(e,i,4);const u=await e.readULE32();r.ccoefs=[];for(let m=0;m<u;m++){const p=await e.readULE32(),E=await e.readULE32(),C=await e.readULE32(),v=await h();r.ccoefs.push({matrix:p,constraint:E,signal:C,value:v})}await cn(e),await an(e,i,5),r.A=[];for(let m=0;m<r.nVars;m++){const p=await li(e,d,t);r.A[m]=p}await cn(e),await an(e,i,6),r.B1=[];for(let m=0;m<r.nVars;m++){const p=await li(e,d,t);r.B1[m]=p}await cn(e),await an(e,i,7),r.B2=[];for(let m=0;m<r.nVars;m++){const p=await Fc(e,d,t);r.B2[m]=p}await cn(e),await an(e,i,8),r.C=[];for(let m=r.nPublic+1;m<r.nVars;m++){const p=await li(e,d,t);r.C[m]=p}await cn(e),await an(e,i,9),r.hExps=[];for(let m=0;m<r.domainSize;m++){const p=await li(e,d,t);r.hExps.push(p)}return await cn(e),await e.close(),r;async function h(){const m=await Ws(e,r.n8r);return s.mul(m,l)}}async function oet(n,t,e){const i={delta:{}};i.deltaAfter=await li(n,t,e),i.delta.g1_s=await li(n,t,e),i.delta.g1_sx=await li(n,t,e),i.delta.g2_spx=await Fc(n,t,e),i.transcript=await n.read(64),i.type=await n.readULE32();const r=await n.readULE32(),s=n.pos;let o=0;for(;n.pos-s<r;){const a=await n.read(1);if(a[0]<=o)throw new Error("Parameters in the contribution must be sorted");if(o=a[0],a[0]==1){const l=await n.read(1),d=await n.read(l[0]);i.name=new TextDecoder().decode(d)}else if(a[0]==2){const l=await n.read(1);i.numIterationsExp=l[0]}else if(a[0]==3){const l=await n.read(1);i.beaconHash=await n.read(l[0])}else throw new Error("Parameter not recognized")}if(n.pos!=s+r)throw new Error("Parameters do not match");return i}async function ku(n,t,e){await an(n,e,10);const i={contributions:[]};i.csHash=await n.read(64);const r=await n.readULE32();for(let s=0;s<r;s++){const o=await oet(n,t);i.contributions.push(o)}return await cn(n),i}async function aet(n,t,e){await hu(n,t,e.deltaAfter),await hu(n,t,e.delta.g1_s),await hu(n,t,e.delta.g1_sx),await P0(n,t,e.delta.g2_spx),await n.write(e.transcript),await n.writeULE32(e.type||0);const i=[];if(e.name){i.push(1);const r=new TextEncoder("utf-8").encode(e.name.substring(0,64));i.push(r.byteLength);for(let s=0;s<r.byteLength;s++)i.push(r[s])}if(e.type==1){i.push(2),i.push(e.numIterationsExp),i.push(3),i.push(e.beaconHash.byteLength);for(let r=0;r<e.beaconHash.byteLength;r++)i.push(e.beaconHash[r])}if(i.length>0){const r=new Uint8Array(i);await n.writeULE32(r.byteLength),await n.write(r)}else await n.writeULE32(0)}async function m3(n,t,e){await We(n,10),await n.write(e.csHash),await n.writeULE32(e.contributions.length);for(let i=0;i<e.contributions.length;i++)await aet(n,t,e.contributions[i]);await Ve(n)}function ds(n,t,e){const i=new Uint8Array(t.G1.F.n8*2);t.G1.toRprUncompressed(i,0,e),n.update(i)}function cet(n,t,e){const i=new Uint8Array(t.G2.F.n8*2);t.G2.toRprUncompressed(i,0,e),n.update(i)}function ja(n,t,e){ds(n,t,e.deltaAfter),ds(n,t,e.delta.g1_s),ds(n,t,e.delta.g1_sx),cet(n,t,e.delta.g2_spx),n.update(e.transcript)}async function uet(n,t,e){await We(n,1);const i=(Math.floor((be.bitLength(e)-1)/64)+1)*8;await n.writeULE32(i),await gs(n,e,i),await n.writeULE32(t.length),await Ve(n),await We(n,2);for(let r=0;r<t.length;r++)await gs(n,t[r],i);await Ve(n)}async function det(n,t,e){await We(n,1);const i=(Math.floor((be.bitLength(e)-1)/64)+1)*8;if(await n.writeULE32(i),await gs(n,e,i),t.byteLength%i!=0)throw new Error("Invalid witness length");await n.writeULE32(t.byteLength/i),await Ve(n),await We(n,2),await n.write(t),await Ve(n)}async function ph(n,t){await an(n,t,1);const e=await n.readULE32(),i=await Ws(n,e),r=await n.readULE32();return await cn(n),{n8:e,q:i,nWitness:r}}async function fet(n){const{fd:t,sections:e}=await sn(n,"wtns",2),{n8:i,nWitness:r}=await ph(t,e);await an(t,e,2);const s=[];for(let o=0;o<r;o++){const a=await Ws(t,i);s.push(a)}return await cn(t),await t.close(),s}const{stringifyBigInts:QA}=An;async function ZN(n,t,e,i){const{fd:r,sections:s}=await sn(t,"wtns",2),o=await ph(r,s),{fd:a,sections:l}=await sn(n,"zkey",2),d=await ys(a,l,void 0,i);if(d.protocol!="groth16")throw new Error("zkey file is not groth16");if(!be.eq(d.r,o.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(o.nWitness!=d.nVars)throw new Error(`Invalid witness length. Circuit: ${d.nVars}, witness: ${o.nWitness}`);const u=d.curve,h=u.Fr,m=u.G1,p=u.G2,E=Va(d.domainSize);e&&e.debug("Reading Wtns");const C=await Xe(r,s,2);e&&e.debug("Reading Coeffs");const v=await Xe(a,l,4);e&&e.debug("Building ABC");const[A,x,P]=await het(u,d,C,v,e),W=E==h.s?u.Fr.shift:u.Fr.w[E+1],K=await h.ifft(A,"","",e,"IFFT_A"),j=await h.batchApplyKey(K,h.e(1),W),b=await h.fft(j,"","",e,"FFT_A"),B=await h.ifft(x,"","",e,"IFFT_B"),J=await h.batchApplyKey(B,h.e(1),W),it=await h.fft(J,"","",e,"FFT_B"),st=await h.ifft(P,"","",e,"IFFT_C"),z=await h.batchApplyKey(st,h.e(1),W),I=await h.fft(z,"","",e,"FFT_C");e&&e.debug("Join ABC");const w=await pet(u,d,b,it,I,e);let T={};e&&e.debug("Reading A Points");const V=await Xe(a,l,5);T.pi_a=await u.G1.multiExpAffine(V,C,e,"multiexp A"),e&&e.debug("Reading B1 Points");const Y=await Xe(a,l,6);let Q=await u.G1.multiExpAffine(Y,C,e,"multiexp B1");e&&e.debug("Reading B2 Points");const $=await Xe(a,l,7);T.pi_b=await u.G2.multiExpAffine($,C,e,"multiexp B2"),e&&e.debug("Reading C Points");const F=await Xe(a,l,8);T.pi_c=await u.G1.multiExpAffine(F,C.slice((d.nPublic+1)*u.Fr.n8),e,"multiexp C"),e&&e.debug("Reading H Points");const R=await Xe(a,l,9),_=await u.G1.multiExpAffine(R,w,e,"multiexp H"),k=u.Fr.random(),H=u.Fr.random();T.pi_a=m.add(T.pi_a,d.vk_alpha_1),T.pi_a=m.add(T.pi_a,m.timesFr(d.vk_delta_1,k)),T.pi_b=p.add(T.pi_b,d.vk_beta_2),T.pi_b=p.add(T.pi_b,p.timesFr(d.vk_delta_2,H)),Q=m.add(Q,d.vk_beta_1),Q=m.add(Q,m.timesFr(d.vk_delta_1,H)),T.pi_c=m.add(T.pi_c,_),T.pi_c=m.add(T.pi_c,m.timesFr(T.pi_a,H)),T.pi_c=m.add(T.pi_c,m.timesFr(Q,k)),T.pi_c=m.add(T.pi_c,m.timesFr(d.vk_delta_1,h.neg(h.mul(k,H))));let L=[];for(let g=1;g<=d.nPublic;g++){const D=C.slice(g*h.n8,g*h.n8+h.n8);L.push(be.fromRprLE(D))}return T.pi_a=m.toObject(m.toAffine(T.pi_a)),T.pi_b=p.toObject(p.toAffine(T.pi_b)),T.pi_c=m.toObject(m.toAffine(T.pi_c)),T.protocol="groth16",T.curve=u.name,await a.close(),await r.close(),T=QA(T),L=QA(L),{proof:T,publicSignals:L}}async function het(n,t,e,i,r){const s=n.Fr.n8,o=12+t.n8r,a=(i.byteLength-4)/o,l=new Qt(t.domainSize*s),d=new Qt(t.domainSize*s),u=new Qt(t.domainSize*s),h=[l,d];for(let m=0;m<a;m++){r&&m%1e6==0&&r.debug(`QAP AB: ${m}/${a}`);const p=i.slice(4+m*o,4+m*o+o),E=new DataView(p.buffer),C=E.getUint32(0,!0),v=E.getUint32(4,!0),A=E.getUint32(8,!0),x=p.slice(12,12+s);h[C].set(n.Fr.add(h[C].slice(v*s,v*s+s),n.Fr.mul(x,e.slice(A*s,A*s+s))),v*s)}for(let m=0;m<t.domainSize;m++)r&&m%1e6==0&&r.debug(`QAP C: ${m}/${t.domainSize}`),u.set(n.Fr.mul(l.slice(m*s,m*s+s),d.slice(m*s,m*s+s)),m*s);return[l,d,u]}async function pet(n,t,e,i,r,s){const a=n.Fr.n8,l=Math.floor(e.byteLength/n.Fr.n8),d=[];for(let p=0;p<l;p+=4194304){s&&s.debug(`JoinABC: ${p}/${l}`);const E=Math.min(l-p,4194304),C=[],v=e.slice(p*a,(p+E)*a),A=i.slice(p*a,(p+E)*a),x=r.slice(p*a,(p+E)*a);C.push({cmd:"ALLOCSET",var:0,buff:v}),C.push({cmd:"ALLOCSET",var:1,buff:A}),C.push({cmd:"ALLOCSET",var:2,buff:x}),C.push({cmd:"ALLOC",var:3,len:E*a}),C.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:E},{var:3}]}),C.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:E},{var:3}]}),C.push({cmd:"GET",out:0,var:3,len:E*a}),d.push(n.tm.queueAction(C))}const u=await Promise.all(d);let h;e instanceof Qt?h=new Qt(e.byteLength):h=new Uint8Array(e.byteLength);let m=0;for(let p=0;p<u.length;p++)h.set(u[p][0],m),m+=u[p][0].byteLength;return h}function QN(n){let t=[];return e(t,n),t;function e(i,r){if(Array.isArray(r))for(let s=0;s<r.length;s++)e(i,r[s]);else i.push(r)}}function met(n,t){let e=BigInt(n)%t;return e<0&&(e+=t),e}function YN(n){const t=BigInt(2)**BigInt(64);let e=BigInt("0xCBF29CE484222325");for(let s=0;s<n.length;s++)e^=BigInt(n[s].charCodeAt(0)),e*=BigInt(1099511628211),e%=t;let i=e.toString(16),r=16-i.length;return i="0".repeat(r).concat(i),i}function get(n,t){const e=[];let i=BigInt(n);const r=BigInt(4294967296);for(;i;)e.unshift(Number(i%r)),i=i/r;if(t){let s=t-e.length;for(;s>0;)e.unshift(0),s--}return e}async function XN(n,t){let e,i,r;t=t||{};let s=1,o=0,a=0,l=!1;if(n instanceof WebAssembly.Instance)e=n,l=!0;else{let m=32767;if(t.memorySize&&(m=parseInt(t.memorySize),m<0))throw new Error("Invalid memory size");let p=!1;for(;!p;)try{r=new WebAssembly.Memory({initial:m}),p=!0}catch(A){if(m<=1)throw A;console.warn("Could not allocate "+m*1024*64+" bytes. This may cause severe instability. Trying with "+m*1024*64/2+" bytes"),m=Math.floor(m/2)}const E=await WebAssembly.compile(n);let C="",v="";e=await WebAssembly.instantiate(E,{env:{memory:r},runtime:{printDebug:function(A){console.log("printDebug:",A)},exceptionHandler:function(A){let x;throw A===1?x="Signal not found. ":A===2?x="Too many signals set. ":A===3?x="Signal already set. ":A===4?x="Assert Failed. ":A===5?x="Not enough memory. ":A===6?x="Input signal array access exceeds the size. ":x="Unknown error. ",console.error("ERROR: ",A,C),new Error(x+C)},printErrorMessage:function(){C+=u()+`
`},writeBufferMessage:function(){const A=u();A===`
`?(console.log(v),v=""):(v!==""&&(v+=" "),v+=A)},showSharedRWMemory:function(){const A=e.exports.getFieldNumLen32(),x=new Uint32Array(A);for(let P=0;P<A;P++)x[A-1-P]=e.exports.readSharedRWMemory(P);if(s>=2&&(o>=1||a>=7)){v!==""&&(v+=" ");const P=be.fromArray(x,4294967296).toString();v+=P}else console.log(be.fromArray(x,4294967296))},error:function(A,x,P,W,K,j){let b;throw A===7?b=h(x)+" "+i.getFr(W).toString()+" != "+i.getFr(K).toString()+" "+h(j):A===9?b=h(x)+" "+i.getFr(W).toString()+" "+h(K):A===5&&t.sym?b=h(x)+" "+t.sym.labelIdx2Name[K]:b=h(x)+" "+P+" "+W+" "+K+" "+j,console.log("ERROR: ",A,b),new Error(b)},log:function(A){console.log(i.getFr(A).toString())},logGetSignal:function(A,x){t.logGetSignal&&t.logGetSignal(A,i.getFr(x))},logSetSignal:function(A,x){t.logSetSignal&&t.logSetSignal(A,i.getFr(x))},logStartComponent:function(A){t.logStartComponent&&t.logStartComponent(A)},logFinishComponent:function(A){t.logFinishComponent&&t.logFinishComponent(A)}}})}typeof e.exports.getVersion=="function"&&(s=e.exports.getVersion()),typeof e.exports.getMinorVersion=="function"&&(o=e.exports.getMinorVersion()),typeof e.exports.getPatchVersion=="function"&&(a=e.exports.getPatchVersion());const d=t&&(t.sanityCheck||t.logGetSignal||t.logSetSignal||t.logStartComponent||t.logFinishComponent);if(s===2)i=new wet(e,d);else if(s===1){if(l)throw new Error("Loading code from WebAssembly instance is not supported for circom version 1");i=new yet(r,e,d)}else throw new Error(`Unsupported circom version: ${s}`);return i;function u(){let m="",p=e.exports.getMessageChar();for(;p!==0;)m+=String.fromCharCode(p),p=e.exports.getMessageChar();return m}function h(m){const p=new Uint8Array(r.buffer),E=[];for(let C=0;p[m+C]>0;C++)E.push(p[m+C]);return String.fromCharCode.apply(null,E)}}class yet{constructor(t,e,i){this.memory=t,this.i32=new Uint32Array(t.buffer),this.instance=e,this.n32=(this.instance.exports.getFrLen()>>2)-2;const r=this.instance.exports.getPRawPrime(),s=new Array(this.n32);for(let o=0;o<this.n32;o++)s[this.n32-1-o]=this.i32[(r>>2)+o];this.prime=be.fromArray(s,4294967296),this.Fr=new r3(this.prime),this.mask32=be.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(be.shiftLeft(1,this.n64*64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=i}circom_version(){return 1}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const i=this.allocInt(),r=this.allocFr();Object.keys(t).forEach(o=>{const a=YN(o),l=parseInt(a.slice(0,8),16),d=parseInt(a.slice(8,16),16);try{this.instance.exports.getSignalOffset32(i,0,l,d)}catch{throw new Error(`Signal ${o} is not an input of the circuit.`)}const u=this.getInt(i),h=QN(t[o]);for(let m=0;m<h.length;m++)this.setFr(r,h[m]),this.instance.exports.setSignal(0,0,u+m,r)})}async calculateWitness(t,e){const i=this,r=i.i32[0],s=[];await i._doCalculateWitness(t,e);for(let o=0;o<i.NVars;o++){const a=i.instance.exports.getPWitness(o);s.push(i.getFr(a))}return i.i32[0]=r,s}async calculateBinWitness(t,e){const i=this,r=i.i32[0];await i._doCalculateWitness(t,e);const s=i.instance.exports.getWitnessBuffer();i.i32[0]=r;const o=i.memory.buffer.slice(s,s+i.NVars*i.n64*8);return new Uint8Array(o)}allocInt(){const t=this.i32[0];return this.i32[0]=t+8,t}allocFr(){const t=this.i32[0];return this.i32[0]=t+this.n32*4+8,t}getInt(t){return this.i32[t>>2]}setInt(t,e){this.i32[t>>2]=e}getFr(t){const e=this,i=t>>2;if(e.i32[i+1]&2147483648){const s=new Array(e.n32);for(let a=0;a<e.n32;a++)s[e.n32-1-a]=e.i32[i+2+a];const o=e.Fr.e(be.fromArray(s,4294967296));return e.i32[i+1]&1073741824?r(o):o}else return e.i32[i]&2147483648?e.Fr.e(e.i32[i]-4294967296):e.Fr.e(e.i32[i]);function r(s){return e.Fr.mul(e.RInv,s)}}setFr(t,e){const i=this;e=i.Fr.e(e);const r=i.Fr.neg(i.Fr.e("80000000",16)),s=i.Fr.e("7FFFFFFF",16);if(i.Fr.geq(e,r)&&i.Fr.leq(e,s)){let a;i.Fr.geq(e,i.Fr.zero)?a=be.toNumber(e):(a=be.toNumber(i.Fr.sub(e,r)),a=a-2147483648,a=4294967296+a),i.i32[t>>2]=a,i.i32[(t>>2)+1]=0;return}i.i32[t>>2]=0,i.i32[(t>>2)+1]=2147483648;const o=be.toArray(e,4294967296);for(let a=0;a<i.n32;a++){const l=o.length-1-a;l>=0?i.i32[(t>>2)+2+a]=o[l]:i.i32[(t>>2)+2+a]=0}}}class wet{constructor(t,e){this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const i=new Uint32Array(this.n32);for(let r=0;r<this.n32;r++)i[this.n32-1-r]=this.instance.exports.readSharedRWMemory(r);this.prime=be.fromArray(i,4294967296),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=e}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const i=Object.keys(t);let r=0;if(i.forEach(s=>{const o=YN(s),a=parseInt(o.slice(0,8),16),l=parseInt(o.slice(8,16),16),d=QN(t[s]);if(typeof this.instance.exports.getInputSignalSize=="function"){let u=this.instance.exports.getInputSignalSize(a,l);if(u<0)throw new Error(`Signal ${s} not found
`);if(d.length<u)throw new Error(`Not enough values for input signal ${s}
`);if(d.length>u)throw new Error(`Too many values for input signal ${s}
`)}for(let u=0;u<d.length;u++){const h=get(met(d[u],this.prime),this.n32);for(let m=0;m<this.n32;m++)this.instance.exports.writeSharedRWMemory(m,h[this.n32-1-m]);try{this.instance.exports.setInputSignal(a,l,u),r++}catch(m){throw new Error(m)}}}),r<this.instance.exports.getInputSize())throw new Error(`Not all inputs have been set. Only ${r} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,e){const i=[];await this._doCalculateWitness(t,e);for(let r=0;r<this.witnessSize;r++){this.instance.exports.getWitness(r);const s=new Uint32Array(this.n32);for(let o=0;o<this.n32;o++)s[this.n32-1-o]=this.instance.exports.readSharedRWMemory(o);i.push(be.fromArray(s,4294967296))}return i}async calculateWTNSBin(t,e){const i=new Uint32Array(this.witnessSize*this.n32+this.n32+11),r=new Uint8Array(i.buffer);await this._doCalculateWitness(t,e),r[0]=119,r[1]=116,r[2]=110,r[3]=115,i[1]=2,i[2]=2,i[3]=1;const s=this.n32*4,a=(8+s).toString(16);i[4]=parseInt(a.slice(0,8),16),i[5]=parseInt(a.slice(8,16),16),i[6]=s,this.instance.exports.getRawPrime();let l=7;for(let h=0;h<this.n32;h++)i[l+h]=this.instance.exports.readSharedRWMemory(h);l+=this.n32,i[l]=this.witnessSize,l++,i[l]=2,l++;const u=(s*this.witnessSize).toString(16);i[l]=parseInt(u.slice(0,8),16),i[l+1]=parseInt(u.slice(8,16),16),l+=2;for(let h=0;h<this.witnessSize;h++){this.instance.exports.getWitness(h);for(let m=0;m<this.n32;m++)i[l+m]=this.instance.exports.readSharedRWMemory(m);l+=this.n32}return r}}const{unstringifyBigInts:_et}=An;async function gg(n,t,e,i){const r=_et(n),s=await Wa(t),o=await s.read(s.totalSize);await s.close();const a=await XN(o,i);if(a.circom_version()===1){const l=await a.calculateBinWitness(r),d=await sr(e,"wtns",2,2);await det(d,l,a.prime),await d.close()}else{const l=await Gu(e),d=await a.calculateWTNSBin(r);await l.write(d),await l.close()}}const{unstringifyBigInts:bet}=An;async function vet(n,t,e,i,r,s){const o=bet(n),a={type:"mem"};return await gg(o,t,a,r),await ZN(e,a,i,s)}const{unstringifyBigInts:pw}=An;async function xet(n,t,e,i){const r=pw(n),s=pw(e),o=pw(t),a=await nl(r.curve),l=a.G1.fromObject(r.IC[0]),d=new Uint8Array(a.G1.F.n8*2*o.length),u=new Uint8Array(a.Fr.n8*o.length);if(!Cet(a,o))return i&&i.error("Public inputs are not valid."),!1;for(let W=0;W<o.length;W++){const K=a.G1.fromObject(r.IC[W+1]);d.set(K,W*a.G1.F.n8*2),be.toRprLE(u,a.Fr.n8*W,o[W],a.Fr.n8)}let h=await a.G1.multiExpAffine(d,u);h=a.G1.add(h,l);const m=a.G1.fromObject(s.pi_a),p=a.G2.fromObject(s.pi_b),E=a.G1.fromObject(s.pi_c);if(!Eet(a,{pi_a:m,pi_b:p,pi_c:E}))return i&&i.error("Proof commitments are not valid."),!1;const C=a.G2.fromObject(r.vk_gamma_2),v=a.G2.fromObject(r.vk_delta_2),A=a.G1.fromObject(r.vk_alpha_1),x=a.G2.fromObject(r.vk_beta_2);return await a.pairingEq(a.G1.neg(m),p,h,C,E,v,A,x)?(i&&i.info("OK!"),!0):(i&&i.error("Invalid proof"),!1)}function Eet(n,t){const e=n.G1,i=n.G2;return e.isValid(t.pi_a)&&i.isValid(t.pi_b)&&e.isValid(t.pi_c)}function Let(n,t){return be.geq(t,0)&&be.lt(t,n.r)}function Cet(n,t){for(let e=0;e<t.length;e++)if(!Let(n,t[e]))return!1;return!0}const{unstringifyBigInts:YA}=An;function so(n){let t=n.toString(16);for(;t.length<64;)t="0"+t;return t=`"0x${t}"`,t}async function Aet(n,t){const e=YA(n),i=YA(t);let r="";for(let o=0;o<i.length;o++)r!=""&&(r=r+","),r=r+so(i[o]);let s;return s=`[${so(e.pi_a[0])}, ${so(e.pi_a[1])}],[[${so(e.pi_b[0][1])}, ${so(e.pi_b[0][0])}],[${so(e.pi_b[1][1])}, ${so(e.pi_b[1][0])}]],[${so(e.pi_c[0])}, ${so(e.pi_c[1])}],[${r}]`,s}var JN=Object.freeze({__proto__:null,fullProve:vet,prove:ZN,verify:xet,exportSolidityCallData:Aet});function mh(n,t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[];for(let o=0;o<8;o++)i[o]=e.getUint32(o*4);const r=new $c(i);return n.G2.fromRng(r)}function O0(n,t,e,i,r){const s=xn.create({dkLen:64}),o=new Uint8Array([t]);s.update(o),s.update(e);const a=n.G1.toUncompressed(i);s.update(a);const l=n.G1.toUncompressed(r);s.update(l);const d=s.digest();return mh(n,d)}function mw(n,t,e,i,r){return n.g1_s=t.G1.toAffine(t.G1.fromRng(r)),n.g1_sx=t.G1.toAffine(t.G1.timesFr(n.g1_s,n.prvKey)),n.g2_sp=t.G2.toAffine(O0(t,e,i,n.g1_s,n.g1_sx)),n.g2_spx=t.G2.toAffine(t.G2.timesFr(n.g2_sp,n.prvKey)),n}function g3(n,t,e){const i={tau:{},alpha:{},beta:{}};return i.tau.prvKey=n.Fr.fromRng(e),i.alpha.prvKey=n.Fr.fromRng(e),i.beta.prvKey=n.Fr.fromRng(e),mw(i.tau,n,0,t,e),mw(i.alpha,n,1,t,e),mw(i.beta,n,2,t,e),i}async function il(n,t,e,i){i||(i=e),await n.writeULE32(1);const r=n.pos;await n.writeULE64(0),await n.writeULE32(t.F1.n64*8);const s=new Uint8Array(t.F1.n8);be.toRprLE(s,0,t.q,t.F1.n8),await n.write(s),await n.writeULE32(e),await n.writeULE32(i);const o=n.pos-r-8,a=n.pos;await n.writeULE64(o,r),n.pos=a}async function Zr(n,t){if(!t[1])throw new Error(n.fileName+": File has no  header");if(t[1].length>1)throw new Error(n.fileName+": File has more than one header");n.pos=t[1][0].p;const e=await n.readULE32(),i=await n.read(e),r=be.fromRprLE(i),s=await or(r);if(s.F1.n64*8!=e)throw new Error(n.fileName+": Invalid size");const o=await n.readULE32(),a=await n.readULE32();if(n.pos-t[1][0].p!=t[1][0].size)throw new Error("Invalid PTau header size");return{curve:s,power:o,ceremonyPower:a}}async function Iet(n,t,e){const i=await n.read(t.F1.n8*2*6+t.F2.n8*2*3);return tM(i,0,t,e)}function tM(n,t,e,i){const r={tau:{},alpha:{},beta:{}};return r.tau.g1_s=s(),r.tau.g1_sx=s(),r.alpha.g1_s=s(),r.alpha.g1_sx=s(),r.beta.g1_s=s(),r.beta.g1_sx=s(),r.tau.g2_spx=o(),r.alpha.g2_spx=o(),r.beta.g2_spx=o(),r;function s(){let a;return i?a=e.G1.fromRprLEM(n,t):a=e.G1.fromRprUncompressed(n,t),t+=e.G1.F.n8*2,a}function o(){let a;return i?a=e.G2.fromRprLEM(n,t):a=e.G2.fromRprUncompressed(n,t),t+=e.G2.F.n8*2,a}}function Wu(n,t,e,i,r){s(i.tau.g1_s),s(i.tau.g1_sx),s(i.alpha.g1_s),s(i.alpha.g1_sx),s(i.beta.g1_s),s(i.beta.g1_sx),o(i.tau.g2_spx),o(i.alpha.g2_spx),o(i.beta.g2_spx);async function s(a){r?e.G1.toRprLEM(n,t,a):e.G1.toRprUncompressed(n,t,a),t+=e.F1.n8*2}async function o(a){r?e.G2.toRprLEM(n,t,a):e.G2.toRprUncompressed(n,t,a),t+=e.F2.n8*2}return n}async function Tet(n,t,e,i){const r=new Uint8Array(t.F1.n8*2*6+t.F2.n8*2*3);Wu(r,0,t,e,i),await n.write(r)}async function ket(n,t){const e={};e.tauG1=await l(),e.tauG2=await d(),e.alphaG1=await l(),e.betaG1=await l(),e.betaG2=await d(),e.key=await Iet(n,t,!0),e.partialHash=await n.read(216),e.nextChallenge=await n.read(64),e.type=await n.readULE32();const i=new Uint8Array(t.G1.F.n8*2*6+t.G2.F.n8*2*3);Wu(i,0,t,e.key,!1);const r=qN(e.partialHash);r.update(i),e.responseHash=r.digest();const s=await n.readULE32(),o=n.pos;let a=0;for(;n.pos-o<s;){const h=await u(1);if(h[0]<=a)throw new Error("Parameters in the contribution must be sorted");if(a=h[0],h[0]==1){const m=await u(1),p=await u(m[0]);e.name=new TextDecoder().decode(p)}else if(h[0]==2){const m=await u(1);e.numIterationsExp=m[0]}else if(h[0]==3){const m=await u(1);e.beaconHash=await u(m[0])}else throw new Error("Parameter not recognized")}if(n.pos!=o+s)throw new Error("Parameters do not match");return e;async function l(){const h=await n.read(t.G1.F.n8*2);return t.G1.fromRprLEM(h)}async function d(){const h=await n.read(t.G2.F.n8*2);return t.G2.fromRprLEM(h)}async function u(h){const m=await n.read(h);return new Uint8Array(m)}}async function Vu(n,t,e){if(!e[7])throw new Error(n.fileName+": File has no  contributions");if(e[7][0].length>1)throw new Error(n.fileName+": File has more than one contributions section");n.pos=e[7][0].p;const i=await n.readULE32(),r=[];for(let s=0;s<i;s++){const o=await ket(n,t);o.id=s+1,r.push(o)}if(n.pos-e[7][0].p!=e[7][0].size)throw new Error("Invalid contribution section size");return r}async function Ret(n,t,e){const i=new Uint8Array(t.F1.n8*2),r=new Uint8Array(t.F2.n8*2);await o(e.tauG1),await a(e.tauG2),await o(e.alphaG1),await o(e.betaG1),await a(e.betaG2),await Tet(n,t,e.key,!0),await n.write(e.partialHash),await n.write(e.nextChallenge),await n.writeULE32(e.type||0);const s=[];if(e.name){s.push(1);const l=new TextEncoder("utf-8").encode(e.name.substring(0,64));s.push(l.byteLength);for(let d=0;d<l.byteLength;d++)s.push(l[d])}if(e.type==1){s.push(2),s.push(e.numIterationsExp),s.push(3),s.push(e.beaconHash.byteLength);for(let l=0;l<e.beaconHash.byteLength;l++)s.push(e.beaconHash[l])}if(s.length>0){const l=new Uint8Array(s);await n.writeULE32(l.byteLength),await n.write(l)}else await n.writeULE32(0);async function o(l){t.G1.toRprLEM(i,0,l),await n.write(i)}async function a(l){t.G2.toRprLEM(r,0,l),await n.write(r)}}async function y3(n,t,e){await n.writeULE32(7);const i=n.pos;await n.writeULE64(0),await n.writeULE32(e.length);for(let o=0;o<e.length;o++)await Ret(n,t,e[o]);const r=n.pos-i-8,s=n.pos;await n.writeULE64(r,i),n.pos=s}function qu(n,t,e){e&&e.debug("Calculating First Challenge Hash");const i=xn.create({dkLen:64}),r=new Uint8Array(n.G1.F.n8*2),s=new Uint8Array(n.G2.F.n8*2);n.G1.toRprUncompressed(r,0,n.G1.g),n.G2.toRprUncompressed(s,0,n.G2.g),i.update(xn.create({dkLen:64}).digest());let o;return o=2**t*2-1,e&&e.debug("Calculate Initial Hash: tauG1"),a(r,o),o=2**t,e&&e.debug("Calculate Initial Hash: tauG2"),a(s,o),e&&e.debug("Calculate Initial Hash: alphaTauG1"),a(r,o),e&&e.debug("Calculate Initial Hash: betaTauG1"),a(r,o),i.update(s),i.digest();function a(l,d){const h=Math.floor(d/341e3),m=d%341e3,p=new Uint8Array(341e3*l.byteLength);for(let E=0;E<341e3;E++)p.set(l,E*l.byteLength);for(let E=0;E<h;E++)i.update(p),e&&e.debug("Initial hash: "+E*341e3);for(let E=0;E<m;E++)i.update(l)}}async function eM(n,t,e,i){const r=await h3(e,i);return g3(n,t,r)}async function Net(n,t,e,i){const r=await sr(e,"ptau",1,7);await il(r,n,t,0);const s=n.G1.oneAffine,o=n.G2.oneAffine;await We(r,2);const a=2**t*2-1;for(let m=0;m<a;m++)await r.write(s),i&&m%1e5==0&&m&&i.log("tauG1: "+m);await Ve(r),await We(r,3);const l=2**t;for(let m=0;m<l;m++)await r.write(o),i&&m%1e5==0&&m&&i.log("tauG2: "+m);await Ve(r),await We(r,4);const d=2**t;for(let m=0;m<d;m++)await r.write(s),i&&m%1e5==0&&m&&i.log("alphaTauG1: "+m);await Ve(r),await We(r,5);const u=2**t;for(let m=0;m<u;m++)await r.write(s),i&&m%1e5==0&&m&&i.log("betaTauG1: "+m);await Ve(r),await We(r,6),await r.write(o),await Ve(r),await We(r,7),await r.writeULE32(0),await Ve(r),await r.close();const h=qu(n,t,i);return i&&i.debug(Bn(xn.create({dkLen:64}).digest(),"Blank Contribution Hash:")),i&&i.info(Bn(h,"First Contribution Hash:")),h}async function Met(n,t,e){const{fd:i,sections:r}=await sn(n,"ptau",1),{curve:s,power:o}=await Zr(i,r),a=await Vu(i,s,r);let l,d;a.length==0?(l=xn.create({dkLen:64}).digest(),d=qu(s,o)):(l=a[a.length-1].responseHash,d=a[a.length-1].nextChallenge),e&&e.info(Bn(l,"Last Response Hash: ")),e&&e.info(Bn(d,"New Challenge Hash: "));const u=await Gu(t),h=xn.create({dkLen:64});await u.write(l),h.update(l),await p(2,"G1",2**o*2-1,"tauG1"),await p(3,"G2",2**o,"tauG2"),await p(4,"G1",2**o,"alphaTauG1"),await p(5,"G1",2**o,"betaTauG1"),await p(6,"G2",1,"betaG2"),await i.close(),await u.close();const m=h.digest();if(!Fa(d,m))throw e&&e.info(Bn(m,"Calc Curret Challenge Hash: ")),e&&e.error("PTau file is corrupted. Calculated new challenge hash does not match with the eclared one"),new Error("PTau file is corrupted. Calculated new challenge hash does not match with the eclared one");return d;async function p(E,C,v,A){const x=s[C],P=x.F.n8*2,W=Math.floor((1<<24)/P);await an(i,r,E);for(let K=0;K<v;K+=W){e&&e.debug(`Exporting ${A}: ${K}/${v}`);const j=Math.min(v-K,W);let b;b=await i.read(j*P),b=await x.batchLEMtoU(b),await u.write(b),h.update(b)}await cn(i)}}async function Bet(n,t,e,i,r,s){const o=new Uint8Array(64);for(let w=0;w<64;w++)o[w]=255;const{fd:a,sections:l}=await sn(n,"ptau",1),{curve:d,power:u}=await Zr(a,l),h=await Vu(a,d,l),m={};i&&(m.name=i);const p=d.F1.n8*2,E=d.F1.n8,C=d.F2.n8*2,v=d.F2.n8,A=await Wa(t);if(A.totalSize!=64+(2**u*2-1)*E+2**u*v+2**u*E+2**u*E+v+p*6+C*3)throw new Error("Size of the contribution is invalid");let x;h.length>0?x=h[h.length-1].nextChallenge:x=qu(d,u,s);const P=await sr(e,"ptau",1,r?7:2);await il(P,d,u);const W=await A.read(64);if(Fa(o,x)&&(x=W,h[h.length-1].nextChallenge=x),!Fa(W,x))throw new Error("Wrong contribution. This contribution is not based on the previous hash");const K=xn.create({dkLen:64});K.update(W);const j=[];let b;b=await it(A,P,"G1",2,2**u*2-1,[1],"tauG1"),m.tauG1=b[0],b=await it(A,P,"G2",3,2**u,[1],"tauG2"),m.tauG2=b[0],b=await it(A,P,"G1",4,2**u,[0],"alphaG1"),m.alphaG1=b[0],b=await it(A,P,"G1",5,2**u,[0],"betaG1"),m.betaG1=b[0],b=await it(A,P,"G2",6,1,[0],"betaG2"),m.betaG2=b[0],m.partialHash=f3(K);const B=await A.read(d.F1.n8*2*6+d.F2.n8*2*3);m.key=tM(B,0,d,!1),K.update(new Uint8Array(B));const J=K.digest();if(s&&s.info(Bn(J,"Contribution Response Hash imported: ")),r){const w=xn.create({dkLen:64});w.update(J),await I(w,P,"G1",2,2**u*2-1,"tauG1",s),await I(w,P,"G2",3,2**u,"tauG2",s),await I(w,P,"G1",4,2**u,"alphaTauG1",s),await I(w,P,"G1",5,2**u,"betaTauG1",s),await I(w,P,"G2",6,1,"betaG2",s),m.nextChallenge=w.digest(),s&&s.info(Bn(m.nextChallenge,"Next Challenge Hash: "))}else m.nextChallenge=o;return h.push(m),await y3(P,d,h),await A.close(),await P.close(),await a.close(),m.nextChallenge;async function it(w,T,V,Y,Q,$,F){return r?await st(w,T,V,Y,Q,$,F):await z(w,T,V,Y,Q,$,F)}async function st(w,T,V,Y,Q,$,F){const R=d[V],_=R.F.n8,k=R.F.n8*2,H=[];await We(T,Y);const L=Math.floor((1<<24)/k);j[Y]=T.pos;for(let g=0;g<Q;g+=L){s&&s.debug(`Importing ${F}: ${g}/${Q}`);const D=Math.min(Q-g,L),S=await w.read(D*_);K.update(S);const lt=await R.batchCtoLEM(S);await T.write(lt);for(let ct=0;ct<$.length;ct++){const G=$[ct];if(G>=g&&G<g+D){const ft=R.fromRprLEM(lt,(G-g)*k);H.push(ft)}}}return await Ve(T),H}async function z(w,T,V,Y,Q,$,F){const R=d[V],_=R.F.n8,k=[],H=Math.floor((1<<24)/_);for(let L=0;L<Q;L+=H){s&&s.debug(`Importing ${F}: ${L}/${Q}`);const g=Math.min(Q-L,H),D=await w.read(g*_);K.update(D);for(let S=0;S<$.length;S++){const lt=$[S];if(lt>=L&&lt<L+g){const ct=R.fromRprCompressed(D,(lt-L)*_);k.push(ct)}}}return k}async function I(w,T,V,Y,Q,$,F){const R=d[V],_=R.F.n8*2,k=Math.floor((1<<24)/_),H=T.pos;T.pos=j[Y];for(let L=0;L<Q;L+=k){F&&F.debug(`Hashing ${$}: ${L}/${Q}`);const g=Math.min(Q-L,k),D=await T.read(g*_),S=await R.batchLEMtoU(D);w.update(S)}T.pos=H}}const qr=$N;async function XA(n,t,e,i){let r;if(t.type==1){const s=await eM(n,e.nextChallenge,t.beaconHash,t.numIterationsExp);if(!n.G1.eq(t.key.tau.g1_s,s.tau.g1_s))return i&&i.error(`BEACON key (tauG1_s) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G1.eq(t.key.tau.g1_sx,s.tau.g1_sx))return i&&i.error(`BEACON key (tauG1_sx) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G2.eq(t.key.tau.g2_spx,s.tau.g2_spx))return i&&i.error(`BEACON key (tauG2_spx) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G1.eq(t.key.alpha.g1_s,s.alpha.g1_s))return i&&i.error(`BEACON key (alphaG1_s) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G1.eq(t.key.alpha.g1_sx,s.alpha.g1_sx))return i&&i.error(`BEACON key (alphaG1_sx) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G2.eq(t.key.alpha.g2_spx,s.alpha.g2_spx))return i&&i.error(`BEACON key (alphaG2_spx) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G1.eq(t.key.beta.g1_s,s.beta.g1_s))return i&&i.error(`BEACON key (betaG1_s) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G1.eq(t.key.beta.g1_sx,s.beta.g1_sx))return i&&i.error(`BEACON key (betaG1_sx) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1;if(!n.G2.eq(t.key.beta.g2_spx,s.beta.g2_spx))return i&&i.error(`BEACON key (betaG2_spx) is not generated correctly in challenge #${t.id}  ${t.name||""}`),!1}return t.key.tau.g2_sp=n.G2.toAffine(O0(n,0,e.nextChallenge,t.key.tau.g1_s,t.key.tau.g1_sx)),t.key.alpha.g2_sp=n.G2.toAffine(O0(n,1,e.nextChallenge,t.key.alpha.g1_s,t.key.alpha.g1_sx)),t.key.beta.g2_sp=n.G2.toAffine(O0(n,2,e.nextChallenge,t.key.beta.g1_s,t.key.beta.g1_sx)),r=await qr(n,t.key.tau.g1_s,t.key.tau.g1_sx,t.key.tau.g2_sp,t.key.tau.g2_spx),r!==!0?(i&&i.error("INVALID key (tau) in challenge #"+t.id),!1):(r=await qr(n,t.key.alpha.g1_s,t.key.alpha.g1_sx,t.key.alpha.g2_sp,t.key.alpha.g2_spx),r!==!0?(i&&i.error("INVALID key (alpha) in challenge #"+t.id),!1):(r=await qr(n,t.key.beta.g1_s,t.key.beta.g1_sx,t.key.beta.g2_sp,t.key.beta.g2_spx),r!==!0?(i&&i.error("INVALID key (beta) in challenge #"+t.id),!1):(r=await qr(n,e.tauG1,t.tauG1,t.key.tau.g2_sp,t.key.tau.g2_spx),r!==!0?(i&&i.error("INVALID tau*G1. challenge #"+t.id+" It does not follow the previous contribution"),!1):(r=await qr(n,t.key.tau.g1_s,t.key.tau.g1_sx,e.tauG2,t.tauG2),r!==!0?(i&&i.error("INVALID tau*G2. challenge #"+t.id+" It does not follow the previous contribution"),!1):(r=await qr(n,e.alphaG1,t.alphaG1,t.key.alpha.g2_sp,t.key.alpha.g2_spx),r!==!0?(i&&i.error("INVALID alpha*G1. challenge #"+t.id+" It does not follow the previous contribution"),!1):(r=await qr(n,e.betaG1,t.betaG1,t.key.beta.g2_sp,t.key.beta.g2_spx),r!==!0?(i&&i.error("INVALID beta*G1. challenge #"+t.id+" It does not follow the previous contribution"),!1):(r=await qr(n,t.key.beta.g1_s,t.key.beta.g1_sx,e.betaG2,t.betaG2),r!==!0?(i&&i.error("INVALID beta*G2. challenge #"+t.id+"It does not follow the previous contribution"),!1):(i&&i.info("Powers Of tau file OK!"),!0))))))))}async function Pet(n,t){let e;const{fd:i,sections:r}=await sn(n,"ptau",1),{curve:s,power:o,ceremonyPower:a}=await Zr(i,r),l=await Vu(i,s,r);t&&t.debug("power: 2**"+o),t&&t.debug("Computing initial contribution hash");const d={tauG1:s.G1.g,tauG2:s.G2.g,alphaG1:s.G1.g,betaG1:s.G1.g,betaG2:s.G2.g,nextChallenge:qu(s,a,t),responseHash:xn.create({dkLen:64}).digest()};if(l.length==0)return t&&t.error("This file has no contribution! It cannot be used in production"),!1;let u;l.length>1?u=l[l.length-2]:u=d;const h=l[l.length-1];if(t&&t.debug("Validating contribution #"+l[l.length-1].id),!await XA(s,h,u,t))return!1;const p=xn.create({dkLen:64});p.update(h.responseHash),t&&t.debug("Verifying powers in tau*G1 section");const E=await j(2,"G1","tauG1",2**o*2-1,[0,1],t);if(e=await qr(s,E.R1,E.R2,s.G2.g,h.tauG2),e!==!0)return t&&t.error("tauG1 section. Powers do not match"),!1;if(!s.G1.eq(s.G1.g,E.singularPoints[0]))return t&&t.error("First element of tau*G1 section must be the generator"),!1;if(!s.G1.eq(h.tauG1,E.singularPoints[1]))return t&&t.error("Second element of tau*G1 section does not match the one in the contribution section"),!1;t&&t.debug("Verifying powers in tau*G2 section");const C=await j(3,"G2","tauG2",2**o,[0,1],t);if(e=await qr(s,s.G1.g,h.tauG1,C.R1,C.R2),e!==!0)return t&&t.error("tauG2 section. Powers do not match"),!1;if(!s.G2.eq(s.G2.g,C.singularPoints[0]))return t&&t.error("First element of tau*G2 section must be the generator"),!1;if(!s.G2.eq(h.tauG2,C.singularPoints[1]))return t&&t.error("Second element of tau*G2 section does not match the one in the contribution section"),!1;t&&t.debug("Verifying powers in alpha*tau*G1 section");const v=await j(4,"G1","alphatauG1",2**o,[0],t);if(e=await qr(s,v.R1,v.R2,s.G2.g,h.tauG2),e!==!0)return t&&t.error("alphaTauG1 section. Powers do not match"),!1;if(!s.G1.eq(h.alphaG1,v.singularPoints[0]))return t&&t.error("First element of alpha*tau*G1 section (alpha*G1) does not match the one in the contribution section"),!1;t&&t.debug("Verifying powers in beta*tau*G1 section");const A=await j(5,"G1","betatauG1",2**o,[0],t);if(e=await qr(s,A.R1,A.R2,s.G2.g,h.tauG2),e!==!0)return t&&t.error("betaTauG1 section. Powers do not match"),!1;if(!s.G1.eq(h.betaG1,A.singularPoints[0]))return t&&t.error("First element of beta*tau*G1 section (beta*G1) does not match the one in the contribution section"),!1;const x=await K(t);if(!s.G2.eq(h.betaG2,x))return t&&t.error("betaG2 element in betaG2 section does not match the one in the contribution section"),!1;const P=p.digest();if(o==a&&!Fa(P,h.nextChallenge))return t&&t.error("Hash of the values does not match the next challenge of the last contributor in the contributions section"),!1;t&&t.info(Bn(P,"Next challenge hash: ")),W(h,u);for(let B=l.length-2;B>=0;B--){const J=l[B],it=B>0?l[B-1]:d;if(!await XA(s,J,it,t))return!1;W(J,it)}if(t&&t.info("-----------------------------------------------------"),!r[12]||!r[13]||!r[14]||!r[15])t&&t.warn(`this file does not contain phase2 precalculated values. Please run: 
   snarkjs "powersoftau preparephase2" to prepare this file to be used in the phase2 ceremony.`);else{let B;if(B=await b("G1",2,12,"tauG1",t),!B||(B=await b("G2",3,13,"tauG2",t),!B)||(B=await b("G1",4,14,"alphaTauG1",t),!B)||(B=await b("G1",5,15,"betaTauG1",t),!B))return!1}return await i.close(),t&&t.info("Powers of Tau Ok!"),!0;function W(B,J){if(!t)return;t.info("-----------------------------------------------------"),t.info(`Contribution #${B.id}: ${B.name||""}`),t.info(Bn(B.nextChallenge,"Next Challenge: "));const it=new Uint8Array(s.G1.F.n8*2*6+s.G2.F.n8*2*3);Wu(it,0,s,B.key,!1);const st=qN(B.partialHash);st.update(it);const z=st.digest();t.info(Bn(z,"Response Hash:")),t.info(Bn(J.nextChallenge,"Response Hash:")),B.type==1&&(t.info(`Beacon generator: ${KN(B.beaconHash)}`),t.info(`Beacon iterations Exp: ${B.numIterationsExp}`))}async function K(B){const J=s.G2,it=J.F.n8*2,st=new Uint8Array(it);if(!r[6])throw B.error("File has no BetaG2 section"),new Error("File has no BetaG2 section");if(r[6].length>1)throw B.error("File has no BetaG2 section"),new Error("File has more than one GetaG2 section");i.pos=r[6][0].p;const z=await i.read(it),I=J.fromRprLEM(z);return J.toRprUncompressed(st,0,I),p.update(st),I}async function j(B,J,it,st,z,I){const T=s[J],V=T.F.n8*2;await an(i,r,B);const Y=[];let Q=T.zero,$=T.zero,F=T.zero;for(let R=0;R<st;R+=65536){I&&I.debug(`points relations: ${it}: ${R}/${st} `);const _=Math.min(st-R,65536),k=await i.read(_*V),H=await T.batchLEMtoU(k);p.update(H);const L=fu(4*(_-1));if(R>0){const S=T.fromRprLEM(k,0),lt=_m(fu(4),0);Q=T.add(Q,T.timesScalar(F,lt)),$=T.add($,T.timesScalar(S,lt))}const g=await T.multiExpAffine(k.slice(0,(_-1)*V),L),D=await T.multiExpAffine(k.slice(V),L);Q=T.add(Q,g),$=T.add($,D),F=T.fromRprLEM(k,(_-1)*V);for(let S=0;S<z.length;S++){const lt=z[S];if(lt>=R&&lt<R+_){const ct=T.fromRprLEM(k,(lt-R)*V);Y.push(ct)}}}return await cn(i),{R1:Q,R2:$,singularPoints:Y}}async function b(B,J,it,st,z){z&&z.debug(`Verifying phase2 calculated values ${st}...`);const I=s[B],w=I.F.n8*2,T=new Array(8);for(let Y=0;Y<8;Y++)T[Y]=_m(fu(4),0);for(let Y=0;Y<=o;Y++)if(!await V(Y))return!1;if(J==2&&!await V(o+1))return!1;return!0;async function V(Y){z&&z.debug(`Power ${Y}...`);const Q=s.Fr.n8,$=2**Y;let F=new Uint32Array($),R,_=new $c(T);z&&z.debug(`Creating random numbers Powers${Y}...`);for(let D=0;D<$;D++)Y==o+1&&D==$-1?F[D]=0:F[D]=_.nextU32();F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength),z&&z.debug(`reading points Powers${Y}...`),await an(i,r,J),R=new Qt($*w),Y==o+1?(await i.readToBuffer(R,0,($-1)*w),R.set(s.G1.zeroAffine,($-1)*w)):await i.readToBuffer(R,0,$*w),await cn(i,!0);const k=await I.multiExpAffine(R,F,z,st+"_"+Y);F=new Qt($*Q),_=new $c(T);const H=new Uint8Array(4),L=new DataView(H.buffer);z&&z.debug(`Creating random numbers Powers${Y}...`);for(let D=0;D<$;D++)(D!=$-1||Y!=o+1)&&(L.setUint32(0,_.nextU32(),!0),F.set(H,D*Q));z&&z.debug(`batchToMontgomery ${Y}...`),F=await s.Fr.batchToMontgomery(F),z&&z.debug(`fft ${Y}...`),F=await s.Fr.fft(F),z&&z.debug(`batchFromMontgomery ${Y}...`),F=await s.Fr.batchFromMontgomery(F),z&&z.debug(`reading points Lagrange${Y}...`),await an(i,r,it),i.pos+=w*(2**Y-1),await i.readToBuffer(R,0,$*w),await cn(i,!0);const g=await I.multiExpAffine(R,F,z,st+"_"+Y+"_transformed");return I.eq(k,g)?!0:(z&&z.error("Phase2 caclutation does not match with powers of tau"),!1)}}}async function Em(n,t,e,i,r,s,o,a,l,d){const h=r[s],m=h.F.n8*2,p=t[i][0].size/m;await an(n,t,i),await We(e,i);let E=o;for(let C=0;C<p;C+=65536){d&&d.debug(`Applying key: ${l}: ${C}/${p}`);const v=Math.min(p-C,65536);let A;A=await n.read(v*m),A=await h.batchApplyKey(A,E,a),await e.write(A),E=r.Fr.mul(E,r.Fr.exp(a,v))}await Ve(e),await cn(n)}async function mc(n,t,e,i,r,s,o,a,l,d,u){const h=i[r],m=h.F.n8*2,p=Math.floor((1<<20)/m);let E=o;for(let C=0;C<s;C+=p){u&&u.debug(`Applying key ${d}: ${C}/${s}`);const v=Math.min(s-C,p),A=await n.read(v*m),x=await h.batchUtoLEM(A),P=await h.batchApplyKey(x,E,a);let W;l=="COMPRESSED"?W=await h.batchLEMtoC(P):W=await h.batchLEMtoU(P),e&&e.update(W),await t.write(W),E=i.Fr.mul(E,i.Fr.exp(a,v))}}async function Oet(n,t,e,i,r){const s=await Wa(t),o=n.F1.n64*8*2,a=n.F2.n64*8*2,l=(s.totalSize+o-64-a)/(4*o+a);let d=l,u=0;for(;d>1;)d=d/2,u+=1;if(2**u!=l)throw new Error("Invalid file size");r&&r.debug("Power to tau size: "+u);const h=await mg(i),m=await Gu(e),p=xn.create({dkLen:64});for(let W=0;W<s.totalSize;W+=s.pageSize){r&&r.debug(`Hashing challenge ${W}/${s.totalSize}`);const K=Math.min(s.totalSize-W,s.pageSize),j=await s.read(K);p.update(j)}const E=await s.read(64,0);r&&r.info(Bn(E,"Claimed Previous Response Hash: "));const C=p.digest();r&&r.info(Bn(C,"Current Challenge Hash: "));const v=g3(n,C,h);r&&["tau","alpha","beta"].forEach(W=>{r.debug(W+".g1_s: "+n.G1.toString(v[W].g1_s,16)),r.debug(W+".g1_sx: "+n.G1.toString(v[W].g1_sx,16)),r.debug(W+".g2_sp: "+n.G2.toString(v[W].g2_sp,16)),r.debug(W+".g2_spx: "+n.G2.toString(v[W].g2_spx,16)),r.debug("")});const A=xn.create({dkLen:64});await m.write(C),A.update(C),await mc(s,m,A,n,"G1",2**u*2-1,n.Fr.one,v.tau.prvKey,"COMPRESSED","tauG1",r),await mc(s,m,A,n,"G2",2**u,n.Fr.one,v.tau.prvKey,"COMPRESSED","tauG2",r),await mc(s,m,A,n,"G1",2**u,v.alpha.prvKey,v.tau.prvKey,"COMPRESSED","alphaTauG1",r),await mc(s,m,A,n,"G1",2**u,v.beta.prvKey,v.tau.prvKey,"COMPRESSED","betaTauG1",r),await mc(s,m,A,n,"G2",1,v.beta.prvKey,v.tau.prvKey,"COMPRESSED","betaTauG2",r);const x=new Uint8Array(n.F1.n8*2*6+n.F2.n8*2*3);Wu(x,0,n,v,!1),await m.write(x),A.update(x);const P=A.digest();r&&r.info(Bn(P,"Contribution Response Hash: ")),await m.close(),await s.close()}async function Fet(n,t,e,i,r,s){const o=HN(i);if(o.byteLength==0||o.byteLength*2!=i.length)return s&&s.error("Invalid Beacon Hash. (It must be a valid hexadecimal sequence)"),!1;if(o.length>=256)return s&&s.error("Maximum length of beacon hash is 255 bytes"),!1;if(r=parseInt(r),r<10||r>63)return s&&s.error("Invalid numIterationsExp. (Must be between 10 and 63)"),!1;const{fd:a,sections:l}=await sn(n,"ptau",1),{curve:d,power:u,ceremonyPower:h}=await Zr(a,l);if(u!=h)return s&&s.error("This file has been reduced. You cannot contribute into a reduced file."),!1;l[12]&&s&&s.warn("Contributing into a file that has phase2 calculated. You will have to prepare phase2 again.");const m=await Vu(a,d,l),p={name:e,type:1,numIterationsExp:r,beaconHash:o};let E;m.length>0?E=m[m.length-1].nextChallenge:E=qu(d,u,s),p.key=await eM(d,E,o,r);const C=xn.create({dkLen:64});C.update(E);const v=await sr(t,"ptau",1,7);await il(v,d,u);const A=[];let x;x=await j(2,"G1",2**u*2-1,d.Fr.e(1),p.key.tau.prvKey,"tauG1",s),p.tauG1=x[1],x=await j(3,"G2",2**u,d.Fr.e(1),p.key.tau.prvKey,"tauG2",s),p.tauG2=x[1],x=await j(4,"G1",2**u,p.key.alpha.prvKey,p.key.tau.prvKey,"alphaTauG1",s),p.alphaG1=x[0],x=await j(5,"G1",2**u,p.key.beta.prvKey,p.key.tau.prvKey,"betaTauG1",s),p.betaG1=x[0],x=await j(6,"G2",1,p.key.beta.prvKey,p.key.tau.prvKey,"betaTauG2",s),p.betaG2=x[0],p.partialHash=f3(C);const P=new Uint8Array(d.F1.n8*2*6+d.F2.n8*2*3);Wu(P,0,d,p.key,!1),C.update(new Uint8Array(P));const W=C.digest();s&&s.info(Bn(W,"Contribution Response Hash imported: "));const K=xn.create({dkLen:64});return K.update(W),await b(v,"G1",2,2**u*2-1,"tauG1",s),await b(v,"G2",3,2**u,"tauG2",s),await b(v,"G1",4,2**u,"alphaTauG1",s),await b(v,"G1",5,2**u,"betaTauG1",s),await b(v,"G2",6,1,"betaG2",s),p.nextChallenge=K.digest(),s&&s.info(Bn(p.nextChallenge,"Next Challenge Hash: ")),m.push(p),await y3(v,d,m),await a.close(),await v.close(),W;async function j(B,J,it,st,z,I,w){const T=[];a.pos=l[B][0].p,await We(v,B),A[B]=v.pos;const V=d[J],Y=V.F.n8*2,Q=Math.floor((1<<20)/Y);let $=st;for(let F=0;F<it;F+=Q){w&&w.debug(`applying key${I}: ${F}/${it}`);const R=Math.min(it-F,Q),_=await a.read(R*Y),k=await V.batchApplyKey(_,$,z),H=v.write(k),L=await V.batchLEMtoC(k);if(C.update(L),await H,F==0)for(let g=0;g<Math.min(2,it);g++)T.push(V.fromRprLEM(k,g*Y));$=d.Fr.mul($,d.Fr.exp(z,R))}return await Ve(v),T}async function b(B,J,it,st,z,I){const w=d[J],T=w.F.n8*2,V=Math.floor((1<<24)/T),Y=B.pos;B.pos=A[it];for(let Q=0;Q<st;Q+=V){I&&I.debug(`Hashing ${z}: ${Q}/${st}`);const $=Math.min(st-Q,V),F=await B.read($*T),R=await w.batchLEMtoU(F);K.update(R)}B.pos=Y}}async function jet(n,t,e,i,r){const{fd:s,sections:o}=await sn(n,"ptau",1),{curve:a,power:l,ceremonyPower:d}=await Zr(s,o);if(l!=d)throw r&&r.error("This file has been reduced. You cannot contribute into a reduced file."),new Error("This file has been reduced. You cannot contribute into a reduced file.");o[12]&&r&&r.warn("WARNING: Contributing into a file that has phase2 calculated. You will have to prepare phase2 again.");const u=await Vu(s,a,o),h={name:e,type:0};let m;const p=await mg(i);u.length>0?m=u[u.length-1].nextChallenge:m=qu(a,l,r),h.key=g3(a,m,p);const E=xn.create({dkLen:64});E.update(m);const C=await sr(t,"ptau",1,7);await il(C,a,l);const v=[];let A;A=await K(2,"G1",2**l*2-1,a.Fr.e(1),h.key.tau.prvKey,"tauG1"),h.tauG1=A[1],A=await K(3,"G2",2**l,a.Fr.e(1),h.key.tau.prvKey,"tauG2"),h.tauG2=A[1],A=await K(4,"G1",2**l,h.key.alpha.prvKey,h.key.tau.prvKey,"alphaTauG1"),h.alphaG1=A[0],A=await K(5,"G1",2**l,h.key.beta.prvKey,h.key.tau.prvKey,"betaTauG1"),h.betaG1=A[0],A=await K(6,"G2",1,h.key.beta.prvKey,h.key.tau.prvKey,"betaTauG2"),h.betaG2=A[0],h.partialHash=f3(E);const x=new Uint8Array(a.F1.n8*2*6+a.F2.n8*2*3);Wu(x,0,a,h.key,!1),E.update(new Uint8Array(x));const P=E.digest();r&&r.info(Bn(P,"Contribution Response Hash imported: "));const W=xn.create({dkLen:64});return W.update(P),await j(C,"G1",2,2**l*2-1,"tauG1"),await j(C,"G2",3,2**l,"tauG2"),await j(C,"G1",4,2**l,"alphaTauG1"),await j(C,"G1",5,2**l,"betaTauG1"),await j(C,"G2",6,1,"betaG2"),h.nextChallenge=W.digest(),r&&r.info(Bn(h.nextChallenge,"Next Challenge Hash: ")),u.push(h),await y3(C,a,u),await s.close(),await C.close(),P;async function K(b,B,J,it,st,z){const I=[];s.pos=o[b][0].p,await We(C,b),v[b]=C.pos;const w=a[B],T=w.F.n8*2,V=Math.floor((1<<20)/T);let Y=it;for(let Q=0;Q<J;Q+=V){r&&r.debug(`processing: ${z}: ${Q}/${J}`);const $=Math.min(J-Q,V),F=await s.read($*T),R=await w.batchApplyKey(F,Y,st),_=C.write(R),k=await w.batchLEMtoC(R);if(E.update(k),await _,Q==0)for(let H=0;H<Math.min(2,J);H++)I.push(w.fromRprLEM(R,H*T));Y=a.Fr.mul(Y,a.Fr.exp(st,$))}return await Ve(C),I}async function j(b,B,J,it,st){const z=a[B],I=z.F.n8*2,w=Math.floor((1<<24)/I),T=b.pos;b.pos=v[J];for(let V=0;V<it;V+=w){r&&V&&r.debug(`Hashing ${st}: `+V);const Y=Math.min(it-V,w),Q=await b.read(Y*I),$=await z.batchLEMtoU(Q);W.update($)}b.pos=T}}async function Uet(n,t,e){const{fd:i,sections:r}=await sn(n,"ptau",1),{curve:s,power:o}=await Zr(i,r),a=await sr(t,"ptau",1,11);await il(a,s,o),await Ze(i,r,a,2),await Ze(i,r,a,3),await Ze(i,r,a,4),await Ze(i,r,a,5),await Ze(i,r,a,6),await Ze(i,r,a,7),await l(2,12,"G1","tauG1"),await l(3,13,"G2","tauG2"),await l(4,14,"G1","alphaTauG1"),await l(5,15,"G1","betaTauG1"),await i.close(),await a.close();return;async function l(d,u,h,m){e&&e.debug("Starting section: "+m),await We(a,u);for(let E=0;E<=o;E++)await p(E);d==2&&await p(o+1),await Ve(a);async function p(E){const C=2**E,v=s[h],A=v.F.n8*2;let x;x=new Qt(C*A),await an(i,r,d),d==2&&E==o+1?(await i.readToBuffer(x,0,(C-1)*A),x.set(s.G1.zeroAffine,(C-1)*A)):await i.readToBuffer(x,0,C*A),await cn(i,!0),x=await v.lagrangeEvaluations(x,"affine","affine",e,m),await a.write(x)}}}async function Det(n,t,e){const{fd:i,sections:r}=await sn(n,"ptau",1),{curve:s,power:o,ceremonyPower:a}=await Zr(i,r),l=s.G1.F.n8*2,d=s.G2.F.n8*2;for(let h=1;h<o;h++)await u(h);return await i.close(),!0;async function u(h){let m=h.toString();for(;m.length<2;)m="0"+m;e&&e.debug("Writing Power: "+m);const p=await sr(t+m+".ptau","ptau",1,11);await il(p,s,h,a),await Ze(i,r,p,2,(2**h*2-1)*l),await Ze(i,r,p,3,2**h*d),await Ze(i,r,p,4,2**h*l),await Ze(i,r,p,5,2**h*l),await Ze(i,r,p,6,d),await Ze(i,r,p,7),await Ze(i,r,p,12,(2**(h+1)*2-1)*l),await Ze(i,r,p,13,(2**h*2-1)*d),await Ze(i,r,p,14,(2**h*2-1)*l),await Ze(i,r,p,15,(2**h*2-1)*l),await p.close()}}async function zet(n,t,e){const{fd:i,sections:r}=await sn(n,"ptau",1),{curve:s,power:o}=await Zr(i,r),a=await sr(t,"ptau",1,11);await il(a,s,o),await Ze(i,r,a,2),await Ze(i,r,a,3),await Ze(i,r,a,4),await Ze(i,r,a,5),await Ze(i,r,a,6),await Ze(i,r,a,7),await l(2,12,"G1","tauG1"),await Ze(i,r,a,13),await Ze(i,r,a,14),await Ze(i,r,a,15),await i.close(),await a.close();return;async function l(d,u,h,m){e&&e.debug("Starting section: "+m),await We(a,u);const p=r[u][0].size,E=i.pageSize;await an(i,r,u);for(let v=0;v<p;v+=E){const A=Math.min(p-v,E),x=await i.read(A);await a.write(x)}await cn(i),await C(o+1),await Ve(a);async function C(v){const A=2**v,x=s[h],P=x.F.n8*2;let W;W=new Qt(A*P),await an(i,r,d),v==o+1?(await i.readToBuffer(W,0,(A-1)*P),W.set(s.G1.zeroAffine,(A-1)*P)):await i.readToBuffer(W,0,A*P),await cn(i,!0),W=await x.lagrangeEvaluations(W,"affine","affine",e,m),await a.write(W)}}}async function Get(n,t){const{fd:e,sections:i}=await sn(n,"ptau",1),{curve:r,power:s}=await Zr(e,i),o={};return o.q=r.q,o.power=s,o.contributions=await Vu(e,r,i),o.tauG1=await a(2,"G1",2**s*2-1,"tauG1"),o.tauG2=await a(3,"G2",2**s,"tauG2"),o.alphaTauG1=await a(4,"G1",2**s,"alphaTauG1"),o.betaTauG1=await a(5,"G1",2**s,"betaTauG1"),o.betaG2=await a(6,"G2",1,"betaG2"),o.lTauG1=await l(12,"G1","lTauG1"),o.lTauG2=await l(13,"G2","lTauG2"),o.lAlphaTauG1=await l(14,"G1","lAlphaTauG2"),o.lBetaTauG1=await l(15,"G1","lBetaTauG2"),await e.close(),bm(r.Fr,o);async function a(d,u,h,m){const p=r[u],E=p.F.n8*2,C=[];await an(e,i,d);for(let v=0;v<h;v++){t&&v&&v%1e4==0&&console.log(`${m}: `+v);const A=await e.read(E);C.push(p.fromRprLEM(A,0))}return await cn(e),C}async function l(d,u,h){const m=r[u],p=m.F.n8*2,E=[];await an(e,i,d);for(let C=0;C<=s;C++){t&&console.log(`${h}: Power: ${C}`),E[C]=[];const v=2**C;for(let A=0;A<v;A++){t&&A&&A%1e4==0&&console.log(`${h}: ${A}/${v}`);const x=await e.read(p);E[C].push(m.fromRprLEM(x,0))}}return await cn(e,!0),E}}var Wet=Object.freeze({__proto__:null,newAccumulator:Net,exportChallenge:Met,importResponse:Bet,verify:Pet,challengeContribute:Oet,beacon:Fet,contribute:jet,preparePhase2:Uet,truncate:Det,convert:zet,exportJson:Get});function Vet(n,t,e){for(let r=0;r<n.constraints.length;r++)i(n.constraints[r]);function i(r){const s=a=>{let l="";return Object.keys(a).forEach(u=>{let h=t.varIdx2Name[u];h=="one"&&(h="1");let m=n.curve.Fr.toString(a[u]);m=="1"&&(m=""),m=="-1"&&(m="-"),l!=""&&m[0]!="-"&&(m="+"+m),l!=""&&(m=" "+m),l=l+m+h}),l},o=`[ ${s(r[0])} ] * [ ${s(r[1])} ] - [ ${s(r[2])} ] = 0`;e&&e.info(o)}}const Cs=262144,qet={get:function(n,t){return isNaN(t)?n[t]:n.getElement(t)},set:function(n,t,e){return isNaN(t)?(n[t]=e,!0):n.setElement(t,e)}};class $et{constructor(t){this.length=t||0,this.arr=new Array(Cs);for(let e=0;e<t;e+=Cs)this.arr[e/Cs]=new Array(Math.min(Cs,t-e));return this}push(){for(let t=0;t<arguments.length;t++)this.setElement(this.length,arguments[t])}slice(t,e){const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=this.getElement(r);return i}getElement(t){t=parseInt(t);const e=Math.floor(t/Cs),i=t%Cs;return this.arr[e]?this.arr[e][i]:void 0}setElement(t,e){t=parseInt(t);const i=Math.floor(t/Cs);this.arr[i]||(this.arr[i]=new Array(Cs));const r=t%Cs;return this.arr[i][r]=e,t>=this.length&&(this.length=t+1),!0}getKeys(){const t=new nM;for(let e=0;e<this.arr.length;e++)if(this.arr[e])for(let i=0;i<this.arr[e].length;i++)typeof this.arr[e][i]<"u"&&t.push(e*Cs+i);return t}}class nM{constructor(t){const e=new $et(t);return new Proxy(e,qet)}}var w3=nM;const pb=4,mb=5;async function iM(n,t,e){let i;typeof e=="object"?i=e:typeof e>"u"?i={singleThread:!1}:i={singleThread:e};const r={};if(await an(n,t,1),r.n8=await n.readULE32(),r.prime=await Ws(n,r.n8),i.F){if(i.F.p!=r.prime)throw new Error("Different Prime");r.F=i.F}else if(i.getFieldFromPrime)r.F=await i.getFieldFromPrime(r.prime,i.singleThread);else if(i.getCurveFromPrime)r.curve=await i.getCurveFromPrime(r.prime,i.singleThread),r.F=r.curve.Fr;else try{r.curve=await ctt(r.prime,i.singleThread),r.F=r.curve.Fr}catch{r.F=new r3(r.prime)}return r.nVars=await n.readULE32(),r.nOutputs=await n.readULE32(),r.nPubInputs=await n.readULE32(),r.nPrvInputs=await n.readULE32(),r.nLabels=await n.readULE64(),r.nConstraints=await n.readULE32(),r.useCustomGates=typeof t[pb]<"u"&&t[pb]!==null&&typeof t[mb]<"u"&&t[mb]!==null,await cn(n),r}async function Het(n,t,e,i,r){let s;typeof i=="object"?s=i:typeof i>"u"?s={}:s={logger:i,loggerCtx:r};const o=await Xe(n,t,2);let a=0,l;e.nConstraints>1<<20?l=new w3:l=[];for(let h=0;h<e.nConstraints;h++){s.logger&&h%1e5==0&&s.logger.info(`${s.loggerCtx}: Loading constraints: ${h}/${e.nConstraints}`);const m=d();l.push(m)}return l;function d(){const h=[];return h[0]=u(),h[1]=u(),h[2]=u(),h}function u(){const h={},m=o.slice(a,a+4);a+=4;const E=new DataView(m.buffer).getUint32(0,!0),C=o.slice(a,a+(4+e.n8)*E);a+=(4+e.n8)*E;const v=new DataView(C.buffer);for(let A=0;A<E;A++){const x=v.getUint32(A*(4+e.n8),!0),P=e.F.fromRprLE(C,A*(4+e.n8)+4);h[x]=P}return h}}async function Ket(n,t,e,i,r){let s;typeof i=="object"?s=i:typeof i>"u"?s={}:s={logger:i,loggerCtx:r};const o=await Xe(n,t,3);let a=0,l;e.nVars>1<<20?l=new w3:l=[];for(let u=0;u<e.nVars;u++){s.logger&&u%1e4==0&&s.logger.info(`${s.loggerCtx}: Loading map: ${u}/${e.nVars}`);const h=d();l.push(h)}return l;function d(){const u=o.slice(a,a+8);a+=8;const h=new DataView(u.buffer),m=h.getUint32(0,!0);return h.getUint32(4,!0)*4294967296+m}}async function yg(n,t,e){if(typeof e!="object")throw new Error("readR1csFd: options must be an object");e.loadConstraints="loadConstraints"in e?e.loadConstraints:!0,e.loadMap="loadMap"in e?e.loadMap:!1,e.loadCustomGates="loadCustomGates"in e?e.loadCustomGates:!0;const i=await iM(n,t,e);return e.loadConstraints&&(i.constraints=await Het(n,t,i,e)),e.loadMap&&(i.map=await Ket(n,t,i,e)),e.loadCustomGates&&(i.useCustomGates?(i.customGates=await Zet(n,t,i),i.customGatesUses=await Qet(n,t,e)):(i.customGates=[],i.customGatesUses=[])),i}async function rM(n,t,e,i,r,s){let o;typeof t=="object"?o=t:typeof t>"u"?o={loadConstraints:!0,loadMap:!1,loadCustomGates:!0}:o={loadConstraints:t,loadMap:e,singleThread:i,logger:r,loggerCtx:s};const{fd:a,sections:l}=await sn(n,"r1cs",1),d=await yg(a,l,o);return await a.close(),d}async function Zet(n,t,e){await an(n,t,pb);let i=await n.readULE32(),r=[];for(let s=0;s<i;s++){let o={};o.templateName=await n.readString();let a=await n.readULE32();o.parameters=Array(a);let l=await n.read(e.n8*a);for(let d=0;d<a;d++)o.parameters[d]=e.F.fromRprLE(l,d*e.n8,e.n8);r.push(o)}return await cn(n),r}async function Qet(n,t,e){const i=await Xe(n,t,mb),r=new Uint32Array(i.buffer,i.byteOffset,i.byteLength/4),s=r[0];let o=1,a;s>1<<20?a=new w3:a=[];for(let l=0;l<s;l++){e.logger&&l%1e5==0&&e.logger.info(`${e.loggerCtx}: Loading custom gate uses: ${l}/${s}`);let d={};d.id=r[o++];let u=r[o++];d.signals=[];for(let h=0;h<u;h++){const m=r[o++],p=r[o++];d.signals.push(p*4294967296+m)}a.push(d)}return a}const Yet=be.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),Xet=be.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");async function Jet(n,t){const e=await rM(n);return be.eq(e.prime,Xet)?t&&t.info("Curve: bn-128"):be.eq(e.prime,Yet)?t&&t.info("Curve: bls12-381"):t&&t.info(`Unknown Curve. Prime: ${be.toString(e.prime)}`),t&&t.info(`# of Wires: ${e.nVars}`),t&&t.info(`# of Constraints: ${e.nConstraints}`),t&&t.info(`# of Private Inputs: ${e.nPrvInputs}`),t&&t.info(`# of Public Inputs: ${e.nPubInputs}`),t&&t.info(`# of Labels: ${e.nLabels}`),t&&t.info(`# of Outputs: ${e.nOutputs}`),e}async function tnt(n,t){const e=await rM(n,!0,!0,!0,t),i=e.curve.Fr;return delete e.curve,delete e.F,bm(i,e)}var ent=Object.freeze({__proto__:null,print:Vet,info:Jet,exportJson:tnt});async function Jp(n){const t={labelIdx2Name:["one"],varIdx2Name:["one"],componentIdx2Name:[]},e=await Wa(n),i=await e.read(e.totalSize),s=new TextDecoder("utf-8").decode(i).split(`
`);for(let a=0;a<s.length;a++){const l=s[a].split(",");l.length==4&&(t.varIdx2Name[l[1]]?t.varIdx2Name[l[1]]+="|"+l[3]:t.varIdx2Name[l[1]]=l[3],t.labelIdx2Name[l[0]]=l[3],t.componentIdx2Name[l[2]]||(t.componentIdx2Name[l[2]]=o(l[3])))}return await e.close(),t;function o(a){const l=a.split(".");return l.pop(),l.join(".")}}const{unstringifyBigInts:nnt}=An;async function int(n,t,e,i,r,s){const o=nnt(n),a=await Wa(t),l=await a.read(a.totalSize);await a.close();const d={...r,sanityCheck:!0};let u=await Jp(i);r.set&&(u||(u=await Jp(i)),d.logSetSignal=function(E,C){s&&s.info("SET "+u.labelIdx2Name[E]+" <-- "+C.toString())}),r.get&&(u||(u=await Jp(i)),d.logGetSignal=function(E,C){s&&s.info("GET "+u.labelIdx2Name[E]+" --> "+C.toString())}),r.trigger&&(u||(u=await Jp(i)),d.logStartComponent=function(E){s&&s.info("START: "+u.componentIdx2Name[E])},d.logFinishComponent=function(E){s&&s.info("FINISH: "+u.componentIdx2Name[E])}),d.sym=u;const h=await XN(l,d),m=await h.calculateWitness(o,!0),p=await sr(e,"wtns",2,2);await uet(p,m,h.prime),await p.close()}async function rnt(n){return await fet(n)}async function snt(n,t,e){e&&e.info("WITNESS CHECKING STARTED"),e&&e.info("> Reading r1cs file");const{fd:i,sections:r}=await sn(n,"r1cs",1),s=await yg(i,r,{loadConstraints:!1,loadCustomGates:!1});e&&e.info("> Reading witness file");const{fd:o,sections:a}=await sn(t,"wtns",2),l=await ph(o,a);if(!be.eq(s.prime,l.q))throw new Error("Curve of the witness does not match the curve of the proving key");const d=await Xe(o,a,2);await o.close();const h=(await PN(s.prime)).Fr,m=h.n8,p=await Xe(i,r,2);e&&(e.info("----------------------------"),e.info("  WITNESS CHECK"),e.info(`  Curve:          ${s.curve.name}`),e.info(`  Vars (wires):   ${s.nVars}`),e.info(`  Outputs:        ${s.nOutputs}`),e.info(`  Public Inputs:  ${s.nPubInputs}`),e.info(`  Private Inputs: ${s.nPrvInputs}`),e.info(`  Labels:         ${s.nLabels}`),e.info(`  Constraints:    ${s.nConstraints}`),e.info(`  Custom Gates:   ${s.useCustomGates}`),e.info("----------------------------")),e&&e.info("> Checking witness correctness");let E=0,C=!0;for(let P=0;P<s.nConstraints;P++){e&&P!==0&&P%5e5===0&&e.info(` processing r1cs constraints ${P}/${s.nConstraints}`);const W=A(),K=A(),j=A(),b=v(W),B=v(K),J=v(j);if(!h.eq(h.sub(h.mul(b,B),J),h.zero)){e.warn(" aborting checking process at constraint "+P),C=!1;break}}return i.close(),e&&(C?(e.info("WITNESS IS CORRECT"),e.info("WITNESS CHECKING FINISHED SUCCESSFULLY")):(e.warn("WITNESS IS NOT CORRECT"),e.warn("WITNESS CHECKING FINISHED UNSUCCESSFULLY"))),C;function v(P){let W=h.zero;return Object.keys(P).forEach(j=>{const b=x(j),B=P[j];W=h.add(W,h.mul(b,B))}),W}function A(){const P={},W=p.slice(E,E+4);E+=4;const j=new DataView(W.buffer).getUint32(0,!0),b=p.slice(E,E+(4+s.n8)*j);E+=(4+s.n8)*j;const B=new DataView(b.buffer);for(let J=0;J<j;J++){const it=B.getUint32(J*(4+s.n8),!0),st=s.F.fromRprLE(b,J*(4+s.n8)+4);P[it]=st}return P}function x(P){return h.fromRprLE(d.slice(P*m,P*m+m))}}var ont=Object.freeze({__proto__:null,calculate:gg,debug:int,exportJson:rnt,check:snt});const As=262144,ant={get:function(n,t){return isNaN(t)?n[t]:n.getElement(t)},set:function(n,t,e){return isNaN(t)?(n[t]=e,!0):n.setElement(t,e)}};class cnt{constructor(t){this.length=t||0,this.arr=new Array(As);for(let e=0;e<t;e+=As)this.arr[e/As]=new Array(Math.min(As,t-e));return this}push(){for(let t=0;t<arguments.length;t++)this.setElement(this.length,arguments[t])}slice(t,e){const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=this.getElement(r);return i}getElement(t){t=parseInt(t);const e=Math.floor(t/As),i=t%As;return this.arr[e]?this.arr[e][i]:void 0}setElement(t,e){t=parseInt(t);const i=Math.floor(t/As);this.arr[i]||(this.arr[i]=new Array(As));const r=t%As;return this.arr[i][r]=e,t>=this.length&&(this.length=t+1),!0}getKeys(){const t=new sM;for(let e=0;e<this.arr.length;e++)if(this.arr[e])for(let i=0;i<this.arr[e].length;i++)typeof this.arr[e][i]<"u"&&t.push(e*As+i);return t}}class sM{constructor(t){const e=new cnt(t);return new Proxy(e,ant)}}var Tr=sM;async function oM(n,t,e,i){const l=xn.create({dkLen:64}),{fd:d,sections:u}=await sn(t,"ptau",1),{curve:h,power:m}=await Zr(d,u),{fd:p,sections:E}=await sn(n,"r1cs",1),C=await iM(p,E,!1),v=await sr(e,"zkey",1,10,1<<22,1<<24),A=h.G1.F.n8*2,x=h.G2.F.n8*2;if(C.prime!=h.r)return i&&i.error("r1cs curve does not match powers of tau ceremony curve"),-1;const P=Va(C.nConstraints+C.nPubInputs+C.nOutputs+1-1)+1;if(P>m)return i&&i.error(`circuit too big for this power of tau ceremony. ${C.nConstraints}*2 > 2**${m}`),-1;if(!u[12])return i&&i.error("Powers of tau is not prepared."),-1;const W=C.nOutputs+C.nPubInputs,K=2**P;await We(v,1),await v.writeULE32(1),await Ve(v),await We(v,2);const j=h.q,b=(Math.floor((be.bitLength(j)-1)/64)+1)*8,B=h.r,J=(Math.floor((be.bitLength(B)-1)/64)+1)*8,it=be.mod(be.shl(1,J*8),B),st=h.Fr.e(be.mod(be.mul(it,it),B));await v.writeULE32(b),await gs(v,j,b),await v.writeULE32(J),await gs(v,B,J),await v.writeULE32(C.nVars),await v.writeULE32(W),await v.writeULE32(K);let z;z=await d.read(A,u[4][0].p),await v.write(z),z=await h.G1.batchLEMtoU(z),l.update(z);let I;I=await d.read(A,u[5][0].p),await v.write(I),I=await h.G1.batchLEMtoU(I),l.update(I);let w;w=await d.read(x,u[6][0].p),await v.write(w),w=await h.G2.batchLEMtoU(w),l.update(w);const T=new Uint8Array(A);h.G1.toRprLEM(T,0,h.G1.g);const V=new Uint8Array(x);h.G2.toRprLEM(V,0,h.G2.g);const Y=new Uint8Array(A);h.G1.toRprUncompressed(Y,0,h.G1.g);const Q=new Uint8Array(x);h.G2.toRprUncompressed(Q,0,h.G2.g),await v.write(V),await v.write(T),await v.write(V),l.update(Q),l.update(Y),l.update(Q),await Ve(v),i&&i.info("Reading r1cs");let $=await Xe(p,E,2);const F=new Tr(C.nVars),R=new Tr(C.nVars),_=new Tr(C.nVars),k=new Tr(C.nVars-W-1),H=new Array(W+1);i&&i.info("Reading tauG1");let L=await Xe(d,u,12,(K-1)*A,K*A);i&&i.info("Reading tauG2");let g=await Xe(d,u,13,(K-1)*x,K*x);i&&i.info("Reading alphatauG1");let D=await Xe(d,u,14,(K-1)*A,K*A);i&&i.info("Reading betatauG1");let S=await Xe(d,u,15,(K-1)*A,K*A);await G(),await ft(3,"G1",H,"IC"),await ct(),await wt(),await ft(8,"G1",k,"C"),await ft(5,"G1",F,"A"),await ft(6,"G1",R,"B1"),await ft(7,"G2",_,"B2");const lt=l.digest();return await We(v,10),await v.write(lt),await v.writeULE32(0),await Ve(v),i&&i.info(Bn(lt,"Circuit hash: ")),await v.close(),await p.close(),await d.close(),lt;async function ct(){await We(v,9);const Gt=new Qt(K*A);if(P<h.Fr.s){let $t=await Xe(d,u,12,(K*2-1)*A,K*2*A);for(let kt=0;kt<K;kt++){i&&kt%1e4==0&&i.debug(`splitting buffer: ${kt}/${K}`);const Rt=$t.slice((kt*2+1)*A,(kt*2+1)*A+A);Gt.set(Rt,kt*A)}}else if(P==h.Fr.s){const $t=u[12][0].p+(2**(P+1)-1)*A;await d.readToBuffer(Gt,0,K*A,$t+K*A)}else throw i&&i.error("Circuit too big"),new Error("Circuit too big for this curve");await v.write(Gt),await Ve(v)}async function G(){const Gt=new Uint8Array(12+h.Fr.n8),$t=new DataView(Gt.buffer),kt=new Uint8Array(h.Fr.n8);h.Fr.toRprLE(kt,0,h.Fr.e(1));let Rt=0;function Ht(){const Yt=$.slice(Rt,Rt+4);return Rt+=4,new DataView(Yt.buffer).getUint32(0,!0)}const Kt=new Tr;for(let Yt=0;Yt<C.nConstraints;Yt++){i&&Yt%1e4==0&&i.debug(`processing constraints: ${Yt}/${C.nConstraints}`);const ut=Ht();for(let at=0;at<ut;at++){const M=Ht(),O=Rt;Rt+=h.Fr.n8;const ht=0,Et=A*Yt,mt=3,xt=A*Yt;typeof F[M]>"u"&&(F[M]=[]),F[M].push([ht,Et,O]),M<=W?(typeof H[M]>"u"&&(H[M]=[]),H[M].push([mt,xt,O])):(typeof k[M-W-1]>"u"&&(k[M-W-1]=[]),k[M-W-1].push([mt,xt,O])),Kt.push([0,Yt,M,O])}const X=Ht();for(let at=0;at<X;at++){const M=Ht(),O=Rt;Rt+=h.Fr.n8;const ht=0,Et=A*Yt,mt=1,xt=x*Yt,Lt=2,At=A*Yt;typeof R[M]>"u"&&(R[M]=[]),R[M].push([ht,Et,O]),typeof _[M]>"u"&&(_[M]=[]),_[M].push([mt,xt,O]),M<=W?(typeof H[M]>"u"&&(H[M]=[]),H[M].push([Lt,At,O])):(typeof k[M-W-1]>"u"&&(k[M-W-1]=[]),k[M-W-1].push([Lt,At,O])),Kt.push([1,Yt,M,O])}const nt=Ht();for(let at=0;at<nt;at++){const M=Ht(),O=Rt;Rt+=h.Fr.n8;const ht=0,Et=A*Yt;M<=W?(typeof H[M]>"u"&&(H[M]=[]),H[M].push([ht,Et,O])):(typeof k[M-W-1]>"u"&&(k[M-W-1]=[]),k[M-W-1].push([ht,Et,O]))}}for(let Yt=0;Yt<=W;Yt++){const X=A*(C.nConstraints+Yt),nt=3,at=A*(C.nConstraints+Yt);typeof F[Yt]>"u"&&(F[Yt]=[]),F[Yt].push([0,X,-1]),typeof H[Yt]>"u"&&(H[Yt]=[]),H[Yt].push([nt,at,-1]),Kt.push([0,C.nConstraints+Yt,Yt,-1])}await We(v,4);const se=new Qt(Kt.length*(12+h.Fr.n8)+4),_e=new Uint8Array(4);new DataView(_e.buffer).setUint32(0,Kt.length,!0),se.set(_e);let de=4;for(let Yt=0;Yt<Kt.length;Yt++)i&&Yt%1e5==0&&i.debug(`writing coeffs: ${Yt}/${Kt.length}`),fe(Kt[Yt]);await v.write(se),await Ve(v);function fe(Yt){$t.setUint32(0,Yt[0],!0),$t.setUint32(4,Yt[1],!0),$t.setUint32(8,Yt[2],!0);let ut;Yt[3]>=0?ut=h.Fr.fromRprLE($.slice(Yt[3],Yt[3]+h.Fr.n8),0):ut=h.Fr.fromRprLE(kt,0);const X=h.Fr.mul(ut,st);h.Fr.toRprLE(Gt,12,X),se.set(Gt,de),de+=Gt.length}}async function ft(Gt,$t,kt,Rt){const Kt=h[$t];Pt(kt.length),await We(v,Gt);let se=[],_e=0;for(;_e<kt.length;){let ae=0;for(;_e<kt.length&&ae<h.tm.concurrency;){i&&i.debug(`Writing points start ${Rt}: ${_e}/${kt.length}`);let fe=1,Yt=kt[_e]?kt[_e].length:0;for(;_e+fe<kt.length&&Yt+(kt[_e+fe]?kt[_e+fe].length:0)<32768&&fe<32768;)Yt+=kt[_e+fe]?kt[_e+fe].length:0,fe++;const ut=kt.slice(_e,_e+fe),X=_e;se.push(vt($t,ut,i,Rt).then(nt=>(i&&i.debug(`Writing points end ${Rt}: ${X}/${kt.length}`),nt))),_e+=fe,ae++}const de=await Promise.all(se);for(let fe=0;fe<de.length;fe++){await v.write(de[fe][0]);const Yt=await Kt.batchLEMtoU(de[fe][0]);l.update(Yt)}se=[]}await Ve(v)}async function vt(Gt,$t,kt,Rt){const Ht=h[Gt],Kt=Ht.F.n8*2,se=Ht.F.n8*3,_e=Ht.F.n8*2;let ae,de,fe,Yt;if(Gt=="G1")ae="g1m_timesScalarAffine",de="g1m_multiexpAffine",fe="g1m_batchToAffine",Yt="g1m_zero";else if(Gt=="G2")ae="g2m_timesScalarAffine",de="g2m_multiexpAffine",fe="g2m_batchToAffine",Yt="g2m_zero";else throw new Error("Invalid group");let ut=0;for(let mt=0;mt<$t.length;mt++)ut+=$t[mt]?$t[mt].length:0;let X,nt;ut>32768?(X=new Qt(ut*Kt),nt=new Qt(ut*h.Fr.n8)):(X=new Uint8Array(ut*Kt),nt=new Uint8Array(ut*h.Fr.n8));let at=0,M=0;const O=[L,g,D,S],ht=new Uint8Array(h.Fr.n8);h.Fr.toRprLE(ht,0,h.Fr.e(1));let Et=0;for(let mt=0;mt<$t.length;mt++)if($t[mt])for(let xt=0;xt<$t[mt].length;xt++)kt&&xt&&xt%1e4==0&&kt.debug(`Configuring big array ${Rt}: ${xt}/${$t[mt].length}`),X.set(O[$t[mt][xt][0]].slice($t[mt][xt][1],$t[mt][xt][1]+Kt),Et*Kt),$t[mt][xt][2]>=0?nt.set($.slice($t[mt][xt][2],$t[mt][xt][2]+h.Fr.n8),Et*h.Fr.n8):nt.set(ht,Et*h.Fr.n8),Et++;if($t.length>1){const mt=[];mt.push({cmd:"ALLOCSET",var:0,buff:X}),mt.push({cmd:"ALLOCSET",var:1,buff:nt}),mt.push({cmd:"ALLOC",var:2,len:$t.length*se}),at=0,M=0;let xt=0;for(let At=0;At<$t.length;At++){if(!$t[At]){mt.push({cmd:"CALL",fnName:Yt,params:[{var:2,offset:xt}]}),xt+=se;continue}$t[At].length==1?mt.push({cmd:"CALL",fnName:ae,params:[{var:0,offset:at},{var:1,offset:M},{val:h.Fr.n8},{var:2,offset:xt}]}):mt.push({cmd:"CALL",fnName:de,params:[{var:0,offset:at},{var:1,offset:M},{val:h.Fr.n8},{val:$t[At].length},{var:2,offset:xt}]}),at+=Kt*$t[At].length,M+=h.Fr.n8*$t[At].length,xt+=se}return mt.push({cmd:"CALL",fnName:fe,params:[{var:2},{val:$t.length},{var:2}]}),mt.push({cmd:"GET",out:0,var:2,len:$t.length*_e}),await h.tm.queueAction(mt)}else{let mt=await Ht.multiExpAffine(X,nt,kt,Rt);return mt=[Ht.toAffine(mt)],mt}}async function wt(){Pt(K-1);for(let $t=0;$t<K-1;$t+=16384){i&&i.debug(`HashingHPoints: ${$t}/${K}`);const kt=Math.min(K-1,16384);await bt($t,kt)}}async function bt(Gt,$t){const kt=await d.read($t*A,u[2][0].p+(Gt+K)*A),Rt=await d.read($t*A,u[2][0].p+Gt*A),Ht=h.tm.concurrency,Kt=Math.floor($t/Ht),se=[];for(let ae=0;ae<Ht;ae++){let de;if(ae<Ht-1?de=Kt:de=$t-ae*Kt,de==0)continue;const fe=kt.slice(ae*Kt*A,(ae*Kt+de)*A),Yt=Rt.slice(ae*Kt*A,(ae*Kt+de)*A);se.push(Ft(fe,Yt))}const _e=await Promise.all(se);for(let ae=0;ae<_e.length;ae++)l.update(_e[ae][0])}async function Ft(Gt,$t){const kt=Gt.byteLength/A,Rt=h.G1.F.n8*3,Ht=[];Ht.push({cmd:"ALLOCSET",var:0,buff:Gt}),Ht.push({cmd:"ALLOCSET",var:1,buff:$t}),Ht.push({cmd:"ALLOC",var:2,len:kt*Rt});for(let se=0;se<kt;se++)Ht.push({cmd:"CALL",fnName:"g1m_subAffine",params:[{var:0,offset:se*A},{var:1,offset:se*A},{var:2,offset:se*Rt}]});return Ht.push({cmd:"CALL",fnName:"g1m_batchToAffine",params:[{var:2},{val:kt},{var:2}]}),Ht.push({cmd:"CALL",fnName:"g1m_batchLEMtoU",params:[{var:2},{val:kt},{var:2}]}),Ht.push({cmd:"GET",out:0,var:2,len:kt*A}),await h.tm.queueAction(Ht)}function Pt(Gt){const $t=new Uint8Array(4);new DataView($t.buffer,$t.byteOffset,$t.byteLength).setUint32(0,Gt,!1),l.update($t)}}async function lnt(n,t,e){const{fd:i,sections:r}=await sn(n,"zkey",2),s=await ys(i,r);if(s.protocol!="groth16")throw new Error("zkey file is not groth16");const o=await or(s.q),a=o.G1.F.n8*2,l=o.G2.F.n8*2,d=await ku(i,o,r),u=await Gu(t);await x(s.vk_alpha_1),await x(s.vk_beta_1),await P(s.vk_beta_2),await P(s.vk_gamma_2),await x(s.vk_delta_1),await P(s.vk_delta_2);let h;h=await Xe(i,r,3),h=await o.G1.batchLEMtoU(h),await W("G1",h);const m=await Xe(i,r,9);let p;p=await o.G1.fft(m,"affine","jacobian",e),p=await o.G1.batchApplyKey(p,o.Fr.neg(o.Fr.e(2)),o.Fr.w[s.power+1],"jacobian","affine",e),p=p.slice(0,p.byteLength-a),p=await o.G1.batchLEMtoU(p),await W("G1",p);let E;E=await Xe(i,r,8),E=await o.G1.batchLEMtoU(E),await W("G1",E);let C;C=await Xe(i,r,5),C=await o.G1.batchLEMtoU(C),await W("G1",C);let v;v=await Xe(i,r,6),v=await o.G1.batchLEMtoU(v),await W("G1",v);let A;A=await Xe(i,r,7),A=await o.G2.batchLEMtoU(A),await W("G2",A),await u.write(d.csHash),await K(d.contributions.length);for(let j=0;j<d.contributions.length;j++){const b=d.contributions[j];await x(b.deltaAfter),await x(b.delta.g1_s),await x(b.delta.g1_sx),await P(b.delta.g2_spx),await u.write(b.transcript)}await i.close(),await u.close();async function x(j){const b=new Uint8Array(a);o.G1.toRprUncompressed(b,0,j),await u.write(b)}async function P(j){const b=new Uint8Array(l);o.G2.toRprUncompressed(b,0,j),await u.write(b)}async function W(j,b){let B;j=="G1"?B=a:B=l;const J=new Uint8Array(4);new DataView(J.buffer,J.byteOffset,J.byteLength).setUint32(0,b.byteLength/B,!1),await u.write(J),await u.write(b)}async function K(j){const b=new Uint8Array(4);new DataView(b.buffer,b.byteOffset,b.byteLength).setUint32(0,j,!1),await u.write(b)}}async function unt(n,t,e,i,r){const{fd:s,sections:o}=await sn(n,"zkey",2),a=await ys(s,o,!1);if(a.protocol!="groth16")throw new Error("zkey file is not groth16");const l=await or(a.q),d=l.G1.F.n8*2,u=l.G2.F.n8*2,h=await ku(s,l,o),m={},p=await Wa(t);p.pos=d*3+u*3+8+d*a.nVars+4+d*(a.domainSize-1)+4+d*a.nVars+4+d*a.nVars+4+u*a.nVars,m.csHash=await p.read(64);const E=await p.readUBE32();m.contributions=[];for(let T=0;T<E;T++){const V={delta:{}};V.deltaAfter=await z(p),V.delta.g1_s=await z(p),V.delta.g1_sx=await z(p),V.delta.g2_spx=await I(p),V.transcript=await p.read(64),T<h.contributions.length&&(V.type=h.contributions[T].type,V.type==1&&(V.beaconHash=h.contributions[T].beaconHash,V.numIterationsExp=h.contributions[T].numIterationsExp),h.contributions[T].name&&(V.name=h.contributions[T].name)),m.contributions.push(V)}if(!Fa(m.csHash,h.csHash))return r&&r.error("Hash of the original circuit does not match with the MPC one"),!1;if(h.contributions.length>m.contributions.length)return r&&r.error("The impoerted file does not include new contributions"),!1;for(let T=0;T<h.contributions.length;T++)if(!w(h.contributions[T],m.contributions[T]))return r&&r.error(`Previous contribution ${T} does not match`),!1;if(i)for(let T=h.contributions.length;T<m.contributions.length;T++)m.contributions[T].name=i;const C=await sr(e,"zkey",1,10);if(p.pos=0,p.pos+=d,p.pos+=d,p.pos+=u,p.pos+=u,a.vk_delta_1=await z(p),a.vk_delta_2=await I(p),await p3(C,a),await p.readUBE32()!=a.nPublic+1)return r&&r.error("Invalid number of points in IC"),await C.discard(),!1;if(p.pos+=d*(a.nPublic+1),await Ze(s,o,C,3),await Ze(s,o,C,4),await p.readUBE32()!=a.domainSize-1)return r&&r.error("Invalid number of points in H"),await C.discard(),!1;let x;const P=await p.read(d*(a.domainSize-1)),W=await l.G1.batchUtoLEM(P);x=new Uint8Array(a.domainSize*d),x.set(W),l.G1.toRprLEM(x,d*(a.domainSize-1),l.G1.zeroAffine);const K=l.Fr.neg(l.Fr.inv(l.Fr.e(2))),j=l.Fr.inv(l.Fr.w[a.power+1]);if(x=await l.G1.batchApplyKey(x,K,j,"affine","jacobian",r),x=await l.G1.ifft(x,"jacobian","affine",r),await We(C,9),await C.write(x),await Ve(C),await p.readUBE32()!=a.nVars-a.nPublic-1)return r&&r.error("Invalid number of points in L"),await C.discard(),!1;let B;if(B=await p.read(d*(a.nVars-a.nPublic-1)),B=await l.G1.batchUtoLEM(B),await We(C,8),await C.write(B),await Ve(C),await p.readUBE32()!=a.nVars)return r&&r.error("Invalid number of points in A"),await C.discard(),!1;if(p.pos+=d*a.nVars,await Ze(s,o,C,5),await p.readUBE32()!=a.nVars)return r&&r.error("Invalid number of points in B1"),await C.discard(),!1;if(p.pos+=d*a.nVars,await Ze(s,o,C,6),await p.readUBE32()!=a.nVars)return r&&r.error("Invalid number of points in B2"),await C.discard(),!1;return p.pos+=u*a.nVars,await Ze(s,o,C,7),await m3(C,l,m),await p.close(),await C.close(),await s.close(),!0;async function z(T){const V=await T.read(l.G1.F.n8*2);return l.G1.fromRprUncompressed(V,0)}async function I(T){const V=await T.read(l.G2.F.n8*2);return l.G2.fromRprUncompressed(V,0)}function w(T,V){return!(!l.G1.eq(T.deltaAfter,V.deltaAfter)||!l.G1.eq(T.delta.g1_s,V.delta.g1_s)||!l.G1.eq(T.delta.g1_sx,V.delta.g1_sx)||!l.G2.eq(T.delta.g2_spx,V.delta.g2_spx)||!Fa(T.transcript,V.transcript))}}const Zd=$N;async function aM(n,t,e,i){let r;const{fd:s,sections:o}=await sn(e,"zkey",2),a=await ys(s,o,!1);if(a.protocol!="groth16")throw new Error("zkey file is not groth16");const l=await or(a.q),d=l.G1.F.n8*2,u=await ku(s,l,o),h=xn.create({dkLen:64});h.update(u.csHash);let m=l.G1.g;for(let j=0;j<u.contributions.length;j++){const b=u.contributions[j],B=Ztt(h);if(ds(B,l,b.delta.g1_s),ds(B,l,b.delta.g1_sx),!Fa(B.digest(),b.transcript))return console.log(`INVALID(${j}): Inconsistent transcript `),!1;const J=mh(l,b.transcript);if(r=await Zd(l,b.delta.g1_s,b.delta.g1_sx,J,b.delta.g2_spx),r!==!0)return console.log(`INVALID(${j}): public key G1 and G2 do not have the same ration `),!1;if(r=await Zd(l,m,b.deltaAfter,J,b.delta.g2_spx),r!==!0)return console.log(`INVALID(${j}): deltaAfter does not fillow the public key `),!1;if(b.type==1){const st=await h3(b.beaconHash,b.numIterationsExp),z=l.Fr.fromRng(st),I=l.G1.toAffine(l.G1.fromRng(st)),w=l.G1.toAffine(l.G1.timesFr(I,z));if(l.G1.eq(I,b.delta.g1_s)!==!0)return console.log(`INVALID(${j}): Key of the beacon does not match. g1_s `),!1;if(l.G1.eq(w,b.delta.g1_sx)!==!0)return console.log(`INVALID(${j}): Key of the beacon does not match. g1_sx `),!1}ja(h,l,b);const it=xn.create({dkLen:64});ja(it,l,b),b.contributionHash=it.digest(),m=b.deltaAfter}const{fd:p,sections:E}=await sn(n,"zkey",2),C=await ys(p,E,!1);if(C.protocol!="groth16")throw new Error("zkeyinit file is not groth16");if(!be.eq(C.q,a.q)||!be.eq(C.r,a.r)||C.n8q!=a.n8q||C.n8r!=a.n8r)return i&&i.error("INVALID:  Different curves"),!1;if(C.nVars!=a.nVars||C.nPublic!=a.nPublic||C.domainSize!=a.domainSize)return i&&i.error("INVALID:  Different circuit parameters"),!1;if(!l.G1.eq(a.vk_alpha_1,C.vk_alpha_1))return i&&i.error("INVALID:  Invalid alpha1"),!1;if(!l.G1.eq(a.vk_beta_1,C.vk_beta_1))return i&&i.error("INVALID:  Invalid beta1"),!1;if(!l.G2.eq(a.vk_beta_2,C.vk_beta_2))return i&&i.error("INVALID:  Invalid beta2"),!1;if(!l.G2.eq(a.vk_gamma_2,C.vk_gamma_2))return i&&i.error("INVALID:  Invalid gamma2"),!1;if(!l.G1.eq(a.vk_delta_1,m))return i&&i.error("INVALID:  Invalid delta1"),!1;if(r=await Zd(l,l.G1.g,m,l.G2.g,a.vk_delta_2),r!==!0)return i&&i.error("INVALID:  Invalid delta2"),!1;const v=await ku(p,l,E);if(!Fa(u.csHash,v.csHash))return i&&i.error("INVALID:  Circuit does not match"),!1;if(o[8][0].size!=d*(a.nVars-a.nPublic-1))return i&&i.error("INVALID:  Invalid L section size"),!1;if(o[9][0].size!=d*a.domainSize)return i&&i.error("INVALID:  Invalid H section size"),!1;let A;if(A=await Kd(s,o,p,E,3),!A)return i&&i.error("INVALID:  IC section is not identical"),!1;if(A=await Kd(s,o,p,E,4),!A)return i&&i.error("Coeffs section is not identical"),!1;if(A=await Kd(s,o,p,E,5),!A)return i&&i.error("A section is not identical"),!1;if(A=await Kd(s,o,p,E,6),!A)return i&&i.error("B1 section is not identical"),!1;if(A=await Kd(s,o,p,E,7),!A)return i&&i.error("B2 section is not identical"),!1;if(r=await x("G1",p,E,s,o,8,a.vk_delta_2,C.vk_delta_2,"L section"),r!==!0)return i&&i.error("L section does not match"),!1;if(r=await P(),r!==!0)return i&&i.error("H section does not match"),!1;i&&i.info(Bn(u.csHash,"Circuit Hash: ")),await s.close(),await p.close();for(let j=u.contributions.length-1;j>=0;j--){const b=u.contributions[j];i&&i.info("-------------------------"),i&&i.info(Bn(b.contributionHash,`contribution #${j+1} ${b.name?b.name:""}:`)),b.type==1&&(i&&i.info(`Beacon generator: ${KN(b.beaconHash)}`),i&&i.info(`Beacon iterations Exp: ${b.numIterationsExp}`))}return i&&i.info("-------------------------"),i&&i.info("ZKey Ok!"),!0;async function x(j,b,B,J,it,st,z,I,w){const V=l[j],Y=V.F.n8*2;await an(b,B,st),await an(J,it,st);let Q=V.zero,$=V.zero;const F=B[st][0].size/Y;for(let R=0;R<F;R+=1048576){i&&i.debug(`Same ratio check ${w}:  ${R}/${F}`);const _=Math.min(F-R,1048576),k=await b.read(_*Y),H=await J.read(_*Y),L=fu(4*_),g=await V.multiExpAffine(k,L),D=await V.multiExpAffine(H,L);Q=V.add(Q,g),$=V.add($,D)}return await cn(b),await cn(J),F==0?!0:(r=await Zd(l,Q,$,z,I),r===!0)}async function P(){const b=l.G1,B=l.Fr,J=b.F.n8*2,{fd:it,sections:st}=await sn(t,"ptau",1);let z=new Qt(a.domainSize*a.n8r);const I=new Array(8);for(let $=0;$<8;$++)I[$]=_m(fu(4),0);const w=new $c(I);for(let $=0;$<a.domainSize-1;$++){const F=B.fromRng(w);B.toRprLE(z,$*a.n8r,F)}B.toRprLE(z,(a.domainSize-1)*a.n8r,B.zero);let T=b.zero;for(let $=0;$<a.domainSize;$+=1048576){i&&i.debug(`H Verification(tau):  ${$}/${a.domainSize}`);const F=Math.min(a.domainSize-$,1048576),R=await it.read(J*F,st[2][0].p+a.domainSize*J+$*J),_=await it.read(J*F,st[2][0].p+$*J),k=await W(R,_),H=z.slice($*a.n8r,($+F)*a.n8r),L=await b.multiExpAffine(k,H);T=b.add(T,L)}z=await B.batchToMontgomery(z);let V;if(a.power<B.s)V=B.neg(B.e(2));else{const $=2**B.s,F=B.exp(B.shift,$);V=B.sub(F,B.one)}const Y=a.power<B.s?B.w[a.power+1]:B.shift;z=await B.batchApplyKey(z,V,Y),z=await B.fft(z),z=await B.batchFromMontgomery(z),await an(s,o,9);let Q=b.zero;for(let $=0;$<a.domainSize;$+=1048576){i&&i.debug(`H Verification(lagrange):  ${$}/${a.domainSize}`);const F=Math.min(a.domainSize-$,1048576),R=await s.read(J*F),_=z.slice($*a.n8r,($+F)*a.n8r),k=await b.multiExpAffine(R,_);Q=b.add(Q,k)}return await cn(s),r=await Zd(l,T,Q,a.vk_delta_2,C.vk_delta_2),r===!0}async function W(j,b){const B=l.G1.F.n8*2,J=j.byteLength/B,it=l.tm.concurrency,st=Math.floor(J/it),z=[];for(let V=0;V<it;V++){let Y;if(V<it-1?Y=st:Y=J-V*st,Y==0)continue;const Q=j.slice(V*st*d,(V*st+Y)*d),$=b.slice(V*st*d,(V*st+Y)*d);z.push(K(Q,$))}const I=await Promise.all(z),w=new Uint8Array(J*B);let T=0;for(let V=0;V<I.length;V++)w.set(I[V][0],T),T+=I[V][0].byteLength;return w}async function K(j,b){const B=l.G1.F.n8*2,J=l.G1.F.n8*3,it=j.byteLength/B,st=[];st.push({cmd:"ALLOCSET",var:0,buff:j}),st.push({cmd:"ALLOCSET",var:1,buff:b}),st.push({cmd:"ALLOC",var:2,len:it*J});for(let I=0;I<it;I++)st.push({cmd:"CALL",fnName:"g1m_subAffine",params:[{var:0,offset:I*B},{var:1,offset:I*B},{var:2,offset:I*J}]});return st.push({cmd:"CALL",fnName:"g1m_batchToAffine",params:[{var:2},{val:it},{var:2}]}),st.push({cmd:"GET",out:0,var:2,len:it*B}),await l.tm.queueAction(st)}}async function dnt(n,t,e,i){const r={type:"bigMem"};return await oM(n,t,r,i),await aM(r,t,e,i)}async function fnt(n,t,e,i,r){const{fd:s,sections:o}=await sn(n,"zkey",2),a=await ys(s,o);if(a.protocol!="groth16")throw new Error("zkey file is not groth16");const l=await or(a.q),d=await ku(s,l,o),u=await sr(t,"zkey",1,10),h=await mg(i),m=xn.create({dkLen:64});m.update(d.csHash);for(let A=0;A<d.contributions.length;A++)ja(m,l,d.contributions[A]);const p={};p.delta={},p.delta.prvKey=l.Fr.fromRng(h),p.delta.g1_s=l.G1.toAffine(l.G1.fromRng(h)),p.delta.g1_sx=l.G1.toAffine(l.G1.timesFr(p.delta.g1_s,p.delta.prvKey)),ds(m,l,p.delta.g1_s),ds(m,l,p.delta.g1_sx),p.transcript=m.digest(),p.delta.g2_sp=mh(l,p.transcript),p.delta.g2_spx=l.G2.toAffine(l.G2.timesFr(p.delta.g2_sp,p.delta.prvKey)),a.vk_delta_1=l.G1.timesFr(a.vk_delta_1,p.delta.prvKey),a.vk_delta_2=l.G2.timesFr(a.vk_delta_2,p.delta.prvKey),p.deltaAfter=a.vk_delta_1,p.type=0,e&&(p.name=e),d.contributions.push(p),await p3(u,a),await Ze(s,o,u,3),await Ze(s,o,u,4),await Ze(s,o,u,5),await Ze(s,o,u,6),await Ze(s,o,u,7);const E=l.Fr.inv(p.delta.prvKey);await Em(s,o,u,8,l,"G1",E,l.Fr.e(1),"L Section",r),await Em(s,o,u,9,l,"G1",E,l.Fr.e(1),"H Section",r),await m3(u,l,d),await s.close(),await u.close();const C=xn.create({dkLen:64});ja(C,l,p);const v=C.digest();return r&&r.info(Bn(d.csHash,"Circuit Hash: ")),r&&r.info(Bn(v,"Contribution Hash: ")),v}async function hnt(n,t,e,i,r,s){const o=HN(i);if(o.byteLength==0||o.byteLength*2!=i.length)return s&&s.error("Invalid Beacon Hash. (It must be a valid hexadecimal sequence)"),!1;if(o.length>=256)return s&&s.error("Maximum length of beacon hash is 255 bytes"),!1;if(r=parseInt(r),r<10||r>63)return s&&s.error("Invalid numIterationsExp. (Must be between 10 and 63)"),!1;const{fd:a,sections:l}=await sn(n,"zkey",2),d=await ys(a,l);if(d.protocol!="groth16")throw new Error("zkey file is not groth16");const u=await or(d.q),h=await ku(a,u,l),m=await sr(t,"zkey",1,10),p=await h3(o,r),E=xn.create({dkLen:64});E.update(h.csHash);for(let P=0;P<h.contributions.length;P++)ja(E,u,h.contributions[P]);const C={};C.delta={},C.delta.prvKey=u.Fr.fromRng(p),C.delta.g1_s=u.G1.toAffine(u.G1.fromRng(p)),C.delta.g1_sx=u.G1.toAffine(u.G1.timesFr(C.delta.g1_s,C.delta.prvKey)),ds(E,u,C.delta.g1_s),ds(E,u,C.delta.g1_sx),C.transcript=E.digest(),C.delta.g2_sp=mh(u,C.transcript),C.delta.g2_spx=u.G2.toAffine(u.G2.timesFr(C.delta.g2_sp,C.delta.prvKey)),d.vk_delta_1=u.G1.timesFr(d.vk_delta_1,C.delta.prvKey),d.vk_delta_2=u.G2.timesFr(d.vk_delta_2,C.delta.prvKey),C.deltaAfter=d.vk_delta_1,C.type=1,C.numIterationsExp=r,C.beaconHash=o,e&&(C.name=e),h.contributions.push(C),await p3(m,d),await Ze(a,l,m,3),await Ze(a,l,m,4),await Ze(a,l,m,5),await Ze(a,l,m,6),await Ze(a,l,m,7);const v=u.Fr.inv(C.delta.prvKey);await Em(a,l,m,8,u,"G1",v,u.Fr.e(1),"L Section",s),await Em(a,l,m,9,u,"G1",v,u.Fr.e(1),"H Section",s),await m3(m,u,h),await a.close(),await m.close();const A=xn.create({dkLen:64});ja(A,u,C);const x=A.digest();return s&&s.info(Bn(x,"Contribution Hash: ")),x}async function pnt(n){const t=await set(n,!0);return delete t.curve,delete t.F,An.stringifyBigInts(t)}async function mnt(n,t,e,i,r){const s=await mg(i),o=n.Fr.fromRng(s),a=n.Fr.inv(o),l=n.G1.F.n8*2,d=n.G2.F.n8*2,u=await Wa(t),h=await Gu(e);await z(l),await z(l),await z(d),await z(d);const m=await I(),p=n.G1.timesFr(m,o);await T(p);const E=await w(),C=n.G2.timesFr(E,o);await V(C);const v=await u.readUBE32();await h.writeUBE32(v),await z(v*l);const A=await u.readUBE32();await h.writeUBE32(A),await mc(u,h,null,n,"G1",A,a,n.Fr.e(1),"UNCOMPRESSED","H",r);const x=await u.readUBE32();await h.writeUBE32(x),await mc(u,h,null,n,"G1",x,a,n.Fr.e(1),"UNCOMPRESSED","L",r);const P=await u.readUBE32();await h.writeUBE32(P),await z(P*l);const W=await u.readUBE32();await h.writeUBE32(W),await z(W*l);const K=await u.readUBE32();await h.writeUBE32(K),await z(K*d);const j=xn.create({dkLen:64}),b={};b.csHash=await u.read(64),j.update(b.csHash);const B=await u.readUBE32();b.contributions=[];for(let Y=0;Y<B;Y++){const Q={delta:{}};Q.deltaAfter=await I(),Q.delta.g1_s=await I(),Q.delta.g1_sx=await I(),Q.delta.g2_spx=await w(),Q.transcript=await u.read(64),b.contributions.push(Q),ja(j,n,Q)}const J={};J.delta={},J.delta.prvKey=o,J.delta.g1_s=n.G1.toAffine(n.G1.fromRng(s)),J.delta.g1_sx=n.G1.toAffine(n.G1.timesFr(J.delta.g1_s,o)),ds(j,n,J.delta.g1_s),ds(j,n,J.delta.g1_sx),J.transcript=j.digest(),J.delta.g2_sp=mh(n,J.transcript),J.delta.g2_spx=n.G2.toAffine(n.G2.timesFr(J.delta.g2_sp,o)),J.deltaAfter=p,J.type=0,b.contributions.push(J),await h.write(b.csHash),await h.writeUBE32(b.contributions.length);for(let Y=0;Y<b.contributions.length;Y++){const Q=b.contributions[Y];await T(Q.deltaAfter),await T(Q.delta.g1_s),await T(Q.delta.g1_sx),await V(Q.delta.g2_spx),await h.write(Q.transcript)}const it=xn.create({dkLen:64});ja(it,n,J);const st=it.digest();return r&&r.info(Bn(st,"Contribution Hash: ")),await h.close(),await u.close(),st;async function z(Y){const Q=u.pageSize*2;for(let $=0;$<Y;$+=Q){const F=Math.min(Y-$,Q),R=await u.read(F);await h.write(R)}}async function I(){const Y=await u.read(n.G1.F.n8*2);return n.G1.fromRprUncompressed(Y,0)}async function w(){const Y=await u.read(n.G2.F.n8*2);return n.G2.fromRprUncompressed(Y,0)}async function T(Y){const Q=new Uint8Array(l);n.G1.toRprUncompressed(Q,0,Y),await h.write(Q)}async function V(Y){const Q=new Uint8Array(d);n.G2.toRprUncompressed(Q,0,Y),await h.write(Q)}}const{stringifyBigInts:_3}=An;async function cM(n,t){t&&t.info("EXPORT VERIFICATION KEY STARTED");const{fd:e,sections:i}=await sn(n,"zkey",2),r=await ys(e,i);t&&t.info("> Detected protocol: "+r.protocol);let s;if(r.protocol==="groth16")s=await gnt(r,e,i);else if(r.protocol==="plonk")s=await ynt(r);else if(r.protocolId&&r.protocolId===hh)s=await wnt(r);else throw new Error("zkey file protocol unrecognized");return await e.close(),t&&t.info("EXPORT VERIFICATION KEY FINISHED"),s}async function gnt(n,t,e){const i=await or(n.q),r=i.G1.F.n8*2,s=await i.pairing(n.vk_alpha_1,n.vk_beta_2);let o={protocol:n.protocol,curve:i.name,nPublic:n.nPublic,vk_alpha_1:i.G1.toObject(n.vk_alpha_1),vk_beta_2:i.G2.toObject(n.vk_beta_2),vk_gamma_2:i.G2.toObject(n.vk_gamma_2),vk_delta_2:i.G2.toObject(n.vk_delta_2),vk_alphabeta_12:i.Gt.toObject(s)};await an(t,e,3),o.IC=[];for(let a=0;a<=n.nPublic;a++){const l=await t.read(r),d=i.G1.toObject(l);o.IC.push(d)}return await cn(t),o=_3(o),o}async function ynt(n){const t=await or(n.q);let e={protocol:n.protocol,curve:t.name,nPublic:n.nPublic,power:n.power,k1:t.Fr.toObject(n.k1),k2:t.Fr.toObject(n.k2),Qm:t.G1.toObject(n.Qm),Ql:t.G1.toObject(n.Ql),Qr:t.G1.toObject(n.Qr),Qo:t.G1.toObject(n.Qo),Qc:t.G1.toObject(n.Qc),S1:t.G1.toObject(n.S1),S2:t.G1.toObject(n.S2),S3:t.G1.toObject(n.S3),X_2:t.G2.toObject(n.X_2),w:t.Fr.toObject(t.Fr.w[n.power])};return e=_3(e),e}async function wnt(n,t){const e=await or(n.q);let i={protocol:n.protocol,curve:e.name,nPublic:n.nPublic,power:n.power,k1:e.Fr.toObject(n.k1),k2:e.Fr.toObject(n.k2),w:e.Fr.toObject(e.Fr.w[n.power]),w3:e.Fr.toObject(n.w3),w4:e.Fr.toObject(n.w4),w8:e.Fr.toObject(n.w8),wr:e.Fr.toObject(n.wr),X_2:e.G2.toObject(n.X_2),C0:e.G1.toObject(n.C0)};return _3(i)}var lM={};const{unstringifyBigInts:_nt,stringifyBigInts:bnt}=An;async function uM(n,t,e){e&&e.info("FFLONK EXPORT SOLIDITY VERIFIER STARTED");const i=await nl(n.curve);let r=d(n.w3);n.w3_2=u(i.Fr.square(r));let s=d(n.w4);n.w4_2=u(i.Fr.square(s)),n.w4_3=u(i.Fr.mul(i.Fr.square(s),s));let o=d(n.w8),a=i.Fr.one;for(let h=1;h<8;h++)a=i.Fr.mul(a,o),n["w8_"+h]=u(a);let l=t[n.protocol];return e&&e.info("FFLONK EXPORT SOLIDITY VERIFIER FINISHED"),lM.render(l,n);function d(h){const m=_nt(h);return i.Fr.fromObject(m)}function u(h){const m=i.Fr.toObject(h);return bnt(m)}}async function vnt(n,t,e){const i=await cM(n,e);if(i.protocol==="fflonk")return uM(i,t,e);let r=t[i.protocol];return lM.render(r,i)}var xnt=Object.freeze({__proto__:null,newZKey:oM,exportBellman:lnt,importBellman:unt,verifyFromR1cs:dnt,verifyFromInit:aM,contribute:fnt,beacon:hnt,exportJson:pnt,bellmanContribute:mnt,exportVerificationKey:cM,exportSolidityVerifier:vnt});async function Ent(n,t,e,i){globalThis.gc&&globalThis.gc();const{fd:r,sections:s}=await sn(t,"ptau",1),{curve:o,power:a}=await Zr(r,s),{fd:l,sections:d}=await sn(n,"r1cs",1),u=await yg(l,d,{loadConstraints:!0,loadCustomGates:!0}),h=o.G1.F.n8*2,m=o.G1,p=o.G2.F.n8*2,E=o.Fr,C=o.Fr.n8;i&&i.info("Reading r1cs"),await Xe(l,d,2);const v=new Tr,A=new Tr;let x=u.nVars;const P=u.nOutputs+u.nPubInputs;await I(o.Fr,u,i),globalThis.gc&&globalThis.gc();const W=await sr(e,"zkey",1,14,1<<22,1<<24);if(u.prime!=o.r)return i&&i.error("r1cs curve does not match powers of tau ceremony curve"),-1;let K=Va(v.length-1)+1;K<3&&(K=3);const j=2**K;if(i&&i.info("Plonk constraints: "+v.length),K>a)return i&&i.error(`circuit too big for this power of tau ceremony. ${v.length} > 2**${a}`),-1;if(!s[12])return i&&i.error("Powers of tau is not prepared."),-1;const b=new Qt(j*h),B=s[12][0].p+(2**K-1)*h;await r.readToBuffer(b,0,j*h,B);const[J,it]=R(),st={};await Y(3,"Additions"),globalThis.gc&&globalThis.gc(),await w(4,0,"Amap"),globalThis.gc&&globalThis.gc(),await w(5,1,"Bmap"),globalThis.gc&&globalThis.gc(),await w(6,2,"Cmap"),globalThis.gc&&globalThis.gc(),await T(7,3,"Qm"),globalThis.gc&&globalThis.gc(),await T(8,4,"Ql"),globalThis.gc&&globalThis.gc(),await T(9,5,"Qr"),globalThis.gc&&globalThis.gc(),await T(10,6,"Qo"),globalThis.gc&&globalThis.gc(),await T(11,7,"Qc"),globalThis.gc&&globalThis.gc(),await Q(12,"sigma"),globalThis.gc&&globalThis.gc(),await $(13,"lagrange polynomials"),globalThis.gc&&globalThis.gc(),await We(W,14);const z=new Qt((j+6)*h);await r.readToBuffer(z,0,(j+6)*h,s[2][0].p),await W.write(z),await Ve(W),globalThis.gc&&globalThis.gc(),await F(),await W.close(),await l.close(),await r.close(),i&&i.info("Setup Finished");return;async function I(_,k,H){function L(ft){const vt=Object.keys(ft);for(let wt=0;wt<vt.length;wt++)ft[vt[wt]]==0n&&delete ft[vt[wt]]}function g(ft,vt,wt){const bt={};for(let Ft in ft)typeof bt[Ft]>"u"?bt[Ft]=_.mul(vt,ft[Ft]):bt[Ft]=_.add(bt[Ft],_.mul(vt,ft[Ft]));for(let Ft in wt){const Pt=_.neg(wt[Ft]);typeof bt[Ft]>"u"?bt[Ft]=Pt:bt[Ft]=_.add(bt[Ft],Pt)}return L(bt),bt}function D(ft,vt){const wt={k:_.zero,s:[],coefs:[]},bt=[];for(let Ft in ft)Ft==0?wt.k=_.add(wt.k,ft[Ft]):ft[Ft]!=0n&&bt.push([Number(Ft),ft[Ft]]);for(;bt.length>vt;){const Ft=bt.shift(),Pt=bt.shift(),Gt=Ft[0],$t=Pt[0],kt=x++,Rt=_.zero,Ht=_.neg(Ft[1]),Kt=_.neg(Pt[1]),se=_.one,_e=_.zero;v.push([Gt,$t,kt,Rt,Ht,Kt,se,_e]),A.push([Gt,$t,Ft[1],Pt[1]]),bt.push([kt,_.one])}for(let Ft=0;Ft<bt.length;Ft++)wt.s[Ft]=bt[Ft][0],wt.coefs[Ft]=bt[Ft][1];for(;wt.coefs.length<vt;)wt.s.push(0),wt.coefs.push(_.zero);return wt}function S(ft){const vt=D(ft,3),wt=vt.s[0],bt=vt.s[1],Ft=vt.s[2],Pt=_.zero,Gt=vt.coefs[0],$t=vt.coefs[1],kt=vt.coefs[2],Rt=vt.k;v.push([wt,bt,Ft,Pt,Gt,$t,kt,Rt])}function lt(ft,vt,wt){const bt=D(ft,1),Ft=D(vt,1),Pt=D(wt,1),Gt=bt.s[0],$t=Ft.s[0],kt=Pt.s[0],Rt=_.mul(bt.coefs[0],Ft.coefs[0]),Ht=_.mul(bt.coefs[0],Ft.k),Kt=_.mul(bt.k,Ft.coefs[0]),se=_.neg(Pt.coefs[0]),_e=_.sub(_.mul(bt.k,Ft.k),Pt.k);v.push([Gt,$t,kt,Rt,Ht,Kt,se,_e])}function ct(ft){let vt=_.zero,wt=0;const bt=Object.keys(ft);for(let Ft=0;Ft<bt.length;Ft++)ft[bt[Ft]]==0n?delete ft[bt[Ft]]:bt[Ft]==0?vt=_.add(vt,ft[bt[Ft]]):wt++;return wt>0?wt.toString():vt!=_.zero?"k":"0"}function G(ft,vt,wt){const bt=ct(ft),Ft=ct(vt);if(bt==="0"||Ft==="0")L(wt),S(wt);else if(bt==="k"){const Pt=g(vt,ft[0],wt);S(Pt)}else if(Ft==="k"){const Pt=g(ft,vt[0],wt);S(Pt)}else lt(ft,vt,wt)}for(let ft=1;ft<=P;ft++){const vt=ft,wt=0,bt=0,Ft=_.zero,Pt=_.one,Gt=_.zero,$t=_.zero,kt=_.zero;v.push([vt,wt,bt,Ft,Pt,Gt,$t,kt])}for(let ft=0;ft<k.constraints.length;ft++)H&&ft%1e4===0&&H.debug(`processing constraints: ${ft}/${k.nConstraints}`),G(...k.constraints[ft])}async function w(_,k,H){await We(W,_);for(let L=0;L<v.length;L++)await W.writeULE32(v[L][k]),i&&L%1e6==0&&i.debug(`writing ${H}: ${L}/${v.length}`);await Ve(W)}async function T(_,k,H){let L=new Qt(j*C);for(let g=0;g<v.length;g++)L.set(v[g][k],g*C),i&&g%1e6==0&&i.debug(`writing ${H}: ${g}/${v.length}`);await We(W,_),await V(L),await Ve(W),L=await E.batchFromMontgomery(L),st[H]=await o.G1.multiExpAffine(b,L,i,"multiexp "+H)}async function V(_){const k=await E.ifft(_),H=new Qt(j*C*4);H.set(k,0);const L=await E.fft(H);await W.write(k),await W.write(L)}async function Y(_,k){await We(W,_);const H=new Uint8Array(8+2*C),L=new DataView(H.buffer);for(let g=0;g<A.length;g++){const D=A[g];let S=0;L.setUint32(S,D[0],!0),S+=4,L.setUint32(S,D[1],!0),S+=4,H.set(D[2],S),S+=C,H.set(D[3],S),S+=C,await W.write(H),i&&g%1e6==0&&i.debug(`writing ${k}: ${g}/${A.length}`)}await Ve(W)}async function Q(_,k){const H=new Qt(C*j*3),L=new Tr(x),g=new Tr(x);let D=E.one;for(let ft=0;ft<j;ft++)ft<v.length?(G(v[ft][0],ft),G(v[ft][1],j+ft),G(v[ft][2],j*2+ft)):(G(0,ft),G(0,j+ft),G(0,j*2+ft)),D=E.mul(D,E.w[K]),i&&ft%1e6==0&&i.debug(`writing ${k} phase1: ${ft}/${v.length}`);for(let ft=0;ft<x;ft++)typeof g[ft]<"u"?H.set(L[ft],g[ft]*C):console.log("Variable not used"),i&&ft%1e6==0&&i.debug(`writing ${k} phase2: ${ft}/${x}`);globalThis.gc&&globalThis.gc(),await We(W,_);let S=H.slice(0,j*C);await V(S),globalThis.gc&&globalThis.gc();let lt=H.slice(j*C,j*C*2);await V(lt),globalThis.gc&&globalThis.gc();let ct=H.slice(j*C*2,j*C*3);await V(ct),globalThis.gc&&globalThis.gc(),await Ve(W),S=await E.batchFromMontgomery(S),lt=await E.batchFromMontgomery(lt),ct=await E.batchFromMontgomery(ct),st.S1=await o.G1.multiExpAffine(b,S,i,"multiexp S1"),globalThis.gc&&globalThis.gc(),st.S2=await o.G1.multiExpAffine(b,lt,i,"multiexp S2"),globalThis.gc&&globalThis.gc(),st.S3=await o.G1.multiExpAffine(b,ct,i,"multiexp S3"),globalThis.gc&&globalThis.gc();function G(ft,vt){typeof L[ft]>"u"?g[ft]=vt:H.set(L[ft],vt*C);let wt;vt<j?wt=D:vt<2*j?wt=E.mul(D,J):wt=E.mul(D,it),L[ft]=wt}}async function $(_,k){await We(W,_);const H=Math.max(P,1);for(let L=0;L<H;L++){let g=new Qt(j*C);g.set(E.one,L*C),await V(g),i&&i.debug(`writing ${k} ${L}/${H}`)}await Ve(W)}async function F(){await We(W,1),await W.writeULE32(2),await Ve(W),await We(W,2);const _=o.q,k=(Math.floor((be.bitLength(_)-1)/64)+1)*8,H=o.r,L=(Math.floor((be.bitLength(H)-1)/64)+1)*8;await W.writeULE32(k),await gs(W,_,k),await W.writeULE32(L),await gs(W,H,L),await W.writeULE32(x),await W.writeULE32(P),await W.writeULE32(j),await W.writeULE32(A.length),await W.writeULE32(v.length),await W.write(J),await W.write(it),await W.write(m.toAffine(st.Qm)),await W.write(m.toAffine(st.Ql)),await W.write(m.toAffine(st.Qr)),await W.write(m.toAffine(st.Qo)),await W.write(m.toAffine(st.Qc)),await W.write(m.toAffine(st.S1)),await W.write(m.toAffine(st.S2)),await W.write(m.toAffine(st.S3));let g;g=await r.read(p,s[3][0].p+p),await W.write(g),await Ve(W)}function R(){let _=E.two;for(;H(_,[],K);)E.add(_,E.one);let k=E.add(_,E.one);for(;H(k,[_],K);)E.add(k,E.one);return[_,k];function H(L,g,D){const S=2**D;let lt=E.one;for(let ct=0;ct<S;ct++){if(E.eq(L,lt))return!0;for(let G=0;G<g.length;G++)if(E.eq(L,E.mul(g[G],lt)))return!0;lt=E.mul(lt,E.w[D])}return!1}}}class b3{constructor(t,e){this.curve=t,this.logger=e,this.resetProof()}resetProof(){this.polynomials={},this.evaluations={}}addPolynomial(t,e){t in this.polynomials&&this.logger.warn(`proof: polynomial.${t} already exist in proof`),this.polynomials[t]=e}getPolynomial(t){return t in this.polynomials||this.logger.warn(`proof: polynomial ${t} does not exist in proof`),this.polynomials[t]}addEvaluation(t,e){t in this.evaluations&&this.logger.warn(`proof: evaluations.${t} already exist in proof`),this.evaluations[t]=e}getEvaluation(t){return t in this.evaluations||this.logger.warn(`proof: evaluation ${t} does not exist in proof`),this.evaluations[t]}toObjectProof(t=!0){let e=t?{polynomials:{},evaluations:{}}:{};return Object.keys(this.polynomials).forEach(i=>{const r=this.curve.G1.toObject(this.polynomials[i]);t?e.polynomials[i]=r:e[i]=r}),Object.keys(this.evaluations).forEach(i=>{const r=this.curve.Fr.toObject(this.evaluations[i]);t?e.evaluations[i]=r:e[i]=r}),e}fromObjectProof(t){this.resetProof(),Object.keys(t.polynomials).forEach(e=>{this.polynomials[e]=this.curve.G1.fromObject(t.polynomials[e])}),Object.keys(t.evaluations).forEach(e=>{this.evaluations[e]=this.curve.Fr.fromObject(t.evaluations[e])})}}const dM=[],fM=[],hM=[],Snt=BigInt(0),Qd=BigInt(1),Lnt=BigInt(2),Cnt=BigInt(7),Ant=BigInt(256),Int=BigInt(113);for(let n=0,t=Qd,e=1,i=0;n<24;n++){[e,i]=[i,(2*e+3*i)%5],dM.push(2*(5*i+e)),fM.push((n+1)*(n+2)/2%64);let r=Snt;for(let s=0;s<7;s++)t=(t<<Qd^(t>>Cnt)*Int)%Ant,t&Lnt&&(r^=Qd<<(Qd<<BigInt(s))-Qd);hM.push(r)}const[Tnt,knt]=DN(hM,!0),JA=(n,t,e)=>e>32?WN(n,t,e):zN(n,t,e),t8=(n,t,e)=>e>32?VN(n,t,e):GN(n,t,e);function Rnt(n,t=24){const e=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,d=e[l],u=e[l+1],h=JA(d,u,1)^e[a],m=t8(d,u,1)^e[a+1];for(let p=0;p<50;p+=10)n[o+p]^=h,n[o+p+1]^=m}let r=n[2],s=n[3];for(let o=0;o<24;o++){const a=fM[o],l=JA(r,s,a),d=t8(r,s,a),u=dM[o];r=n[u],s=n[u+1],n[u]=l,n[u+1]=d}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}n[0]^=Tnt[i],n[1]^=knt[i]}e.fill(0)}class v3 extends jN{constructor(t,e,i,r=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=i,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,_f(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Hc(this.state)}keccak(){ho||Ca(this.state32),Rnt(this.state32,this.rounds),ho||Ca(this.state32),this.posOut=0,this.pos=0}update(t){wm(this);const{blockLen:e,state:i}=this;t=Oc(t);const r=t.length;for(let s=0;s<r;){const o=Math.min(e-this.pos,r-s);for(let a=0;a<o;a++)i[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:i,blockLen:r}=this;t[i]^=e,(e&128)!==0&&i===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){wm(this,!1),d3(t),this.finish();const e=this.state,{blockLen:i}=this;for(let r=0,s=t.length;r<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-r);t.set(e.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return _f(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ON(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:i,outputLen:r,rounds:s,enableXOF:o}=this;return t||(t=new v3(e,i,r,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=i,t.outputLen=r,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Nnt=(n,t,e)=>Att(()=>new v3(t,n,e)),Mnt=Nnt(1,136,256/8),gw=0,Bnt=1;class Rc{constructor(t){this.G1=t.G1,this.Fr=t.Fr,this.reset()}reset(){this.data=[]}addPolCommitment(t){this.data.push({type:gw,data:t})}addScalar(t){this.data.push({type:Bnt,data:t})}getChallenge(){if(this.data.length===0)throw new Error("Keccak256Transcript: No data to generate a transcript");let t=0,e=0;this.data.forEach(o=>gw===o.type?t++:e++);let i=new Uint8Array(e*this.Fr.n8+t*this.G1.F.n8*2),r=0;for(let o=0;o<this.data.length;o++)gw===this.data[o].type?(this.G1.toRprUncompressed(i,r,this.data[o].data),r+=this.G1.F.n8*2):(this.Fr.toRprBE(i,r,this.data[o].data),r+=this.Fr.n8);const s=be.fromRprBE(Mnt(i));return this.Fr.e(s)}}class yw{static getZ1(t){return[t.zero,t.add(t.e(-1),t.w[2]),t.e(-2),t.sub(t.e(-1),t.w[2])]}static getZ2(t){return[t.zero,t.add(t.zero,t.mul(t.e(-2),t.w[2])),t.e(4),t.sub(t.zero,t.mul(t.e(-2),t.w[2]))]}static getZ3(t){return[t.zero,t.add(t.e(2),t.mul(t.e(2),t.w[2])),t.e(-8),t.sub(t.e(2),t.mul(t.e(2),t.w[2]))]}static mul2(t,e,i,r,s,o){const a=this.getZ1(o);let l,d;const u=o.mul(t,e),h=o.mul(t,r),m=o.mul(i,e),p=o.mul(i,r);l=u;let E=o.add(h,m),C=p;return d=E,s&&(d=o.add(d,o.mul(a[s],C))),[l,d]}static mul3(t,e,i,r,s,o,a,l){const d=this.getZ1(l),u=this.getZ2(l);let h,m;const p=l.mul(t,e),E=l.mul(t,s),C=l.mul(r,e),v=l.mul(r,s);h=l.mul(p,i);let A=l.mul(C,i);A=l.add(A,l.mul(E,i)),A=l.add(A,l.mul(p,o));let x=l.mul(v,i);if(x=l.add(x,l.mul(E,o)),x=l.add(x,l.mul(C,o)),m=A,a){const P=l.mul(v,o);m=l.add(m,l.mul(d[a],x)),m=l.add(m,l.mul(u[a],P))}return[h,m]}static mul4(t,e,i,r,s,o,a,l,d,u){const h=this.getZ1(u),m=this.getZ2(u),p=this.getZ3(u);let E,C;const v=u.mul(t,e),A=u.mul(t,o),x=u.mul(s,e),P=u.mul(s,o),W=u.mul(i,r),K=u.mul(i,l),j=u.mul(a,r),b=u.mul(a,l);E=u.mul(v,W);let B=u.mul(x,W);B=u.add(B,u.mul(A,W)),B=u.add(B,u.mul(v,j)),B=u.add(B,u.mul(v,K));let J=u.mul(P,W);J=u.add(J,u.mul(x,j)),J=u.add(J,u.mul(x,K)),J=u.add(J,u.mul(A,j)),J=u.add(J,u.mul(A,K)),J=u.add(J,u.mul(v,b));let it=u.mul(A,b);it=u.add(it,u.mul(x,b)),it=u.add(it,u.mul(P,K)),it=u.add(it,u.mul(P,j));let st=u.mul(P,b);return C=B,d&&(C=u.add(C,u.mul(h[d],J)),C=u.add(C,u.mul(m[d],it)),C=u.add(C,u.mul(p[d],st))),[E,C]}}const e8=3,Pnt=4,Ont=5,Fnt=6,ww=7,_w=8,bw=9,vw=10,xw=11,sc=12,jnt=13,n8=14;class ge{constructor(t,e,i){this.coef=t,this.curve=e,this.Fr=e.Fr,this.G1=e.G1,this.logger=i}static async fromEvaluations(t,e,i){let r=await e.Fr.ifft(t);return new ge(r,e,i)}static fromCoefficientsArray(t,e,i){const r=e.Fr;let s=t.length>32768?new Qt(t.length*r.n8):new Uint8Array(t.length*r.n8);for(let o=0;o<t.length;o++)s.set(t[o],o*r.n8);return new ge(s,e,i)}static fromPolynomial(t,e,i){let r=t.length(),s=e.Fr,o=r>32768?new Qt(r*s.n8):new Uint8Array(r*s.n8);return o.set(t.coef.slice(),0),new ge(o,e,i)}isEqual(t){const e=this.degree();if(e!==t.degree())return!1;for(let i=0;i<e+1;i++)if(!this.Fr.eq(this.getCoef(i),t.getCoef(i)))return!1;return!0}blindCoefficients(t){t=t||[];const e=this.length()+t.length>32768?new Qt((this.length()+t.length)*this.Fr.n8):new Uint8Array((this.length()+t.length)*this.Fr.n8);e.set(this.coef,0);for(let i=0;i<t.length;i++)e.set(this.Fr.add(e.slice((this.length()+i)*this.Fr.n8,(this.length()+i+1)*this.Fr.n8),t[i]),(this.length()+i)*this.Fr.n8),e.set(this.Fr.sub(e.slice(i*this.Fr.n8,(i+1)*this.Fr.n8),t[i]),i*this.Fr.n8);this.coef=e}getCoef(t){const e=t*this.Fr.n8;return e+this.Fr.n8>this.coef.byteLength?this.Fr.zero:this.coef.slice(e,e+this.Fr.n8)}setCoef(t,e){if(t>this.length()-1)throw new Error("Coef index is not available");this.coef.set(e,t*this.Fr.n8)}static async to4T(t,e,i,r){i=i||[];let s=await r.ifft(t);const o=e*4>32768?new Qt(e*4*r.n8):new Uint8Array(e*4*r.n8);o.set(s,0);const a=await r.fft(o);if(i.length===0)return[s,a];const l=e+i.length>32768?new Qt((e+i.length)*r.n8):new Uint8Array((e+i.length)*r.n8);l.set(s,0);for(let d=0;d<i.length;d++)l.set(r.add(l.slice((e+d)*r.n8,(e+d+1)*r.n8),i[d]),(e+d)*r.n8),l.set(r.sub(l.slice(d*r.n8,(d+1)*r.n8),i[d]),d*r.n8);return[l,a]}length(){let t=this.coef.byteLength/this.Fr.n8;if(t!==Math.floor(this.coef.byteLength/this.Fr.n8))throw new Error("Polynomial coefficients buffer has incorrect size");return t===0&&this.logger&&this.logger.warn("Polynomial has length zero"),t}degree(){for(let t=this.length()-1;t>0;t--){const e=t*this.Fr.n8;if(!this.Fr.eq(this.Fr.zero,this.coef.slice(e,e+this.Fr.n8)))return t}return 0}evaluate(t){let e=this.Fr.zero;for(let i=this.degree()+1;i>0;i--){let r=i*this.Fr.n8;const s=this.coef.slice(r-this.Fr.n8,r);e=this.Fr.add(s,this.Fr.mul(e,t))}return e}fastEvaluate(t){const e=this.Fr;let i=3,r=this.degree()+1,s=parseInt(r/i),o=r-s*i,a=[],l=[];l[0]=e.one;for(let d=0;d<i;d++){a[d]=e.zero;let u=d===i-1?s+o:s;for(let h=u;h>0;h--)a[d]=e.add(this.getCoef(d*s+h-1),e.mul(a[d],t)),d===0&&(l[0]=e.mul(l[0],t))}for(let d=1;d<i;d++)a[0]=e.add(a[0],e.mul(l[d-1],a[d])),l[d]=e.mul(l[d-1],l[0]);return a[0]}add(t,e){let i=!1;t.length()>this.length()&&(i=!0);const r=this.length(),s=t.length();for(let o=0;o<Math.max(r,s);o++){const a=o*this.Fr.n8,l=o<r?this.coef.slice(a,a+this.Fr.n8):this.Fr.zero;let d=o<s?t.coef.slice(a,a+this.Fr.n8):this.Fr.zero;e!==void 0&&(d=this.Fr.mul(d,e)),i?t.coef.set(this.Fr.add(l,d),a):this.coef.set(this.Fr.add(l,d),a)}i&&(delete this.coef,this.coef=t.coef)}sub(t,e){let i=!1;t.length()>this.length()&&(i=!0);const r=this.length(),s=t.length();for(let o=0;o<Math.max(r,s);o++){const a=o*this.Fr.n8,l=o<r?this.coef.slice(a,a+this.Fr.n8):this.Fr.zero;let d=o<s?t.coef.slice(a,a+this.Fr.n8):this.Fr.zero;e!==void 0&&(d=this.Fr.mul(d,e)),i?t.coef.set(this.Fr.sub(l,d),a):this.coef.set(this.Fr.sub(l,d),a)}i&&(delete this.coef,this.coef=t.coef)}mulScalar(t){for(let e=0;e<this.length();e++){const i=e*this.Fr.n8;this.coef.set(this.Fr.mul(this.coef.slice(i,i+this.Fr.n8),t),i)}}addScalar(t){const e=this.length()===0?this.Fr.zero:this.coef.slice(0,this.Fr.n8);this.coef.set(this.Fr.add(e,t),0)}subScalar(t){const e=this.length()===0?this.Fr.zero:this.coef.slice(0,this.Fr.n8);this.coef.set(this.Fr.sub(e,t),0)}byXSubValue(t){const e=this.Fr,r=!e.eq(e.zero,this.getCoef(this.length()-1))?this.length()+1:this.length(),s=r>32768?new Qt(r*e.n8):new Uint8Array(r*e.n8);let o=new ge(s,this.curve,this.logger);o.coef.set(this.coef.slice(0,(r-1)*e.n8),32),this.mulScalar(e.neg(t)),o.add(this),this.coef=o.coef}byXNSubValue(t,e){const i=this.Fr,s=!(this.length()-t-1>=this.degree())?this.length()+t:this.length(),o=s>32768?new Qt(s*i.n8):new Uint8Array(s*i.n8);let a=new ge(o,this.curve,this.logger);a.coef.set(this.coef.slice(0,(this.degree()+1)*32),t*32),this.mulScalar(e),a.add(this),this.coef=a.coef}divBy(t){const e=this.Fr,i=this.degree(),r=t.degree();let s=new ge(this.coef,this.curve,this.logger);this.coef=this.length()>32768?new Qt(this.length()*e.n8):new Uint8Array(this.length()*e.n8);for(let o=i-r;o>=0;o--){this.setCoef(o,e.div(s.getCoef(o+r),t.getCoef(r)));for(let a=0;a<=r;a++)s.setCoef(o+a,e.sub(s.getCoef(o+a),e.mul(this.getCoef(o),t.getCoef(a))))}return s}divByMonic(t,e){const i=this.Fr;let r=this.degree(),s=this.length()>32768?new Qt(this.length()*i.n8):new Uint8Array(this.length()*i.n8),o=new ge(s,this.curve,this.logger),a=[];for(let d=0;d<t;d++)o.setCoef(r-d-t,this.getCoef(r-d)),a[d]=this.getCoef(r-d);let l=t;for(let d=0;d<l;d++)for(let u=r-2*t-d;u>=0&&!(u<0);u=u-l){let h=d;a[h]=i.add(this.getCoef(u+t),i.mul(a[h],e)),o.setCoef(u,a[h])}this.coef=o.coef}divByVanishing(t,e){if(this.degree()<t)throw new Error("divByVanishing polynomial divisor must be of degree lower than the dividend polynomial");const i=this.Fr;let r=new ge(this.coef,this.curve,this.logger);this.coef=this.length()>32768?new Qt(this.length()*i.n8):new Uint8Array(this.length()*i.n8);for(let s=this.length()-1;s>=t;s--){let o=r.getCoef(s);i.eq(i.zero,o)||(r.setCoef(s,i.zero),r.setCoef(s-t,i.add(r.getCoef(s-t),i.mul(e,o))),this.setCoef(s-t,i.add(this.getCoef(s-t),o)))}return r}divByVanishing2(t,e){if(this.degree()<t)throw new Error("divByVanishing polynomial divisor must be of degree lower than the dividend polynomial");const i=this.Fr;let r=new ge(this.coef,this.curve,this.logger);this.coef=this.length()>32768?new Qt(this.length()*i.n8):new Uint8Array(this.length()*i.n8);let s=3,o=this.length()-t,a=Math.floor(o/s),l=o-(s-1)*a;console.log(o),console.log(a+"  "+l);for(let d=0;d<s;d++){console.log("> Thread "+d);for(let u=d===0?l:a;u>0;u--){let h=u-1;d!==0&&(h+=(d-1)*a+l);let m=h+t,p=r.getCoef(m);i.eq(i.zero,p)||(r.setCoef(m,i.zero),r.setCoef(h,i.add(r.getCoef(h),i.mul(e,p))),this.setCoef(h,i.add(this.getCoef(h),p)),console.log(h+" <-- "+m))}}return this.print(),r}fastDivByVanishing(t){const e=this.Fr;for(let i=0;i<t.length;i++){let r=t[i][0],s=t[i][1];if(this.degree()<r)throw new Error("divByVanishing polynomial divisor must be of degree lower than the dividend polynomial");let o=5,a=this.length()-r,l=Math.floor(a/o/r),d=l*r,u=a-o*d,h=new ge(this.length()>32768?new Qt(this.length()*e.n8):new Uint8Array(this.length()*e.n8),this.curve,this.logger),m=this.coef;this.coef=h.coef,h.coef=m;for(let x=0;x<o;x++){let P=(x+1)*d+u;for(let W=0;W<r;W++)this.setCoef(P+W-r,h.getCoef(P+W));for(let W=0;W<d-r;W++){let K=P-W-1,j=e.add(h.getCoef(K),e.mul(s,this.getCoef(K)));this.setCoef(K-r,j)}}let p=u,E=u;for(let x=0;x<r&&E;x++)this.setCoef(p-x-1,h.getCoef(p+r-x-1)),E--;for(let x=0;x<E;x++){let P=p-x-1,W=e.add(h.getCoef(P),e.mul(s,this.getCoef(P)));this.setCoef(P-r,W)}let C=[],v=e.one;for(let x=0;x<l;x++)v=e.mul(v,s);let A=e.one;for(let x=o;x>0;x--){let P=x-1,W=P*d+u;C[P]=[];for(let K=0;K<r;K++)C[P][K]=this.getCoef(W+K),x!==o&&(C[P][K]=e.add(C[P][K],e.mul(v,C[P+1][K])));A=e.mul(A,v)}for(let x=0;x<o;x++){let P=x*d+u,W=s,K=r-1,j=x===0?u:d;for(let b=0;b<j;b++){let B=P-b-1,J=e.add(this.getCoef(B),e.mul(W,C[x][K]));this.setCoef(B,J),K===0?(K=r-1,W=e.mul(W,s)):K--}}}}divByXSubValue(t){const e=this.length()>32768?new Qt(this.length()*this.Fr.n8):new Uint8Array(this.length()*this.Fr.n8);e.set(this.Fr.zero,(this.length()-1)*this.Fr.n8),e.set(this.coef.slice((this.length()-1)*this.Fr.n8,this.length()*this.Fr.n8),(this.length()-2)*this.Fr.n8);for(let i=this.length()-3;i>=0;i--){let r=i*this.Fr.n8;e.set(this.Fr.add(this.coef.slice(r+this.Fr.n8,r+2*this.Fr.n8),this.Fr.mul(t,e.slice(r+this.Fr.n8,r+2*this.Fr.n8))),i*this.Fr.n8)}if(!this.Fr.eq(this.coef.slice(0,this.Fr.n8),this.Fr.mul(this.Fr.neg(t),e.slice(0,this.Fr.n8))))throw new Error("Polynomial does not divide");this.coef=e}divZh(t,e=4){for(let r=0;r<t;r++){const s=r*this.Fr.n8;this.coef.set(this.Fr.neg(this.coef.slice(s,s+this.Fr.n8)),s)}const i=this.coef.byteLength/this.Fr.n8;for(let r=t;r<i;r++){const s=r*this.Fr.n8,o=this.Fr.sub(this.coef.slice((r-t)*this.Fr.n8,(r-t)*this.Fr.n8+this.Fr.n8),this.coef.slice(s,s+this.Fr.n8));if(this.coef.set(o,s),r>t*(e-1)-e&&!this.Fr.isZero(o))throw new Error("Polynomial is not divisible")}return this}divByZerofier(t,e){let i=this.Fr;const r=i.inv(e),s=i.neg(r);let o=i.eq(i.one,s),a=i.eq(i.negone,s);if(!o)for(let l=0;l<t;l++){const d=l*this.Fr.n8;let u;a?u=i.neg(this.coef.slice(d,d+this.Fr.n8)):u=i.mul(s,this.coef.slice(d,d+this.Fr.n8)),this.coef.set(u,d)}o=i.eq(i.one,r),a=i.eq(i.negone,r);for(let l=t;l<this.length();l++){const d=l*this.Fr.n8,u=(l-t)*this.Fr.n8;let h=this.Fr.sub(this.coef.slice(u,u+this.Fr.n8),this.coef.slice(d,d+this.Fr.n8));if(o||(a?h=i.neg(h):h=i.mul(r,h)),this.coef.set(h,d),l>this.length()-t-1&&!this.Fr.isZero(h))throw new Error("Polynomial is not divisible")}return this}byX(){const t=this.length()+1>32768?new Qt(this.coef.byteLength+this.Fr.n8):new Uint8Array(this.coef.byteLength+this.Fr.n8);t.set(this.Fr.zero,0),t.set(this.coef,this.Fr.n8),this.coef=t}static async expX(t,e,i=!1){const r=t.Fr;if(e<1)throw new Error("Compute a new polynomial to a zero or negative number is not allowed");if(e===1)return await ge.fromEvaluations(t.coef,curve,t.logger);const s=i?t.degree():t.length()-1,o=s*e+1>32768?new Qt((s*e+1)*r.n8):new Uint8Array((s*e+1)*r.n8);o.set(t.getCoef(0),0);for(let a=1;a<=s;a++){const l=a*r.n8,d=t.getCoef(a);o.set(d,l*e)}return new ge(o,t.curve,t.logger)}split(t,e,i){if(t<1)throw new Error(`Polynomials can't be split in ${t} parts`);if(t===1)return[this];if(i.length!==0&&i.length<t-1)throw new Error(`Blinding factors length must be ${t-1}`);const r=(e+1)*this.Fr.n8;let s=[];const o=Math.ceil((this.degree()+1)*this.Fr.n8/r);if(o<t)for(let a=o;a<t;a++)s[a]=new ge(new Uint8Array(this.Fr.n8),this.curve,this.logger);t=Math.min(t,o);for(let a=0;a<t;a++){const l=t-1===a,d=l?this.coef.byteLength-(t-1)*r:r+this.Fr.n8;let u=d/this.Fr.n8>32768?new Qt(d):new Uint8Array(d);s[a]=new ge(u,this.curve,this.logger);const h=a*r,m=l?this.coef.byteLength:(a+1)*r;if(s[a].coef.set(this.coef.slice(h,m),0),l||s[a].coef.set(i[a],r),a!==0){const p=this.Fr.sub(s[a].coef.slice(0,this.Fr.n8),i[a-1]);s[a].coef.set(p,0)}l&&s[a].truncate()}return s}truncate(){const t=this.degree();if(t+1<this.coef.byteLength/this.Fr.n8){const e=t+1>32768?new Qt((t+1)*this.Fr.n8):new Uint8Array((t+1)*this.Fr.n8);e.set(this.coef.slice(0,(t+1)*this.Fr.n8),0),this.coef=e}}static lagrangePolynomialInterpolation(t,e,i){const r=i.Fr;let s=o(0);for(let a=1;a<t.length;a++)s.add(o(a));return s;function o(a){let l;for(let h=0;h<t.length;h++)if(h!==a)if(l===void 0){let m=t.length>32768?new Qt(t.length*r.n8):new Uint8Array(t.length*r.n8);l=new ge(m,i),l.setCoef(0,r.neg(t[h])),l.setCoef(1,r.one)}else l.byXSubValue(t[h]);let d=l.evaluate(t[a]);d=r.inv(d);const u=r.mul(e[a],d);return l.mulScalar(u),l}}static zerofierPolynomial(t,e){const i=e.Fr;let r=t.length+1>32768?new Qt((t.length+1)*i.n8):new Uint8Array((t.length+1)*i.n8),s=new ge(r,e);s.setCoef(0,i.neg(t[0])),s.setCoef(1,i.one);for(let o=1;o<t.length;o++)s.byXSubValue(t[o]);return s}print(){const t=this.Fr;let e="";for(let i=this.degree();i>=0;i--){const r=this.getCoef(i);t.eq(t.zero,r)||(t.isNegative(r)?e+=" - ":i!==this.degree()&&(e+=" + "),e+=t.toString(r),i>0&&(e+=i>1?"x^"+i:"x"))}console.log(e)}async multiExponentiation(t,e){const i=this.coef.byteLength/this.Fr.n8,r=t.slice(0,i*this.G1.F.n8*2),s=await this.Fr.batchFromMontgomery(this.coef);let o=await this.G1.multiExpAffine(r,s,this.logger,e);return o=this.G1.toAffine(o),o}}class yn{constructor(t,e,i){this.eval=t,this.curve=e,this.Fr=e.Fr,this.logger=i}static async fromPolynomial(t,e,i,r){const s=new Qt(t.length()*e*i.Fr.n8);s.set(t.coef,0);const o=await i.Fr.fft(s);return new yn(o,i,r)}getEvaluation(t){const e=t*this.Fr.n8;if(e+this.Fr.n8>this.eval.byteLength)throw new Error("Evaluations.getEvaluation() out of bounds");return this.eval.slice(e,e+this.Fr.n8)}length(){let t=this.eval.byteLength/this.Fr.n8;if(t!==Math.floor(this.eval.byteLength/this.Fr.n8))throw new Error("Polynomial evaluations buffer has incorrect size");return t===0&&this.logger.warn("Polynomial has length zero"),t}}const{stringifyBigInts:i8}=An;async function pM(n,t,e,i){const{fd:r,sections:s}=await sn(t,"wtns",2);e&&e.debug("> Reading witness file");const o=await ph(r,s);e&&e.debug("> Reading zkey file");const{fd:a,sections:l}=await sn(n,"zkey",2),d=await ys(a,l,void 0,i);if(d.protocol!="plonk")throw new Error("zkey file is not plonk");if(!be.eq(d.r,o.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(o.nWitness!=d.nVars-d.nAdditions)throw new Error(`Invalid witness length. Circuit: ${d.nVars}, witness: ${o.nWitness}, ${d.nAdditions}`);const u=d.curve,h=u.Fr,m=u.Fr.n8,p=d.domainSize*m;e&&(e.debug("----------------------------"),e.debug("  PLONK PROVE SETTINGS"),e.debug(`  Curve:         ${u.name}`),e.debug(`  Circuit power: ${d.power}`),e.debug(`  Domain size:   ${d.domainSize}`),e.debug(`  Vars:          ${d.nVars}`),e.debug(`  Public vars:   ${d.nPublic}`),e.debug(`  Constraints:   ${d.nConstraints}`),e.debug(`  Additions:     ${d.nAdditions}`),e.debug("----------------------------")),e&&e.debug("> Reading witness file data");const E=await Xe(r,s,2);E.set(h.zero,0);const C=new Qt(m*d.nAdditions);let v={},A={},x={},P={},W=new b3(u,e);const K=new Rc(u);e&&e.debug(`> Reading Section ${e8}. Additions`),await J(),e&&e.debug(`> Reading Section ${sc}. Sigma1, Sigma2 & Sigma 3`),e&&e.debug(" Reading Sigma polynomials "),A.Sigma1=new ge(new Qt(p),u,e),A.Sigma2=new ge(new Qt(p),u,e),A.Sigma3=new ge(new Qt(p),u,e),await a.readToBuffer(A.Sigma1.coef,0,p,l[sc][0].p),await a.readToBuffer(A.Sigma2.coef,0,p,l[sc][0].p+5*p),await a.readToBuffer(A.Sigma3.coef,0,p,l[sc][0].p+10*p),e&&e.debug(" Reading Sigma evaluations"),x.Sigma1=new yn(new Qt(p*4),u,e),x.Sigma2=new yn(new Qt(p*4),u,e),x.Sigma3=new yn(new Qt(p*4),u,e),await a.readToBuffer(x.Sigma1.eval,0,p*4,l[sc][0].p+p),await a.readToBuffer(x.Sigma2.eval,0,p*4,l[sc][0].p+6*p),await a.readToBuffer(x.Sigma3.eval,0,p*4,l[sc][0].p+11*p),e&&e.debug(`> Reading Section ${n8}. Powers of Tau`);const j=await Xe(a,l,n8);let b=[];for(let k=1;k<=d.nPublic;k++){const H=E.slice(k*h.n8,k*h.n8+h.n8);b.push(be.fromRprLE(H))}e&&e.debug(""),e&&e.debug("> ROUND 1"),await z(),e&&e.debug("> ROUND 2"),await w(),e&&e.debug("> ROUND 3"),await V(),e&&e.debug("> ROUND 4"),await Q(),e&&e.debug("> ROUND 5"),await $(),await a.close(),await r.close();let B=W.toObjectProof(!1);return B.protocol="plonk",B.curve=u.name,e&&e.debug("PLONK PROVER FINISHED"),{proof:i8(B),publicSignals:i8(b)};async function J(){e&&e.debug(" Computing additions");const k=await Xe(a,l,e8),H=8+m*2;for(let L=0;L<d.nAdditions;L++){e&&L!==0&&L%1e5===0&&e.debug(`    addition ${L}/${d.nAdditions}`);let g=L*H;const D=it(k,g);g+=4;const S=it(k,g);g+=4;const lt=k.slice(g,g+m);g+=m;const ct=k.slice(g,g+m),G=st(D),ft=st(S),vt=h.add(h.mul(lt,G),h.mul(ct,ft));C.set(vt,m*L)}}function it(k,H){const L=k.slice(H,H+4);return new DataView(L.buffer,L.byteOffset,L.byteLength).getUint32(0,!0)}function st(k){return k<d.nVars-d.nAdditions?E.slice(k*m,k*m+m):k<d.nVars?C.slice((k-(d.nVars-d.nAdditions))*m,(k-(d.nVars-d.nAdditions))*m+m):u.Fr.zero}async function z(){P.b=[];for(let g=1;g<=11;g++)P.b[g]=u.Fr.random();e&&e.debug("> Computing A, B, C wire polynomials"),await I(),e&&e.debug("> Computing A, B, C MSM");let k=await A.A.multiExponentiation(j,"A"),H=await A.B.multiExponentiation(j,"B"),L=await A.C.multiExponentiation(j,"C");return W.addPolynomial("A",k),W.addPolynomial("B",H),W.addPolynomial("C",L),0}async function I(){e&&e.debug(" Reading data from zkey file"),v.A=new Qt(p),v.B=new Qt(p),v.C=new Qt(p);const k=await Xe(a,l,Pnt),H=await Xe(a,l,Ont),L=await Xe(a,l,Fnt);for(let g=0;g<d.nConstraints;g++){const D=g*m,S=g*4,lt=it(k,S);v.A.set(st(lt),D);const ct=it(H,S);v.B.set(st(ct),D);const G=it(L,S);v.C.set(st(G),D)}if(v.A=await h.batchToMontgomery(v.A),v.B=await h.batchToMontgomery(v.B),v.C=await h.batchToMontgomery(v.C),e&&e.debug(" Computing A ifft"),A.A=await ge.fromEvaluations(v.A,u,e),e&&e.debug(" Computing B ifft"),A.B=await ge.fromEvaluations(v.B,u,e),e&&e.debug(" Computing C ifft"),A.C=await ge.fromEvaluations(v.C,u,e),e&&e.debug(" Computing A fft"),x.A=await yn.fromPolynomial(A.A,4,u,e),e&&e.debug(" Computing B fft"),x.B=await yn.fromPolynomial(A.B,4,u,e),e&&e.debug(" Computing C fft"),x.C=await yn.fromPolynomial(A.C,4,u,e),A.A.blindCoefficients([P.b[2],P.b[1]]),A.B.blindCoefficients([P.b[4],P.b[3]]),A.C.blindCoefficients([P.b[6],P.b[5]]),A.A.degree()>=d.domainSize+2)throw new Error("A Polynomial is not well calculated");if(A.B.degree()>=d.domainSize+2)throw new Error("B Polynomial is not well calculated");if(A.C.degree()>=d.domainSize+2)throw new Error("C Polynomial is not well calculated")}async function w(){e&&e.debug("> Computing challenges beta and gamma"),K.reset(),K.addPolCommitment(d.Qm),K.addPolCommitment(d.Ql),K.addPolCommitment(d.Qr),K.addPolCommitment(d.Qo),K.addPolCommitment(d.Qc),K.addPolCommitment(d.S1),K.addPolCommitment(d.S2),K.addPolCommitment(d.S3);for(let H=0;H<d.nPublic;H++)K.addScalar(v.A.slice(H*m,H*m+m));K.addPolCommitment(W.getPolynomial("A")),K.addPolCommitment(W.getPolynomial("B")),K.addPolCommitment(W.getPolynomial("C")),P.beta=K.getChallenge(),e&&e.debug(" challenges.beta: "+h.toString(P.beta,16)),K.reset(),K.addScalar(P.beta),P.gamma=K.getChallenge(),e&&e.debug(" challenges.gamma: "+h.toString(P.gamma,16)),e&&e.debug("> Computing Z polynomial"),await T(),e&&e.debug("> Computing Z MSM");let k=await A.Z.multiExponentiation(j,"Z");W.addPolynomial("Z",k)}async function T(){e&&e.debug(" Computing Z evaluations");let k=new Qt(p),H=new Qt(p);k.set(h.one,0),H.set(h.one,0);let L=h.one;for(let g=0;g<d.domainSize;g++){const D=g*m,S=v.A.slice(D,D+m),lt=v.B.slice(D,D+m),ct=v.C.slice(D,D+m),G=h.mul(P.beta,L);let ft=h.add(S,G);ft=h.add(ft,P.gamma);let vt=h.add(lt,h.mul(d.k1,G));vt=h.add(vt,P.gamma);let wt=h.add(ct,h.mul(d.k2,G));wt=h.add(wt,P.gamma);let bt=h.mul(ft,h.mul(vt,wt)),Ft=h.add(S,h.mul(x.Sigma1.getEvaluation(g*4),P.beta));Ft=h.add(Ft,P.gamma);let Pt=h.add(lt,h.mul(x.Sigma2.getEvaluation(g*4),P.beta));Pt=h.add(Pt,P.gamma);let Gt=h.add(ct,h.mul(x.Sigma3.getEvaluation(g*4),P.beta));Gt=h.add(Gt,P.gamma);let $t=h.mul(Ft,h.mul(Pt,Gt));bt=h.mul(k.slice(D,D+m),bt),k.set(bt,(g+1)%d.domainSize*m),$t=h.mul(H.slice(D,D+m),$t),H.set($t,(g+1)%d.domainSize*m),L=h.mul(L,h.w[d.power])}H=await h.batchInverse(H);for(let g=0;g<d.domainSize;g++){const D=g*m,S=h.mul(k.slice(D,D+m),H.slice(D,D+m));k.set(S,D)}if(v.Z=k,!h.eq(k.slice(0,m),h.one))throw new Error("Copy constraints does not match");if(e&&e.debug(" Computing Z ifft"),A.Z=await ge.fromEvaluations(v.Z,u,e),e&&e.debug(" Computing Z fft"),x.Z=await yn.fromPolynomial(A.Z,4,u,e),A.Z.blindCoefficients([P.b[9],P.b[8],P.b[7]]),A.Z.degree()>=d.domainSize+3)throw new Error("Z Polynomial is not well calculated");delete v.Z}async function V(){e&&e.debug("> Computing challenge alpha"),K.reset(),K.addScalar(P.beta),K.addScalar(P.gamma),K.addPolCommitment(W.getPolynomial("Z")),P.alpha=K.getChallenge(),P.alpha2=h.square(P.alpha),e&&e.debug(" challenges.alpha: "+h.toString(P.alpha,16)),e&&e.debug("> Computing T polynomial"),await Y(),e&&e.debug("> Computing T MSM");let k=await A.T1.multiExponentiation(j,"T1"),H=await A.T2.multiExponentiation(j,"T2"),L=await A.T3.multiExponentiation(j,"T3");W.addPolynomial("T1",k),W.addPolynomial("T2",H),W.addPolynomial("T3",L)}async function Y(){e&&e.debug(` Reading sections ${_w}, ${bw}, ${ww}, ${vw}, ${xw}. Q selectors`),x.QL=new yn(new Qt(p*4),u,e),x.QR=new yn(new Qt(p*4),u,e),x.QM=new yn(new Qt(p*4),u,e),x.QO=new yn(new Qt(p*4),u,e),x.QC=new yn(new Qt(p*4),u,e),await a.readToBuffer(x.QL.eval,0,p*4,l[_w][0].p+p),await a.readToBuffer(x.QR.eval,0,p*4,l[bw][0].p+p),await a.readToBuffer(x.QM.eval,0,p*4,l[ww][0].p+p),await a.readToBuffer(x.QO.eval,0,p*4,l[vw][0].p+p),await a.readToBuffer(x.QC.eval,0,p*4,l[xw][0].p+p),x.Lagrange=new yn(new Qt(p*4*d.nPublic),u,e);for(let g=0;g<d.nPublic;g++)await a.readToBuffer(x.Lagrange.eval,g*p*4,p*4,l[jnt][0].p+g*5*p+p);v.T=new Qt(p*4),v.Tz=new Qt(p*4),e&&e.debug(" Computing T evaluations");let k=h.one;for(let g=0;g<d.domainSize*4;g++){e&&g!==0&&g%1e5===0&&e.debug(`      T evaluation ${g}/${d.domainSize*4}`);const D=x.A.getEvaluation(g),S=x.B.getEvaluation(g),lt=x.C.getEvaluation(g),ct=x.Z.getEvaluation(g),G=x.Z.getEvaluation((d.domainSize*4+4+g)%(d.domainSize*4)),ft=x.QM.getEvaluation(g),vt=x.QL.getEvaluation(g),wt=x.QR.getEvaluation(g),bt=x.QO.getEvaluation(g),Ft=x.QC.getEvaluation(g),Pt=x.Sigma1.getEvaluation(g),Gt=x.Sigma2.getEvaluation(g),$t=x.Sigma3.getEvaluation(g),kt=h.add(P.b[2],h.mul(P.b[1],k)),Rt=h.add(P.b[4],h.mul(P.b[3],k)),Ht=h.add(P.b[6],h.mul(P.b[5],k)),Kt=h.square(k),se=h.add(h.add(h.mul(P.b[7],Kt),h.mul(P.b[8],k)),P.b[9]),_e=h.mul(k,h.w[d.power]),ae=h.square(_e),de=h.add(h.add(h.mul(P.b[7],ae),h.mul(P.b[8],_e)),P.b[9]);let fe=h.zero;for(let ot=0;ot<d.nPublic;ot++){const Z=ot*4*d.domainSize+g,tt=x.Lagrange.getEvaluation(Z),pt=v.A.slice(ot*m,(ot+1)*m);fe=h.sub(fe,h.mul(tt,pt))}let[Yt,ut]=yw.mul2(D,S,kt,Rt,g%4,h);Yt=h.mul(Yt,ft),ut=h.mul(ut,ft),Yt=h.add(Yt,h.mul(D,vt)),ut=h.add(ut,h.mul(kt,vt)),Yt=h.add(Yt,h.mul(S,wt)),ut=h.add(ut,h.mul(Rt,wt)),Yt=h.add(Yt,h.mul(lt,bt)),ut=h.add(ut,h.mul(Ht,bt)),Yt=h.add(Yt,fe),Yt=h.add(Yt,Ft);const X=h.mul(P.beta,k);let nt=D;nt=h.add(nt,X),nt=h.add(nt,P.gamma);let at=S;at=h.add(at,h.mul(X,d.k1)),at=h.add(at,P.gamma);let M=lt;M=h.add(M,h.mul(X,d.k2)),M=h.add(M,P.gamma);let O=ct,[ht,Et]=yw.mul4(nt,at,M,O,kt,Rt,Ht,se,g%4,h);ht=h.mul(ht,P.alpha),Et=h.mul(Et,P.alpha);let mt=D;mt=h.add(mt,h.mul(P.beta,Pt)),mt=h.add(mt,P.gamma);let xt=S;xt=h.add(xt,h.mul(P.beta,Gt)),xt=h.add(xt,P.gamma);let Lt=lt;Lt=h.add(Lt,h.mul(P.beta,$t)),Lt=h.add(Lt,P.gamma);let At=G,[jt,Wt]=yw.mul4(mt,xt,Lt,At,kt,Rt,Ht,de,g%4,h);jt=h.mul(jt,P.alpha),Wt=h.mul(Wt,P.alpha);let Bt=h.sub(ct,h.one);Bt=h.mul(Bt,x.Lagrange.getEvaluation(g)),Bt=h.mul(Bt,P.alpha2);let Nt=h.mul(se,x.Lagrange.getEvaluation(g));Nt=h.mul(Nt,P.alpha2);let Jt=h.add(h.sub(h.add(Yt,ht),jt),Bt),Xt=h.add(h.sub(h.add(ut,Et),Wt),Nt);v.T.set(Jt,g*m),v.Tz.set(Xt,g*m),k=h.mul(k,h.w[d.power+2])}if(e&&e.debug(" Computing T ifft"),A.T=await ge.fromEvaluations(v.T,u,e),e&&e.debug(" Computing T / ZH"),A.T.divZh(d.domainSize,4),e&&e.debug(" Computing Tz ifft"),A.Tz=await ge.fromEvaluations(v.Tz,u,e),A.T.add(A.Tz),A.T.degree()>=d.domainSize*3+6)throw new Error("T Polynomial is not well calculated");e&&e.debug(" Computing T1, T2, T3 polynomials"),A.T1=new ge(new Qt((d.domainSize+1)*m),u,e),A.T2=new ge(new Qt((d.domainSize+1)*m),u,e),A.T3=new ge(new Qt((d.domainSize+6)*m),u,e),A.T1.coef.set(A.T.coef.slice(0,p),0),A.T2.coef.set(A.T.coef.slice(p,p*2),0),A.T3.coef.set(A.T.coef.slice(p*2,p*3+6*m),0),A.T1.setCoef(d.domainSize,P.b[10]);const H=h.sub(A.T2.getCoef(0),P.b[10]);A.T2.setCoef(0,H),A.T2.setCoef(d.domainSize,P.b[11]);const L=h.sub(A.T3.getCoef(0),P.b[11]);A.T3.setCoef(0,L)}async function Q(){e&&e.debug("> Computing challenge xi"),K.reset(),K.addScalar(P.alpha),K.addPolCommitment(W.getPolynomial("T1")),K.addPolCommitment(W.getPolynomial("T2")),K.addPolCommitment(W.getPolynomial("T3")),P.xi=K.getChallenge(),P.xiw=h.mul(P.xi,h.w[d.power]),e&&e.debug(" challenges.xi: "+h.toString(P.xi,16)),W.addEvaluation("eval_a",A.A.evaluate(P.xi)),W.addEvaluation("eval_b",A.B.evaluate(P.xi)),W.addEvaluation("eval_c",A.C.evaluate(P.xi)),W.addEvaluation("eval_s1",A.Sigma1.evaluate(P.xi)),W.addEvaluation("eval_s2",A.Sigma2.evaluate(P.xi)),W.addEvaluation("eval_zw",A.Z.evaluate(P.xiw))}async function $(){e&&e.debug("> Computing challenge v"),K.reset(),K.addScalar(P.xi),K.addScalar(W.getEvaluation("eval_a")),K.addScalar(W.getEvaluation("eval_b")),K.addScalar(W.getEvaluation("eval_c")),K.addScalar(W.getEvaluation("eval_s1")),K.addScalar(W.getEvaluation("eval_s2")),K.addScalar(W.getEvaluation("eval_zw")),P.v=[],P.v[1]=K.getChallenge(),e&&e.debug(" challenges.v: "+h.toString(P.v[1],16));for(let L=2;L<6;L++)P.v[L]=h.mul(P.v[L-1],P.v[1]);e&&e.debug("> Computing linearisation polynomial R(X)"),await F(),e&&e.debug("> Computing opening proof polynomial Wxi(X) polynomial"),R(),e&&e.debug("> Computing opening proof polynomial Wxiw(X) polynomial"),_(),e&&e.debug("> Computing Wxi, Wxiw MSM");let k=await A.Wxi.multiExponentiation(j,"Wxi"),H=await A.Wxiw.multiExponentiation(j,"Wxiw");W.addPolynomial("Wxi",k),W.addPolynomial("Wxiw",H)}async function F(){const k=u.Fr;A.QL=new ge(new Qt(p),u,e),A.QR=new ge(new Qt(p),u,e),A.QM=new ge(new Qt(p),u,e),A.QO=new ge(new Qt(p),u,e),A.QC=new ge(new Qt(p),u,e),await a.readToBuffer(A.QL.coef,0,p,l[_w][0].p),await a.readToBuffer(A.QR.coef,0,p,l[bw][0].p),await a.readToBuffer(A.QM.coef,0,p,l[ww][0].p),await a.readToBuffer(A.QO.coef,0,p,l[vw][0].p),await a.readToBuffer(A.QC.coef,0,p,l[xw][0].p),P.xin=P.xi;for(let Rt=0;Rt<d.power;Rt++)P.xin=k.square(P.xin);P.zh=k.sub(P.xin,k.one);const H=[],L=k.e(d.domainSize);let g=k.one;for(let Rt=1;Rt<=Math.max(1,d.nPublic);Rt++)H[Rt]=k.div(k.mul(g,P.zh),k.mul(L,k.sub(P.xi,g))),g=k.mul(g,k.w[d.power]);const D=k.div(k.sub(P.xin,k.one),k.mul(L,k.sub(P.xi,k.one)));if(e){e.debug("Lagrange Evaluations: ");for(let Rt=1;Rt<H.length;Rt++)e.debug(`L${Rt}(xi)=`+k.toString(H[Rt],16))}let S=k.zero;for(let Rt=0;Rt<b.length;Rt++){const Ht=k.e(b[Rt]);S=k.sub(S,k.mul(Ht,H[Rt+1]))}e&&e.debug("PI: "+k.toString(S,16));const lt=k.mul(W.evaluations.eval_a,W.evaluations.eval_b);let ct=W.evaluations.eval_a;const G=k.mul(P.beta,P.xi);ct=k.add(ct,G),ct=k.add(ct,P.gamma);let ft=W.evaluations.eval_b;ft=k.add(ft,k.mul(G,d.k1)),ft=k.add(ft,P.gamma);let vt=W.evaluations.eval_c;vt=k.add(vt,k.mul(G,d.k2)),vt=k.add(vt,P.gamma);const wt=k.mul(k.mul(k.mul(ct,ft),vt),P.alpha);let bt=W.evaluations.eval_a;bt=k.add(bt,k.mul(P.beta,W.evaluations.eval_s1)),bt=k.add(bt,P.gamma);let Ft=W.evaluations.eval_b;Ft=k.add(Ft,k.mul(P.beta,W.evaluations.eval_s2)),Ft=k.add(Ft,P.gamma);let Pt=k.mul(bt,Ft);Pt=k.mul(Pt,W.evaluations.eval_zw),Pt=k.mul(Pt,P.alpha);const Gt=k.mul(D,P.alpha2);A.R=new ge(new Qt((d.domainSize+6)*m),u,e),A.R.add(A.QM,lt),A.R.add(A.QL,W.evaluations.eval_a),A.R.add(A.QR,W.evaluations.eval_b),A.R.add(A.QO,W.evaluations.eval_c),A.R.add(A.QC),A.R.add(A.Z,wt),A.R.sub(A.Sigma3,k.mul(Pt,P.beta)),A.R.add(A.Z,Gt);let $t=ge.fromPolynomial(A.T3,u,e);$t.mulScalar(k.square(P.xin)),$t.add(A.T2,P.xin),$t.add(A.T1),$t.mulScalar(P.zh),A.R.sub($t);let kt=k.sub(S,k.mul(Pt,k.add(W.evaluations.eval_c,P.gamma)));kt=k.sub(kt,Gt),e&&e.debug("r0: "+k.toString(kt,16)),A.R.addScalar(kt)}function R(){A.Wxi=new ge(new Qt(p+6*m),u,e),A.Wxi.add(A.R),A.Wxi.add(A.A,P.v[1]),A.Wxi.add(A.B,P.v[2]),A.Wxi.add(A.C,P.v[3]),A.Wxi.add(A.Sigma1,P.v[4]),A.Wxi.add(A.Sigma2,P.v[5]),A.Wxi.subScalar(h.mul(P.v[1],W.evaluations.eval_a)),A.Wxi.subScalar(h.mul(P.v[2],W.evaluations.eval_b)),A.Wxi.subScalar(h.mul(P.v[3],W.evaluations.eval_c)),A.Wxi.subScalar(h.mul(P.v[4],W.evaluations.eval_s1)),A.Wxi.subScalar(h.mul(P.v[5],W.evaluations.eval_s2)),A.Wxi.divByZerofier(1,P.xi)}async function _(){A.Wxiw=ge.fromPolynomial(A.Z,u,e),A.Wxiw.subScalar(W.evaluations.eval_zw),A.Wxiw.divByZerofier(1,P.xiw)}}const{unstringifyBigInts:Unt}=An;async function Dnt(n,t,e,i,r,s){const o=Unt(n),a={type:"mem"};return await gg(o,t,a,r),await pM(e,a,i,s)}const{unstringifyBigInts:Ew}=An;async function znt(n,t,e,i){let r=Ew(n);e=Ew(e);let s=Ew(t);const o=await nl(r.curve),a=o.Fr,l=o.G1;i&&i.info("PLONK VERIFIER STARTED");let d=Gnt(o,e);if(r=Wnt(o,r),!Vnt(o,d))return i.error("Proof commitments are not valid."),!1;if(s.length!=r.nPublic)return i&&i.error("Invalid number of public inputs"),!1;if(!qnt(o,d))return i&&i.error("Proof evaluations are not valid"),!1;if(!$nt(o,s))return i&&i.error("Public inputs are not valid."),!1;const u=Hnt(o,d,s,r);if(i){i.debug("beta: "+a.toString(u.beta,16)),i.debug("gamma: "+a.toString(u.gamma,16)),i.debug("alpha: "+a.toString(u.alpha,16)),i.debug("xi: "+a.toString(u.xi,16));for(let x=1;x<6;x++)i&&i.debug("v: "+a.toString(u.v[x],16));i.debug("u: "+a.toString(u.u,16))}const h=Knt(o,u,r);if(i)for(let x=1;x<h.length;x++)i.debug(`L${x}(xi)=`+a.toString(h[x],16));if(s.length!=r.nPublic)return i.error("Number of public signals does not match with vk"),!1;const m=Znt(o,s,h);i&&i.debug("PI(xi): "+a.toString(m,16));const p=Qnt(o,d,u,m,h[1]);i&&i.debug("r0: "+a.toString(p,16));const E=Ynt(o,d,u,r,h[1]);i&&i.debug("D: "+l.toString(l.toAffine(E),16));const C=Xnt(o,d,u,r,E);i&&i.debug("F: "+l.toString(l.toAffine(C),16));const v=Jnt(o,d,u,p);i&&i.debug("E: "+l.toString(l.toAffine(v),16));const A=await tit(o,d,u,r,v,C);return i&&(A?i.info("OK!"):i.warn("Invalid Proof")),A}function Gnt(n,t){const e=n.G1,i=n.Fr,r={};return r.A=e.fromObject(t.A),r.B=e.fromObject(t.B),r.C=e.fromObject(t.C),r.Z=e.fromObject(t.Z),r.T1=e.fromObject(t.T1),r.T2=e.fromObject(t.T2),r.T3=e.fromObject(t.T3),r.eval_a=i.fromObject(t.eval_a),r.eval_b=i.fromObject(t.eval_b),r.eval_c=i.fromObject(t.eval_c),r.eval_zw=i.fromObject(t.eval_zw),r.eval_s1=i.fromObject(t.eval_s1),r.eval_s2=i.fromObject(t.eval_s2),r.Wxi=e.fromObject(t.Wxi),r.Wxiw=e.fromObject(t.Wxiw),r}function Wnt(n,t){const e=n.G1,i=n.G2,r=n.Fr,s=t;return s.Qm=e.fromObject(t.Qm),s.Ql=e.fromObject(t.Ql),s.Qr=e.fromObject(t.Qr),s.Qo=e.fromObject(t.Qo),s.Qc=e.fromObject(t.Qc),s.S1=e.fromObject(t.S1),s.S2=e.fromObject(t.S2),s.S3=e.fromObject(t.S3),s.k1=r.fromObject(t.k1),s.k2=r.fromObject(t.k2),s.X_2=i.fromObject(t.X_2),s}function Vnt(n,t){const e=n.G1;return!(!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.C)||!e.isValid(t.Z)||!e.isValid(t.T1)||!e.isValid(t.T2)||!e.isValid(t.T3)||!e.isValid(t.Wxi)||!e.isValid(t.Wxiw))}function mM(n,t){return be.geq(t,0)&&be.lt(t,n.r)}function jl(n,t){return mM(n,be.fromRprLE(t))}function qnt(n,t){return jl(n,t.eval_a)&&jl(n,t.eval_b)&&jl(n,t.eval_c)&&jl(n,t.eval_s1)&&jl(n,t.eval_s2)&&jl(n,t.eval_zw)}function $nt(n,t){for(let e=0;e<t.length;e++)if(!mM(n,t[e]))return!1;return!0}function Hnt(n,t,e,i){const r=n.Fr,s={},o=new Rc(n);o.addPolCommitment(i.Qm),o.addPolCommitment(i.Ql),o.addPolCommitment(i.Qr),o.addPolCommitment(i.Qo),o.addPolCommitment(i.Qc),o.addPolCommitment(i.S1),o.addPolCommitment(i.S2),o.addPolCommitment(i.S3);for(let a=0;a<e.length;a++)o.addScalar(r.e(e[a]));o.addPolCommitment(t.A),o.addPolCommitment(t.B),o.addPolCommitment(t.C),s.beta=o.getChallenge(),o.reset(),o.addScalar(s.beta),s.gamma=o.getChallenge(),o.reset(),o.addScalar(s.beta),o.addScalar(s.gamma),o.addPolCommitment(t.Z),s.alpha=o.getChallenge(),o.reset(),o.addScalar(s.alpha),o.addPolCommitment(t.T1),o.addPolCommitment(t.T2),o.addPolCommitment(t.T3),s.xi=o.getChallenge(),o.reset(),o.addScalar(s.xi),o.addScalar(t.eval_a),o.addScalar(t.eval_b),o.addScalar(t.eval_c),o.addScalar(t.eval_s1),o.addScalar(t.eval_s2),o.addScalar(t.eval_zw),s.v=[],s.v[1]=o.getChallenge();for(let a=2;a<6;a++)s.v[a]=r.mul(s.v[a-1],s.v[1]);return o.reset(),o.addPolCommitment(t.Wxi),o.addPolCommitment(t.Wxiw),s.u=o.getChallenge(),s}function Knt(n,t,e){const i=n.Fr;let r=t.xi,s=1;for(let d=0;d<e.power;d++)r=i.square(r),s*=2;t.xin=r,t.zh=i.sub(r,i.one);const o=[],a=i.e(s);let l=i.one;for(let d=1;d<=Math.max(1,e.nPublic);d++)o[d]=i.div(i.mul(l,t.zh),i.mul(a,i.sub(t.xi,l))),l=i.mul(l,i.w[e.power]);return o}function Znt(n,t,e){const i=n.Fr;let r=i.zero;for(let s=0;s<t.length;s++){const o=i.e(t[s]);r=i.sub(r,i.mul(o,e[s+1]))}return r}function Qnt(n,t,e,i,r){const s=n.Fr,o=i,a=s.mul(r,s.square(e.alpha));let l=s.add(t.eval_a,s.mul(e.beta,t.eval_s1));l=s.add(l,e.gamma);let d=s.add(t.eval_b,s.mul(e.beta,t.eval_s2));d=s.add(d,e.gamma);let u=s.add(t.eval_c,e.gamma),h=s.mul(s.mul(l,d),u);return h=s.mul(h,t.eval_zw),h=s.mul(h,e.alpha),s.sub(s.sub(o,a),h)}function Ynt(n,t,e,i,r){const s=n.G1,o=n.Fr;let a=s.timesFr(i.Qm,o.mul(t.eval_a,t.eval_b));a=s.add(a,s.timesFr(i.Ql,t.eval_a)),a=s.add(a,s.timesFr(i.Qr,t.eval_b)),a=s.add(a,s.timesFr(i.Qo,t.eval_c)),a=s.add(a,i.Qc);const l=o.mul(e.beta,e.xi),d=o.add(o.add(t.eval_a,l),e.gamma),u=o.add(o.add(t.eval_b,o.mul(l,i.k1)),e.gamma),h=o.add(o.add(t.eval_c,o.mul(l,i.k2)),e.gamma),m=o.mul(o.mul(o.mul(d,u),h),e.alpha),p=o.mul(r,o.square(e.alpha)),E=s.timesFr(t.Z,o.add(o.add(m,p),e.u)),C=o.add(o.add(t.eval_a,o.mul(e.beta,t.eval_s1)),e.gamma),v=o.add(o.add(t.eval_b,o.mul(e.beta,t.eval_s2)),e.gamma),A=o.mul(o.mul(e.alpha,e.beta),t.eval_zw),x=s.timesFr(i.S3,o.mul(o.mul(C,v),A)),P=t.T1,W=s.timesFr(t.T2,e.xin),K=s.timesFr(t.T3,o.square(e.xin));let j=s.add(P,s.add(W,K));return j=s.timesFr(j,e.zh),s.sub(s.sub(s.add(a,E),x),j)}function Xnt(n,t,e,i,r){const s=n.G1;let o=s.add(r,s.timesFr(t.A,e.v[1]));return o=s.add(o,s.timesFr(t.B,e.v[2])),o=s.add(o,s.timesFr(t.C,e.v[3])),o=s.add(o,s.timesFr(i.S1,e.v[4])),o=s.add(o,s.timesFr(i.S2,e.v[5])),o}function Jnt(n,t,e,i){const r=n.G1,s=n.Fr;let o=s.add(s.neg(i),s.mul(e.v[1],t.eval_a));return o=s.add(o,s.mul(e.v[2],t.eval_b)),o=s.add(o,s.mul(e.v[3],t.eval_c)),o=s.add(o,s.mul(e.v[4],t.eval_s1)),o=s.add(o,s.mul(e.v[5],t.eval_s2)),o=s.add(o,s.mul(e.u,t.eval_zw)),r.timesFr(r.one,o)}async function tit(n,t,e,i,r,s){const o=n.G1,a=n.Fr;let l=t.Wxi;l=o.add(l,o.timesFr(t.Wxiw,e.u));let d=o.timesFr(t.Wxi,e.xi);const u=a.mul(a.mul(e.u,e.xi),a.w[i.power]);return d=o.add(d,o.timesFr(t.Wxiw,u)),d=o.add(d,s),d=o.sub(d,r),await n.pairingEq(o.neg(l),i.X_2,d,n.G2.one)}const{unstringifyBigInts:r8}=An;function Nn(n){let t=n.toString(16);for(;t.length<64;)t="0"+t;return t=`"0x${t}"`,t}async function eit(n,t){const e=r8(n),i=r8(t);await nl(e.curve);let r="";for(let s=0;s<i.length;s++)r!=""&&(r=r+","),r=r+Nn(i[s]);return`[${Nn(e.A[0])}, ${Nn(e.A[1])},${Nn(e.B[0])},${Nn(e.B[1])},${Nn(e.C[0])},${Nn(e.C[1])},${Nn(e.Z[0])},${Nn(e.Z[1])},${Nn(e.T1[0])},${Nn(e.T1[1])},${Nn(e.T2[0])},${Nn(e.T2[1])},${Nn(e.T3[0])},${Nn(e.T3[1])},${Nn(e.Wxi[0])},${Nn(e.Wxi[1])},${Nn(e.Wxiw[0])},${Nn(e.Wxiw[1])},${Nn(e.eval_a)},${Nn(e.eval_b)},${Nn(e.eval_c)},${Nn(e.eval_s1)},${Nn(e.eval_s2)},${Nn(e.eval_zw)}][${r}]`}var nit=Object.freeze({__proto__:null,setup:Ent,fullProve:Dnt,prove:pM,verify:znt,exportSolidityCallData:eit});function s8(n,t){return[n,0,0,t.one,t.zero,t.zero,t.zero,t.zero]}function iit(n,t,e,i,r,s,o,a){return[n,t,e,i,r,s,o,a]}function rit(n,t,e,i,r,s,o,a,l){return[n,t,e,i,r,s,o,a]}const Sw=0,Lw=1,sit=2;class oit{constructor(t,e,i,r,s){this.Fr=t,this.logger=s,this.fnGetAdditionConstraint=i,this.fnGetMultiplicationConstraint=r}processR1csConstraint(t,e,i,r){this.normalizeLinearCombination(e),this.normalizeLinearCombination(i),this.normalizeLinearCombination(r);const s=this.getLinearCombinationType(e),o=this.getLinearCombinationType(i);if(s===Sw||o===Sw)return this.processR1csAdditionConstraint(t,r);if(s===Lw){const a=this.joinLinearCombinations(i,r,e[0]);return this.processR1csAdditionConstraint(t,a)}else if(o===Lw){const a=this.joinLinearCombinations(e,r,i[0]);return this.processR1csAdditionConstraint(t,a)}else return this.processR1csMultiplicationConstraint(t,e,i,r)}getLinearCombinationType(t){let e=this.Fr.zero,i=0;const r=Object.keys(t);for(let s=0;s<r.length;s++)t[r[s]]==0n?delete t[r[s]]:r[s]==0?e=this.Fr.add(e,t[r[s]]):i++;return i>0?sit:this.Fr.isZero(e)?Sw:Lw}normalizeLinearCombination(t){const e=Object.keys(t);for(let i=0;i<e.length;i++)this.Fr.isZero(t[e[i]])&&delete t[e[i]];return t}joinLinearCombinations(t,e,i){const r={};for(let s in t)typeof r[s]>"u"?r[s]=this.Fr.mul(i,t[s]):r[s]=this.Fr.add(r[s],this.Fr.mul(i,t[s]));for(let s in e){const o=this.Fr.neg(e[s]);typeof r[s]>"u"?r[s]=o:r[s]=this.Fr.add(r[s],o)}return this.normalizeLinearCombination(r)}reduceCoefs(t,e,i,r,s){const o={k:this.Fr.zero,signals:[],coefs:[]},a=[];for(let l in r)l==0?o.k=this.Fr.add(o.k,r[l]):r[l]!=0n&&a.push([Number(l),r[l]]);for(;a.length>s;){const l=a.shift(),d=a.shift(),u=t.nVars++,h=this.fnGetAdditionConstraint(l[0],d[0],u,this.Fr.neg(l[1]),this.Fr.neg(d[1]),this.Fr.zero,this.Fr.one,this.Fr.zero);e.push(h),i.push([l[0],d[0],l[1],d[1]]),a.push([u,this.Fr.one])}for(let l=0;l<a.length;l++)o.signals[l]=a[l][0],o.coefs[l]=a[l][1];for(;o.coefs.length<s;)o.signals.push(0),o.coefs.push(this.Fr.zero);return o}processR1csAdditionConstraint(t,e){const i=[],r=[],s=this.reduceCoefs(t,i,r,e,3),o=this.fnGetAdditionConstraint(s.signals[0],s.signals[1],s.signals[2],s.coefs[0],s.coefs[1],this.Fr.zero,s.coefs[2],s.k);return i.push(o),[i,r]}processR1csMultiplicationConstraint(t,e,i,r){const s=[],o=[],a=this.reduceCoefs(t,s,o,e,1),l=this.reduceCoefs(t,s,o,i,1),d=this.reduceCoefs(t,s,o,r,1),u=this.fnGetMultiplicationConstraint(a.signals[0],l.signals[0],d.signals[0],this.Fr.mul(a.coefs[0],l.k),this.Fr.mul(a.k,l.coefs[0]),this.Fr.mul(a.coefs[0],l.coefs[0]),this.Fr.neg(d.coefs[0]),this.Fr.sub(this.Fr.mul(a.k,l.k),d.k));return s.push(u),[s,o]}}class gb{constructor(t,e,i){this.n=t,this.polynomials=Array(t).fill(void 0),this.curve=e,this.Fr=e.Fr,this.G1=e.G1,this.logger=i}addPolynomial(t,e){if(t>this.n-1)throw new Error("CPolynomial:addPolynomial, cannot add a polynomial to a position greater than n-1");this.polynomials[t]=e}degree(){let t=this.polynomials.map((e,i)=>e===void 0?0:e.degree()*this.n+i);return Math.max(...t)}getPolynomial(){let t=this.polynomials.map(o=>o===void 0?0:o.degree());const e=this.degree(),i=2**(Va(e-1)+1),r=this.Fr.n8;let s=new ge(new Qt(i*r),this.curve,this.logger);for(let o=0;o<e;o++){const a=o*r,l=a*this.n;for(let d=0;d<this.n;d++)this.polynomials[d]!==void 0&&o<=t[d]&&s.coef.set(this.polynomials[d].coef.slice(a,a+r),l+d*r)}return s}async multiExponentiation(t,e){let i=this.getPolynomial();const r=i.coef.byteLength/this.Fr.n8,s=t.slice(0,r*this.G1.F.n8*2),o=await this.Fr.batchFromMontgomery(i.coef);let a=await this.G1.multiExpAffine(s,o,this.logger,e);return a=this.G1.toAffine(a),a}}async function ait(n,t,e,i){i&&i.info("FFLONK SETUP STARTED"),globalThis.gc&&globalThis.gc(),i&&i.info("> Reading PTau file");const{fd:r,sections:s}=await sn(t,"ptau",1);if(!s[12])throw new Error("Powers of Tau is not well prepared. Section 12 missing.");i&&i.info("> Getting curve from PTau settings");const{curve:o}=await Zr(r,s);i&&i.info("> Reading r1cs file");const{fd:a,sections:l}=await sn(n,"r1cs",1),d=await yg(a,l,{loadConstraints:!1,loadCustomGates:!0});if(d.prime!==o.r)throw new Error("r1cs curve does not match powers of tau ceremony curve");const u=o.Fr,h=o.Fr.n8,m=o.G1.F.n8*2,p=o.G2.F.n8*2;let E={},C={},v,A={nVars:d.nVars,nPublic:d.nOutputs+d.nPubInputs};const x=new Tr;let P=new Tr;if(i&&i.info("> Processing FFlonk constraints"),await it(o.Fr,d,i),globalThis.gc&&globalThis.gc(),A.cirPower=Math.max(tet,Va(x.length+2-1)+1),A.domainSize=2**A.cirPower,s[2][0].size<(A.domainSize*9+18)*m)throw new Error("Powers of Tau is not big enough for this circuit size. Section 2 too small.");if(s[3][0].size<p)throw new Error("Powers of Tau is not well prepared. Section 3 too small.");i&&(i.info("----------------------------"),i.info("  FFLONK SETUP SETTINGS"),i.info(`  Curve:         ${o.name}`),i.info(`  Circuit power: ${A.cirPower}`),i.info(`  Domain size:   ${A.domainSize}`),i.info(`  Vars:          ${A.nVars}`),i.info(`  Public vars:   ${A.nPublic}`),i.info(`  Constraints:   ${x.length}`),i.info(`  Additions:     ${P.length}`),i.info("----------------------------")),i&&i.info("> computing k1 and k2");const[W,K]=_();i&&i.info("> computing w3");const j=k();i&&i.info("> computing w4");const b=H();i&&i.info("> computing w8");const B=L();i&&i.info("> computing wr");const J=g(A.cirPower,o.Fr);return await st(),await a.close(),await r.close(),i&&i.info("FFLONK SETUP FINISHED"),0;async function it(D,S,lt){for(let bt=0;bt<A.nPublic;bt++)x.push(s8(bt+1,D));const ct=new oit(D,s8,iit,rit,lt),G=await Xe(a,l,2);let ft=0;for(let bt=0;bt<S.nConstraints;bt++){lt&&bt!==0&&bt%5e5===0&&lt.info(`    processing r1cs constraints ${bt}/${S.nConstraints}`);const[Ft,Pt]=ct.processR1csConstraint(A,...vt());x.push(...Ft),P.push(...Pt)}function vt(){const bt=[];return bt[0]=wt(),bt[1]=wt(),bt[2]=wt(),bt}function wt(){const bt={},Ft=G.slice(ft,ft+4);ft+=4;const Gt=new DataView(Ft.buffer).getUint32(0,!0),$t=G.slice(ft,ft+(4+S.n8)*Gt);ft+=(4+S.n8)*Gt;const kt=new DataView($t.buffer);for(let Rt=0;Rt<Gt;Rt++){const Ht=kt.getUint32(Rt*(4+S.n8),!0),Kt=S.F.fromRprLE($t,Rt*(4+S.n8)+4);bt[Ht]=Kt}return bt}return 0}async function st(){i&&i.info("> Writing the zkey file");const D=await sr(e,"zkey",1,eet,1<<22,1<<24);i&&i.info(` Writing Section ${ZA}. Zkey Header`),await z(D),i&&i.info(` Writing Section ${vm}. Additions`),await I(D),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${lb}. A Map`),await w(D,lb,0,"A map"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${ub}. B Map`),await w(D,ub,1,"B map"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${db}. C Map`),await w(D,db,2,"C map"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${bf}. QL`),await T(D,bf,3,"QL"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${vf}. QR`),await T(D,vf,4,"QR"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${xf}. QM`),await T(D,xf,5,"QM"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${Ef}. QO`),await T(D,Ef,6,"QO"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${Sf}. QC`),await T(D,Sf,7,"QC"),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Sections ${Lf},${Cf},${Af}. Sigma1, Sigma2 & Sigma 3`),await V(D),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${fb}. Lagrange Polynomials`),await Y(D),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${xm}. Powers of Tau`),await Q(D),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${hb}. C0`),await $(D),globalThis.gc&&globalThis.gc(),i&&i.info(` Writing Section ${cb}. FFlonk Header`),await F(D),globalThis.gc&&globalThis.gc(),i&&i.info("> Writing the zkey file finished"),await D.close()}async function z(D){await We(D,ZA),await D.writeULE32(hh),await Ve(D)}async function I(D){await We(D,vm);const S=new Uint8Array(8+2*h),lt=new DataView(S.buffer);for(let ct=0;ct<P.length;ct++){i&&ct!==0&&ct%5e5===0&&i.info(`      writing Additions: ${ct}/${P.length}`);const G=P[ct];lt.setUint32(0,G[0],!0),lt.setUint32(4,G[1],!0),S.set(G[2],8),S.set(G[3],8+h),await D.write(S)}await Ve(D)}async function w(D,S,lt,ct){await We(D,S);for(let G=0;G<x.length;G++)i&&G!==0&&G%5e5===0&&i.info(`      writing witness ${ct}: ${G}/${x.length}`),await D.writeULE32(x[G][lt]);await Ve(D)}async function T(D,S,lt,ct){let G=new Qt(A.domainSize*h);for(let ft=0;ft<x.length;ft++)G.set(x[ft][lt],ft*h),i&&ft!==0&&ft%5e5===0&&i.info(`      writing ${ct}: ${ft}/${x.length}`);E[ct]=await ge.fromEvaluations(G,o,i),C[ct]=await yn.fromPolynomial(E[ct],4,o,i),await We(D,S),await D.write(E[ct].coef),await D.write(C[ct].eval),await Ve(D)}async function V(D){const S=new Qt(h*A.domainSize*3),lt=new Tr(A.nVars),ct=new Tr(A.nVars);let G=u.one;for(let vt=0;vt<A.domainSize;vt++)vt<x.length?(ft(x[vt][0],vt),ft(x[vt][1],A.domainSize+vt),ft(x[vt][2],A.domainSize*2+vt)):vt<A.domainSize-2?(ft(0,vt),ft(0,A.domainSize+vt),ft(0,A.domainSize*2+vt)):(S.set(G,vt*h),S.set(u.mul(G,W),(A.domainSize+vt)*h),S.set(u.mul(G,K),(A.domainSize*2+vt)*h)),G=u.mul(G,u.w[A.cirPower]),i&&vt!==0&&vt%5e5===0&&i.info(`      writing sigma phase1: ${vt}/${x.length}`);for(let vt=0;vt<A.nVars;vt++)typeof ct[vt]<"u"?S.set(lt[vt],ct[vt]*h):console.log("Variable not used"),i&&vt!==0&&vt%5e5===0&&i.info(`      writing sigma phase2: ${vt}/${A.nVars}`);globalThis.gc&&globalThis.gc();for(let vt=0;vt<3;vt++){const wt=vt===0?Lf:vt===1?Cf:Af;let bt="S"+(vt+1);E[bt]=await ge.fromEvaluations(S.slice(A.domainSize*h*vt,A.domainSize*h*(vt+1)),o,i),C[bt]=await yn.fromPolynomial(E[bt],4,o,i),await We(D,wt),await D.write(E[bt].coef),await D.write(C[bt].eval),await Ve(D),globalThis.gc&&globalThis.gc()}return 0;function ft(vt,wt){typeof lt[vt]>"u"?ct[vt]=wt:S.set(lt[vt],wt*h);let bt;wt<A.domainSize?bt=G:wt<2*A.domainSize?bt=u.mul(G,W):bt=u.mul(G,K),lt[vt]=bt}}async function Y(D){await We(D,fb);const S=Math.max(A.nPublic,1);for(let lt=0;lt<S;lt++){let ct=new Qt(A.domainSize*h);ct.set(u.one,lt*h),await R(D,ct)}await Ve(D)}async function Q(D){await We(D,xm),v=new Qt((A.domainSize*9+18)*m),await r.readToBuffer(v,0,(A.domainSize*9+18)*m,s[2][0].p),await D.write(v),await Ve(D)}async function $(D){let S=new gb(8,o,i);if(S.addPolynomial(0,E.QL),S.addPolynomial(1,E.QR),S.addPolynomial(2,E.QO),S.addPolynomial(3,E.QM),S.addPolynomial(4,E.QC),S.addPolynomial(5,E.S1),S.addPolynomial(6,E.S2),S.addPolynomial(7,E.S3),E.C0=S.getPolynomial(),E.C0.degree()>=8*A.domainSize)throw new Error("C0 Polynomial is not well calculated");await We(D,hb),await D.write(E.C0.coef),await Ve(D)}async function F(D){await We(D,cb);const S=o.q,lt=(Math.floor((be.bitLength(S)-1)/64)+1)*8;await D.writeULE32(lt),await gs(D,S,lt);const ct=o.r,G=(Math.floor((be.bitLength(ct)-1)/64)+1)*8;await D.writeULE32(G),await gs(D,ct,G),await D.writeULE32(A.nVars),await D.writeULE32(A.nPublic),await D.writeULE32(A.domainSize),await D.writeULE32(P.length),await D.writeULE32(x.length),await D.write(W),await D.write(K),await D.write(j),await D.write(b),await D.write(B),await D.write(J);let ft;ft=await r.read(p,s[3][0].p+p),await D.write(ft);let vt=await E.C0.multiExponentiation(v,"C0");await D.write(vt),await Ve(D)}async function R(D,S){const[lt,ct]=await ge.to4T(S,A.domainSize,[],u);return await D.write(lt),await D.write(ct),[lt,ct]}function _(){let D=u.two;for(;lt(D,[],A.cirPower);)u.add(D,u.one);let S=u.add(D,u.one);for(;lt(S,[D],A.cirPower);)u.add(S,u.one);return[D,S];function lt(ct,G,ft){const vt=2**ft;let wt=u.one;for(let bt=0;bt<vt;bt++){if(u.eq(ct,wt))return!0;for(let Ft=0;Ft<G.length;Ft++)if(u.eq(ct,u.mul(G[Ft],wt)))return!0;wt=u.mul(wt,u.w[ft])}return!1}}function k(){let D=u.e(31624),lt=be.div(3648040478639879203707734290876212514758060733402672390616367364429301415936n,be.e(3));return u.exp(D,lt)}function H(){return u.w[2]}function L(){return u.w[3]}function g(D,S){const lt=S.e(467799165886069610036046866799264026481344299079011762026774533774345988080n);return S.exp(lt,2**(28-D))}}const{stringifyBigInts:o8}=An;async function gM(n,t,e,i){e&&e.info("FFLONK PROVER STARTED"),e&&e.info("> Reading witness file");const{fd:r,sections:s}=await sn(t,"wtns",2),o=await ph(r,s);e&&e.info("> Reading zkey file");const{fd:a,sections:l}=await sn(n,"zkey",2),d=await ys(a,l,void 0,i);if(d.protocolId!==hh)throw new Error("zkey file is not fflonk");if(!be.eq(d.r,o.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(o.nWitness!==d.nVars-d.nAdditions)throw new Error(`Invalid witness length. Circuit: ${d.nVars}, witness: ${o.nWitness}, ${d.nAdditions}`);const u=d.curve,h=u.Fr,m=u.Fr.n8,p=u.G1.F.n8*2,E=d.domainSize*m;e&&(e.info("----------------------------"),e.info("  FFLONK PROVE SETTINGS"),e.info(`  Curve:         ${u.name}`),e.info(`  Circuit power: ${d.power}`),e.info(`  Domain size:   ${d.domainSize}`),e.info(`  Vars:          ${d.nVars}`),e.info(`  Public vars:   ${d.nPublic}`),e.info(`  Constraints:   ${d.nConstraints}`),e.info(`  Additions:     ${d.nAdditions}`),e.info("----------------------------")),e&&e.info("> Reading witness file data");const C=await Xe(r,s,2);await r.close(),C.set(h.zero,0);const v=new Qt(d.nAdditions*m);let A={},x={},P={},W={},K={},j={},b=new b3(u,e);e&&e.info(`> Reading Section ${vm}. Additions`),await st(),e&&e.info(`> Reading Sections ${Lf},${Cf},${Af}. Sigma1, Sigma2 & Sigma 3`),e&&e.info(" Reading Sigma polynomials "),x.Sigma1=new ge(new Qt(E),u,e),x.Sigma2=new ge(new Qt(E),u,e),x.Sigma3=new ge(new Qt(E),u,e),await a.readToBuffer(x.Sigma1.coef,0,E,l[Lf][0].p),await a.readToBuffer(x.Sigma2.coef,0,E,l[Cf][0].p),await a.readToBuffer(x.Sigma3.coef,0,E,l[Af][0].p),e&&e.info(" Reading Sigma evaluations"),P.Sigma1=new yn(new Qt(E*4),u,e),P.Sigma2=new yn(new Qt(E*4),u,e),P.Sigma3=new yn(new Qt(E*4),u,e),await a.readToBuffer(P.Sigma1.eval,0,E*4,l[Lf][0].p+E),await a.readToBuffer(P.Sigma2.eval,0,E*4,l[Cf][0].p+E),await a.readToBuffer(P.Sigma3.eval,0,E*4,l[Af][0].p+E),e&&e.info(`> Reading Section ${xm}. Powers of Tau`);const B=new Qt(d.domainSize*16*p);await a.readToBuffer(B,0,(d.domainSize*9+18)*p,l[xm][0].p),globalThis.gc&&globalThis.gc(),e&&e.info(""),e&&e.info("> ROUND 1"),await w(),delete x.T0,delete P.QL,delete P.QR,delete P.QM,delete P.QO,delete P.QC,globalThis.gc&&globalThis.gc(),e&&e.info("> ROUND 2"),await T(),delete A.A,delete A.B,delete A.C,delete P.A,delete P.B,delete P.C,delete P.Sigma1,delete P.Sigma2,delete P.Sigma3,delete P.lagrange1,delete P.Z,globalThis.gc&&globalThis.gc(),e&&e.info("> ROUND 3"),await V(),delete x.A,delete x.B,delete x.C,delete x.Z,delete x.T1,delete x.T2,delete x.Sigma1,delete x.Sigma2,delete x.Sigma3,delete x.QL,delete x.QR,delete x.QM,delete x.QC,delete x.QO,globalThis.gc&&globalThis.gc(),e&&e.info("> ROUND 4"),await Y(),globalThis.gc&&globalThis.gc(),e&&e.info("> ROUND 5"),await Q(),delete x.C0,delete x.C1,delete x.C2,delete x.R1,delete x.R2,delete x.F,delete x.L,delete x.ZT,delete x.ZTS2,await a.close(),globalThis.gc&&globalThis.gc(),b.addEvaluation("inv",$());let J=b.toObjectProof();J.protocol="fflonk",J.curve=u.name;let it=[];for(let F=1;F<=d.nPublic;F++){const R=F*m,_=C.slice(R,R+m);it.push(be.fromRprLE(_))}return e&&e.info("FFLONK PROVER FINISHED"),{proof:o8(J),publicSignals:o8(it)};async function st(){e&&e.info(" Computing additions");const F=await Xe(a,l,vm),R=8+m*2;for(let _=0;_<d.nAdditions;_++){e&&_!==0&&_%1e5===0&&e.info(`    addition ${_}/${d.nAdditions}`);let k=_*R;const H=z(F,k);k+=4;const L=z(F,k);k+=4;const g=F.slice(k,k+m);k+=m;const D=F.slice(k,k+m),S=I(H),lt=I(L),ct=h.add(h.mul(g,S),h.mul(D,lt));v.set(ct,m*_)}}function z(F,R){const _=F.slice(R,R+4);return new DataView(_.buffer,_.byteOffset,_.byteLength).getUint32(0,!0)}function I(F){let R=d.nVars-d.nAdditions;if(F<R)return C.slice(F*m,F*m+m);if(F<d.nVars){const _=(F-R)*m;return v.slice(_,_+m)}return h.zero}async function w(){K.b=[];for(let H=1;H<=9;H++)K.b[H]=h.random();e&&e.info("> Computing A, B, C wire polynomials"),await R(),e&&e.info("> Computing T0 polynomial"),await _(),e&&e.info("> Computing C1 polynomial"),await k(),e&&e.info("> Computing C1 multi exponentiation");let F=await x.C1.multiExponentiation(B,"C1");return b.addPolynomial("C1",F),0;async function R(){e&&e.info(" Reading data from zkey file"),A.A=new Qt(E),A.B=new Qt(E),A.C=new Qt(E);const H=await Xe(a,l,lb),L=await Xe(a,l,ub),g=await Xe(a,l,db);for(let D=0;D<d.nConstraints;D++){const S=D*m,lt=D*4,ct=z(H,lt);A.A.set(I(ct),S);const G=z(L,lt);A.B.set(I(G),S);const ft=z(g,lt);A.C.set(I(ft),S)}if(A.A.set(K.b[1],E-64),A.A.set(K.b[2],E-32),A.B.set(K.b[3],E-64),A.B.set(K.b[4],E-32),A.C.set(K.b[5],E-64),A.C.set(K.b[6],E-32),A.A=await h.batchToMontgomery(A.A),A.B=await h.batchToMontgomery(A.B),A.C=await h.batchToMontgomery(A.C),e&&e.info(" Computing A ifft"),x.A=await ge.fromEvaluations(A.A,u,e),e&&e.info(" Computing B ifft"),x.B=await ge.fromEvaluations(A.B,u,e),e&&e.info(" Computing C ifft"),x.C=await ge.fromEvaluations(A.C,u,e),e&&e.info(" Computing A fft"),P.A=await yn.fromPolynomial(x.A,4,u,e),e&&e.info(" Computing B fft"),P.B=await yn.fromPolynomial(x.B,4,u,e),e&&e.info(" Computing C fft"),P.C=await yn.fromPolynomial(x.C,4,u,e),x.A.degree()>=d.domainSize)throw new Error("A Polynomial is not well calculated");if(x.B.degree()>=d.domainSize)throw new Error("B Polynomial is not well calculated");if(x.C.degree()>=d.domainSize)throw new Error("C Polynomial is not well calculated")}async function _(){e&&e.info(` Reading sections ${bf}, ${vf}, ${xf}, ${Ef}, ${Sf}. Q selectors`),P.QL=new yn(new Qt(E*4),u,e),P.QR=new yn(new Qt(E*4),u,e),P.QM=new yn(new Qt(E*4),u,e),P.QO=new yn(new Qt(E*4),u,e),P.QC=new yn(new Qt(E*4),u,e),await a.readToBuffer(P.QL.eval,0,E*4,l[bf][0].p+E),await a.readToBuffer(P.QR.eval,0,E*4,l[vf][0].p+E),await a.readToBuffer(P.QM.eval,0,E*4,l[xf][0].p+E),await a.readToBuffer(P.QO.eval,0,E*4,l[Ef][0].p+E),await a.readToBuffer(P.QC.eval,0,E*4,l[Sf][0].p+E);const H=await Xe(a,l,fb);P.lagrange1=new yn(H,u,e),A.T0=new Qt(E*4),e&&e.info(" Computing T0 evaluations");for(let L=0;L<d.domainSize*4;L++){e&&L!==0&&L%1e5===0&&e.info(`      T0 evaluation ${L}/${d.domainSize*4}`);const g=P.A.getEvaluation(L),D=P.B.getEvaluation(L),S=P.C.getEvaluation(L),lt=P.QL.getEvaluation(L),ct=P.QR.getEvaluation(L),G=P.QM.getEvaluation(L),ft=P.QO.getEvaluation(L),vt=P.QC.getEvaluation(L);let wt=h.zero;for(let kt=0;kt<d.nPublic;kt++){const Rt=kt*5*d.domainSize+d.domainSize+L,Ht=P.lagrange1.getEvaluation(Rt),Kt=A.A.slice(kt*m,(kt+1)*m);wt=h.sub(wt,h.mul(Ht,Kt))}const bt=h.mul(g,lt),Ft=h.mul(D,ct),Pt=h.mul(h.mul(g,D),G),Gt=h.mul(S,ft),$t=h.add(bt,h.add(Ft,h.add(Pt,h.add(Gt,h.add(vt,wt)))));A.T0.set($t,L*m)}if(e&&e.info("buffer T0: "+A.T0.byteLength/m),e&&e.info(" Computing T0 ifft"),x.T0=await ge.fromEvaluations(A.T0,u,e),e&&e.info("T0 length: "+x.T0.length()),e&&e.info("T0 degree: "+x.T0.degree()),e&&e.info(" Computing T0 / ZH"),x.T0.divByZerofier(d.domainSize,h.one),x.T0.degree()>=2*d.domainSize-2)throw new Error(`T0 Polynomial is not well calculated (degree is ${x.T0.degree()} and must be less than ${2*d.domainSize+2}`);delete A.T0}async function k(){let H=new gb(4,u,e);if(H.addPolynomial(0,x.A),H.addPolynomial(1,x.B),H.addPolynomial(2,x.C),H.addPolynomial(3,x.T0),x.C1=H.getPolynomial(),x.C1.degree()>=8*d.domainSize-8)throw new Error("C1 Polynomial is not well calculated")}}async function T(){e&&e.info("> Computing challenges beta and gamma");const F=new Rc(u);F.addPolCommitment(d.C0);for(let g=0;g<d.nPublic;g++)F.addScalar(A.A.slice(g*m,g*m+m));F.addPolCommitment(b.getPolynomial("C1")),K.beta=F.getChallenge(),e&&e.info(" challenges.beta: "+h.toString(K.beta)),F.reset(),F.addScalar(K.beta),K.gamma=F.getChallenge(),e&&e.info(" challenges.gamma: "+h.toString(K.gamma)),e&&e.info("> Computing Z polynomial"),await _(),e&&e.info("> Computing T1 polynomial"),await k(),e&&e.info("> Computing T2 polynomial"),await H(),e&&e.info("> Computing C2 polynomial"),await L(),e&&e.info("> Computing C2 multi exponentiation");let R=await x.C2.multiExponentiation(B,"C2");return b.addPolynomial("C2",R),0;async function _(){e&&e.info(" Computing Z evaluations");let g=new Qt(E),D=new Qt(E);g.set(h.one,0),D.set(h.one,0);let S=h.one;for(let lt=0;lt<d.domainSize;lt++){e&&lt!==0&&lt%1e5===0&&e.info(`    Z evaluation ${lt}/${d.domainSize}`);const ct=lt*m,G=h.mul(K.beta,S);let ft=A.A.slice(ct,ct+m);ft=h.add(ft,G),ft=h.add(ft,K.gamma);let vt=A.B.slice(ct,ct+m);vt=h.add(vt,h.mul(d.k1,G)),vt=h.add(vt,K.gamma);let wt=A.C.slice(ct,ct+m);wt=h.add(wt,h.mul(d.k2,G)),wt=h.add(wt,K.gamma);let bt=h.mul(ft,h.mul(vt,wt)),Ft=A.A.slice(ct,ct+m);Ft=h.add(Ft,h.mul(K.beta,P.Sigma1.getEvaluation(lt*4))),Ft=h.add(Ft,K.gamma);let Pt=A.B.slice(ct,ct+m);Pt=h.add(Pt,h.mul(K.beta,P.Sigma2.getEvaluation(lt*4))),Pt=h.add(Pt,K.gamma);let Gt=A.C.slice(ct,ct+m);Gt=h.add(Gt,h.mul(K.beta,P.Sigma3.getEvaluation(lt*4))),Gt=h.add(Gt,K.gamma);let $t=h.mul(Ft,h.mul(Pt,Gt));bt=h.mul(g.slice(ct,ct+m),bt),g.set(bt,(lt+1)%d.domainSize*m),$t=h.mul(D.slice(ct,ct+m),$t),D.set($t,(lt+1)%d.domainSize*m),S=h.mul(S,h.w[d.power])}D=await h.batchInverse(D);for(let lt=0;lt<d.domainSize;lt++){const ct=lt*m,G=h.mul(g.slice(ct,ct+m),D.slice(ct,ct+m));g.set(G,ct)}if(A.Z=g,!h.eq(g.slice(0,m),h.one))throw new Error("Copy constraints does not match");if(e&&e.info(" Computing Z ifft"),x.Z=await ge.fromEvaluations(A.Z,u,e),e&&e.info(" Computing Z fft"),P.Z=await yn.fromPolynomial(x.Z,4,u,e),x.Z.blindCoefficients([K.b[9],K.b[8],K.b[7]]),x.Z.degree()>=d.domainSize+3)throw new Error("Z Polynomial is not well calculated");delete A.Z}async function k(){e&&e.info(" Computing T1 evaluations"),A.T1=new Qt(E*2),A.T1z=new Qt(E*2);let g=h.one;for(let D=0;D<d.domainSize*2;D++){e&&D!==0&&D%1e5===0&&e.info(`    T1 evaluation ${D}/${d.domainSize*4}`);const S=h.square(g),lt=P.Z.getEvaluation(D*2),ct=h.add(h.add(h.mul(K.b[7],S),h.mul(K.b[8],g)),K.b[9]),G=P.lagrange1.getEvaluation(d.domainSize+D*2);let ft=h.mul(h.sub(lt,h.one),G),vt=h.mul(ct,G);A.T1.set(ft,D*m),A.T1z.set(vt,D*m),g=h.mul(g,h.w[d.power+1])}if(e&&e.info(" Computing T1 ifft"),x.T1=await ge.fromEvaluations(A.T1,u,e),x.T1.divByZerofier(d.domainSize,h.one),e&&e.info(" Computing T1z ifft"),x.T1z=await ge.fromEvaluations(A.T1z,u,e),x.T1.add(x.T1z),x.T1.degree()>=d.domainSize+2)throw new Error("T1 Polynomial is not well calculated");delete A.T1,delete A.T1z,delete x.T1z}async function H(){e&&e.info(" Computing T2 evaluations"),A.T2=new Qt(E*4),A.T2z=new Qt(E*4);let g=h.one;for(let D=0;D<d.domainSize*4;D++){e&&D!==0&&D%1e5===0&&e.info(`    T2 evaluation ${D}/${d.domainSize*4}`);const S=h.square(g),lt=h.mul(g,h.w[d.power]),ct=h.square(lt),G=P.A.getEvaluation(D),ft=P.B.getEvaluation(D),vt=P.C.getEvaluation(D),wt=P.Z.getEvaluation(D),bt=P.Z.getEvaluation((d.domainSize*4+4+D)%(d.domainSize*4)),Ft=h.add(h.add(h.mul(K.b[7],S),h.mul(K.b[8],g)),K.b[9]),Pt=h.add(h.add(h.mul(K.b[7],ct),h.mul(K.b[8],lt)),K.b[9]),Gt=P.Sigma1.getEvaluation(D),$t=P.Sigma2.getEvaluation(D),kt=P.Sigma3.getEvaluation(D),Rt=h.mul(K.beta,g);let Ht=h.add(G,Rt);Ht=h.add(Ht,K.gamma);let Kt=h.add(ft,h.mul(Rt,d.k1));Kt=h.add(Kt,K.gamma);let se=h.add(vt,h.mul(Rt,d.k2));se=h.add(se,K.gamma);let _e=h.mul(h.mul(h.mul(Ht,Kt),se),wt),ae=h.mul(h.mul(h.mul(Ht,Kt),se),Ft),de=h.add(G,h.mul(K.beta,Gt));de=h.add(de,K.gamma);let fe=h.add(ft,h.mul(K.beta,$t));fe=h.add(fe,K.gamma);let Yt=h.add(vt,h.mul(K.beta,kt));Yt=h.add(Yt,K.gamma);let ut=h.mul(h.mul(h.mul(de,fe),Yt),bt),X=h.mul(h.mul(h.mul(de,fe),Yt),Pt),nt=h.sub(_e,ut),at=h.sub(ae,X);A.T2.set(nt,D*m),A.T2z.set(at,D*m),g=h.mul(g,h.w[d.power+2])}if(e&&e.info(" Computing T2 ifft"),x.T2=await ge.fromEvaluations(A.T2,u,e),e&&e.info(" Computing T2 / ZH"),x.T2.divByZerofier(d.domainSize,h.one),e&&e.info(" Computing T2z ifft"),x.T2z=await ge.fromEvaluations(A.T2z,u,e),x.T2.add(x.T2z),x.T2.degree()>=3*d.domainSize)throw new Error("T2 Polynomial is not well calculated");delete A.T2,delete A.T2z,delete x.T2z}async function L(){let g=new gb(3,u,e);if(g.addPolynomial(0,x.Z),g.addPolynomial(1,x.T1),g.addPolynomial(2,x.T2),x.C2=g.getPolynomial(),x.C2.degree()>=9*d.domainSize)throw new Error("C2 Polynomial is not well calculated")}}async function V(){e&&e.info("> Computing challenge xi");const F=new Rc(u);F.addScalar(K.gamma),F.addPolCommitment(b.getPolynomial("C2")),K.xiSeed=F.getChallenge();const R=h.square(K.xiSeed);j.w8=[],j.w8[0]=h.one;for(let _=1;_<8;_++)j.w8[_]=h.mul(j.w8[_-1],d.w8);j.w4=[],j.w4[0]=h.one;for(let _=1;_<4;_++)j.w4[_]=h.mul(j.w4[_-1],d.w4);j.w3=[],j.w3[0]=h.one,j.w3[1]=d.w3,j.w3[2]=h.square(d.w3),j.S0={},j.S0.h0w8=[],j.S0.h0w8[0]=h.mul(R,K.xiSeed);for(let _=1;_<8;_++)j.S0.h0w8[_]=h.mul(j.S0.h0w8[0],j.w8[_]);j.S1={},j.S1.h1w4=[],j.S1.h1w4[0]=h.square(j.S0.h0w8[0]);for(let _=1;_<4;_++)j.S1.h1w4[_]=h.mul(j.S1.h1w4[0],j.w4[_]);j.S2={},j.S2.h2w3=[],j.S2.h2w3[0]=h.mul(j.S1.h1w4[0],R),j.S2.h2w3[1]=h.mul(j.S2.h2w3[0],j.w3[1]),j.S2.h2w3[2]=h.mul(j.S2.h2w3[0],j.w3[2]),j.S2.h3w3=[],j.S2.h3w3[0]=h.mul(j.S2.h2w3[0],d.wr),j.S2.h3w3[1]=h.mul(j.S2.h3w3[0],j.w3[1]),j.S2.h3w3[2]=h.mul(j.S2.h3w3[0],j.w3[2]),K.xi=h.mul(h.square(j.S2.h2w3[0]),j.S2.h2w3[0]),e&&e.info(" challenges.xi: "+h.toString(K.xi)),x.QL=new ge(new Qt(E),u,e),x.QR=new ge(new Qt(E),u,e),x.QM=new ge(new Qt(E),u,e),x.QO=new ge(new Qt(E),u,e),x.QC=new ge(new Qt(E),u,e),await a.readToBuffer(x.QL.coef,0,E,l[bf][0].p),await a.readToBuffer(x.QR.coef,0,E,l[vf][0].p),await a.readToBuffer(x.QM.coef,0,E,l[xf][0].p),await a.readToBuffer(x.QO.coef,0,E,l[Ef][0].p),await a.readToBuffer(x.QC.coef,0,E,l[Sf][0].p),e&&e.info(" Computing evaluations"),b.addEvaluation("ql",x.QL.evaluate(K.xi)),b.addEvaluation("qr",x.QR.evaluate(K.xi)),b.addEvaluation("qm",x.QM.evaluate(K.xi)),b.addEvaluation("qo",x.QO.evaluate(K.xi)),b.addEvaluation("qc",x.QC.evaluate(K.xi)),b.addEvaluation("s1",x.Sigma1.evaluate(K.xi)),b.addEvaluation("s2",x.Sigma2.evaluate(K.xi)),b.addEvaluation("s3",x.Sigma3.evaluate(K.xi)),b.addEvaluation("a",x.A.evaluate(K.xi)),b.addEvaluation("b",x.B.evaluate(K.xi)),b.addEvaluation("c",x.C.evaluate(K.xi)),b.addEvaluation("z",x.Z.evaluate(K.xi)),K.xiw=h.mul(K.xi,h.w[d.power]),b.addEvaluation("zw",x.Z.evaluate(K.xiw)),b.addEvaluation("t1w",x.T1.evaluate(K.xiw)),b.addEvaluation("t2w",x.T2.evaluate(K.xiw))}async function Y(){e&&e.info("> Computing challenge alpha");const F=new Rc(u);F.addScalar(K.xiSeed),F.addScalar(b.getEvaluation("ql")),F.addScalar(b.getEvaluation("qr")),F.addScalar(b.getEvaluation("qm")),F.addScalar(b.getEvaluation("qo")),F.addScalar(b.getEvaluation("qc")),F.addScalar(b.getEvaluation("s1")),F.addScalar(b.getEvaluation("s2")),F.addScalar(b.getEvaluation("s3")),F.addScalar(b.getEvaluation("a")),F.addScalar(b.getEvaluation("b")),F.addScalar(b.getEvaluation("c")),F.addScalar(b.getEvaluation("z")),F.addScalar(b.getEvaluation("zw")),F.addScalar(b.getEvaluation("t1w")),F.addScalar(b.getEvaluation("t2w")),K.alpha=F.getChallenge(),e&&e.info(" challenges.alpha: "+h.toString(K.alpha)),e&&e.info("> Reading C0 polynomial"),x.C0=new ge(new Qt(E*8),u,e),await a.readToBuffer(x.C0.coef,0,E*8,l[hb][0].p),e&&e.info("> Computing R0 polynomial"),_(),e&&e.info("> Computing R1 polynomial"),k(),e&&e.info("> Computing R2 polynomial"),H(),e&&e.info("> Computing F polynomial"),await L(),e&&e.info("> Computing W1 multi exponentiation");let R=await x.F.multiExponentiation(B,"W1");return b.addPolynomial("W1",R),0;function _(){if(x.R0=ge.lagrangePolynomialInterpolation([j.S0.h0w8[0],j.S0.h0w8[1],j.S0.h0w8[2],j.S0.h0w8[3],j.S0.h0w8[4],j.S0.h0w8[5],j.S0.h0w8[6],j.S0.h0w8[7]],[x.C0.evaluate(j.S0.h0w8[0]),x.C0.evaluate(j.S0.h0w8[1]),x.C0.evaluate(j.S0.h0w8[2]),x.C0.evaluate(j.S0.h0w8[3]),x.C0.evaluate(j.S0.h0w8[4]),x.C0.evaluate(j.S0.h0w8[5]),x.C0.evaluate(j.S0.h0w8[6]),x.C0.evaluate(j.S0.h0w8[7])],u),x.R0.degree()>7)throw new Error("R0 Polynomial is not well calculated")}function k(){if(x.R1=ge.lagrangePolynomialInterpolation([j.S1.h1w4[0],j.S1.h1w4[1],j.S1.h1w4[2],j.S1.h1w4[3]],[x.C1.evaluate(j.S1.h1w4[0]),x.C1.evaluate(j.S1.h1w4[1]),x.C1.evaluate(j.S1.h1w4[2]),x.C1.evaluate(j.S1.h1w4[3])],u),x.R1.degree()>3)throw new Error("R1 Polynomial is not well calculated")}function H(){if(x.R2=ge.lagrangePolynomialInterpolation([j.S2.h2w3[0],j.S2.h2w3[1],j.S2.h2w3[2],j.S2.h3w3[0],j.S2.h3w3[1],j.S2.h3w3[2]],[x.C2.evaluate(j.S2.h2w3[0]),x.C2.evaluate(j.S2.h2w3[1]),x.C2.evaluate(j.S2.h2w3[2]),x.C2.evaluate(j.S2.h3w3[0]),x.C2.evaluate(j.S2.h3w3[1]),x.C2.evaluate(j.S2.h3w3[2])],u),x.R2.degree()>5)throw new Error("R2 Polynomial is not well calculated")}async function L(){e&&e.info(" Computing F polynomial"),x.F=ge.fromPolynomial(x.C0,u,e),x.F.sub(x.R0),x.F.divByZerofier(8,K.xi);let g=ge.fromPolynomial(x.C1,u,e);g.sub(x.R1),g.mulScalar(K.alpha),g.divByZerofier(4,K.xi);let D=ge.fromPolynomial(x.C2,u,e);if(D.sub(x.R2),D.mulScalar(h.square(K.alpha)),D.divByZerofier(3,K.xi),D.divByZerofier(3,K.xiw),x.F.add(g),x.F.add(D),x.F.degree()>=9*d.domainSize-6)throw new Error("F Polynomial is not well calculated")}}async function Q(){e&&e.info("> Computing challenge y");const F=new Rc(u);F.addScalar(K.alpha),F.addPolCommitment(b.getPolynomial("W1")),K.y=F.getChallenge(),e&&e.info(" challenges.y: "+h.toString(K.y)),e&&e.info("> Computing L polynomial"),await L(),e&&e.info("> Computing ZTS2 polynomial"),await D();let R=x.ZTS2.evaluate(K.y);R=h.inv(R),x.L.mulScalar(R);const _=ge.fromCoefficientsArray([h.neg(K.y),h.one],u);e&&e.info("> Computing W' = L / ZTS2 polynomial");const k=x.L.divBy(_);if(k.degree()>0)throw new Error(`Degree of L(X)/(ZTS2(y)(X-y)) remainder is ${k.degree()} and should be 0`);if(x.L.degree()>=9*d.domainSize-1)throw new Error("Degree of L(X)/(ZTS2(y)(X-y)) is not correct");e&&e.info("> Computing W' multi exponentiation");let H=await x.L.multiExponentiation(B,"W2");return b.addPolynomial("W2",H),0;async function L(){e&&e.info(" Computing L polynomial");const S=x.R0.evaluate(K.y),lt=x.R1.evaluate(K.y),ct=x.R2.evaluate(K.y);let G=h.sub(K.y,j.S0.h0w8[0]);for(let kt=1;kt<8;kt++)G=h.mul(G,h.sub(K.y,j.S0.h0w8[kt]));let ft=h.sub(K.y,j.S1.h1w4[0]);for(let kt=1;kt<4;kt++)ft=h.mul(ft,h.sub(K.y,j.S1.h1w4[kt]));let vt=h.sub(K.y,j.S2.h2w3[0]);for(let kt=1;kt<3;kt++)vt=h.mul(vt,h.sub(K.y,j.S2.h2w3[kt]));for(let kt=0;kt<3;kt++)vt=h.mul(vt,h.sub(K.y,j.S2.h3w3[kt]));let wt=h.mul(ft,vt),bt=h.mul(K.alpha,h.mul(G,vt)),Ft=h.mul(h.square(K.alpha),h.mul(G,ft));W.denH1=ft,W.denH2=vt,x.L=ge.fromPolynomial(x.C0,u,e),x.L.subScalar(S),x.L.mulScalar(wt);let Pt=ge.fromPolynomial(x.C1,u,e);Pt.subScalar(lt),Pt.mulScalar(bt);let Gt=ge.fromPolynomial(x.C2,u,e);Gt.subScalar(ct),Gt.mulScalar(Ft),x.L.add(Pt),x.L.add(Gt),e&&e.info("> Computing ZT polynomial"),await g();const $t=x.ZT.evaluate(K.y);if(x.F.mulScalar($t),x.L.sub(x.F),x.L.degree()>=9*d.domainSize)throw new Error("L Polynomial is not well calculated");delete A.L}async function g(){x.ZT=ge.zerofierPolynomial([j.S0.h0w8[0],j.S0.h0w8[1],j.S0.h0w8[2],j.S0.h0w8[3],j.S0.h0w8[4],j.S0.h0w8[5],j.S0.h0w8[6],j.S0.h0w8[7],j.S1.h1w4[0],j.S1.h1w4[1],j.S1.h1w4[2],j.S1.h1w4[3],j.S2.h2w3[0],j.S2.h2w3[1],j.S2.h2w3[2],j.S2.h3w3[0],j.S2.h3w3[1],j.S2.h3w3[2]],u)}async function D(){x.ZTS2=ge.zerofierPolynomial([j.S1.h1w4[0],j.S1.h1w4[1],j.S1.h1w4[2],j.S1.h1w4[3],j.S2.h2w3[0],j.S2.h2w3[1],j.S2.h2w3[2],j.S2.h3w3[0],j.S2.h3w3[1],j.S2.h3w3[2]],u)}}function $(){let F=K.xi;for(let D=0;D<d.power;D++)F=h.square(F);W.zh=h.sub(F,h.one),H(W,j.S0.h0w8,K.y,u),L(W,j.S1.h1w4,K.y,u),g(W,j.S2.h2w3,j.S2.h3w3,K.y,K.xi,K.xiw,u);const R=Math.max(1,d.nPublic);let _=h.one;for(let D=0;D<R;D++)W["Li_"+(D+1)]=h.mul(h.e(d.domainSize),h.sub(K.xi,_)),_=h.mul(_,h.w[d.power]);let k=h.one;for(const D of Object.values(W))if(Array.isArray(D))for(const S of D)k=h.mul(k,S);else k=h.mul(k,D);return h.inv(k);function H(D,S,lt,ct){const G=ct.Fr,ft=S.length,vt=G.mul(G.e(ft),G.exp(S[0],ft-2)),wt=[];for(let bt=0;bt<ft;bt++){const Ft=S[(ft-1)*bt%ft],Pt=G.sub(lt,S[bt]);D[["LiS0_"+(bt+1)]]=G.mul(G.mul(vt,Ft),Pt)}return wt}function L(D,S,lt,ct){const G=ct.Fr,ft=S.length,vt=G.mul(G.e(ft),G.exp(S[0],ft-2)),wt=[];for(let bt=0;bt<ft;bt++){const Ft=S[(ft-1)*bt%ft],Pt=G.sub(lt,S[bt]);D[["LiS1_"+(bt+1)]]=G.mul(G.mul(vt,Ft),Pt)}return wt}function g(D,S,lt,ct,G,ft,vt){const wt=vt.Fr,bt=[],Ft=wt.mul(wt.e(3),S[0]),Pt=wt.sub(G,ft);let Gt=wt.mul(Ft,Pt);for(let Rt=0;Rt<3;Rt++){const Ht=S[2*Rt%3],Kt=wt.sub(ct,S[Rt]);D[["LiS2_"+(Rt+1)]]=wt.mul(Gt,wt.mul(Ht,Kt))}const $t=wt.mul(wt.e(3),lt[0]),kt=wt.sub(ft,G);Gt=wt.mul($t,kt);for(let Rt=0;Rt<3;Rt++){const Ht=lt[2*Rt%3],Kt=wt.sub(ct,lt[Rt]);D[["LiS2_"+(Rt+1+3)]]=wt.mul(Gt,wt.mul(Ht,Kt))}return bt}}}const{unstringifyBigInts:cit}=An;async function lit(n,t,e,i,r,s){const o=cit(n),a={type:"mem"};return await gg(o,t,a,r),await gM(e,a,i,s)}const{unstringifyBigInts:Cw}=An;async function uit(n,t,e,i){i&&i.info("FFLONK VERIFIER STARTED"),n=Cw(n),e=Cw(e);const r=await nl(n.curve),s=dit(r,n),o=new b3(r,i);o.fromObjectProof(e);const a=Cw(t);if(a.length!==s.nPublic)return i.error("Number of public signals does not match with vk"),!1;const l=r.Fr;if(i&&(i.info("----------------------------"),i.info("  FFLONK VERIFY SETTINGS"),i.info(`  Curve:         ${r.name}`),i.info(`  Circuit power: ${s.power}`),i.info(`  Domain size:   ${2**s.power}`),i.info(`  Public vars:   ${s.nPublic}`),i.info("----------------------------")),i&&i.info("> Checking commitments belong to G1"),!fit(r,o,s))return i&&i.error("Proof commitments are not valid"),!1;if(i&&i.info("> Checking evaluations belong to F"),!hit(r,o))return i&&i.error("Proof evaluations are not valid."),!1;if(i&&i.info("> Checking public inputs belong to F"),!pit(r,a))return i&&i.error("Public inputs are not valid."),!1;i&&i.info("> Computing challenges");const{challenges:d,roots:u}=mit(r,o,s,a,i);i&&i.info("> Computing Zero polynomial evaluation Z_H(xi)"),d.zh=l.sub(d.xiN,l.one),d.invzh=l.inv(d.zh),i&&i.info("> Computing Lagrange evaluations");const h=await git(r,d,s);i&&i.info("> Computing polynomial identities PI(X)");const m=yit(r,a,h);i&&i.info("> Computing r0(y)");const p=wit(o,d,u,r,i);i&&i.info("> Computing r1(y)");const E=_it(o,d,u,m,r,i);i&&i.info("> Computing r2(y)");const C=bit(o,d,u,h[1],s,r,i);i&&i.info("> Computing F");const v=vit(r,o,s,d,u);i&&i.info("> Computing E");const A=xit(r,o,d,s,p,E,C);i&&i.info("> Computing J");const x=Eit(r,o,d);i&&i.info("> Validate all evaluations with a pairing");const P=await Sit(r,o,d,s,v,A,x);return i&&(P?i.info("PROOF VERIFIED SUCCESSFULLY"):i.warn("Invalid Proof")),i&&i.info("FFLONK VERIFIER FINISHED"),P}function dit(n,t){const e=t;return e.k1=n.Fr.fromObject(t.k1),e.k2=n.Fr.fromObject(t.k2),e.w=n.Fr.fromObject(t.w),e.w3=n.Fr.fromObject(t.w3),e.w4=n.Fr.fromObject(t.w4),e.w8=n.Fr.fromObject(t.w8),e.wr=n.Fr.fromObject(t.wr),e.X_2=n.G2.fromObject(t.X_2),e.C0=n.G1.fromObject(t.C0),e}function fit(n,t,e){const i=n.G1;return i.isValid(t.polynomials.C1)&&i.isValid(t.polynomials.C2)&&i.isValid(t.polynomials.W1)&&i.isValid(t.polynomials.W2)&&i.isValid(e.C0)}function yM(n,t){return be.geq(t,0)&&be.lt(t,n.r)}function Yi(n,t){return yM(n,be.fromRprLE(t))}function hit(n,t){return Yi(n,t.evaluations.ql)&&Yi(n,t.evaluations.qr)&&Yi(n,t.evaluations.qm)&&Yi(n,t.evaluations.qo)&&Yi(n,t.evaluations.qc)&&Yi(n,t.evaluations.s1)&&Yi(n,t.evaluations.s2)&&Yi(n,t.evaluations.s3)&&Yi(n,t.evaluations.a)&&Yi(n,t.evaluations.b)&&Yi(n,t.evaluations.c)&&Yi(n,t.evaluations.z)&&Yi(n,t.evaluations.zw)&&Yi(n,t.evaluations.t1w)&&Yi(n,t.evaluations.t2w)}function pit(n,t){for(let e=0;e<t.length;e++)if(!yM(n,t[e]))return!1;return!0}function mit(n,t,e,i,r){const s=n.Fr,o={},a={},l=new Rc(n);l.addPolCommitment(e.C0);for(let E=0;E<i.length;E++)l.addScalar(s.e(i[E]));l.addPolCommitment(t.polynomials.C1),o.beta=l.getChallenge(),l.reset(),l.addScalar(o.beta),o.gamma=l.getChallenge(),l.reset(),l.addScalar(o.gamma),l.addPolCommitment(t.polynomials.C2);const d=l.getChallenge(),u=s.square(d);let h=[];h[1]=e.w8,h[2]=s.square(e.w8),h[3]=s.mul(h[2],e.w8),h[4]=s.mul(h[3],e.w8),h[5]=s.mul(h[4],e.w8),h[6]=s.mul(h[5],e.w8),h[7]=s.mul(h[6],e.w8);let m=[];m[1]=e.w4,m[2]=s.square(e.w4),m[3]=s.mul(m[2],e.w4);let p=[];p[1]=e.w3,p[2]=s.square(e.w3),a.S0={},a.S0.h0w8=[],a.S0.h0w8[0]=s.mul(u,d);for(let E=1;E<8;E++)a.S0.h0w8[E]=s.mul(a.S0.h0w8[0],h[E]);a.S1={},a.S1.h1w4=[],a.S1.h1w4[0]=s.square(a.S0.h0w8[0]);for(let E=1;E<4;E++)a.S1.h1w4[E]=s.mul(a.S1.h1w4[0],m[E]);a.S2={},a.S2.h2w3=[],a.S2.h2w3[0]=s.mul(a.S1.h1w4[0],u),a.S2.h2w3[1]=s.mul(a.S2.h2w3[0],p[1]),a.S2.h2w3[2]=s.mul(a.S2.h2w3[0],p[2]),a.S2.h3w3=[],a.S2.h3w3[0]=s.mul(a.S2.h2w3[0],e.wr),a.S2.h3w3[1]=s.mul(a.S2.h3w3[0],p[1]),a.S2.h3w3[2]=s.mul(a.S2.h3w3[0],p[2]),o.xi=s.mul(s.square(a.S2.h2w3[0]),a.S2.h2w3[0]),o.xiw=s.mul(o.xi,s.w[e.power]),o.xiN=o.xi,e.domainSize=1;for(let E=0;E<e.power;E++)o.xiN=s.square(o.xiN),e.domainSize*=2;return l.reset(),l.addScalar(d),l.addScalar(t.evaluations.ql),l.addScalar(t.evaluations.qr),l.addScalar(t.evaluations.qm),l.addScalar(t.evaluations.qo),l.addScalar(t.evaluations.qc),l.addScalar(t.evaluations.s1),l.addScalar(t.evaluations.s2),l.addScalar(t.evaluations.s3),l.addScalar(t.evaluations.a),l.addScalar(t.evaluations.b),l.addScalar(t.evaluations.c),l.addScalar(t.evaluations.z),l.addScalar(t.evaluations.zw),l.addScalar(t.evaluations.t1w),l.addScalar(t.evaluations.t2w),o.alpha=l.getChallenge(),l.reset(),l.addScalar(o.alpha),l.addPolCommitment(t.polynomials.W1),o.y=l.getChallenge(),r&&(r.info(" challenges.beta:  "+s.toString(o.beta)),r.info(" challenges.gamma: "+s.toString(o.gamma)),r.info(" challenges.xi:    "+s.toString(o.xi)),r.info(" challenges.alpha: "+s.toString(o.alpha)),r.info(" challenges.y:     "+s.toString(o.y))),{challenges:o,roots:a}}async function git(n,t,e){const i=n.Fr,r=Math.max(1,e.nPublic),s=new Qt(r*i.n8);let o=new Qt(r*i.n8),a=i.one;for(let d=0;d<r;d++){const u=d*i.n8;s.set(i.mul(a,t.zh),u),o.set(i.mul(i.e(e.domainSize),i.sub(t.xi,a)),u),a=i.mul(a,e.w)}o=await i.batchInverse(o);let l=[];for(let d=0;d<r;d++){const u=d*i.n8;l[d+1]=i.mul(s.slice(u,u+i.n8),o.slice(u,u+i.n8))}return l}function yit(n,t,e){const i=n.Fr;let r=i.zero;for(let s=0;s<t.length;s++){const o=i.e(t[s]);r=i.sub(r,i.mul(o,e[s+1]))}return r}function wit(n,t,e,i,r){const s=i.Fr,o=wM(e.S0.h0w8,t.y,t.xi,i);r&&r.info(" Computing r0(y)");let a=s.zero;for(let l=0;l<8;l++){let d=[];d[1]=e.S0.h0w8[l];for(let h=2;h<8;h++)d[h]=s.mul(d[h-1],e.S0.h0w8[l]);let u=s.add(n.evaluations.ql,s.mul(n.evaluations.qr,d[1]));u=s.add(u,s.mul(n.evaluations.qo,d[2])),u=s.add(u,s.mul(n.evaluations.qm,d[3])),u=s.add(u,s.mul(n.evaluations.qc,d[4])),u=s.add(u,s.mul(n.evaluations.s1,d[5])),u=s.add(u,s.mul(n.evaluations.s2,d[6])),u=s.add(u,s.mul(n.evaluations.s3,d[7])),a=s.add(a,s.mul(u,o[l]))}return a}function _it(n,t,e,i,r,s){const o=r.Fr,a=wM(e.S1.h1w4,t.y,t.xi,r);s&&s.info(" Computing T0(xi)");let l=o.mul(n.evaluations.ql,n.evaluations.a);l=o.add(l,o.mul(n.evaluations.qr,n.evaluations.b)),l=o.add(l,o.mul(n.evaluations.qm,o.mul(n.evaluations.a,n.evaluations.b))),l=o.add(l,o.mul(n.evaluations.qo,n.evaluations.c)),l=o.add(l,n.evaluations.qc),l=o.add(l,i),l=o.mul(l,t.invzh),s&&s.info(" Computing C1(h_1_4^i) values");let d=o.zero;for(let u=0;u<4;u++){let h=n.evaluations.a;h=o.add(h,o.mul(e.S1.h1w4[u],n.evaluations.b));const m=o.square(e.S1.h1w4[u]);h=o.add(h,o.mul(m,n.evaluations.c)),h=o.add(h,o.mul(o.mul(m,e.S1.h1w4[u]),l)),d=o.add(d,o.mul(h,a[u]))}return d}function bit(n,t,e,i,r,s,o){const a=s.Fr,l=Lit([e.S2.h2w3,e.S2.h3w3],t.y,t.xi,t.xiw,s);o&&o.info(" Computing T1(xi)");let d=a.sub(n.evaluations.z,a.one);d=a.mul(d,i),d=a.mul(d,t.invzh),o&&o.info(" Computing T2(xi)");const u=a.mul(t.beta,t.xi),h=a.add(n.evaluations.a,a.add(u,t.gamma)),m=a.add(n.evaluations.b,a.add(a.mul(u,r.k1),t.gamma)),p=a.add(n.evaluations.c,a.add(a.mul(u,r.k2),t.gamma)),E=a.mul(h,a.mul(m,a.mul(p,n.evaluations.z))),C=a.add(n.evaluations.a,a.add(a.mul(t.beta,n.evaluations.s1),t.gamma)),v=a.add(n.evaluations.b,a.add(a.mul(t.beta,n.evaluations.s2),t.gamma)),A=a.add(n.evaluations.c,a.add(a.mul(t.beta,n.evaluations.s3),t.gamma)),x=a.mul(C,a.mul(v,a.mul(A,n.evaluations.zw)));let P=a.sub(E,x);P=a.mul(P,t.invzh),o&&o.info(" Computing C2(h_2_3^i) values");let W=a.zero;for(let K=0;K<3;K++){let j=a.add(n.evaluations.z,a.mul(e.S2.h2w3[K],d));j=a.add(j,a.mul(a.square(e.S2.h2w3[K]),P)),W=a.add(W,a.mul(j,l[K]))}o&&o.info(" Computing C2(h_3_3^i) values");for(let K=0;K<3;K++){let j=a.add(n.evaluations.zw,a.mul(e.S2.h3w3[K],n.evaluations.t1w));j=a.add(j,a.mul(a.square(e.S2.h3w3[K]),n.evaluations.t2w)),W=a.add(W,a.mul(j,l[K+3]))}return W}function vit(n,t,e,i,r){const s=n.G1,o=n.Fr;let a=o.sub(i.y,r.S0.h0w8[0]);for(let m=1;m<8;m++)a=o.mul(a,o.sub(i.y,r.S0.h0w8[m]));i.temp=a;let l=o.sub(i.y,r.S1.h1w4[0]);for(let m=1;m<4;m++)l=o.mul(l,o.sub(i.y,r.S1.h1w4[m]));let d=o.sub(i.y,r.S2.h2w3[0]);for(let m=1;m<3;m++)d=o.mul(d,o.sub(i.y,r.S2.h2w3[m]));for(let m=0;m<3;m++)d=o.mul(d,o.sub(i.y,r.S2.h3w3[m]));i.quotient1=o.mul(i.alpha,o.div(a,l)),i.quotient2=o.mul(o.square(i.alpha),o.div(a,d));let u=s.timesFr(t.polynomials.C1,i.quotient1),h=s.timesFr(t.polynomials.C2,i.quotient2);return s.add(e.C0,s.add(u,h))}function xit(n,t,e,i,r,s,o){const a=n.G1,l=n.Fr;let d=l.mul(s,e.quotient1),u=l.mul(o,e.quotient2);return a.timesFr(a.one,l.add(r,l.add(d,u)))}function Eit(n,t,e){return n.G1.timesFr(t.polynomials.W1,e.temp)}async function Sit(n,t,e,i,r,s,o){const a=n.G1;let l=a.timesFr(t.polynomials.W2,e.y);l=a.add(a.sub(a.sub(r,s),o),l);const d=n.G2.one,u=t.polynomials.W2,h=i.X_2;return await n.pairingEq(a.neg(l),d,u,h)}function wM(n,t,e,i){const r=i.Fr,s=n.length,o=r.sub(r.exp(t,s),e),a=r.mul(r.e(s),r.exp(n[0],s-2)),l=[];for(let d=0;d<s;d++){const u=n[(s-1)*d%s],h=r.sub(t,n[d]);l[d]=r.div(o,r.mul(r.mul(a,u),h))}return l}function Lit(n,t,e,i,r){const s=r.Fr,o=[],a=n[0].length,l=a*n.length,d=s.exp(t,l),u=s.mul(s.add(e,i),s.exp(t,a)),h=s.mul(e,i),m=s.add(s.sub(d,u),h);let p=s.mul(s.mul(s.e(a),n[0][0]),s.sub(e,i));for(let E=0;E<a;E++){const C=n[0][(a-1)*E%a],v=s.sub(t,n[0][E]),A=s.mul(p,s.mul(C,v));o[E]=s.div(m,A)}p=s.mul(s.mul(s.e(a),n[1][0]),s.sub(i,e));for(let E=0;E<a;E++){const C=n[1][(a-1)*E%a],v=s.sub(t,n[1][E]),A=s.mul(p,s.mul(C,v));o[E+a]=s.div(m,A)}return o}const{unstringifyBigInts:a8}=An;function Mn(n){let t=n.toString(16);for(;t.length<64;)t="0"+t;return t=`0x${t}`,t}async function Cit(n,t){const e=a8(t),i=a8(n);await nl(e.curve);let r="";for(let s=0;s<i.length;s++)r!==""&&(r=r+","),r=r+Mn(i[s]);return`[${Mn(e.polynomials.C1[0])}, ${Mn(e.polynomials.C1[1])},${Mn(e.polynomials.C2[0])},${Mn(e.polynomials.C2[1])},${Mn(e.polynomials.W1[0])},${Mn(e.polynomials.W1[1])},${Mn(e.polynomials.W2[0])},${Mn(e.polynomials.W2[1])},${Mn(e.evaluations.ql)},${Mn(e.evaluations.qr)},${Mn(e.evaluations.qm)},${Mn(e.evaluations.qo)},${Mn(e.evaluations.qc)},${Mn(e.evaluations.s1)},${Mn(e.evaluations.s2)},${Mn(e.evaluations.s3)},${Mn(e.evaluations.a)},${Mn(e.evaluations.b)},${Mn(e.evaluations.c)},${Mn(e.evaluations.z)},${Mn(e.evaluations.zw)},${Mn(e.evaluations.t1w)},${Mn(e.evaluations.t2w)},${Mn(e.evaluations.inv)}],[${r}]`}var Ait=Object.freeze({__proto__:null,setup:ait,prove:gM,fullProve:lit,verify:uit,exportSolidityVerifier:uM,exportSolidityCallData:Cit});const Iit=Object.freeze(Object.defineProperty({__proto__:null,curves:Stt,fflonk:Ait,groth16:JN,plonk:nit,powersOfTau:Wet,r1cs:ent,wtns:ont,zKey:xnt},Symbol.toStringTag,{value:"Module"}));async function c8(n,t,e,i){i?.("preparing",10);const r=An.stringifyBigInts(n);i?.("generating",30);try{const s=await JN.fullProve(r,new Uint8Array(t),new Uint8Array(e));return i?.("complete",100),{proof:s.proof,publicSignals:s.publicSignals}}catch(s){throw console.error("[BrowserProver] Proof generation failed:",s),s}}function Tit(n){try{const t=n.pi_a.slice(0,2).map(r=>Array.from(An.leInt2Buff(An.unstringifyBigInts(r),32)).reverse()),e=n.pi_b.slice(0,2).map(r=>r.map(s=>Array.from(An.leInt2Buff(An.unstringifyBigInts(s),32)))),i=n.pi_c.slice(0,2).map(r=>Array.from(An.leInt2Buff(An.unstringifyBigInts(r),32)).reverse());return{proofA:t.flat(),proofB:[e[0].flat().reverse(),e[1].flat().reverse()].flat(),proofC:i.flat()}}catch(t){throw console.error("[BrowserProver] Failed to parse proof:",t),t}}function kit(n){try{return n.map(t=>Array.from(An.leInt2Buff(An.unstringifyBigInts(t),32)).reverse())}catch(t){throw console.error("[BrowserProver] Failed to parse public signals:",t),t}}function l8(n,t){const e=Tit(n),i=kit(t);return{proofA:e.proofA,proofB:e.proofB,proofC:e.proofC,root:i[0],publicAmount:i[1],extDataHash:i[2],inputNullifiers:[i[3],i[4]],outputCommitments:[i[5],i[6]]}}const _M=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617");class pu{privkey;pubkey;constructor(t,e){this.privkey=t.startsWith("0x")?t:"0x"+t,this.pubkey=e.poseidonHashString([this.privkey])}static random(t){const e=crypto.getRandomValues(new Uint8Array(31)),i="0x"+kc(e);return new pu(i,t)}sign(t,e){const i=M0(new TextEncoder().encode(this.privkey+t+e));return(BigInt(i)%_M).toString()}}class Vr{amount;blinding;keypair;index;mintAddress;version;hasher;constructor(t){this.hasher=t.hasher,this.amount=BigInt(t.amount?.toString()??"0"),this.blinding=t.blinding?BigInt(t.blinding.toString()):BigInt(Math.floor(Math.random()*1e9)),this.keypair=t.keypair??pu.random(t.hasher),this.index=t.index??0,this.mintAddress=t.mintAddress??"11111111111111111111111111111112",this.version=t.version??"v2"}getCommitment(){const t=this.getMintAddressField();return this.hasher.poseidonHashString([this.amount.toString(),this.keypair.pubkey,this.blinding.toString(),t])}getNullifier(){const t=this.getCommitment(),e=this.keypair.sign(t,this.index.toString());return this.hasher.poseidonHashString([t,this.index.toString(),e])}getMintAddressField(){const t=this.base58Decode(this.mintAddress),e=kc(t);return(BigInt("0x"+e)%_M).toString()}base58Decode(t){const e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i=new Map(e.split("").map((o,a)=>[o,BigInt(a)]));let r=BigInt(0);for(const o of t){const a=i.get(o);if(a===void 0)throw new Error(`Invalid base58 character: ${o}`);r=r*BigInt(58)+a}const s=new Uint8Array(32);for(let o=31;o>=0;o--)s[o]=Number(r&BigInt(255)),r=r>>BigInt(8);return s}serialize(){return`${this.amount.toString()}|${this.blinding.toString()}|${this.index}|${this.mintAddress}`}static deserialize(t,e,i,r="v2"){const[s,o,a,l]=t.split("|");return new Vr({hasher:i,amount:BigInt(s),blinding:BigInt(o),index:parseInt(a,10),mintAddress:l,keypair:e,version:r})}static dummy(t,e){return new Vr({hasher:e,amount:BigInt(0),keypair:t})}log(){console.log(JSON.stringify({amount:this.amount.toString(),blinding:this.blinding.toString(),index:this.index,mintAddress:this.mintAddress,commitment:this.getCommitment(),nullifier:this.getNullifier()},null,2))}}const Yd=typeof window<"u"&&window.location.hostname!=="localhost"?"/api/privacy":"https://api3.privacycash.org",Rit=100,Xd=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617");class Nit{connection;publicKey;encryptionService;storage;hasher=null;signMessage;initialized=!1;circuits=null;constructor(t){this.connection=t.connection,this.publicKey=t.publicKey,this.signMessage=t.signMessage,this.encryptionService=new xX,this.storage=LX()}async initialize(t){if(this.initialized)return;t?.("Deriving encryption keys",10);const e=this.publicKey.toBase58();await this.encryptionService.deriveEncryptionKeyFromWallet(this.signMessage,e),t?.("Loading Poseidon hasher",30);try{const{getPoseidonHasher:i}=await Qm(async()=>{const{getPoseidonHasher:r}=await import("./browser-poseidon-AR048dkz.js");return{getPoseidonHasher:r}},[]);this.hasher=await i()}catch(i){throw console.error("[BrowserPrivacyCash] Failed to load Poseidon hasher:",i),new Error("Failed to load cryptographic components")}t?.("Loading ZK circuits",60);try{const i=cu();this.circuits=await i.load(r=>{t?.(r.message,60+r.progress*.3)})}catch(i){throw console.error("[BrowserPrivacyCash] Failed to load circuits:",i),new Error("Failed to load ZK circuits. Place transaction2.wasm and transaction2.zkey in /public/circuits/")}t?.("Ready",100),this.initialized=!0}isInitialized(){return this.initialized}async getPrivateBalance(t){this.ensureInitialized(),t?.("Fetching UTXOs...");const i=(await this.fetchUtxos(t)).reduce((r,s)=>r+s.amount,BigInt(0));return{lamports:Number(i),sol:Number(i)/Ma}}async shield(t,e){this.ensureInitialized();try{e?.("Preparing deposit",10);let i=[];try{i=await this.fetchUtxos()}catch(u){console.warn("[BrowserPrivacyCash] Could not fetch UTXOs, proceeding with fresh deposit:",u)}e?.("Building proof inputs",20);const r=this.encryptionService.getUtxoPrivateKey("v2"),s=new pu(r,this.hasher),o=await this.buildDepositInput(t,i,s);e?.("Generating ZK proof",40);const{proof:a,publicSignals:l}=await c8(o.circuitInput,this.circuits.wasm,this.circuits.zkey,(u,h)=>e?.(u,40+h*.4));e?.("Building transaction",85);const d=await this.submitDeposit(a,l,o.extData,t);return e?.("Deposit complete",100),{success:!0,txHash:d,amount:t}}catch(i){return console.error("[BrowserPrivacyCash] Shield failed:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async unshield(t,e,i){this.ensureInitialized();try{i?.("Fetching UTXOs",10);const r=await this.fetchUtxos(),s=r.reduce((m,p)=>m+p.amount,BigInt(0));if(s<BigInt(t))return{success:!1,error:`Insufficient shielded balance: ${Number(s)/Ma} SOL`};i?.("Building proof inputs",20);const o=this.encryptionService.getUtxoPrivateKey("v2"),a=new pu(o,this.hasher),l=await this.buildWithdrawInput(t,r,a,e??this.publicKey.toBase58());i?.("Generating ZK proof",40);const{proof:d,publicSignals:u}=await c8(l.circuitInput,this.circuits.wasm,this.circuits.zkey,(m,p)=>i?.(m,40+p*.4));i?.("Submitting to relayer",85);const h=await this.submitWithdraw(d,u,l.extData,t,e??this.publicKey.toBase58());return i?.("Withdraw complete",100),{success:!0,txHash:h.signature,amount:t,fee:h.fee}}catch(r){return console.error("[BrowserPrivacyCash] Unshield failed:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}clearCache(){const t=_A(this.publicKey.toBase58());this.storage.removeItem(B0+t),this.storage.removeItem(Y_+t)}ensureInitialized(){if(!this.initialized)throw new Error("Client not initialized. Call initialize() first.")}async fetchUtxos(t){const e=_A(this.publicKey.toBase58()),i=[];let r=0;const s=this.storage.getItem(B0+e);for(s&&(r=parseInt(s,10));;){const a=await fetch(`${Yd}/utxos/range?start=${r}&end=${r+Rit}`);if(!a.ok)throw new Error("Failed to fetch UTXOs");const l=await a.json(),d=l.encrypted_outputs||[];t?.(`Decrypting UTXOs (${r+d.length})...`);for(const u of d)try{const h=fc(u),m=this.encryptionService.getEncryptionKeyVersion(h),p=await this.encryptionService.decrypt(h),E=new TextDecoder().decode(p),C=this.encryptionService.getUtxoPrivateKey(m),v=new pu(C,this.hasher),A=Vr.deserialize(E,v,this.hasher,m);A.amount>BigInt(0)&&(await this.isUtxoSpent(A)||i.push(A))}catch{}if(r+=d.length,this.storage.setItem(B0+e,r.toString()),!l.hasMore)break}const o=i.map(a=>kc(new TextEncoder().encode(a.serialize())));return this.storage.setItem(Y_+e,JSON.stringify(o)),i}async isUtxoSpent(t){const e=t.getNullifier(),i=new Uint8Array(32),r=BigInt(e);for(let l=31;l>=0;l--)i[l]=Number(r>>BigInt((31-l)*8)&BigInt(255));const[s]=Zt.findProgramAddressSync([ke.from("nullifier0"),ke.from(i)],q_),[o]=Zt.findProgramAddressSync([ke.from("nullifier1"),ke.from(i)],q_);return(await this.connection.getMultipleAccountsInfo([s,o])).some(l=>l!==null)}async buildDepositInput(t,e,i){const r=await this.queryTreeState(),s=r.nextIndex;let o,a,l;if(e.length===0)o=[Vr.dummy(i,this.hasher),Vr.dummy(i,this.hasher)],a=[0,0],l=[new Array(20).fill("0"),new Array(20).fill("0")];else{o=[e[0],e.length>1?e[1]:Vr.dummy(i,this.hasher)];const x=await Promise.all(o.map(P=>P.amount>BigInt(0)?this.fetchMerkleProof(P.getCommitment()):{pathIndices:[0],pathElements:new Array(20).fill("0")}));a=o.map(P=>P.index),l=x.map(P=>P.pathElements)}const u=o.reduce((x,P)=>x+P.amount,BigInt(0))+BigInt(t),h=(BigInt(t)+Xd)%Xd,m=[new Vr({hasher:this.hasher,amount:u,keypair:i,index:s}),new Vr({hasher:this.hasher,amount:BigInt(0),keypair:i,index:s+1})],p=await this.encryptionService.encrypt(m[0].serialize()),E=await this.encryptionService.encrypt(m[1].serialize()),C={recipient:this.publicKey.toBase58(),extAmount:t.toString(),encryptedOutput1:Array.from(p),encryptedOutput2:Array.from(E),fee:"0"},v=this.computeExtDataHash(C);return{circuitInput:{root:r.root,inputNullifier:o.map(x=>x.getNullifier()),outputCommitment:m.map(x=>x.getCommitment()),publicAmount:h.toString(),extDataHash:v,inAmount:o.map(x=>x.amount.toString()),inPrivateKey:o.map(x=>x.keypair.privkey),inBlinding:o.map(x=>x.blinding.toString()),inPathIndices:a,inPathElements:l,outAmount:m.map(x=>x.amount.toString()),outBlinding:m.map(x=>x.blinding.toString()),outPubkey:m.map(x=>x.keypair.pubkey),mintAddress:o[0].mintAddress},extData:C}}async buildWithdrawInput(t,e,i,r){const s=await this.queryTreeState(),o=s.nextIndex,a=[e[0],e.length>1?e[1]:Vr.dummy(i,this.hasher)],l=await Promise.all(a.map(P=>P.amount>BigInt(0)?this.fetchMerkleProof(P.getCommitment()):{pathIndices:[0],pathElements:new Array(20).fill("0")})),d=a.reduce((P,W)=>P+W.amount,BigInt(0)),u=BigInt(Math.floor(t*.003)),h=d-BigInt(t),m=(Xd-BigInt(t)+u)%Xd,p=[new Vr({hasher:this.hasher,amount:h,keypair:i,index:o}),Vr.dummy(i,this.hasher)];p[1].index=o+1;const E=await this.encryptionService.encrypt(p[0].serialize()),C=await this.encryptionService.encrypt(p[1].serialize()),v={recipient:r,extAmount:(-t).toString(),encryptedOutput1:Array.from(E),encryptedOutput2:Array.from(C),fee:u.toString()},A=this.computeExtDataHash(v);return{circuitInput:{root:s.root,inputNullifier:a.map(P=>P.getNullifier()),outputCommitment:p.map(P=>P.getCommitment()),publicAmount:m.toString(),extDataHash:A,inAmount:a.map(P=>P.amount.toString()),inPrivateKey:a.map(P=>P.keypair.privkey),inBlinding:a.map(P=>P.blinding.toString()),inPathIndices:a.map(P=>P.index),inPathElements:l.map(P=>P.pathElements),outAmount:p.map(P=>P.amount.toString()),outBlinding:p.map(P=>P.blinding.toString()),outPubkey:p.map(P=>P.keypair.pubkey),mintAddress:a[0].mintAddress},extData:v}}async queryTreeState(){try{const t=await fetch(`${Yd}/tree/state`);if(!t.ok)throw new Error(`HTTP ${t.status}`);return t.json()}catch(t){return console.warn("[BrowserPrivacyCash] Relayer unavailable, using mock tree state:",t),{root:"0",nextIndex:0}}}async fetchMerkleProof(t){const e=await fetch(`${Yd}/tree/proof?commitment=${t}`);if(!e.ok)throw new Error("Failed to fetch Merkle proof");return e.json()}computeExtDataHash(t){const e=JSON.stringify(t,(s,o)=>typeof o=="bigint"?o.toString():o),i=new TextEncoder().encode(e);let r=BigInt(0);for(const s of i)r=(r*BigInt(256)+BigInt(s))%Xd;return r.toString()}async submitDeposit(t,e,i,r){const s=l8(t,e);try{const o=await fetch(`${Yd}/deposit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proof:s,extData:i,senderAddress:this.publicKey.toBase58(),amount:r})});if(!o.ok){const l=await o.text();throw new Error(`Deposit failed: ${l}`)}return(await o.json()).signature}catch(o){throw console.error("[BrowserPrivacyCash] Relayer submission failed:",o),new Error("PrivacyCash relayer is not accessible from browser due to CORS restrictions. Please use the CLI or wait for backend proxy support.")}}async submitWithdraw(t,e,i,r,s){const o=l8(t,e),a=await fetch(`${Yd}/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proof:o,extData:i,recipient:s,amount:r})});if(!a.ok){const d=await a.text();throw new Error(`Withdraw failed: ${d}`)}const l=await a.json();return{signature:l.signature,fee:l.fee||Math.floor(r*.003)}}}function Mit(){const{connection:n}=Hm(),{publicKey:t,signMessage:e,connected:i}=Nr(),r=rt.useRef(null),[s,o]=rt.useState({isInitialized:!1,isInitializing:!1,initProgress:null,balance:null,isLoading:!1,error:null}),a=rt.useCallback(async()=>{if(!(!t||!e||!n)&&!r.current?.isInitialized()){o(m=>({...m,isInitializing:!0,initProgress:{stage:"Starting...",percent:0},error:null}));try{const m=new Nit({connection:n,publicKey:t,signMessage:async p=>await e(p)});await m.initialize((p,E)=>{o(C=>({...C,initProgress:{stage:p,percent:E}}))}),r.current=m,o(p=>({...p,isInitialized:!0,isInitializing:!1,initProgress:null})),en.success("Privacy features initialized!")}catch(m){const p=m instanceof Error?m.message:"Unknown error";o(E=>({...E,isInitializing:!1,initProgress:null,error:p})),en.error(`Failed to initialize: ${p}`)}}},[t,e,n]);rt.useEffect(()=>{i||(r.current=null,o({isInitialized:!1,isInitializing:!1,initProgress:null,balance:null,isLoading:!1,error:null}))},[i]);const l=rt.useCallback(async()=>{if(!r.current?.isInitialized())return null;o(m=>({...m,isLoading:!0}));try{const m=await r.current.getPrivateBalance(p=>{console.log("[BrowserPrivacy]",p)});return o(p=>({...p,balance:m,isLoading:!1})),m}catch(m){const p=m instanceof Error?m.message:"Unknown error";return o(E=>({...E,isLoading:!1,error:p})),null}},[]),d=rt.useCallback(async(m,p)=>{if(!r.current?.isInitialized())return{success:!1,error:"Client not initialized"};o(E=>({...E,isLoading:!0}));try{const E=Math.floor(m*Ma),C=await r.current.shield(E,p);return C.success?(en.success(`Successfully shielded ${m} SOL`),await l()):en.error(`Shield failed: ${C.error}`),o(v=>({...v,isLoading:!1})),C}catch(E){const C=E instanceof Error?E.message:"Unknown error";return o(v=>({...v,isLoading:!1,error:C})),en.error(`Shield failed: ${C}`),{success:!1,error:C}}},[l]),u=rt.useCallback(async(m,p,E)=>{if(!r.current?.isInitialized())return{success:!1,error:"Client not initialized"};o(C=>({...C,isLoading:!0}));try{const C=Math.floor(m*Ma),v=await r.current.unshield(C,p,E);return v.success?(en.success(`Successfully unshielded ${m} SOL`),await l()):en.error(`Unshield failed: ${v.error}`),o(A=>({...A,isLoading:!1})),v}catch(C){const v=C instanceof Error?C.message:"Unknown error";return o(A=>({...A,isLoading:!1,error:v})),en.error(`Unshield failed: ${v}`),{success:!1,error:v}}},[l]),h=rt.useCallback(()=>{r.current?.clearCache(),o(m=>({...m,balance:null})),en.info("Privacy cache cleared")},[]);return{isInitialized:s.isInitialized,isInitializing:s.isInitializing,initProgress:s.initProgress,balance:s.balance,shieldedBalanceSol:s.balance?.sol??0,shieldedBalanceLamports:s.balance?.lamports??0,isLoading:s.isLoading,error:s.error,initialize:a,fetchBalance:l,shield:d,unshield:u,clearCache:h,client:r.current}}function gh(){const{connected:n,publicKey:t}=Nr(),e=Mit(),{notes:i,shieldedBalanceSol:r,shieldedBalanceUsdc:s,isLoading:o,addNote:a,markNoteSpent:l,setShieldedBalance:d,setError:u}=dX(),[h,m]=rt.useState(!1),[p,E]=rt.useState(!1),[C,v]=rt.useState(!1);rt.useEffect(()=>{n&&t&&!e.isInitialized&&!e.isInitializing&&!C&&(v(!0),e.initialize())},[n,t,e,C]),rt.useEffect(()=>{n||v(!1)},[n]);const A=rt.useCallback(()=>{const b=i.filter(it=>!it.spent),B=b.filter(it=>it.tokenType==="SOL").reduce((it,st)=>it+st.amount,0),J=b.filter(it=>it.tokenType==="SPL").reduce((it,st)=>it+st.amount,0);return d(B,J),{solBalance:B,usdcBalance:J}},[i,d]),x=rt.useCallback(async b=>{if(!n)return{success:!1,error:"Wallet not connected"};m(!0);try{if(!e.isInitialized)return{success:!1,error:"Privacy client not initialized. Please sign the initialization message."};const B=await e.shield(b,(J,it)=>{console.log(`[Shield] ${J}: ${it}%`)});if(B.success){const J={id:z_(),commitment:`real_${Date.now()}`,amount:b*1e9,tokenType:"SOL",createdAt:new Date().toISOString(),spent:!1,depositSignature:B.txHash||"pending"};return a(J),{success:!0,signature:B.txHash,note:J}}return{success:!1,error:B.error||"Shield operation failed"}}catch(B){const J=B instanceof Error?B.message:"Unknown error";return u(J),en.error(`Shield failed: ${J}`),{success:!1,error:J}}finally{m(!1)}},[n,e,a,A,u]),P=rt.useCallback(async(b,B)=>{if(!n)return{success:!1,error:"Wallet not connected"};E(!0);try{if(!e.isInitialized)return{success:!1,error:"Privacy client not initialized"};const J=typeof b=="number"?b:0;if(J<=0)return{success:!1,error:"Invalid amount"};const it=await e.unshield(J,B,(st,z)=>{console.log(`[Unshield] ${st}: ${z}%`)});return it.success?{success:!0,signature:it.txHash,amountReceived:it.amount}:{success:!1,error:it.error||"Unshield operation failed"}}catch(J){const it=J instanceof Error?J.message:"Unknown error";return u(it),en.error(`Unshield failed: ${it}`),{success:!1,error:it}}finally{E(!1)}},[n,i,e,l,A,u]),W=rt.useCallback(()=>{const b=i.filter(z=>!z.spent),B=JSON.stringify(b,null,2),J=new Blob([B],{type:"application/json"}),it=URL.createObjectURL(J),st=document.createElement("a");st.href=it,st.download=`spectre-notes-${Date.now()}.json`,st.click(),URL.revokeObjectURL(it),en.success("Notes exported successfully")},[i]),K=rt.useCallback(b=>{try{const B=JSON.parse(b);B.forEach(J=>{i.some(it=>it.commitment===J.commitment)||a(J)}),A(),en.success(`Imported ${B.length} notes`)}catch{en.error("Failed to import notes: Invalid format")}},[i,a,A]),j=e.shieldedBalanceSol;return{notes:i,unspentNotes:i.filter(b=>!b.spent),shieldedBalanceSol:j,shieldedBalanceUsdc:s/1e9,isLoading:o||h||p||e.isLoading,shieldLoading:h,unshieldLoading:p,isInitialized:e.isInitialized,isInitializing:e.isInitializing,initProgress:e.initProgress,initialize:e.initialize,shieldSol:x,unshieldSol:P,exportNotes:W,importNotes:K,calculateBalance:A,fetchBalance:e.fetchBalance,clearCache:e.clearCache}}const Bit=ZR(n=>({markets:[],positions:[],trades:[],selectedMarket:null,isLoading:!1,error:null,setMarkets:t=>n({markets:t}),setPositions:t=>n({positions:t}),addTrade:t=>n(e=>({trades:[t,...e.trades].slice(0,100)})),setSelectedMarket:t=>n({selectedMarket:t}),setLoading:t=>n({isLoading:t}),setError:t=>n({error:t}),clearTrades:()=>n({trades:[]})})),u8=[{address:"DemoMarket1111111111111111111111111111111",question:"Will Bitcoin reach $100,000 by end of 2025?",yesPrice:.45,noPrice:.55,endTime:new Date("2025-12-31"),isResolved:!1,liquidity:15e3,volume24h:2500},{address:"DemoMarket2222222222222222222222222222222",question:"Will Ethereum transition to deflationary by Q2 2025?",yesPrice:.62,noPrice:.38,endTime:new Date("2025-06-30"),isResolved:!1,liquidity:8500,volume24h:1200},{address:"DemoMarket3333333333333333333333333333333",question:"Will Solana TVL exceed $10B in 2025?",yesPrice:.58,noPrice:.42,endTime:new Date("2025-12-31"),isResolved:!1,liquidity:12e3,volume24h:3100},{address:"DemoMarket4444444444444444444444444444444",question:"Will the Fed cut rates 3+ times in 2025?",yesPrice:.35,noPrice:.65,endTime:new Date("2025-12-31"),isResolved:!1,liquidity:25e3,volume24h:5600}],d8=[{market:"DemoMarket1111111111111111111111111111111",marketQuestion:"Will Bitcoin reach $100,000 by end of 2025?",yesShares:50,noShares:0,entryPriceYes:.42,totalInvested:21,unrealizedPnl:1.5},{market:"DemoMarket3333333333333333333333333333333",marketQuestion:"Will Solana TVL exceed $10B in 2025?",yesShares:0,noShares:30,entryPriceNo:.4,totalInvested:12,unrealizedPnl:.6}];function $u(){const{connected:n,publicKey:t}=Nr(),{pnpClient:e}=Yv(),{markets:i,positions:r,trades:s,selectedMarket:o,isLoading:a,setMarkets:l,setPositions:d,addTrade:u,setSelectedMarket:h,setLoading:m,setError:p}=Bit(),[E,C]=rt.useState(!1),v=rt.useCallback(async()=>{m(!0);try{if(j2)return await new Promise(j=>setTimeout(j,500)),l(u8),u8;if(!e)return p("PNP client not initialized"),[];const K=(await e.fetchActiveMarkets()).map(j=>({address:typeof j.address=="string"?j.address:j.address.toBase58(),question:j.question,yesPrice:j.yesPrice,noPrice:j.noPrice,endTime:j.endTime,isResolved:j.isResolved,liquidity:j.liquidity,volume24h:j.volume24h}));return l(K),K}catch(W){return p(W.message),en.error("Failed to fetch markets"),[]}finally{m(!1)}},[e,l,m,p]),A=rt.useCallback(async()=>{if(!n)return[];try{if(j2)return await new Promise(j=>setTimeout(j,300)),d(d8),d8;if(!e)return[];const K=(await e.getPositions()).map(j=>({market:j.market,marketQuestion:j.question,yesShares:j.side==="yes"?j.shares:0,noShares:j.side==="no"?j.shares:0,entryPriceYes:j.side==="yes"?j.averagePrice:void 0,entryPriceNo:j.side==="no"?j.averagePrice:void 0,unrealizedPnl:j.unrealizedPnL,totalInvested:j.shares*j.averagePrice}));return d(K),K}catch(W){return console.error("Failed to fetch positions:",W),[]}},[n,e,d]),x=rt.useCallback(async(W,K,j)=>{if(!n||!t)return{success:!1,error:"Wallet not connected"};const b=i.find(B=>B.address===W);if(!b)return{success:!1,error:"Market not found"};C(!0);try{if(j2){await new Promise(I=>setTimeout(I,2e3));const J=K==="yes"?b.yesPrice:b.noPrice,it=j/J,st={id:z_(),market:W,side:K,amount:j,price:J,shares:it,signature:`sig_${Date.now()}`,timestamp:new Date,type:"buy"};if(u(st),r.find(I=>I.market===W)){const I=r.map(w=>w.market===W?{...w,yesShares:w.yesShares+(K==="yes"?it:0),noShares:w.noShares+(K==="no"?it:0),totalInvested:(w.totalInvested||0)+j}:w);d(I)}else d([...r,{market:W,marketQuestion:b.question,yesShares:K==="yes"?it:0,noShares:K==="no"?it:0,entryPriceYes:K==="yes"?J:void 0,entryPriceNo:K==="no"?J:void 0,totalInvested:j,unrealizedPnl:0}]);return en.success(`Bought ${it.toFixed(2)} ${K.toUpperCase()} shares at $${J.toFixed(3)}`),{success:!0,signature:st.signature,sharesReceived:it,executionPrice:J}}if(!e)return{success:!1,error:"PNP client not initialized"};const B=await e.executeTrade(W,K,j);return B.success&&(u({id:z_(),market:W,side:K,amount:j,price:B.executionPrice||0,shares:B.sharesReceived||0,signature:B.signature||"",timestamp:new Date,type:"buy"}),en.success("Trade executed successfully")),B}catch(B){return en.error(B.message||"Trade failed"),{success:!1,error:B.message}}finally{C(!1)}},[n,t,i,r,e,u,d]),P=rt.useCallback(W=>{if(!W){h(null);return}const K=i.find(j=>j.address===W);h(K||null)},[i,h]);return rt.useEffect(()=>{n&&(v(),A())},[n,v,A]),{markets:i,positions:r,trades:s,selectedMarket:o,isLoading:a,isTrading:E,fetchMarkets:v,fetchPositions:A,executeTrade:x,selectMarket:P}}function Pit(){const{connected:n,publicKey:t}=Nr(),{connection:e}=Hm(),{delegationStatus:i}=Xv(),{shieldedBalanceSol:r,unspentNotes:s}=gh(),{positions:o}=$u(),[a,l]=rt.useState(0);rt.useEffect(()=>{async function E(){if(n&&t&&e)try{const v=await e.getBalance(t);l(v)}catch(v){console.error("Failed to fetch wallet balance:",v)}else l(0)}E();const C=setInterval(E,3e4);return()=>clearInterval(C)},[n,t,e]);const d=s.length>0?"active":"inactive",u=i.isDelegated?"active":"inactive",h=o.length>0?"active":"inactive",m=o.reduce((E,C)=>E+(C.totalInvested||0),0),p=o.reduce((E,C)=>E+(C.unrealizedPnl||0),0);return U.jsxs("div",{className:"space-y-8",children:[U.jsxs(De.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[U.jsx("h1",{className:"text-3xl font-bold mb-2",children:U.jsx("span",{className:"gradient-text",children:"SPECTRE Protocol"})}),U.jsx("p",{className:"text-white/60",children:"Confidential Autonomous Market Maker on Solana"})]}),n&&U.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:U.jsx(OQ,{walletBalance:a,shieldedBalance:r,positionsValue:m,totalPnl:p})}),U.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[U.jsxs(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-2",children:[U.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[U.jsx("span",{className:"text-neon-cyan",children:"//"}),"Privacy Sandwich Architecture"]}),U.jsx(AK,{})]}),U.jsxs(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"space-y-6",children:[U.jsx(MQ,{privacyStatus:d,teeStatus:u,tradingStatus:h}),U.jsx(PQ,{})]})]}),U.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"glass-card p-6",children:[U.jsx("h3",{className:"text-lg font-semibold mb-4",children:"How It Works"}),U.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[U.jsxs("div",{children:[U.jsx("div",{className:"w-10 h-10 rounded-lg bg-neon-cyan/10 flex items-center justify-center mb-3",children:U.jsx("span",{className:"text-xl text-neon-cyan font-bold",children:"1"})}),U.jsx("h4",{className:"font-medium mb-1",children:"Shield Your Funds"}),U.jsx("p",{className:"text-sm text-white/50",children:"Deposit SOL into PrivacyCash ZK pool to break the on-chain link between your wallet and trading activity."})]}),U.jsxs("div",{children:[U.jsx("div",{className:"w-10 h-10 rounded-lg bg-neon-purple/10 flex items-center justify-center mb-3",children:U.jsx("span",{className:"text-xl text-neon-purple font-bold",children:"2"})}),U.jsx("h4",{className:"font-medium mb-1",children:"Delegate to TEE"}),U.jsx("p",{className:"text-sm text-white/50",children:"Your strategy executes in MagicBlock's encrypted TEE environment. Nobody can see your trading logic."})]}),U.jsxs("div",{children:[U.jsx("div",{className:"w-10 h-10 rounded-lg bg-status-success/10 flex items-center justify-center mb-3",children:U.jsx("span",{className:"text-xl text-status-success font-bold",children:"3"})}),U.jsx("h4",{className:"font-medium mb-1",children:"Trade Confidentially"}),U.jsx("p",{className:"text-sm text-white/50",children:"Execute trades on PNP prediction markets with complete privacy. Withdraw with Range Protocol compliance."})]})]})]})]})}function Oit(){const{connected:n}=Nr(),{shieldSol:t,shieldLoading:e}=gh(),[i,r]=rt.useState(""),[s,o]=rt.useState(""),a=u=>{const h=u.target.value;r(h),o("");const m=parseFloat(h);isNaN(m)||(m<O2?o(`Minimum deposit is ${O2} SOL`):m>F2&&o(`Maximum deposit is ${F2} SOL`))},l=async()=>{const u=parseFloat(i);if(isNaN(u)||u<O2||u>F2)return;(await t(u)).success&&r("")},d=[.1,.5,1,5];return U.jsxs(gn,{variant:"glow-cyan",children:[U.jsxs(No,{children:[U.jsxs(Mo,{className:"flex items-center gap-2",children:[U.jsx(Kr,{className:"h-5 w-5 text-neon-cyan"}),"Shield SOL"]}),U.jsx(Wv,{children:"Deposit SOL into the privacy pool to break the on-chain link"})]}),U.jsxs(us,{className:"space-y-4",children:[U.jsx(Pc,{label:"Amount (SOL)",type:"number",placeholder:"0.0",value:i,onChange:a,error:s,disabled:!n||e}),U.jsx("div",{className:"flex gap-2",children:d.map(u=>U.jsxs(ii,{variant:"ghost",size:"sm",onClick:()=>{r(u.toString()),o("")},disabled:!n||e,children:[u," SOL"]},u))}),U.jsx("div",{className:"p-3 rounded-lg bg-status-warning/10 border border-status-warning/30",children:U.jsxs("div",{className:"flex gap-2",children:[U.jsx(rg,{className:"h-4 w-4 text-status-warning shrink-0 mt-0.5"}),U.jsxs("div",{className:"text-xs text-white/70",children:[U.jsx("p",{className:"font-medium text-status-warning mb-1",children:"Important"}),U.jsx("p",{children:"You will receive a deposit note. Save it securely - it's required to withdraw your funds. Lost notes mean lost funds!"})]})]})}),U.jsx(ii,{className:"w-full",variant:"primary",onClick:l,disabled:!n||e||!i||!!s,loading:e,children:n?e?"Shielding...":`Shield ${i||"0"} SOL`:"Connect Wallet"})]})]})}function Fit({note:n,onDelete:t}){const[e,i]=rt.useState(!1),r=async()=>{await CK(n.commitment),en.success("Commitment copied to clipboard")};return U.jsx(De.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:U.jsxs(gn,{className:Re(n.spent&&"opacity-50"),children:[U.jsxs("div",{className:"flex items-start justify-between",children:[U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:"p-2 rounded-lg bg-neon-cyan/10",children:U.jsx(L6,{className:"h-5 w-5 text-neon-cyan"})}),U.jsxs("div",{children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsxs("span",{className:"font-medium",children:[Cu(n.amount)," ",n.tokenType]}),U.jsx($s,{variant:n.spent?"error":"success",children:n.spent?"Spent":"Unspent"})]}),U.jsx("p",{className:"text-xs text-white/50",children:O6(new Date(n.createdAt))})]})]}),U.jsxs("div",{className:"flex gap-1",children:[U.jsx(ii,{variant:"ghost",size:"icon",onClick:()=>i(!e),children:e?U.jsx(BH,{className:"h-4 w-4"}):U.jsx(S6,{className:"h-4 w-4"})}),U.jsx(ii,{variant:"ghost",size:"icon",onClick:r,children:U.jsx(TH,{className:"h-4 w-4"})}),!n.spent&&t&&U.jsx(ii,{variant:"ghost",size:"icon",className:"text-status-error hover:text-status-error",onClick:()=>t(n.id),children:U.jsx(qH,{className:"h-4 w-4"})})]})]}),U.jsx(KT,{children:e&&U.jsx(De.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-glass-border",children:U.jsxs("div",{className:"space-y-2 text-xs font-mono",children:[U.jsxs("div",{children:[U.jsx("span",{className:"text-white/50",children:"Commitment:"}),U.jsxs("p",{className:"text-white/80 break-all",children:[n.commitment.slice(0,32),"..."]})]}),n.depositSignature&&U.jsxs("div",{children:[U.jsx("span",{className:"text-white/50",children:"Tx Signature:"}),U.jsxs("p",{className:"text-white/80 break-all",children:[n.depositSignature.slice(0,32),"..."]})]})]})})})]})})}function jit(){const{notes:n,unspentNotes:t,exportNotes:e,importNotes:i}=gh(),[r,s]=rt.useState(!1),o=r?n:t,a=()=>{const l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=d=>{const u=d.target.files?.[0];if(u){const h=new FileReader;h.onload=m=>{const p=m.target?.result;i(p)},h.readAsText(u)}},l.click()};return U.jsxs(gn,{children:[U.jsx(No,{children:U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsxs("div",{children:[U.jsx(Mo,{children:"Deposit Notes"}),U.jsxs(Wv,{children:[t.length," unspent notes"]})]}),U.jsxs("div",{className:"flex gap-2",children:[U.jsxs(ii,{variant:"ghost",size:"sm",onClick:a,children:[U.jsx($H,{className:"h-4 w-4 mr-1"}),"Import"]}),U.jsxs(ii,{variant:"ghost",size:"sm",onClick:e,disabled:t.length===0,children:[U.jsx(RH,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})}),U.jsx(us,{children:n.length===0?U.jsxs("div",{className:"text-center py-8 text-white/50",children:[U.jsx(L6,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),U.jsx("p",{children:"No deposit notes yet"}),U.jsx("p",{className:"text-sm",children:"Shield some SOL to create a note"})]}):U.jsxs(U.Fragment,{children:[U.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:U.jsx(KT,{children:o.map(l=>U.jsx(Fit,{note:l},l.id))})}),n.length>t.length&&U.jsx(ii,{variant:"ghost",size:"sm",className:"w-full mt-4",onClick:()=>s(!r),children:r?`Hide spent notes (${n.length-t.length})`:`Show all notes (${n.length})`})]})})]})}function Uit(){const{shieldedBalanceSol:n,shieldedBalanceUsdc:t,unspentNotes:e}=gh();return U.jsxs(gn,{variant:"glow-purple",children:[U.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[U.jsx("div",{className:"p-3 rounded-lg bg-neon-purple/10",children:U.jsx(zv,{className:"h-6 w-6 text-neon-purple"})}),U.jsxs("div",{children:[U.jsx("h3",{className:"font-semibold",children:"Shielded Balance"}),U.jsx("p",{className:"text-xs text-white/50",children:"Private pool funds"})]})]}),U.jsxs("div",{className:"space-y-4",children:[U.jsxs(De.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-xs font-bold",children:"S"}),U.jsx("span",{className:"text-sm text-white/70",children:"SOL"})]}),U.jsxs("div",{className:"text-right",children:[U.jsx("p",{className:"font-mono font-semibold",children:Cu(n)}),U.jsxs("p",{className:"text-xs text-white/50",children:[e.filter(i=>i.tokenType==="SOL").length," notes"]})]})]}),t>0&&U.jsxs(De.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-blue-500 flex items-center justify-center text-xs font-bold",children:"$"}),U.jsx("span",{className:"text-sm text-white/70",children:"USDC"})]}),U.jsxs("div",{className:"text-right",children:[U.jsx("p",{className:"font-mono font-semibold",children:LK(t)}),U.jsxs("p",{className:"text-xs text-white/50",children:[e.filter(i=>i.tokenType==="SPL").length," notes"]})]})]}),n===0&&t===0&&U.jsxs("div",{className:"text-center py-4 text-white/50",children:[U.jsx(Kr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),U.jsx("p",{className:"text-sm",children:"No shielded funds"})]})]})]})}function Dit(){return U.jsxs("div",{className:"space-y-6",children:[U.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[U.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[U.jsx("div",{className:"p-2 rounded-lg bg-neon-cyan/10",children:U.jsx(Kr,{className:"h-6 w-6 text-neon-cyan"})}),U.jsx("h1",{className:"text-2xl font-bold",children:"Privacy Layer"})]}),U.jsx("p",{className:"text-white/60",children:"Shield your funds into the privacy pool using PrivacyCash ZK proofs"})]}),U.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:U.jsx(gn,{className:"border-status-warning/30 bg-status-warning/5",children:U.jsxs("div",{className:"flex gap-3",children:[U.jsx(rg,{className:"h-5 w-5 text-status-warning shrink-0"}),U.jsxs("div",{children:[U.jsx("h4",{className:"font-medium text-status-warning mb-1",children:"Important: Backup Your Notes"}),U.jsx("p",{className:"text-sm text-white/60",children:"Deposit notes are required to withdraw your funds. Export and store them securely. Lost notes cannot be recovered."})]})]})})}),U.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[U.jsxs(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[U.jsx(Oit,{}),U.jsx(Uit,{})]}),U.jsx(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:U.jsx(jit,{})})]}),U.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-card p-6",children:[U.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[U.jsx(zv,{className:"h-5 w-5 text-neon-cyan"}),"How Privacy Shielding Works"]}),U.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-neon-cyan",children:"Zero-Knowledge Proofs"}),U.jsx("p",{className:"text-sm text-white/50",children:"PrivacyCash uses ZK-SNARKs to prove you deposited funds without revealing which specific deposit you're withdrawing."})]}),U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-neon-purple",children:"Commitment Scheme"}),U.jsx("p",{className:"text-sm text-white/50",children:"Your deposit creates a cryptographic commitment on-chain. The note contains the secret needed to spend it."})]}),U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-status-success",children:"Break the Link"}),U.jsx("p",{className:"text-sm text-white/50",children:"When you withdraw to a new address, there's no on-chain connection between your original wallet and the recipient."})]})]})]})]})}function zit(){const{connected:n}=Nr(),{delegationStatus:t,isDelegating:e,isUndelegating:i,delegate:r,undelegate:s}=Xv();return U.jsxs(gn,{variant:t.isDelegated?"glow-purple":"default",children:[U.jsx(No,{children:U.jsxs(Mo,{className:"flex items-center justify-between",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(Wc,{className:"h-5 w-5 text-neon-purple"}),"TEE Delegation"]}),U.jsx($s,{variant:t.isDelegated?"secondary":"outline",children:t.isDelegated?"Active":"Inactive"})]})}),U.jsxs(us,{className:"space-y-4",children:[U.jsx("div",{className:"flex items-center justify-center py-6",children:U.jsxs(De.div,{animate:t.isDelegated?{scale:[1,1.05,1],opacity:[1,.8,1]}:{},transition:{duration:2,repeat:1/0},className:Re("relative w-24 h-24 rounded-full flex items-center justify-center",t.isDelegated?"bg-neon-purple/20 border-2 border-neon-purple/50":"bg-white/5 border-2 border-white/10"),children:[U.jsx(Wc,{className:Re("h-10 w-10",t.isDelegated?"text-neon-purple":"text-white/40")}),t.isDelegated&&U.jsx(De.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-2 border-transparent border-t-neon-purple/50"})]})}),t.isDelegated&&t.delegatedAt&&U.jsxs("div",{className:"space-y-2",children:[U.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[U.jsx(E6,{className:"h-4 w-4"}),U.jsx("span",{className:"text-sm",children:"Delegated At"})]}),U.jsx("span",{className:"text-sm font-mono",children:O6(t.delegatedAt)})]}),t.vaultPda&&U.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsx("span",{className:"text-sm text-white/60",children:"Vault PDA"}),U.jsxs("span",{className:"text-sm font-mono",children:[t.vaultPda.slice(0,8),"..."]})]})]}),U.jsx("div",{className:"p-3 rounded-lg bg-neon-purple/5 border border-neon-purple/20",children:U.jsxs("div",{className:"flex gap-2",children:[U.jsx(Wf,{className:"h-4 w-4 text-neon-purple shrink-0 mt-0.5"}),U.jsx("p",{className:"text-xs text-white/70",children:t.isDelegated?"Your vault is delegated to the TEE enclave. Trading operations execute in encrypted memory.":"Delegate your vault to enable confidential trading via MagicBlock TEE."})]})}),n?t.isDelegated?U.jsxs(ii,{className:"w-full",variant:"secondary",onClick:s,loading:i,children:[U.jsx(jH,{className:"h-4 w-4 mr-2"}),i?"Undelegating...":"Undelegate from TEE"]}):U.jsxs(ii,{className:"w-full",variant:"primary",onClick:r,loading:e,children:[U.jsx(Wf,{className:"h-4 w-4 mr-2"}),e?"Delegating...":"Delegate to TEE"]}):U.jsx(ii,{className:"w-full",disabled:!0,children:"Connect Wallet"})]})]})}const Git=[{value:"conservative",label:"Conservative",description:"Lower risk, smaller positions"},{value:"moderate",label:"Moderate",description:"Balanced risk and reward"},{value:"aggressive",label:"Aggressive",description:"Higher risk, larger positions"}];function Wit(){const{strategyConfig:n,updateStrategyConfig:t,delegationStatus:e}=Xv(),[i,r]=rt.useState(n),[s,o]=rt.useState(!1),a=u=>{r(h=>({...h,riskLevel:u})),o(!0)},l=(u,h)=>{r(m=>({...m,[u]:h})),o(!0)},d=()=>{t(i),o(!1)};return U.jsxs(gn,{children:[U.jsx(No,{children:U.jsxs(Mo,{className:"flex items-center gap-2",children:[U.jsx(DH,{className:"h-5 w-5 text-neon-cyan"}),"Strategy Configuration"]})}),U.jsxs(us,{className:"space-y-6",children:[U.jsxs("div",{className:"space-y-3",children:[U.jsx("label",{className:"text-sm font-medium text-white/80",children:"Risk Level"}),U.jsx("div",{className:"grid grid-cols-3 gap-3",children:Git.map(u=>U.jsxs("button",{onClick:()=>a(u.value),className:Re("p-3 rounded-lg border transition-all text-left",i.riskLevel===u.value?"border-neon-cyan bg-neon-cyan/10":"border-glass-border hover:border-neon-cyan/30"),children:[U.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[U.jsx(PH,{className:Re("h-4 w-4",i.riskLevel===u.value?"text-neon-cyan":"text-white/40")}),U.jsx("span",{className:"text-sm font-medium",children:u.label})]}),U.jsx("p",{className:"text-xs text-white/50",children:u.description})]},u.value))})]}),U.jsxs("div",{className:"space-y-3",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(VH,{className:"h-4 w-4 text-white/60"}),U.jsx("label",{className:"text-sm font-medium text-white/80",children:"Max Position Size (USDC)"})]}),U.jsx(Pc,{type:"number",value:i.maxPositionSize,onChange:u=>l("maxPositionSize",parseFloat(u.target.value)||0),min:1,max:1e4}),U.jsx("p",{className:"text-xs text-white/50",children:"Maximum USDC to allocate per trade"})]}),U.jsxs("div",{className:"space-y-3",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(Lu,{className:"h-4 w-4 text-status-error"}),U.jsx("label",{className:"text-sm font-medium text-white/80",children:"Stop Loss (%)"})]}),U.jsx(Pc,{type:"number",value:i.stopLoss,onChange:u=>l("stopLoss",parseFloat(u.target.value)||0),min:1,max:50}),U.jsx("p",{className:"text-xs text-white/50",children:"Close position if loss exceeds this percentage"})]}),U.jsxs("div",{className:"space-y-3",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(ir,{className:"h-4 w-4 text-status-success"}),U.jsx("label",{className:"text-sm font-medium text-white/80",children:"Take Profit (%)"})]}),U.jsx(Pc,{type:"number",value:i.takeProfit,onChange:u=>l("takeProfit",parseFloat(u.target.value)||0),min:1,max:100}),U.jsx("p",{className:"text-xs text-white/50",children:"Close position when profit reaches this percentage"})]}),!e.isDelegated&&U.jsx("div",{className:"p-3 rounded-lg bg-status-warning/10 border border-status-warning/30",children:U.jsx("p",{className:"text-xs text-status-warning",children:"Delegate to TEE to enable automated strategy execution"})}),U.jsx(ii,{className:"w-full",onClick:d,disabled:!s,variant:s?"primary":"default",children:s?"Save Configuration":"No Changes"})]})]})}function Vit(){return U.jsxs("div",{className:"space-y-6",children:[U.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[U.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[U.jsx("div",{className:"p-2 rounded-lg bg-neon-purple/10",children:U.jsx(Wc,{className:"h-6 w-6 text-neon-purple"})}),U.jsx("h1",{className:"text-2xl font-bold",children:"TEE Layer"})]}),U.jsx("p",{className:"text-white/60",children:"Configure your trading strategy and delegate to MagicBlock's TEE"})]}),U.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[U.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:U.jsx(zit,{})}),U.jsx(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:U.jsx(Wit,{})})]}),U.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-card p-6",children:[U.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[U.jsx(Kr,{className:"h-5 w-5 text-neon-purple"}),"About TEE Delegation"]}),U.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-neon-cyan",children:"Trusted Execution Environment"}),U.jsx("p",{className:"text-sm text-white/50",children:"MagicBlock's TEE runs your code in encrypted memory. Even the server operators cannot see your trading logic or positions."})]}),U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-neon-purple",children:"Ephemeral Rollup"}),U.jsx("p",{className:"text-sm text-white/50",children:"State changes accumulate in the TEE and periodically commit to Solana L1. This gives fast execution with L1 security guarantees."})]}),U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-status-success",children:"Full Control"}),U.jsx("p",{className:"text-sm text-white/50",children:"You can undelegate at any time to return full control of your vault to your wallet. Final state commits to L1 automatically."})]})]})]}),U.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:U.jsxs(gn,{children:[U.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[U.jsx(Wf,{className:"h-5 w-5 text-status-warning"}),"TEE Network Status"]}),U.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[U.jsxs("div",{className:"p-3 rounded-lg bg-background-secondary",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Network"}),U.jsx("p",{className:"font-mono text-sm",children:"MagicBlock Devnet"})]}),U.jsxs("div",{className:"p-3 rounded-lg bg-background-secondary",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Endpoint"}),U.jsx("p",{className:"font-mono text-sm truncate",children:"devnet.magicblock.app"})]}),U.jsxs("div",{className:"p-3 rounded-lg bg-background-secondary",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Commit Frequency"}),U.jsx("p",{className:"font-mono text-sm",children:"~3 seconds"})]}),U.jsxs("div",{className:"p-3 rounded-lg bg-background-secondary",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Status"}),U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx("div",{className:"w-2 h-2 rounded-full bg-status-success animate-pulse"}),U.jsx("span",{className:"font-mono text-sm text-status-success",children:"Operational"})]})]})]})]})})]})}function qit({market:n,isSelected:t,onSelect:e}){const i=Math.ceil((n.endTime.getTime()-Date.now())/864e5);return U.jsx(De.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},children:U.jsx(gn,{hover:!0,className:Re("cursor-pointer transition-all",t&&"border-neon-cyan/50 shadow-neon-cyan"),onClick:e,children:U.jsxs("div",{className:"space-y-4",children:[U.jsx("div",{children:U.jsx("p",{className:"font-medium text-sm line-clamp-2",children:n.question})}),U.jsxs("div",{className:"flex gap-3",children:[U.jsxs("div",{className:"flex-1 p-3 rounded-lg bg-status-success/10",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"YES"}),U.jsx("p",{className:"text-lg font-bold text-status-success",children:yf(n.yesPrice)})]}),U.jsxs("div",{className:"flex-1 p-3 rounded-lg bg-status-error/10",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"NO"}),U.jsx("p",{className:"text-lg font-bold text-status-error",children:yf(n.noPrice)})]})]}),U.jsxs("div",{className:"flex items-center justify-between text-xs text-white/50",children:[U.jsxs("div",{className:"flex items-center gap-1",children:[U.jsx(E6,{className:"h-3 w-3"}),U.jsx("span",{children:i>0?`${i}d left`:"Expired"})]}),n.liquidity&&U.jsxs("div",{className:"flex items-center gap-1",children:[U.jsx(NH,{className:"h-3 w-3"}),U.jsx("span",{children:ms(n.liquidity)})]}),n.volume24h&&U.jsxs("div",{className:"flex items-center gap-1",children:[U.jsx(ig,{className:"h-3 w-3"}),U.jsxs("span",{children:[ms(n.volume24h)," 24h"]})]})]})]})})})}function $it(){const{markets:n,selectedMarket:t,selectMarket:e,isLoading:i,fetchMarkets:r}=$u();return U.jsxs("div",{className:"space-y-4",children:[U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(ir,{className:"h-5 w-5 text-neon-cyan"}),U.jsx("h3",{className:"font-semibold",children:"Prediction Markets"}),U.jsx($s,{variant:"outline",children:n.length})]}),U.jsx(ii,{variant:"ghost",size:"sm",onClick:r,disabled:i,children:"Refresh"})]}),i?U.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>U.jsx(gn,{className:"animate-pulse",children:U.jsx("div",{className:"h-24 bg-white/5 rounded"})},s))}):n.length===0?U.jsxs(gn,{className:"text-center py-8",children:[U.jsx(ir,{className:"h-12 w-12 mx-auto mb-3 text-white/20"}),U.jsx("p",{className:"text-white/50",children:"No active markets available"})]}):U.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:n.map(s=>U.jsx(qit,{market:s,isSelected:t?.address===s.address,onSelect:()=>e(s.address)},s.address))})]})}function Hit(){const{connected:n}=Nr(),{selectedMarket:t,executeTrade:e,isTrading:i}=$u(),[r,s]=rt.useState("yes"),[o,a]=rt.useState(""),l=async()=>{if(!t)return;const h=parseFloat(o);if(isNaN(h)||h<=0)return;(await e(t.address,r,h)).success&&a("")},d=t?r==="yes"?t.yesPrice:t.noPrice:0,u=o&&d?parseFloat(o)/d:0;return U.jsxs(gn,{variant:"glow-cyan",children:[U.jsx(No,{children:U.jsxs(Mo,{className:"flex items-center gap-2",children:[U.jsx(Wf,{className:"h-5 w-5 text-neon-cyan"}),"Place Trade"]})}),U.jsx(us,{className:"space-y-4",children:t?U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:"p-3 rounded-lg bg-background-secondary",children:[U.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Market"}),U.jsx("p",{className:"text-sm font-medium line-clamp-1",children:t.question})]}),U.jsxs("div",{className:"space-y-2",children:[U.jsx("label",{className:"text-sm font-medium text-white/80",children:"Side"}),U.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[U.jsxs("button",{onClick:()=>s("yes"),className:Re("p-4 rounded-lg border transition-all flex flex-col items-center gap-2",r==="yes"?"border-status-success bg-status-success/10":"border-glass-border hover:border-status-success/30"),children:[U.jsx(ir,{className:Re("h-6 w-6",r==="yes"?"text-status-success":"text-white/40")}),U.jsx("span",{className:Re("font-semibold",r==="yes"?"text-status-success":"text-white/60"),children:"YES"}),U.jsx("span",{className:"text-xs text-white/50",children:yf(t.yesPrice)})]}),U.jsxs("button",{onClick:()=>s("no"),className:Re("p-4 rounded-lg border transition-all flex flex-col items-center gap-2",r==="no"?"border-status-error bg-status-error/10":"border-glass-border hover:border-status-error/30"),children:[U.jsx(Lu,{className:Re("h-6 w-6",r==="no"?"text-status-error":"text-white/40")}),U.jsx("span",{className:Re("font-semibold",r==="no"?"text-status-error":"text-white/60"),children:"NO"}),U.jsx("span",{className:"text-xs text-white/50",children:yf(t.noPrice)})]})]})]}),U.jsx(Pc,{label:"Amount (USDC)",type:"number",placeholder:"0.00",value:o,onChange:h=>a(h.target.value),disabled:!n||i}),o&&parseFloat(o)>0&&U.jsxs("div",{className:"p-3 rounded-lg bg-neon-cyan/5 border border-neon-cyan/20 space-y-2",children:[U.jsxs("div",{className:"flex justify-between text-sm",children:[U.jsx("span",{className:"text-white/60",children:"Price"}),U.jsx("span",{className:"font-mono",children:yf(d)})]}),U.jsxs("div",{className:"flex justify-between text-sm",children:[U.jsx("span",{className:"text-white/60",children:"Est. Shares"}),U.jsx("span",{className:"font-mono",children:u.toFixed(2)})]}),U.jsxs("div",{className:"flex justify-between text-sm",children:[U.jsx("span",{className:"text-white/60",children:"Max Payout"}),U.jsxs("span",{className:"font-mono text-status-success",children:["$",u.toFixed(2)]})]})]}),U.jsx(ii,{className:"w-full",variant:"primary",onClick:l,disabled:!n||i||!o||parseFloat(o)<=0,loading:i,children:n?i?"Executing Trade...":`Buy ${r.toUpperCase()} for $${o||"0"}`:"Connect Wallet"})]}):U.jsxs("div",{className:"text-center py-8 text-white/50",children:[U.jsx(ir,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),U.jsx("p",{children:"Select a market to trade"})]})})]})}function Kit({position:n}){const t=n.yesShares>0,e=n.noShares>0,i=n.unrealizedPnl||0,r=i>=0;return U.jsx(De.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},children:U.jsx(gn,{children:U.jsxs("div",{className:"space-y-3",children:[U.jsx("p",{className:"text-sm font-medium line-clamp-1",children:n.marketQuestion||`Market ${n.market.slice(0,8)}...`}),U.jsxs("div",{className:"flex gap-3",children:[t&&U.jsxs("div",{className:"flex-1 p-2 rounded bg-status-success/10",children:[U.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/50 mb-1",children:[U.jsx(ir,{className:"h-3 w-3"}),"YES"]}),U.jsxs("p",{className:"font-mono text-sm text-status-success",children:[n.yesShares.toFixed(2)," shares"]}),n.entryPriceYes&&U.jsxs("p",{className:"text-xs text-white/40",children:["@ ",(n.entryPriceYes*100).toFixed(1),"%"]})]}),e&&U.jsxs("div",{className:"flex-1 p-2 rounded bg-status-error/10",children:[U.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/50 mb-1",children:[U.jsx(Lu,{className:"h-3 w-3"}),"NO"]}),U.jsxs("p",{className:"font-mono text-sm text-status-error",children:[n.noShares.toFixed(2)," shares"]}),n.entryPriceNo&&U.jsxs("p",{className:"text-xs text-white/40",children:["@ ",(n.entryPriceNo*100).toFixed(1),"%"]})]})]}),U.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-glass-border",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(kH,{className:"h-4 w-4 text-white/40"}),U.jsxs("span",{className:"text-xs text-white/50",children:["Invested: ",ms(n.totalInvested||0)]})]}),U.jsxs($s,{variant:r?"success":"error",children:[r?"+":"",ms(i)]})]})]})})})}function Zit(){const{positions:n,isLoading:t}=$u(),e=n.reduce((r,s)=>r+(s.totalInvested||0),0),i=n.reduce((r,s)=>r+(s.unrealizedPnl||0),0);return U.jsxs("div",{className:"space-y-4",children:[U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx(x4,{className:"h-5 w-5 text-neon-purple"}),U.jsx("h3",{className:"font-semibold",children:"Positions"}),U.jsx($s,{variant:"outline",children:n.length})]}),n.length>0&&U.jsxs("div",{className:Re("text-sm font-medium",i>=0?"text-status-success":"text-status-error"),children:[i>=0?"+":"",ms(i)]})]}),t?U.jsx("div",{className:"space-y-3",children:[1,2].map(r=>U.jsx(gn,{className:"animate-pulse",children:U.jsx("div",{className:"h-24 bg-white/5 rounded"})},r))}):n.length===0?U.jsxs(gn,{className:"text-center py-8",children:[U.jsx(x4,{className:"h-12 w-12 mx-auto mb-3 text-white/20"}),U.jsx("p",{className:"text-white/50",children:"No open positions"}),U.jsx("p",{className:"text-xs text-white/30 mt-1",children:"Trade on markets to open positions"})]}):U.jsxs("div",{className:"space-y-3",children:[n.map(r=>U.jsx(Kit,{position:r},r.market)),U.jsx(gn,{className:"bg-neon-purple/5 border-neon-purple/20",children:U.jsxs("div",{className:"flex justify-between text-sm",children:[U.jsx("span",{className:"text-white/60",children:"Total Invested"}),U.jsx("span",{className:"font-mono",children:ms(e)})]})})]})]})}function Qit({trade:n}){const t=n.type==="buy";return U.jsxs(De.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:Re("p-2 rounded",n.side==="yes"?"bg-status-success/10":"bg-status-error/10"),children:n.side==="yes"?U.jsx(ir,{className:"h-4 w-4 text-status-success"}):U.jsx(Lu,{className:"h-4 w-4 text-status-error"})}),U.jsxs("div",{children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx($s,{variant:n.side==="yes"?"success":"error",className:"text-xs",children:n.side.toUpperCase()}),U.jsx("span",{className:"text-xs text-white/40",children:F6(n.timestamp)})]}),U.jsxs("p",{className:"text-sm font-mono mt-0.5",children:[n.shares.toFixed(2)," @ ",(n.price*100).toFixed(1),"%"]})]})]}),U.jsxs("div",{className:"text-right",children:[U.jsxs("p",{className:"font-mono text-sm",children:[t?"-":"+",ms(n.amount)]}),U.jsxs("a",{href:`https://solscan.io/tx/${n.signature}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-neon-cyan hover:underline flex items-center gap-1 justify-end",children:[P6(n.signature,4),U.jsx(MH,{className:"h-3 w-3"})]})]})]})}function bM(){const{trades:n}=$u();return U.jsxs(gn,{children:[U.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[U.jsx(E4,{className:"h-5 w-5 text-white/60"}),U.jsx("h3",{className:"font-semibold",children:"Trade History"}),U.jsx($s,{variant:"outline",children:n.length})]}),n.length===0?U.jsxs("div",{className:"text-center py-8 text-white/50",children:[U.jsx(E4,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),U.jsx("p",{children:"No trades yet"})]}):U.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:n.map(t=>U.jsx(Qit,{trade:t},t.id))})]})}function Yit(){return U.jsxs("div",{className:"space-y-6",children:[U.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[U.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[U.jsx("div",{className:"p-2 rounded-lg bg-status-success/10",children:U.jsx(ir,{className:"h-6 w-6 text-status-success"})}),U.jsx("h1",{className:"text-2xl font-bold",children:"Trading Layer"})]}),U.jsx("p",{className:"text-white/60",children:"Browse and trade on PNP prediction markets"})]}),U.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[U.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-2",children:U.jsx($it,{})}),U.jsxs(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-6",children:[U.jsx(Hit,{}),U.jsx(bM,{})]})]})]})}function Xit(){const{positions:n}=$u(),t=n.reduce((s,o)=>s+(o.totalInvested||0),0),e=n.reduce((s,o)=>s+(o.unrealizedPnl||0),0),i=n.reduce((s,o)=>s+o.yesShares,0),r=n.reduce((s,o)=>s+o.noShares,0);return U.jsxs("div",{className:"space-y-6",children:[U.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[U.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[U.jsx("div",{className:"p-2 rounded-lg bg-neon-purple/10",children:U.jsx(ig,{className:"h-6 w-6 text-neon-purple"})}),U.jsx("h1",{className:"text-2xl font-bold",children:"Positions"})]}),U.jsx("p",{className:"text-white/60",children:"Manage your active positions and view trade history"})]}),U.jsxs(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[U.jsx(gn,{children:U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:"p-2 rounded-lg bg-neon-cyan/10",children:U.jsx(C6,{className:"h-5 w-5 text-neon-cyan"})}),U.jsxs("div",{children:[U.jsx("p",{className:"text-xs text-white/50",children:"Total Invested"}),U.jsx("p",{className:"font-mono font-semibold",children:ms(t)})]})]})}),U.jsx(gn,{children:U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:Re("p-2 rounded-lg",e>=0?"bg-status-success/10":"bg-status-error/10"),children:e>=0?U.jsx(ir,{className:"h-5 w-5 text-status-success"}):U.jsx(Lu,{className:"h-5 w-5 text-status-error"})}),U.jsxs("div",{children:[U.jsx("p",{className:"text-xs text-white/50",children:"Total P&L"}),U.jsxs("p",{className:Re("font-mono font-semibold",e>=0?"text-status-success":"text-status-error"),children:[e>=0?"+":"",ms(e)]})]})]})}),U.jsx(gn,{children:U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:"p-2 rounded-lg bg-status-success/10",children:U.jsx(ir,{className:"h-5 w-5 text-status-success"})}),U.jsxs("div",{children:[U.jsx("p",{className:"text-xs text-white/50",children:"YES Shares"}),U.jsx("p",{className:"font-mono font-semibold",children:i.toFixed(2)})]})]})}),U.jsx(gn,{children:U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:"p-2 rounded-lg bg-status-error/10",children:U.jsx(Lu,{className:"h-5 w-5 text-status-error"})}),U.jsxs("div",{children:[U.jsx("p",{className:"text-xs text-white/50",children:"NO Shares"}),U.jsx("p",{className:"font-mono font-semibold",children:r.toFixed(2)})]})]})})]}),U.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[U.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:U.jsx(Zit,{})}),U.jsx(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:U.jsx(bM,{})})]})]})}function Jit({score:n,level:t,passed:e,isSanctioned:i=!1,isChecked:r=!1}){const s=()=>n<=au?"text-status-success":n<=50?"text-status-warning":"text-status-error",o=()=>n<=au?"green":n<=50?"warning":"danger",a=()=>r?e?U.jsx(GH,{className:"h-8 w-8 text-status-success"}):i?U.jsx(WH,{className:"h-8 w-8 text-status-error"}):U.jsx(zH,{className:"h-8 w-8 text-status-warning"}):U.jsx(Kr,{className:"h-8 w-8 text-white/40"}),l=()=>{switch(t){case"low":return"Low Risk";case"medium":return"Medium Risk";case"high":return"High Risk";case"critical":return"Critical Risk"}},d=()=>{switch(t){case"low":return"success";case"medium":return"warning";case"high":return"error";case"critical":return"error"}};return U.jsx(gn,{className:"text-center",children:U.jsxs(De.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"flex flex-col items-center",children:[U.jsxs("div",{className:"relative mb-4",children:[U.jsx(De.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.4},className:Re("w-24 h-24 rounded-full flex items-center justify-center","bg-background-secondary border-2",r?e?"border-status-success/30":"border-status-error/30":"border-white/10"),children:r?U.jsx("span",{className:Re("text-3xl font-bold",s()),children:n}):U.jsx("span",{className:"text-3xl font-bold text-white/30",children:"?"})}),U.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2",children:a()})]}),U.jsx("div",{className:"space-y-2 mt-4",children:r?U.jsxs(U.Fragment,{children:[U.jsx($s,{variant:d(),children:l()}),U.jsx("p",{className:"text-sm text-white/60",children:e?"Compliant for withdrawal":i?"Address is sanctioned":"Risk score too high"})]}):U.jsx("p",{className:"text-sm text-white/50",children:"Run compliance check to verify"})}),r&&U.jsxs("div",{className:"w-full mt-4",children:[U.jsxs("div",{className:"flex justify-between text-xs text-white/50 mb-1",children:[U.jsx("span",{children:"0"}),U.jsxs("span",{className:"text-neon-cyan",children:["Max: ",au]}),U.jsx("span",{children:"100"})]}),U.jsx(H6,{value:n,variant:o()})]})]})})}function vM(){const{publicKey:n,connected:t}=Nr(),{rangeClient:e}=Yv(),[i,r]=rt.useState({checked:!1,passed:!1,riskScore:0,riskLevel:"low",isSanctioned:!1,hasMaliciousConnections:!1}),[s,o]=rt.useState(!1),a=rt.useCallback(async()=>{if(!t||!n)return{...i,checked:!1,error:"Wallet not connected"};o(!0);try{if(!e)throw new Error("Range client not initialized");const h=await e.getAddressRisk(n.toBase58()),p={checked:!0,passed:h.riskScore<=au&&!h.isSanctioned&&!h.hasMaliciousConnections,riskScore:h.riskScore,riskLevel:f8(h.riskScore),isSanctioned:h.isSanctioned,hasMaliciousConnections:h.hasMaliciousConnections,lastChecked:new Date};return r(p),p.passed?en.success("Compliance check passed"):en.error("Compliance check failed"),p}catch(h){const m=h.message||"Compliance check failed",p={...i,checked:!0,passed:!1,error:m};return r(p),en.error(m),p}finally{o(!1)}},[t,n,e,i]),l=rt.useCallback(async h=>{o(!0);try{if(!e)throw new Error("Range client not initialized");const m=await e.getAddressRisk(h);return{checked:!0,passed:m.riskScore<=au&&!m.isSanctioned&&!m.hasMaliciousConnections,riskScore:m.riskScore,riskLevel:f8(m.riskScore),isSanctioned:m.isSanctioned,hasMaliciousConnections:m.hasMaliciousConnections,lastChecked:new Date}}catch(m){return{checked:!0,passed:!1,riskScore:100,riskLevel:"critical",isSanctioned:!1,hasMaliciousConnections:!1,error:m.message}}finally{o(!1)}},[e]),d=rt.useCallback(h=>{switch(h){case"low":return"text-status-success";case"medium":return"text-status-warning";case"high":return"text-status-error";case"critical":return"text-status-error";default:return"text-white/60"}},[]),u=rt.useCallback(h=>h<=au?"green":h<=50?"warning":"danger",[]);return{status:i,isChecking:s,checkCompliance:a,checkAddress:l,getRiskColor:d,getRiskProgressVariant:u}}function f8(n){return n<=20?"low":n<=50?"medium":n<=80?"high":"critical"}function trt(){const{connected:n,publicKey:t}=Nr(),{status:e,isChecking:i,checkCompliance:r}=vM();return U.jsxs("div",{className:"space-y-4",children:[U.jsxs(gn,{children:[U.jsx(No,{children:U.jsxs(Mo,{className:"flex items-center justify-between",children:[U.jsx("span",{children:"Wallet Compliance"}),e.checked&&U.jsx($s,{variant:e.passed?"success":"error",children:e.passed?"Compliant":"Non-Compliant"})]})}),U.jsx(us,{className:"space-y-4",children:n&&t?U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsx("span",{className:"text-sm text-white/60",children:"Address"}),U.jsx("span",{className:"font-mono text-sm",children:P6(t.toBase58(),8)})]}),e.lastChecked&&U.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsx("span",{className:"text-sm text-white/60",children:"Last Checked"}),U.jsx("span",{className:"text-sm",children:F6(e.lastChecked)})]}),U.jsxs(ii,{className:"w-full",onClick:r,loading:i,children:[U.jsx(UH,{className:Re("h-4 w-4 mr-2",i&&"animate-spin")}),i?"Checking...":"Check Compliance"]})]}):U.jsx("div",{className:"text-center py-8 text-white/50",children:U.jsx("p",{children:"Connect wallet to check compliance"})})})]}),n&&U.jsx(Jit,{score:e.riskScore,level:e.riskLevel,passed:e.passed,isSanctioned:e.isSanctioned,isChecked:e.checked}),e.checked&&U.jsx(gn,{children:U.jsxs(us,{className:"pt-6",children:[U.jsx("h4",{className:"text-sm font-medium mb-4",children:"Compliance Details"}),U.jsxs("div",{className:"space-y-3",children:[U.jsx(Aw,{label:"Risk Score",passed:e.riskScore<=30,value:`${e.riskScore}/100`}),U.jsx(Aw,{label:"Sanctions Check",passed:!e.isSanctioned,value:e.isSanctioned?"Sanctioned":"Clear"}),U.jsx(Aw,{label:"Malicious Connections",passed:!e.hasMaliciousConnections,value:e.hasMaliciousConnections?"Detected":"None"})]}),e.error&&U.jsx("div",{className:"mt-4 p-3 rounded-lg bg-status-error/10 border border-status-error/30",children:U.jsxs("div",{className:"flex items-center gap-2 text-status-error",children:[U.jsx(rg,{className:"h-4 w-4"}),U.jsx("span",{className:"text-sm",children:e.error})]})})]})})]})}function Aw({label:n,passed:t,value:e}){return U.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[U.jsxs("div",{className:"flex items-center gap-2",children:[t?U.jsx(cm,{className:"h-4 w-4 text-status-success"}):U.jsx(U_,{className:"h-4 w-4 text-status-error"}),U.jsx("span",{className:"text-sm text-white/70",children:n})]}),U.jsx("span",{className:Re("text-sm font-medium",t?"text-status-success":"text-status-error"),children:e})]})}function ert(){const{unspentNotes:n,unshieldSol:t,unshieldLoading:e}=gh(),{checkCompliance:i,isChecking:r}=vM(),[s,o]=rt.useState(null),[a,l]=rt.useState(""),[d,u]=rt.useState(1),h=n.find(E=>E.id===s),m=async()=>{(await i()).passed&&u(2)},p=async()=>{if(!s||!a)return;(await t(s,a)).success&&u(3)};return U.jsxs("div",{className:"space-y-6",children:[U.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[U.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[U.jsx("div",{className:"p-2 rounded-lg bg-status-warning/10",children:U.jsx(Dv,{className:"h-6 w-6 text-status-warning"})}),U.jsx("h1",{className:"text-2xl font-bold",children:"Compliant Withdrawal"})]}),U.jsx("p",{className:"text-white/60",children:"Withdraw funds with Range Protocol compliance verification"})]}),U.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"glass-card p-4",children:U.jsx("div",{className:"flex items-center justify-between",children:[{num:1,label:"Compliance Check"},{num:2,label:"Select Note"},{num:3,label:"Withdraw"}].map(({num:E,label:C},v)=>U.jsxs("div",{className:"flex items-center",children:[U.jsx("div",{className:Re("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",d>=E?"bg-neon-cyan text-background":"bg-white/10 text-white/40"),children:d>E?U.jsx(cm,{className:"h-4 w-4"}):E}),U.jsx("span",{className:Re("ml-2 text-sm hidden sm:block",d>=E?"text-white":"text-white/40"),children:C}),v<2&&U.jsx("div",{className:Re("h-px w-8 sm:w-16 mx-4",d>E?"bg-neon-cyan":"bg-white/10")})]},E))})}),U.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[U.jsxs(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[d===1&&U.jsxs(gn,{variant:"glow-cyan",children:[U.jsx(No,{children:U.jsxs(Mo,{className:"flex items-center gap-2",children:[U.jsx(Kr,{className:"h-5 w-5 text-neon-cyan"}),"Step 1: Compliance Verification"]})}),U.jsxs(us,{className:"space-y-4",children:[U.jsx("p",{className:"text-sm text-white/60",children:"Before withdrawing, your wallet must pass compliance checks via Range Protocol. This ensures regulatory compliance."}),U.jsxs("div",{className:"p-3 rounded-lg bg-neon-cyan/5 border border-neon-cyan/20",children:[U.jsx("h4",{className:"text-sm font-medium mb-2",children:"Checks Include:"}),U.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[U.jsx("li",{children:"- Risk score assessment (max score: 30)"}),U.jsx("li",{children:"- OFAC sanctions list check"}),U.jsx("li",{children:"- Malicious address connections"})]})]}),U.jsx(ii,{className:"w-full",variant:"primary",onClick:m,loading:r,children:r?"Checking Compliance...":"Check Compliance"})]})]}),d===2&&U.jsxs(gn,{variant:"glow-purple",children:[U.jsx(No,{children:U.jsx(Mo,{children:"Step 2: Select Deposit Note"})}),U.jsxs(us,{className:"space-y-4",children:[n.length===0?U.jsxs("div",{className:"text-center py-8 text-white/50",children:[U.jsx(rg,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),U.jsx("p",{children:"No unspent notes available"}),U.jsx("p",{className:"text-sm",children:"Shield some SOL first"})]}):U.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:n.map(E=>U.jsx("button",{onClick:()=>o(E.id),className:Re("w-full p-3 rounded-lg border text-left transition-all",s===E.id?"border-neon-purple bg-neon-purple/10":"border-glass-border hover:border-neon-purple/30"),children:U.jsxs("div",{className:"flex justify-between items-center",children:[U.jsxs("span",{className:"font-mono",children:[Cu(E.amount)," ",E.tokenType]}),U.jsx($s,{variant:s===E.id?"secondary":"outline",children:s===E.id?"Selected":"Select"})]})},E.id))}),U.jsx(Pc,{label:"Recipient Address",placeholder:"Enter Solana address...",value:a,onChange:E=>l(E.target.value)}),U.jsx(ii,{className:"w-full",variant:"primary",onClick:p,disabled:!s||!a||e,loading:e,children:e?"Processing Withdrawal...":`Withdraw ${h?Cu(h.amount)+" SOL":""}`})]})]}),d===3&&U.jsx(gn,{variant:"glow-green",children:U.jsxs(us,{className:"text-center py-8",children:[U.jsx(De.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5},children:U.jsx(cm,{className:"h-16 w-16 text-status-success mx-auto mb-4"})}),U.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Withdrawal Complete!"}),U.jsx("p",{className:"text-white/60 mb-6",children:"Your funds have been successfully withdrawn with compliance attestation."}),U.jsx(ii,{onClick:()=>u(1),children:"Start New Withdrawal"})]})})]}),U.jsx(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:U.jsx(trt,{})})]}),U.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-card p-6",children:[U.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Compliant Withdrawals"}),U.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-neon-cyan",children:"Range Protocol Integration"}),U.jsx("p",{className:"text-sm text-white/50",children:"Range Protocol provides real-time risk assessment and compliance verification for Solana wallets. This ensures SPECTRE users can withdraw while maintaining regulatory compliance."})]}),U.jsxs("div",{className:"space-y-2",children:[U.jsx("div",{className:"text-sm font-medium text-neon-purple",children:"On-Chain Attestation"}),U.jsx("p",{className:"text-sm text-white/50",children:"Compliance checks create an on-chain attestation that proves the withdrawal passed all requirements at the time of execution."})]})]})]})]})}function nrt({onMenuClick:n,className:t}){return U.jsx("header",{className:Re("sticky top-0 z-40 w-full border-b border-glass-border bg-background/80 backdrop-blur-xl",t),children:U.jsxs("div",{className:"flex h-16 items-center justify-between px-4 md:px-6",children:[U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsx(ii,{variant:"ghost",size:"icon",className:"md:hidden",onClick:n,children:U.jsx(FH,{className:"h-5 w-5"})}),U.jsxs(Am,{to:"/",className:"flex items-center gap-3 group",children:[U.jsxs("div",{className:"relative",children:[U.jsx(Kr,{className:"h-8 w-8 text-neon-cyan transition-all group-hover:scale-110"}),U.jsx("div",{className:"absolute inset-0 blur-lg bg-neon-cyan/30 group-hover:bg-neon-cyan/50 transition-all"})]}),U.jsxs("div",{className:"hidden sm:block",children:[U.jsx("h1",{className:"text-xl font-bold tracking-tight",children:U.jsx("span",{className:"text-neon-cyan text-glow-cyan",children:"SPECTRE"})}),U.jsx("p",{className:"text-[10px] text-white/40 -mt-1",children:"Confidential Market Maker"})]})]})]}),U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-neon-purple/10 border border-neon-purple/30",children:[U.jsx("div",{className:"w-2 h-2 rounded-full bg-neon-purple animate-pulse"}),U.jsx("span",{className:"text-xs font-medium text-neon-purple",children:"Devnet"})]}),U.jsx(hG,{className:"!h-10"})]})]})})}const irt=[{name:"Dashboard",href:"/",icon:OH},{name:"Shield",href:"/shield",icon:Kr},{name:"Strategy",href:"/strategy",icon:Wc},{name:"Trade",href:"/trade",icon:ir},{name:"Positions",href:"/positions",icon:ig},{name:"Withdraw",href:"/withdraw",icon:Dv}];function h8({open:n=!0,onClose:t}){const e=Ua();return U.jsxs(U.Fragment,{children:[n&&U.jsx("div",{className:"fixed inset-0 z-40 bg-background/80 backdrop-blur-sm md:hidden",onClick:t}),U.jsxs("aside",{className:Re("fixed left-0 top-0 z-50 flex h-full w-64 flex-col border-r border-glass-border bg-background-secondary/95 backdrop-blur-xl transition-transform md:static md:translate-x-0",n?"translate-x-0":"-translate-x-full"),children:[U.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-glass-border px-4 md:hidden",children:[U.jsx("span",{className:"text-lg font-bold text-neon-cyan",children:"SPECTRE"}),U.jsx(ii,{variant:"ghost",size:"icon",onClick:t,children:U.jsx(A6,{className:"h-5 w-5"})})]}),U.jsx("nav",{className:"flex-1 space-y-1 p-4",children:irt.map(i=>{const r=e.pathname===i.href;return U.jsxs(U8,{to:i.href,onClick:t,className:Re("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all",r?"bg-neon-cyan/10 text-neon-cyan border border-neon-cyan/30 shadow-neon-cyan":"text-white/60 hover:bg-white/5 hover:text-white"),children:[U.jsx(i.icon,{className:Re("h-5 w-5",r&&"text-neon-cyan")}),i.name]},i.name)})}),U.jsx("div",{className:"border-t border-glass-border p-4",children:U.jsxs("div",{className:"rounded-lg bg-gradient-to-r from-neon-cyan/10 to-neon-purple/10 p-4 border border-glass-border",children:[U.jsx("h4",{className:"text-sm font-medium text-white",children:"Privacy Sandwich"}),U.jsx("p",{className:"mt-1 text-xs text-white/50",children:"3-layer architecture for confidential trading"}),U.jsxs("div",{className:"mt-3 flex gap-2",children:[U.jsx("div",{className:"h-1 flex-1 rounded bg-neon-cyan/50"}),U.jsx("div",{className:"h-1 flex-1 rounded bg-neon-purple/50"}),U.jsx("div",{className:"h-1 flex-1 rounded bg-status-success/50"})]})]})})]})]})}function rrt(){const[n,t]=rt.useState(!1);return U.jsxs("div",{className:"flex min-h-screen",children:[U.jsx("div",{className:"hidden md:block",children:U.jsx(h8,{})}),n&&U.jsx("div",{className:"md:hidden",children:U.jsx(h8,{open:n,onClose:()=>t(!1)})}),U.jsxs("div",{className:"flex flex-1 flex-col",children:[U.jsx(nrt,{onMenuClick:()=>t(!0)}),U.jsx("main",{className:"flex-1 overflow-auto",children:U.jsx("div",{className:"container mx-auto max-w-7xl p-4 md:p-6 lg:p-8",children:U.jsx(C5,{})})})]})]})}const srt=new MO({defaultOptions:{queries:{staleTime:1e4,gcTime:300*1e3,retry:1}}});function ort(){const n=Hw.Devnet,t=rt.useMemo(()=>pT(n),[n]),e=rt.useMemo(()=>[new yG,new SG],[]);return U.jsx(PO,{client:srt,children:U.jsx(WD,{endpoint:t,children:U.jsx(sG,{wallets:e,autoConnect:!0,children:U.jsxs(dG,{children:[U.jsx(X5,{children:U.jsx("div",{className:"min-h-screen bg-background grid-bg",children:U.jsx(I5,{children:U.jsxs(ba,{element:U.jsx(rrt,{}),children:[U.jsx(ba,{path:"/",element:U.jsx(Pit,{})}),U.jsx(ba,{path:"/shield",element:U.jsx(Dit,{})}),U.jsx(ba,{path:"/strategy",element:U.jsx(Vit,{})}),U.jsx(ba,{path:"/trade",element:U.jsx(Yit,{})}),U.jsx(ba,{path:"/positions",element:U.jsx(Xit,{})}),U.jsx(ba,{path:"/withdraw",element:U.jsx(ert,{})})]})})})}),U.jsx(YG,{theme:"dark",position:"bottom-right",toastOptions:{style:{background:"#12121a",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white"}}})]})})})})}window.Buffer=Oe;EP.createRoot(document.getElementById("root")).render(U.jsx(rt.StrictMode,{children:U.jsx(ort,{})}));export{ke as B,Zt as P,er as S,Ke as T,wu as V,jn as a,go as b,oP as c,Ob as d,Po as g,i1 as p,DF as r};
